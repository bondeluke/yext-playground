import{j as St,B as iy,x as e1,o as Wc,J as c5,z as u5,g as h5,i as f5,W as p5}from"./env-aVgYgaUP.js";import{r as Ge,z as pt,R as m5}from"./index-GsKUmZGr.js";import"./index-Dpe2PwhM.js";import{g as Gs,c as In}from"./commonjsHelpers-DxDlwT5B.js";import{d as yp}from"./index-wlo2zNRg.js";import{r as g5,s as _5,b as y5,e as v5,l as oy,c as x5,d as b5,j as $5,f as w5,_ as t1,a as r1,t as E5,h as T5,u as S5,p as C5,m as A5,o as I5,g as M5}from"./_arrayLikeKeys-pbm8Wg6m.js";const P5=Ge.createContext(null),Hf={didCatch:!1,error:null};class L5 extends Ge.Component{constructor(a){super(a),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Hf}static getDerivedStateFromError(a){return{didCatch:!0,error:a}}resetErrorBoundary(...a){var m,v;const{error:c}=this.state;c!==null&&((v=(m=this.props).onReset)==null||v.call(m,{args:a,reason:"imperative-api"}),this.setState(Hf))}componentDidCatch(a,c){var m,v;(v=(m=this.props).onError)==null||v.call(m,a,c)}componentDidUpdate(a,c){var $,S;const{didCatch:m}=this.state,{resetKeys:v}=this.props;m&&c.error!==null&&R5(a.resetKeys,v)&&((S=($=this.props).onReset)==null||S.call($,{next:v,prev:a.resetKeys,reason:"keys"}),this.setState(Hf))}render(){const{children:a,fallbackRender:c,FallbackComponent:m,fallback:v}=this.props,{didCatch:$,error:S}=this.state;let P=a;if($){const o={error:S,resetErrorBoundary:this.resetErrorBoundary};if(Ge.isValidElement(v))P=v;else if(typeof c=="function")P=c(o);else if(m)P=Ge.createElement(m,o);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return Ge.createElement(P5.Provider,{value:{didCatch:$,error:S,resetErrorBoundary:this.resetErrorBoundary}},P)}}function R5(s=[],a=[]){return s.length!==a.length||s.some((c,m)=>!Object.is(c,a[m]))}const Jg=s=>{const a=()=>{console.error(`Error occured in "${s.name}" scope.`)};return St.jsx(L5,{onError:a,fallback:St.jsx(St.Fragment,{}),children:St.jsx(iy,{name:s.name,children:s.children})})};var sy={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(s){(function(){var a={}.hasOwnProperty;function c(){for(var m=[],v=0;v<arguments.length;v++){var $=arguments[v];if($){var S=typeof $;if(S==="string"||S==="number")m.push($);else if(Array.isArray($)){if($.length){var P=c.apply(null,$);P&&m.push(P)}}else if(S==="object")if($.toString===Object.prototype.toString)for(var o in $)a.call($,o)&&$[o]&&m.push(o);else m.push($.toString())}}return m.join(" ")}s.exports?(c.default=c,s.exports=c):window.classNames=c})()})(sy);var k5=sy.exports;const sd=Gs(k5);var ay={exports:{}},ly={exports:{}};(function(s){(function(){var a=this||self;function c(k,V){function J(){}J.prototype=V.prototype,k.Ca=V.prototype,k.prototype=new J,k.prototype.constructor=k,k.Ia=function(Ee,Ce,Ze){for(var _t=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)_t[bt-2]=arguments[bt];return V.prototype[Ce].apply(Ee,_t)}}function m(k){var V=[];let J=0;for(var Ee in k)V[J++]=k[Ee];return V}function v(k,V){for(this.h=k,this.g={},k=0;k<V.length;k++){var J=V[k];this.g[J.g]=J}}function $(k){return k=m(k.g),k.sort(function(V,J){return V.g-J.g}),k}function S(k,V){switch(this.g=k,this.l=!!V.fa,this.h=V.i,this.s=V.type,this.o=!1,this.h){case I:case N:case Y:case U:case oe:case o:case P:this.o=!0}this.j=V.defaultValue}var P=1,o=2,I=3,N=4,Y=6,U=16,oe=18;function ae(){this.h={},this.j=this.m().g,this.g=this.l=null}ae.prototype.has=function(k){return Ie(this,k.g)},ae.prototype.get=function(k,V){return xe(this,k.g,V)},ae.prototype.set=function(k,V){Lt(this,k.g,V)},ae.prototype.add=function(k,V){Ye(this,k.g,V)};function $e(k,V){for(var J=$(k.m()),Ee=0;Ee<J.length;Ee++){var Ce=J[Ee],Ze=Ce.g;if(Ie(V,Ze)){k.g&&delete k.g[Ce.g];var _t=Ce.h==11||Ce.h==10;if(Ce.l){Ce=We(V,Ze);for(var bt=0;bt<Ce.length;bt++)Ye(k,Ze,_t?Ce[bt].clone():Ce[bt])}else Ce=Be(V,Ze),_t?(_t=Be(k,Ze))?$e(_t,Ce):Lt(k,Ze,Ce.clone()):Lt(k,Ze,Ce)}}}ae.prototype.clone=function(){var k=new this.constructor;return k!=this&&(k.h={},k.g&&(k.g={}),$e(k,this)),k};function Ie(k,V){return k.h[V]!=null}function Be(k,V){var J=k.h[V];if(J==null)return null;if(k.l){if(!(V in k.g)){var Ee=k.l,Ce=k.j[V];if(J!=null)if(Ce.l){for(var Ze=[],_t=0;_t<J.length;_t++)Ze[_t]=Ee.h(Ce,J[_t]);J=Ze}else J=Ee.h(Ce,J);return k.g[V]=J}return k.g[V]}return J}function xe(k,V,J){var Ee=Be(k,V);return k.j[V].l?Ee[J||0]:Ee}function Je(k,V){if(Ie(k,V))k=xe(k,V,void 0);else e:{if(k=k.j[V],k.j===void 0)if(V=k.s,V===Boolean)k.j=!1;else if(V===Number)k.j=0;else if(V===String)k.j=k.o?"0":"";else{k=new V;break e}k=k.j}return k}function We(k,V){return Be(k,V)||[]}function ht(k,V){return k.j[V].l?Ie(k,V)?k.h[V].length:0:Ie(k,V)?1:0}function Lt(k,V,J){k.h[V]=J,k.g&&(k.g[V]=J)}function Ye(k,V,J){k.h[V]||(k.h[V]=[]),k.h[V].push(J),k.g&&delete k.g[V]}function ft(k,V){var J=[],Ee;for(Ee in V)Ee!=0&&J.push(new S(Ee,V[Ee]));return new v(k,J)}function gt(){}gt.prototype.g=function(k){throw new k.h,Error("Unimplemented")},gt.prototype.h=function(k,V){if(k.h==11||k.h==10)return V instanceof ae?V:this.g(k.s.prototype.m(),V);if(k.h==14)return typeof V=="string"&&ve.test(V)&&(k=Number(V),0<k)?k:V;if(!k.o)return V;if(k=k.s,k===String){if(typeof V=="number")return String(V)}else if(k===Number&&typeof V=="string"&&(V==="Infinity"||V==="-Infinity"||V==="NaN"||ve.test(V)))return Number(V);return V};var ve=/^-?[0-9]+$/;function Ke(){}c(Ke,gt),Ke.prototype.g=function(k,V){return k=new k.h,k.l=this,k.h=V,k.g={},k};function Ct(){}c(Ct,Ke),Ct.prototype.h=function(k,V){return k.h==8?!!V:gt.prototype.h.apply(this,arguments)},Ct.prototype.g=function(k,V){return Ct.Ca.g.call(this,k,V)};function tt(k,V){k!=null&&this.g.apply(this,arguments)}tt.prototype.h="",tt.prototype.set=function(k){this.h=""+k},tt.prototype.g=function(k,V,J){if(this.h+=String(k),V!=null)for(let Ee=1;Ee<arguments.length;Ee++)this.h+=arguments[Ee];return this};function _e(k){k.h=""}tt.prototype.toString=function(){return this.h};function je(){ae.call(this)}c(je,ae);var It=null;function Tt(){ae.call(this)}c(Tt,ae);var Wt=null;function ut(){ae.call(this)}c(ut,ae);var Br=null;ut.prototype.ha=function(){return xe(this,10)},je.prototype.m=function(){var k=It;return k||(It=k=ft(je,{0:{name:"NumberFormat",ma:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,i:9,type:String},2:{name:"format",required:!0,i:9,type:String},3:{name:"leading_digits_pattern",fa:!0,i:9,type:String},4:{name:"national_prefix_formatting_rule",i:9,type:String},6:{name:"national_prefix_optional_when_formatting",i:8,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",i:9,type:String}})),k},je.m=je.prototype.m,Tt.prototype.m=function(){var k=Wt;return k||(Wt=k=ft(Tt,{0:{name:"PhoneNumberDesc",ma:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",i:9,type:String},9:{name:"possible_length",fa:!0,i:5,type:Number},10:{name:"possible_length_local_only",fa:!0,i:5,type:Number},6:{name:"example_number",i:9,type:String}})),k},Tt.m=Tt.prototype.m,ut.prototype.m=function(){var k=Br;return k||(Br=k=ft(ut,{0:{name:"PhoneMetadata",ma:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",i:11,type:Tt},2:{name:"fixed_line",i:11,type:Tt},3:{name:"mobile",i:11,type:Tt},4:{name:"toll_free",i:11,type:Tt},5:{name:"premium_rate",i:11,type:Tt},6:{name:"shared_cost",i:11,type:Tt},7:{name:"personal_number",i:11,type:Tt},8:{name:"voip",i:11,type:Tt},21:{name:"pager",i:11,type:Tt},25:{name:"uan",i:11,type:Tt},27:{name:"emergency",i:11,type:Tt},28:{name:"voicemail",i:11,type:Tt},29:{name:"short_code",i:11,type:Tt},30:{name:"standard_rate",i:11,type:Tt},31:{name:"carrier_specific",i:11,type:Tt},33:{name:"sms_services",i:11,type:Tt},24:{name:"no_international_dialling",i:11,type:Tt},9:{name:"id",required:!0,i:9,type:String},10:{name:"country_code",i:5,type:Number},11:{name:"international_prefix",i:9,type:String},17:{name:"preferred_international_prefix",i:9,type:String},12:{name:"national_prefix",i:9,type:String},13:{name:"preferred_extn_prefix",i:9,type:String},15:{name:"national_prefix_for_parsing",i:9,type:String},16:{name:"national_prefix_transform_rule",i:9,type:String},18:{name:"same_mobile_and_fixed_line_pattern",i:8,defaultValue:!1,type:Boolean},19:{name:"number_format",fa:!0,i:11,type:je},20:{name:"intl_number_format",fa:!0,i:11,type:je},22:{name:"main_country_for_code",i:8,defaultValue:!1,type:Boolean},23:{name:"leading_digits",i:9,type:String},26:{name:"leading_zero_possible",i:8,defaultValue:!1,type:Boolean}})),k},ut.m=ut.prototype.m;function Qt(){ae.call(this)}c(Qt,ae);var Tr=null;Qt.prototype.ha=function(){return xe(this,1)};var bn={Ha:0,Ga:1,Fa:5,Ea:10,Da:20};Qt.prototype.m=function(){var k=Tr;return k||(Tr=k=ft(Qt,{0:{name:"PhoneNumber",ma:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,i:5,type:Number},2:{name:"national_number",required:!0,i:4,type:Number},3:{name:"extension",i:9,type:String},4:{name:"italian_leading_zero",i:8,type:Boolean},8:{name:"number_of_leading_zeros",i:5,defaultValue:1,type:Number},5:{name:"raw_input",i:9,type:String},6:{name:"country_code_source",i:14,defaultValue:0,type:bn},7:{name:"preferred_domestic_carrier_code",i:9,type:String}})),k},Qt.ctor=Qt,Qt.ctor.m=Qt.prototype.m;var er={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},$n={AC:[,[,,"(?:[01589]\\d|[46])\\d{4}",,,,,,,[5,6]],[,,"6[2-467]\\d{3}",,,,"62889",,,[5]],[,,"4\\d{4}",,,,"40123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AC",247,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:0[1-9]|[1589]\\d)\\d{4}",,,,"542011",,,[6]],,,[,,,,,,,,,[-1]]],AD:[,[,,"(?:1|6\\d)\\d{7}|[135-9]\\d{5}",,,,,,,[6,8,9]],[,,"[78]\\d{5}",,,,"712345",,,[6]],[,,"690\\d{6}|[356]\\d{5}",,,,"312345",,,[6,9]],[,,"180[02]\\d{4}",,,,"18001234",,,[8]],[,,"[19]\\d{5}",,,,"912345",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["1"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,"1800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AE:[,[,,"(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"[2-4679][2-8]\\d{6}",,,,"22345678",,,[8],[7]],[,,"5[024-68]\\d{7}",,,,"501234567",,,[9]],[,,"400\\d{6}|800\\d{2,9}",,,,"800123456"],[,,"900[02]\\d{5}",,,,"900234567",,,[9]],[,,"700[05]\\d{5}",,,,"700012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AE",971,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],[,"(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"600[25]\\d{5}",,,,"600212345",,,[9]],,,[,,,,,,,,,[-1]]],AF:[,[,,"[2-7]\\d{8}",,,,,,,[9],[7]],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}",,,,"234567890",,,,[7]],[,,"7\\d{8}",,,,"701234567",,,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AF",93,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AG:[,[,,"(?:268|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",,,,"2684601234",,,,[7]],[,,"268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}",,,,"2684641234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"26848[01]\\d{4}",,,,"2684801234",,,,[7]],"AG",1,"011","1",,,"1|([457]\\d{6})$","268$1",,,,,[,,"26840[69]\\d{4}",,,,"2684061234",,,,[7]],,"268",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AI:[,[,,"(?:264|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"264(?:292|4(?:6[12]|9[78]))\\d{4}",,,,"2644612345",,,,[7]],[,,"264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",,,,"2642351234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AI",1,"011","1",,,"1|([2457]\\d{6})$","264$1",,,,,[,,"264724\\d{4}",,,,"2647241234",,,,[7]],,"264",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AL:[,[,,"(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",,,,,,,[6,7,8,9],[5]],[,,"4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",,,,"22345678",,,[8],[5,6,7]],[,,"6(?:[78][2-9]|9\\d)\\d{6}",,,,"672123456",,,[9]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"900[1-9]\\d\\d",,,,"900123",,,[6]],[,,"808[1-9]\\d\\d",,,,"808123",,,[6]],[,,"700[2-9]\\d{4}",,,,"70021234",,,[8]],[,,,,,,,,,[-1]],"AL",355,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AM:[,[,,"(?:[1-489]\\d|55|60|77)\\d{6}",,,,,,,[8],[5,6]],[,,"(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",,,,"10123456",,,,[5,6]],[,,"(?:33|4[1349]|55|77|88|9[13-9])\\d{6}",,,,"77123456"],[,,"800\\d{5}",,,,"80012345"],[,,"90[016]\\d{5}",,,,"90012345"],[,,"80[1-4]\\d{5}",,,,"80112345"],[,,,,,,,,,[-1]],[,,"60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[01])\\d{4}",,,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],[,"(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AO:[,[,,"[29]\\d{8}",,,,,,,[9]],[,,"2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}",,,,"222123456"],[,,"9[1-59]\\d{7}",,,,"923123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AR:[,[,,"(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",,,,,,,[10,11],[6,7,8]],[,,"3888[013-9]\\d{5}|(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"1123456789",,,[10],[6,7,8]],[,,"93888[013-9]\\d{5}|9(?:29(?:54|66)|3(?:777|865))[2-8]\\d{5}|93(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|302|657|920)|3(?:4(?:8[27]|92)|541|755|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|32[03]|477|9(?:42|83))|3(?:329|4(?:[47]6|62|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-7]|[235][4-6]|84)|5(?:1[2-8]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:[03][45]|[17][2-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"91123456789",,,,[6,7,8]],[,,"800\\d{7,8}",,,,"8001234567"],[,,"60[04579]\\d{7}",,,,"6001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",,,[[,"(\\d{3})","$1",["0|1(?:0[0-35-7]|1[02-5]|2[015]|3[47]|4[478])|911"]],[,"(\\d{2})(\\d{4})","$1-$2",["[1-9]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[1-8]"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1"],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1"]],[[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"]],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3-$4",["91"]],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9"]]],[,,,,,,,,,[-1]],,,[,,"810\\d{7}",,,,,,,[10]],[,,"810\\d{7}",,,,"8101234567",,,[10]],,,[,,,,,,,,,[-1]]],AS:[,[,,"(?:[58]\\d\\d|684|900)\\d{7}",,,,,,,[10],[7]],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",,,,"6846221234",,,,[7]],[,,"684(?:2(?:48|5[2468]|72)|7(?:3[13]|70|82))\\d{4}",,,,"6847331234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AS",1,"011","1",,,"1|([267]\\d{6})$","684$1",,,,,[,,,,,,,,,[-1]],,"684",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AT:[,[,,"1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",,,,,,,[4,5,6,7,8,9,10,11,12,13],[3]],[,,"1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",,,,"1234567890",,,,[3]],[,,"6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",,,,"664123456",,,[7,8,9,10,11,12,13]],[,,"800\\d{6,10}",,,,"800123456",,,[9,10,11,12,13]],[,,"(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}",,,,"900123456",,,[9,10,11,12,13]],[,,"8(?:10|2[018])\\d{6,10}|828\\d{5}",,,,"810123456",,,[8,9,10,11,12,13]],[,,,,,,,,,[-1]],[,,"5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",,,,"780123456",,,[5,6,7,8,9,10,11,12,13]],"AT",43,"00","0",,,"0",,,,[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AU:[,[,,"1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",,,,,,,[5,6,7,8,9,10,12]],[,,"(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",,,,"212345678",,,[9],[8]],[,,"4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"AU",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|(183[12])",,"0011",,[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["13"]],[,"(\\d{3})(\\d{3})","$1 $2",["19"]],[,"(\\d{3})(\\d{4})","$1 $2",["180","1802"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["19"]],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["130"]]],[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[,,"163\\d{2,6}",,,,"1631234",,,[5,6,7,8,9]],1,,[,,"1(?:3(?:00\\d{5}|45[0-4])|802)\\d{3}|1[38]00\\d{6}|13\\d{4}",,,,,,,[6,7,8,10,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AW:[,[,,"(?:[25-79]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"5(?:2\\d|8[1-9])\\d{4}",,,,"5212345"],[,,"(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",,,,"5601234"],[,,"800\\d{4}",,,,"8001234"],[,,"900\\d{4}",,,,"9001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:28\\d|501)\\d{4}",,,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AX:[,[,,"2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"18[1-8]\\d{3,6}",,,,"181234567",,,[6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AX",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,,,[,,,,,,,,,[-1]],,"18",[,,,,,,,,,[-1]],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],AZ:[,[,,"365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",,,,,,,[9],[7]],[,,"(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}",,,,"123123456",,,,[7]],[,,"36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}",,,,"401234567"],[,,"88\\d{7}",,,,"881234567"],[,,"900200\\d{3}",,,,"900200123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[1-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BA:[,[,,"6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",,,,,,,[8,9],[6]],[,,"(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",,,,"30212345",,,[8],[6]],[,,"6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}",,,,"61123456"],[,,"8[08]\\d{6}",,,,"80123456",,,[8]],[,,"9[0246]\\d{6}",,,,"90123456",,,[8]],[,,"8[12]\\d{6}",,,,"82123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BA",387,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",,,,"70341234",,,[8]],,,[,,,,,,,,,[-1]]],BB:[,[,,"(?:246|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",,,,"2464123456",,,,[7]],[,,"246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}",,,,"2462501234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"(?:246976|900[2-9]\\d\\d)\\d{4}",,,,"9002123456",,,,[7]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"24631\\d{5}",,,,"2463101234",,,,[7]],"BB",1,"011","1",,,"1|([2-9]\\d{6})$","246$1",,,,,[,,,,,,,,,[-1]],,"246",[,,,,,,,,,[-1]],[,,"246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}",,,,"2464301234",,,,[7]],,,[,,,,,,,,,[-1]]],BD:[,[,,"[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",,,,,,,[6,7,8,9,10]],[,,"(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:222|[45]\\d)\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",,,,"27111234"],[,,"(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",,,,"1812345678",,,[10]],[,,"80[03]\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"96(?:0[469]|1[0-47]|3[389]|6[69]|7[78])\\d{6}",,,,"9604123456",,,[10]],"BD",880,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],[,"(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],[,"(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BE:[,[,,"4\\d{8}|[1-9]\\d{7}",,,,,,,[8,9]],[,,"80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",,,,"12345678",,,[8]],[,,"4[5-9]\\d{7}",,,,"470123456",,,[9]],[,,"800[1-9]\\d{4}",,,,"80012345",,,[8]],[,,"(?:70(?:2[0-57]|3[04-7]|44|69|7[0579])|90(?:0[0-8]|1[36]|2[0-3568]|3[013-689]|[47][2-68]|5[1-68]|6[0-378]|9[34679]))\\d{4}",,,,"90012345",,,[8]],[,,"7879\\d{4}",,,,"78791234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BE",32,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"78(?:0[57]|1[0458]|2[25]|3[15-8]|48|[56]0|7[078]|9\\d)\\d{4}",,,,"78102345",,,[8]],,,[,,,,,,,,,[-1]]],BF:[,[,,"[025-7]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",,,,"20491234"],[,,"(?:0[125-7]|5[1-8]|[67]\\d)\\d{6}",,,,"70123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BG:[,[,,"[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",,,,,,,[6,7,8,9],[4,5]],[,,"2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",,,,"2123456",,,[6,7,8],[4,5]],[,,"(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}",,,,"43012345",,,[8,9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,"700\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BG",359,"00","0",,,"0",,,,[[,"(\\d{6})","$1",["1"]],[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BH:[,[,,"[136-9]\\d{7}",,,,,,,[8]],[,,"(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|7[7-9]|88)|9[69][69])|7(?:1(?:11|78)|7\\d\\d))\\d{4}",,,,"17001234"],[,,"(?:3(?:[1-79]\\d|8[0-47-9])\\d|6(?:3(?:00|33|6[16])|6(?:3[03-9]|[69]\\d|7[0-6])))\\d{4}",,,,"36001234"],[,,"80\\d{6}",,,,"80123456"],[,,"(?:87|9[014578])\\d{6}",,,,"90123456"],[,,"84\\d{6}",,,,"84123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BI:[,[,,"(?:[267]\\d|31)\\d{6}",,,,,,,[8]],[,,"(?:22|31)\\d{6}",,,,"22201234"],[,,"(?:29|6[1257-9]|7[125-9])\\d{6}",,,,"79561234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BJ:[,[,,"(?:[25689]\\d|40)\\d{6}",,,,,,,[8]],[,,"2(?:02|1[037]|2[45]|3[68])\\d{5}",,,,"20211234"],[,,"(?:40|5[1-8]|6\\d|9[013-9])\\d{6}",,,,"90011234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"857[58]\\d{4}",,,,"85751234"],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"81\\d{6}",,,,"81123456"],,,[,,,,,,,,,[-1]]],BL:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:2[7-9]|5[12]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"BL",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BM:[,[,,"(?:441|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}",,,,"4414123456",,,,[7]],[,,"441(?:[2378]\\d|5[0-39])\\d{5}",,,,"4413701234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BM",1,"011","1",,,"1|([2-8]\\d{6})$","441$1",,,,,[,,,,,,,,,[-1]],,"441",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BN:[,[,,"[2-578]\\d{6}",,,,,,,[7]],[,,"22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}",,,,"2345678"],[,,"(?:22[89]|[78]\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[34]\\d{5}",,,,"5345678"],"BN",673,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BO:[,[,,"(?:[2-467]\\d\\d|8001)\\d{5}",,,,,,,[8,9],[7]],[,,"(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",,,,"22123456",,,[8],[7]],[,,"[67]\\d{7}",,,,"71234567",,,[8]],[,,"8001[07]\\d{4}",,,,"800171234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BO",591,"00(?:1\\d)?","0",,,"0(1\\d)?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[23]|4[46]"],,"0$CC $1"],[,"(\\d{8})","$1",["[67]"],,"0$CC $1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"],,"0$CC $1"]],,[,,,,,,,,,[-1]],,,[,,"8001[07]\\d{4}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BQ:[,[,,"(?:[34]1|7\\d)\\d{5}",,,,,,,[7]],[,,"(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}",,,,"7151234"],[,,"(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",,,,"3181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BQ",599,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"[347]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BR:[,[,,"(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-24679]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",,,,,,,[8,9,10,11]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",,,,"1123456789",,,[10],[8]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",,,,"11961234567",,,[10,11],[8,9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"300\\d{6}|[59]00\\d{6,7}",,,,"300123456",,,[9,10]],[,,"(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370))\\d{4}|300\\d{5}",,,,"40041234",,,[8,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BR",55,"00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","0",,,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",,,[[,"(\\d{3,6})","$1",["1(?:1[25-8]|2[357-9]|3[02-68]|4[12568]|5|6[0-8]|8[015]|9[0-47-9])|321|610"]],[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{4})(\\d{4})","$1-$2",["[2-57]","[2357]|4(?:[0-24-9]|3(?:[0-689]|7[1-9]))"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{5})(\\d{4})","$1-$2",["9"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[,,,,,,,,,[-1]],,,[,,"4020\\d{4}|[34]00\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BS:[,[,,"(?:242|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-4]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",,,,"2423456789",,,,[7]],[,,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|[89]9))\\d{4}",,,,"2423591234",,,,[7]],[,,"242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,,[7]],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BS",1,"011","1",,,"1|([3-8]\\d{6})$","242$1",,,,,[,,,,,,,,,[-1]],,"242",[,,,,,,,,,[-1]],[,,"242225\\d{4}",,,,"2422250123"],,,[,,,,,,,,,[-1]]],BT:[,[,,"[17]\\d{7}|[2-8]\\d{6}",,,,,,,[7,8],[6]],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",,,,"2345678",,,[7],[6]],[,,"(?:1[67]|77)\\d{6}",,,,"17123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BT",975,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BW:[,[,,"(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013])|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",,,,"2401234",,,[7]],[,,"(?:321|7(?:[1-7]\\d|8[01]))\\d{5}",,,,"71123456",,,[8]],[,,"(?:0800|800\\d)\\d{6}",,,,"0800012345",,,[10]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"79(?:1(?:[01]\\d|20)|2[0-25-7]\\d)\\d{3}",,,,"79101234",,,[8]],"BW",267,"00",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["90"]],[,"(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BY:[,[,,"(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",,,,"152450911",,,[9],[5,6,7]],[,,"(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",,,,"294911911",,,[9]],[,,"800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}",,,,"8011234567"],[,,"(?:810|902)\\d{7}",,,,"9021234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"249\\d{6}",,,,"249123456",,,[9]],"BY",375,"810","8",,,"0|80?",,"8~10",,[[,"(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],[,"(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,"800\\d{3,7}|(?:8(?:0[13]|10|20\\d)|902)\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BZ:[,[,,"(?:0800\\d|[2-8])\\d{6}",,,,,,,[7,11]],[,,"(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",,,,"2221234",,,[7]],[,,"6[0-35-7]\\d{5}",,,,"6221234",,,[7]],[,,"0800\\d{7}",,,,"08001234123",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CA:[,[,,"(?:[2-8]\\d|90)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|13|39|47|72)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",,,,"5062345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-7]|33|44|66|77|88)|622)[2-9]\\d{6}",,,,"5002345678"],[,,"600[2-9]\\d{6}",,,,"6002012345"],"CA",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CC:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",,,,"891621234",,,[9],[8]],[,,"4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CC",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CD:[,[,,"[189]\\d{8}|[1-68]\\d{6}",,,,,,,[7,9]],[,,"12\\d{7}|[1-6]\\d{6}",,,,"1234567"],[,,"88\\d{5}|(?:8[0-59]|9[017-9])\\d{7}",,,,"991234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CF:[,[,,"(?:[27]\\d{3}|8776)\\d{4}",,,,,,,[8]],[,,"2[12]\\d{6}",,,,"21612345"],[,,"7[02457]\\d{6}",,,,"70012345"],[,,,,,,,,,[-1]],[,,"8776\\d{4}",,,,"87761234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CG:[,[,,"222\\d{6}|(?:0\\d|80)\\d{7}",,,,,,,[9]],[,,"222[1-589]\\d{5}",,,,"222123456"],[,,"026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}",,,,"061234567"],[,,,,,,,,,[-1]],[,,"80(?:0\\d\\d|120)\\d{4}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CG",242,"00",,,,,,,,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CH:[,[,,"8\\d{11}|[2-9]\\d{8}",,,,,,,[9,12]],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",,,,"212345678",,,[9]],[,,"7[35-9]\\d{7}",,,,"781234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[016]\\d{6}",,,,"900123456",,,[9]],[,,"84[0248]\\d{6}",,,,"840123456",,,[9]],[,,"878\\d{6}",,,,"878123456",,,[9]],[,,,,,,,,,[-1]],"CH",41,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],,[,,"74[0248]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"5[18]\\d{7}",,,,"581234567",,,[9]],,,[,,"860\\d{9}",,,,"860123456789",,,[12]]],CI:[,[,,"[02]\\d{9}",,,,,,,[10]],[,,"2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|[23][45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}",,,,"2123456789"],[,,"0704[0-7]\\d{5}|0(?:[15]\\d\\d|7(?:0[0-37-9]|[4-9][7-9]))\\d{6}",,,,"0123456789"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CK:[,[,,"[2-578]\\d{4}",,,,,,,[5]],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}",,,,"21234"],[,,"[578]\\d{4}",,,,"71234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CL:[,[,,"12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",,,,,,,[9,10,11]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[034]\\d|1[0-35-9]|2[1-9]|5[0-2])|600)|6469)|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[034]\\d|1[0-35-9]|2[1-9]|5[0-2])|600)|6469)|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",,,,"221234567",,,[9]],[,,"(?:123|8)00\\d{6}",,,,"800123456",,,[9,11]],[,,,,,,,,,[-1]],[,,"600\\d{7,8}",,,,"6001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,"44\\d{7}",,,,"441234567",,,[9]],"CL",56,"(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",,,,,,,1,[[,"(\\d{4})","$1",["1(?:[03-589]|21)|[29]0|78"]],[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[,,,,,,,,,[-1]],,,[,,"600\\d{7,8}",,,,,,,[10,11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CM:[,[,,"[26]\\d{8}|88\\d{6,7}",,,,,,,[8,9]],[,,"2(?:22|33)\\d{6}",,,,"222123456",,,[9]],[,,"(?:24[23]|6[5-9]\\d)\\d{6}",,,,"671234567",,,[9]],[,,"88\\d{6,7}",,,,"88012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CM",237,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CN:[,[,,"1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",,,,,,,[7,8,9,10,11,12],[5,6]],[,,"(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",,,,"1012345678",,,[7,8,9,10,11],[5,6]],[,,"1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|5[0-35-9]|6[25-7]|7[0-35-8]|9[0135-9])\\d{8}",,,,"13123456789",,,[11]],[,,"(?:(?:10|21)8|8)00\\d{7}",,,,"8001234567",,,[10,12]],[,,"16[08]\\d{5}",,,,"16812345",,,[8]],[,,"400\\d{7}|950\\d{7,8}|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",,,,"4001234567",,,[7,8,9,10,11],[5,6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CN",86,"00|1(?:[12]\\d|79)\\d\\d00","0",,,"0|(1(?:[12]\\d|79)\\d\\d)",,"00",,[[,"(\\d{5,6})","$1",["96"]],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{4})(\\d{4})","$1 $2",["16[08]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","26|3(?:[0268]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9])|(?:34|85[23])[0-8]|(?:1|58)[1-9]|(?:63|95)[06-9]|(?:33|85[23]9)[0-46-9]|(?:10|2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[0-8]|9[0-47-9])","26|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23](?:[02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:1|58|85[23]10)[1-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"(?:(?:10|21)8|[48])00\\d{7}|950\\d{7,8}",,,,,,,[10,11,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CO:[,[,,"(?:(?:1\\d|[36])\\d{3}|9101)\\d{6}|[124-8]\\d{7}",,,,,,,[8,10,11],[7]],[,,"60[124-8][2-9]\\d{6}|[124-8][2-9]\\d{6}",,,,"12345678",,,[8,10],[7]],[,,"3333(?:0(?:0\\d|1[0-5])|[4-9]\\d\\d)\\d{3}|(?:3(?:24[1-9]|3(?:00|3[0-24-9]))|9101)\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",,,,"3211234567",,,[10]],[,,"1800\\d{7}",,,,"18001234567",,,[11]],[,,"19(?:0[01]|4[78])\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:[14]4|56))?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[146][2-9]|[2578]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],[,"(\\d{3})(\\d{7})","$1 $2",["[39]"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1"]],[[,"(\\d)(\\d{7})","$1 $2",["[146][2-9]|[2578]"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],[,"(\\d{3})(\\d{7})","$1 $2",["[39]"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CR:[,[,,"(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",,,,,,,[8,10]],[,,"210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",,,,"22123456",,,[8]],[,,"(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",,,,"83123456",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"90[059]\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210[0-6]|4\\d{3}|5100)\\d{4}",,,,"40001234",,,[8]],"CR",506,"00",,,,"(19(?:0[0-2468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CU:[,[,,"[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",,,,,,,[6,7,8,10],[4,5]],[,,"(?:3[23]|48)\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",,,,"71234567",,,,[4,5]],[,,"5\\d{7}",,,,"51234567",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,"807\\d{7}",,,,"8071234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CU",53,"119","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["5"],"0$1"],[,"(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CV:[,[,,"(?:[2-59]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}",,,,"2211234"],[,,"(?:36|5[1-389]|9\\d)\\d{5}",,,,"9911234"],[,,"800\\d{4}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[3-5]|4[356])\\d{5}",,,,"3401234"],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CW:[,[,,"(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",,,,,,,[7,8]],[,,"9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",,,,"94351234"],[,,"953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}",,,,"95181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"60[0-2]\\d{4}",,,,"6001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[3467]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],,[,,"955\\d{5}",,,,"95581234",,,[8]],1,"[69]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CX:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",,,,"891641234",,,[9],[8]],[,,"4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[06-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CX",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"0|([59]\\d{7})$","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CY:[,[,,"(?:[279]\\d|[58]0)\\d{6}",,,,,,,[8]],[,,"2[2-6]\\d{6}",,,,"22345678"],[,,"9[4-79]\\d{6}",,,,"96123456"],[,,"800\\d{5}",,,,"80001234"],[,,"90[09]\\d{5}",,,,"90012345"],[,,"80[1-9]\\d{5}",,,,"80112345"],[,,"700\\d{5}",,,,"70012345"],[,,,,,,,,,[-1]],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:50|77)\\d{6}",,,,"77123456"],,,[,,,,,,,,,[-1]]],CZ:[,[,,"(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",,,,,,,[9,10,11,12]],[,,"(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",,,,"212345678",,,[9]],[,,"(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}",,,,"601123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:0[05689]|76)\\d{6}",,,,"900123456",,,[9]],[,,"8[134]\\d{7}",,,,"811234567",,,[9]],[,,"70[01]\\d{6}",,,,"700123456",,,[9]],[,,"9[17]0\\d{6}",,,,"910123456",,,[9]],"CZ",420,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"9(?:5\\d|7[2-4])\\d{6}",,,,"972123456",,,[9]],,,[,,"9(?:3\\d{9}|6\\d{7,10})",,,,"93123456789"]],DE:[,[,,"[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:1\\d|2[02-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[05]\\d|[23]1|[46][1-8])\\d{1,9}",,,,,,,[4,5,6,7,8,9,10,11,12,13,14,15],[2,3]],[,,"32\\d{9,11}|49[2-6]\\d{10}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",,,,"30123456",,,[5,6,7,8,9,10,11,12,13,14,15],[2,3,4]],[,,"15[0-25-9]\\d{8}|1(?:6[023]|7\\d)\\d{7,8}",,,,"15123456789",,,[10,11]],[,,"800\\d{7,12}",,,,"8001234567890",,,[10,11,12,13,14,15]],[,,"(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",,,,"9001234567",,,[10,11]],[,,"180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",,,,"18012345",,,[7,8,9,10,11,12,13,14]],[,,"700\\d{8}",,,,"70012345678",,,[11]],[,,,,,,,,,[-1]],"DE",49,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],,[,,"16(?:4\\d{1,10}|[89]\\d{1,11})",,,,"16412345",,,[4,5,6,7,8,9,10,11,12,13,14]],,,[,,,,,,,,,[-1]],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})",,,,"18500123456",,,[8,9,10,11,12,13,14]],,,[,,"1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",,,,"177991234567",,,[12,13]]],DJ:[,[,,"(?:2\\d|77)\\d{6}",,,,,,,[8]],[,,"2(?:1[2-5]|7[45])\\d{5}",,,,"21360003"],[,,"77\\d{6}",,,,"77831001"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DK:[,[,,"[2-9]\\d{7}",,,,,,,[8]],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}",,,,"32123456"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DK",45,"00",,,,,,,1,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DM:[,[,,"(?:[58]\\d\\d|767|900)\\d{7}",,,,,,,[10],[7]],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}",,,,"7674201234",,,,[7]],[,,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}",,,,"7672251234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DM",1,"011","1",,,"1|([2-7]\\d{6})$","767$1",,,,,[,,,,,,,,,[-1]],,"767",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DO:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",,,,"8092345678",,,,[7]],[,,"8[024]9[2-9]\\d{6}",,,,"8092345678",,,,[7]],[,,"8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DO",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"8001|8[024]9",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DZ:[,[,,"(?:[1-4]|[5-79]\\d|80)\\d{7}",,,,,,,[8,9]],[,,"9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}",,,,"12345678"],[,,"(?:5(?:4[0-29]|5\\d|6[0-2])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",,,,"551234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"80[3-689]1\\d{5}",,,,"808123456",,,[9]],[,,"80[12]1\\d{5}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,"98[23]\\d{6}",,,,"983123456",,,[9]],"DZ",213,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EC:[,[,,"1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",,,,,,,[8,9,10,11],[7]],[,,"[2-7][2-7]\\d{6}",,,,"22123456",,,[8],[7]],[,,"964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",,,,"991234567",,,[9]],[,,"1800\\d{7}|1[78]00\\d{6}",,,,"18001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[2-7]890\\d{4}",,,,"28901234",,,[8]],"EC",593,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-7]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EE:[,[,,"8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",,,,"3212345",,,[7]],[,,"(?:5\\d{5}|8(?:1(?:0(?:000|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:23|[3-79]\\d)\\d)\\d)|2(?:0(?:000|(?:19|[2-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9])\\d|7(?:[3679]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",,,,"51234567",,,[7,8]],[,,"800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}",,,,"80012345"],[,,"(?:40\\d\\d|900)\\d{4}",,,,"9001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"70[0-2]\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],"EE",372,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,"800[2-9]\\d{3}",,,,,,,[7]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EG:[,[,,"[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",,,,"234567890",,,[8,9],[6,7]],[,,"1[0-25]\\d{8}",,,,"1001234567",,,[10]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EH:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"528[89]\\d{5}",,,,"528812345"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|6[0-367]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"EH",212,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"528[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ER:[,[,,"[178]\\d{6}",,,,,,,[7],[6]],[,,"(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}",,,,"8370362",,,,[6]],[,,"(?:17[1-3]|7\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ES:[,[,,"[5-9]\\d{8}",,,,,,,[9]],[,,"96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",,,,"810123456"],[,,"(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}",,,,"612345678"],[,,"[89]00\\d{6}",,,,"800123456"],[,,"80[367]\\d{6}",,,,"803123456"],[,,"90[12]\\d{6}",,,,"901123456"],[,,"70\\d{7}",,,,"701234567"],[,,,,,,,,,[-1]],"ES",34,"00",,,,,,,,[[,"(\\d{4})","$1",["905"]],[,"(\\d{6})","$1",["[79]9"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"51\\d{7}",,,,"511234567"],,,[,,,,,,,,,[-1]]],ET:[,[,,"(?:11|[2-59]\\d)\\d{7}",,,,,,,[9],[7]],[,,"11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[78]|2[69]|39|4[5-7]|5[1-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",,,,"111112345",,,,[7]],[,,"9\\d{8}",,,,"911234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ET",251,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-59]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FI:[,[,,"[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"(?:1[3-79][1-8]|[235689][1-8]\\d)\\d{2,6}",,,,"131234567",,,[5,6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FI",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,[[,"(\\d{5})","$1",["75[12]"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{6})","$1",["11"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[[,"(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],[,,,,,,,,,[-1]],1,"1[03-79]|[2-9]",[,,"20(?:2[023]|9[89])\\d{1,6}|(?:60[12]\\d|7099)\\d{4,5}|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:[1-3]00|7(?:0[1-5]\\d\\d|5[03-9]))\\d{3,7}"],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],FJ:[,[,,"45\\d{5}|(?:0800\\d|[235-9])\\d{6}",,,,,,,[7,11]],[,,"603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",,,,"3212345",,,[7]],[,,"(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",,,,"7012345",,,[7]],[,,"0800\\d{7}",,,,"08001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FK:[,[,,"[2-7]\\d{4}",,,,,,,[5]],[,,"[2-47]\\d{4}",,,,"31234"],[,,"[56]\\d{4}",,,,"51234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FK",500,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FM:[,[,,"(?:[39]\\d\\d|820)\\d{4}",,,,,,,[7]],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",,,,"3201234"],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",,,,"3501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[389]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FO:[,[,,"[2-9]\\d{5}",,,,,,,[6]],[,,"(?:20|[34]\\d|8[19])\\d{4}",,,,"201234"],[,,"(?:[27][1-9]|5\\d|91)\\d{4}",,,,"211234"],[,,"80[257-9]\\d{3}",,,,"802123"],[,,"90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d",,,,"901123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:6[0-36]|88)\\d{4}",,,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",["[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FR:[,[,,"[1-9]\\d{8}",,,,,,,[9]],[,,"(?:[1-35]\\d|4[1-9])\\d{7}",,,,"123456789"],[,,"(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7(?:00|[3-9]\\d))\\d{6}",,,,"612345678"],[,,"80[0-5]\\d{6}",,,,"801234567"],[,,"836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",,,,"891123456"],[,,"8(?:1[01]|2[0156]|4[02]|84)\\d{6}",,,,"884012345"],[,,,,,,,,,[-1]],[,,"9\\d{8}",,,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["10"]],[,"(\\d{3})(\\d{3})","$1 $2",["1"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"80[6-9]\\d{6}",,,,"806123456"],,,[,,,,,,,,,[-1]]],GA:[,[,,"(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",,,,,,,[7,8]],[,,"[01]1\\d{6}",,,,"01441234",,,[8]],[,,"(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}",,,,"06031234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GA",241,"00",,,,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1",,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GB:[,[,,"[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",,,,,,,[7,9,10],[4,5,6,8]],[,,"(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0359])|(?:5[0-26-9]|[78][0-49])\\d\\d|6(?:[0-4]\\d\\d|50[0-24-69]))|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-27-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",,,,"1212345678",,,[9,10],[4,5,6,7,8]],[,,"7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",,,,"7400123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GB",44,"00","0"," x",,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],1,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GD:[,[,,"(?:473|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",,,,"4732691234",,,,[7]],[,,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|58)|5(?:2[01]|3[3-8])|901)\\d{4}",,,,"4734031234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GD",1,"011","1",,,"1|([2-9]\\d{6})$","473$1",,,,,[,,,,,,,,,[-1]],,"473",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GE:[,[,,"(?:[3-57]\\d\\d|800)\\d{6}",,,,,,,[9],[6,7]],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",,,,"322123456",,,,[6,7]],[,,"5(?:(?:0555|1177)[5-9]|757(?:7[7-9]|8[01]))\\d{3}|5(?:00(?:0\\d|50)|11(?:00|1\\d|2[0-4]|3[01])|5200|75(?:00|[57]5)|8(?:0(?:[01]\\d|2[0-4])|58[89]|8(?:55|88)))\\d{4}|5(?:0070|11(?:33|51)|[25]222|3333)[0-4]\\d{3}|(?:5(?:[14]4|5[0157-9]|68|7[0147-9]|9[1-35-9])|790)\\d{6}",,,,"555123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70[67]\\d{6}",,,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"70[67]\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GF:[,[,,"(?:[56]94|80\\d|976)\\d{6}",,,,,,,[9]],[,,"594(?:[023]\\d|1[01]|4[03-9]|5[6-9]|6[0-3]|80|9[0-8])\\d{4}",,,,"594101234"],[,,"694(?:[0-249]\\d|3[0-48])\\d{4}",,,,"694201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976\\d{6}",,,,"976012345"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GG:[,[,,"(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",,,,,,,[7,9,10],[6]],[,,"1481[25-9]\\d{5}",,,,"1481256789",,,[10],[6]],[,,"7(?:(?:781|839)\\d|911[17])\\d{5}",,,,"7781123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GG",44,"00","0",,,"0|([25-9]\\d{5})$","1481$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GH:[,[,,"(?:[235]\\d{3}|800)\\d{5}",,,,,,,[8,9],[7]],[,,"3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",,,,"302345678",,,[9],[7]],[,,"(?:2(?:[0346-8]\\d|5[67])|5(?:[0457]\\d|6[01]|9[1-9]))\\d{6}",,,,"231234567",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GH",233,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[237]|8[0-2]"]],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"800\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GI:[,[,,"(?:[25]\\d\\d|606)\\d{5}",,,,,,,[8]],[,,"21(?:6[24-7]\\d|90[0-2])\\d{3}|2(?:00|2[25])\\d{5}",,,,"20012345"],[,,"(?:5[146-8]\\d|606)\\d{5}",,,,"57123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GL:[,[,,"(?:19|[2-689]\\d|70)\\d{4}",,,,,,,[6]],[,,"(?:19|3[1-7]|6[14689]|70|8[14-79]|9\\d)\\d{4}",,,,"321000"],[,,"[245]\\d{5}",,,,"221234"],[,,"80\\d{4}",,,,"801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3[89]\\d{4}",,,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GM:[,[,,"[2-9]\\d{6}",,,,,,,[7]],[,,"(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}",,,,"5661234"],[,,"(?:[23679]\\d|5[0-389])\\d{5}",,,,"3012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GN:[,[,,"722\\d{6}|(?:3|6\\d)\\d{7}",,,,,,,[8,9]],[,,"3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",,,,"30241234",,,[8]],[,,"6[0-356]\\d{7}",,,,"601123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"722\\d{6}",,,,"722123456",,,[9]],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GP:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|6[0189]|7[08]|8[0-689]|9\\d)\\d{4}",,,,"590201234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"GP",590,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GQ:[,[,,"222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",,,,,,,[9]],[,,"33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}",,,,"333091234"],[,,"(?:222|55\\d)\\d{6}",,,,"222123456"],[,,"80\\d[1-9]\\d{5}",,,,"800123456"],[,,"90\\d[1-9]\\d{5}",,,,"900123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GR:[,[,,"5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",,,,,,,[10,11,12]],[,,"2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",,,,"2123456789",,,[10]],[,,"68[57-9]\\d{7}|(?:69|94)\\d{8}",,,,"6912345678",,,[10]],[,,"800\\d{7,9}",,,,"8001234567"],[,,"90[19]\\d{7}",,,,"9091234567",,,[10]],[,,"8(?:0[16]|12|[27]5|50)\\d{7}",,,,"8011234567",,,[10]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,,,,,,,,[-1]],"GR",30,"00",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],[,"(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],[,"(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"5005000\\d{3}",,,,"5005000123",,,[10]],,,[,,,,,,,,,[-1]]],GT:[,[,,"(?:1\\d{3}|[2-7])\\d{7}",,,,,,,[8,11]],[,,"[267][2-9]\\d{6}",,,,"22456789",,,[8]],[,,"[3-5]\\d{7}",,,,"51234567",,,[8]],[,,"18[01]\\d{8}",,,,"18001112222",,,[11]],[,,"19\\d{9}",,,,"19001112222",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GU:[,[,,"(?:[58]\\d\\d|671|900)\\d{7}",,,,,,,[10],[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GU",1,"011","1",,,"1|([3-9]\\d{6})$","671$1",,1,,,[,,,,,,,,,[-1]],,"671",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GW:[,[,,"[49]\\d{8}|4\\d{6}",,,,,,,[7,9]],[,,"443\\d{6}",,,,"443201234",,,[9]],[,,"9(?:5\\d|6[569]|77)\\d{6}",,,,"955012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"40\\d{5}",,,,"4012345",,,[7]],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["40"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GY:[,[,,"9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",,,,,,,[7]],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-24-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|77[1-57])\\d{4}",,,,"2201234"],[,,"(?:6\\d\\d|70[015-7])\\d{4}",,,,"6091234"],[,,"(?:289|862)\\d{4}",,,,"2891234"],[,,"9008\\d{3}",,,,"9008123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HK:[,[,,"8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",,,,,,,[5,6,7,8,9,11]],[,,"(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|5[0-5]|9\\d))|58(?:0[1-8]|1[2-9]))\\d{4}",,,,"21234567",,,[8]],[,,"(?:46(?:0[0-7]|1[0-6]|4[0-57-9]|6[0-4]|7[0-8])|573[0-6]|6(?:26[013-8]|66[0-3])|70(?:7[1-5]|8[0-4])|848[015-9]|929[013-9])\\d{4}|(?:4(?:40|6[2358])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-24679])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|84[09]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",,,,"51234567",,,[8]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})",,,,"90012345678",,,[5,6,7,8,11]],[,,,,,,,,,[-1]],[,,"8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",,,,"81123456",,,[8]],[,,,,,,,,,[-1]],"HK",852,"00(?:30|5[09]|[126-9]?)",,,,,,"00",,[[,"(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,"7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",,,,"71123456",,,[8]],,,[,,,,,,,,,[-1]],[,,"30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",,,,"30161234",,,[8]],,,[,,,,,,,,,[-1]]],HN:[,[,,"8\\d{10}|[237-9]\\d{7}",,,,,,,[8,11]],[,,"2(?:2(?:0[0-39]|1[1-367]|[23]\\d|4[03-6]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[78]|2[3-59]|3[13-9]|4[0-68]|5[1-35])|5(?:0[7-9]|16|4[03-5]|5\\d|6[014-6]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[04]|4[0-378]|[78][0-8]|9[01])|7(?:6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",,,,"22123456",,,[8]],[,,"[37-9]\\d{7}",,,,"91234567",,,[8]],[,,"8002\\d{7}",,,,"80021234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["8"]]],[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],[,,,,,,,,,[-1]],,,[,,"8002\\d{7}",,,,,,,[11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HR:[,[,,"(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",,,,,,,[6,7,8,9]],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"98\\d{6,7}|975(?:1\\d|96)\\d{4}|9(?:0[1-9]|[1259]\\d|7[0679])\\d{6}",,,,"921234567",,,[8,9]],[,,"80[01]\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"6[01459]\\d{6}|6[01]\\d{4,5}",,,,"611234",,,[6,7,8]],[,,,,,,,,,[-1]],[,,"7[45]\\d{6}",,,,"74123456",,,[8]],[,,,,,,,,,[-1]],"HR",385,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"62\\d{6,7}|72\\d{6}",,,,"62123456",,,[8,9]],,,[,,,,,,,,,[-1]]],HT:[,[,,"[2-489]\\d{7}",,,,,,,[8]],[,,"2(?:2\\d|5[1-5]|81|9[149])\\d{5}",,,,"22453300"],[,,"[34]\\d{7}",,,,"34101234"],[,,"8\\d{7}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}",,,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HU:[,[,,"[235-7]\\d{8}|[1-9]\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",,,,"12345678",,,[8],[6,7]],[,,"(?:[257]0|3[01])\\d{7}",,,,"201234567",,,[9]],[,,"(?:[48]0\\d|680[29])\\d{5}",,,,"80123456"],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"21\\d{7}",,,,"211234567",,,[9]],"HU",36,"00","06",,,"06",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],,[,,,,,,,,,[-1]],,,[,,"(?:[48]0\\d|680[29])\\d{5}"],[,,"38\\d{7}",,,,"381234567",,,[9]],,,[,,,,,,,,,[-1]]],ID:[,[,,"(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",,,,,,,[7,8,9,10,11,12,13],[5,6]],[,,"2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",,,,"218350123",,,[7,8,9,10,11],[5,6]],[,,"8[1-35-9]\\d{7,10}",,,,"812345678",,,[9,10,11,12]],[,,"00[17]803\\d{7}|(?:177\\d|800)\\d{5,7}|001803\\d{6}",,,,"8001234567",,,[8,9,10,11,12,13]],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,"804\\d{7}",,,,"8041234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ID",62,"00[89]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["001"]],[,"(\\d{2})(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"001803\\d{6,7}|(?:007803\\d|8071)\\d{6}",,,,,,,[10,12,13]],[,,"(?:1500|8071\\d{3})\\d{3}",,,,"8071123456",,,[7,10]],,,[,,,,,,,,,[-1]]],IE:[,[,,"(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",,,,,,,[7,8,9,10],[5,6]],[,,"(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",,,,"2212345",,,,[5,6]],[,,"8(?:22|[35-9]\\d)\\d{6}",,,,"850123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}",,,,"1520123456",,,[10]],[,,"18[59]0\\d{6}",,,,"1850123456",,,[10]],[,,"700\\d{6}",,,,"700123456",,,[9]],[,,"76\\d{7}",,,,"761234567",,,[9]],"IE",353,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],[,"(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],[,"(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"18[59]0\\d{6}",,,,,,,[10]],[,,"818\\d{6}",,,,"818123456",,,[9]],,,[,,"88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",,,,"8551234567",,,[10]]],IL:[,[,,"1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,"153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",,,,"21234567",,,[8,11,12],[7]],[,,"5(?:(?:[02368]\\d|[19][2-9]|4[1-9])\\d|5(?:01|1[79]|2[2-9]|3[0-3]|4[34]|5[015689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",,,,"502345678",,,[9]],[,,"1(?:255|80[019]\\d{3})\\d{3}",,,,"1800123456",,,[7,10]],[,,"1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}",,,,"1919123456",,,[8,10]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,"7(?:380|8(?:33|55|77|81))\\d{5}|7(?:18|2[23]|3[237]|47|6[58]|7\\d|82|9[235-9])\\d{6}",,,,"771234567",,,[9]],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"(\\d{4})(\\d{3})","$1-$2",["125"]],[,"(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],[,"(\\d{4})(\\d{6})","$1-$2",["159"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],[,"(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],,[,,,,,,,,,[-1]],,,[,,"1700\\d{6}",,,,,,,[10]],[,,"1599\\d{6}",,,,"1599123456",,,[10]],,,[,,"151\\d{8,9}",,,,"15112340000",,,[11,12]]],IM:[,[,,"1624\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1624(?:230|[5-8]\\d\\d)\\d{3}",,,,"1624756789",,,,[6]],[,,"76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}",,,,"7924123456"],[,,"808162\\d{4}",,,,"8081624567"],[,,"8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}",,,,"9016247890"],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678"],[,,"56\\d{8}",,,,"5612345678"],"IM",44,"00","0",,,"0|([25-8]\\d{5})$","1624$1",,,,,[,,,,,,,,,[-1]],,"74576|(?:16|7[56])24",[,,,,,,,,,[-1]],[,,"3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],IN:[,[,,"(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",,,,,,,[8,9,10,11,12,13],[6,7]],[,,"2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",,,,"7410410123",,,[10],[6,7,8]],[,,"(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",,,,"8123456789",,,[10]],[,,"000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))",,,,"1800123456"],[,,"186[12]\\d{9}",,,,"1861123456789",,,[13]],[,,"1860\\d{7}",,,,"18603451234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IN",91,"00","0",,,"0",,,,[[,"(\\d{7})","$1",["575"]],[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[,,,,,,,,,[-1]],,,[,,"1(?:600\\d{6}|800\\d{4,9})|(?:000800|18(?:03\\d\\d|6(?:0|[12]\\d\\d)))\\d{7}"],[,,"140\\d{7}",,,,"1409305260",,,[10]],,,[,,,,,,,,,[-1]]],IO:[,[,,"3\\d{6}",,,,,,,[7]],[,,"37\\d{5}",,,,"3709100"],[,,"38\\d{5}",,,,"3801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IQ:[,[,,"(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"7[3-9]\\d{8}",,,,"7912345678",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IQ",964,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IR:[,[,,"[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",,,,,,,[4,5,6,7,10],[8]],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|2(?:121|[2689]0\\d)|30[0-2]\\d|4(?:111|40\\d))\\d{4}",,,,"2123456789",,,[6,7,10],[4,5,8]],[,,"9(?:(?:0(?:[0-35]\\d|4[4-6])|(?:[13]\\d|2[0-3])\\d)\\d|9(?:[0-46]\\d\\d|5[15]0|8(?:1\\d|88)|9(?:0[013]|[19]\\d|21|77|8[7-9])))\\d{5}",,,,"9123456789",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IR",98,"00","0",,,"0",,,,[[,"(\\d{4,5})","$1",["96"],"0$1"],[,"(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"9(?:4440\\d{5}|6(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19]))",,,,,,,[4,5,10]],[,,"96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",,,,"9601",,,[4,5]],,,[,,,,,,,,,[-1]]],IS:[,[,,"(?:38\\d|[4-9])\\d{6}",,,,,,,[7,9]],[,,"(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",,,,"4101234",,,[7]],[,,"(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}",,,,"6111234"],[,,"80[0-8]\\d{4}",,,,"8001234",,,[7]],[,,"90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"49[0-24-79]\\d{4}",,,,"4921234",,,[7]],"IS",354,"00|1(?:0(?:01|[12]0)|100)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"809\\d{4}",,,,"8091234",,,[7]],,,[,,"(?:689|8(?:7[18]|80)|95[48])\\d{4}",,,,"6891234",,,[7]]],IT:[,[,,"0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|55\\d{8}|8\\d{5}(?:\\d{2,4})?",,,,,,,[6,7,8,9,10,11,12]],[,,"0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",,,,"0212345678",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"IT",39,"00",,,,,,,,[[,"(\\d{4,5})","$1",["1(?:0|9[246])","1(?:0|9(?:2[2-9]|[46]))"]],[,"(\\d{6})","$1",["1(?:1|92)"]],[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[38]"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],[,,,,,,,,,[-1]],1,,[,,"848\\d{6}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],JE:[,[,,"1534\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1534[0-24-8]\\d{5}",,,,"1534456789",,,,[6]],[,,"7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}",,,,"7797712345"],[,,"80(?:07(?:35|81)|8901)\\d{4}",,,,"8007354567"],[,,"(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",,,,"9018105678"],[,,,,,,,,,[-1]],[,,"701511\\d{4}",,,,"7015115678"],[,,"56\\d{8}",,,,"5612345678"],"JE",44,"00","0",,,"0|([0-24-8]\\d{5})$","1534$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-2]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456"],,,[,,,,,,,,,[-1]],[,,"(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],JM:[,[,,"(?:[58]\\d\\d|658|900)\\d{7}",,,,,,,[10],[7]],[,,"8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[02357-9]|[23]\\d|40|5[06]|6[2-589]|7[0257]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",,,,"8765230123",,,,[7]],[,,"(?:658295|876(?:2(?:0[2-9]|[14-9]\\d|2[013-9]|3[3-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",,,,"8762101234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"JM",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"658|876",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],JO:[,[,,"(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",,,,,,,[8,9]],[,,"87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",,,,"62001234",,,[8]],[,,"7(?:[78][0-25-9]|9\\d)\\d{6}",,,,"790123456",,,[9]],[,,"80\\d{6}",,,,"80012345",,,[8]],[,,"9\\d{7}",,,,"90012345",,,[8]],[,,"85\\d{6}",,,,"85012345",,,[8]],[,,"70\\d{7}",,,,"700123456",,,[9]],[,,,,,,,,,[-1]],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],[,"(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,"74(?:66|77)\\d{5}",,,,"746612345",,,[9]],,,[,,,,,,,,,[-1]],[,,"8(?:10|8\\d)\\d{5}",,,,"88101234",,,[8]],,,[,,,,,,,,,[-1]]],JP:[,[,,"00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",,,,,,,[8,9,10,11,12,13,14,15,16,17]],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",,,,"312345678",,,[9]],[,,"[7-9]0[1-9]\\d{7}",,,,"9012345678",,,[10]],[,,"00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}",,,,"120123456"],[,,"990\\d{6}",,,,"990123456",,,[9]],[,,,,,,,,,[-1]],[,,"60\\d{7}",,,,"601234567",,,[9]],[,,"50[1-9]\\d{7}",,,,"5012345678",,,[10]],"JP",81,"010","0",,,"0",,,,[[,"(\\d{4})(\\d{4})","$1-$2",["007","0077","00777","00777[01]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["007","0077"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["008"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["0"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:49|80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:496|802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],[,,"20\\d{8}",,,,"2012345678",,,[10]],,,[,,"00(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d|00(?:37|66|78)\\d{6,13}"],[,,"570\\d{6}",,,,"570123456",,,[9]],,,[,,,,,,,,,[-1]]],KE:[,[,,"(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",,,,,,,[7,8,9,10]],[,,"(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",,,,"202012345",,,[7,8,9]],[,,"(?:1(?:0[0-6]|1[0-5]|2[014])|7\\d\\d)\\d{6}",,,,"712123456",,,[9]],[,,"800[2-8]\\d{5,6}",,,,"800223456",,,[9,10]],[,,"900[02-9]\\d{5}",,,,"900223456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KG:[,[,,"8\\d{9}|(?:[235-8]\\d|99)\\d{7}",,,,,,,[9,10],[5,6]],[,,"312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",,,,"312123456",,,[9],[5,6]],[,,"312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|7(?:[07]\\d|55)|880|99[05-9])\\d{6}",,,,"700123456",,,[9]],[,,"800\\d{6,7}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KG",996,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],[,"(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KH:[,[,,"1\\d{9}|[1-9]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",,,,"23756789",,,[8,9],[6,7]],[,,"(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",,,,"91234567",,,[8,9]],[,,"1800(?:1\\d|2[019])\\d{4}",,,,"1800123456",,,[10]],[,,"1900(?:1\\d|2[09])\\d{4}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KI:[,[,,"(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",,,,,,,[5,8]],[,,"(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",,,,"31234"],[,,"(?:63\\d{3}|73(?:0[0-5]\\d|140))\\d{3}|[67]200[01]\\d{3}",,,,"72001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",,,,"30010000",,,[8]],"KI",686,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KM:[,[,,"[3478]\\d{6}",,,,,,,[7],[4]],[,,"7[4-7]\\d{5}",,,,"7712345",,,,[4]],[,,"[34]\\d{6}",,,,"3212345"],[,,,,,,,,,[-1]],[,,"8\\d{6}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KN:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}",,,,"8692361234",,,,[7]],[,,"869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}",,,,"8697652917",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KN",1,"011","1",,,"1|([2-7]\\d{6})$","869$1",,,,,[,,,,,,,,,[-1]],,"869",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KP:[,[,,"85\\d{6}|(?:19\\d|[2-7])\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}",,,,"21234567",,,,[6,7]],[,,"19[1-3]\\d{7}",,,,"1921234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"238[02-9]\\d{4}|2(?:[0-24-9]\\d|3[0-79])\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KR:[,[,,"00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",,,,,,,[5,6,8,9,10,11,12,13,14],[3,4,7]],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",,,,"22123456",,,[5,6,8,9,10],[3,4,7]],[,,"1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[1-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",,,,"1020000000",,,[9,10]],[,,"00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",,,,"801234567",,,[9,11,12,13,14]],[,,"60[2-9]\\d{6}",,,,"602345678",,,[9]],[,,,,,,,,,[-1]],[,,"50\\d{8,9}",,,,"5012345678",,,[10,11]],[,,"70\\d{8}",,,,"7012345678",,,[10]],"KR",82,"00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","0",,,"0(8(?:[1-46-8]|5\\d\\d))?",,,,[[,"(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"],"0$1"],[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3})(\\d{3})","$1 $2 $3",["003","0030"]],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3,4})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{5})(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"]],[,,"15\\d{7,8}",,,,"1523456789",,,[9,10]],,,[,,"00(?:3(?:08\\d{6,7}|68\\d{7})|798\\d{7,9})",,,,,,,[11,12,13,14]],[,,"1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[168]|88)|8(?:00|33|55|77|99))\\d{4}",,,,"15441234",,,[8]],,,[,,,,,,,,,[-1]]],KW:[,[,,"18\\d{5}|(?:[2569]\\d|41)\\d{6}",,,,,,,[7,8]],[,,"2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",,,,"22345678",,,[8]],[,,"(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|111|222|333|444|7(?:0[013-9]|[67]\\d)|888|9(?:[069]\\d|3[039]))|9(?:(?:0[09]|22|[4679]\\d|8[057-9])\\d|1(?:1[01]|99)|3(?:00|33)|5(?:00|5\\d)))\\d{4}",,,,"50012345",,,[8]],[,,"18\\d{5}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],[,"(\\d{3})(\\d{5})","$1 $2",["[245]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KY:[,[,,"(?:345|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|[48]8)|9(?:14|4[035-9]))\\d{4}",,,,"3452221234",,,,[7]],[,,"345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",,,,"3453231234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"(?:345976|900[2-9]\\d\\d)\\d{4}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KY",1,"011","1",,,"1|([2-9]\\d{6})$","345$1",,,,,[,,"345849\\d{4}",,,,"3458491234"],,"345",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KZ:[,[,,"(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",,,,,,,[10,14],[5,6,7]],[,,"(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9])|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-246-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",,,,"7123456789",,,[10],[5,6,7]],[,,"7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",,,,"7710009998",,,[10]],[,,"8(?:00|108\\d{3})\\d{7}",,,,"8001234567"],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,"751\\d{7}",,,,"7511234567",,,[10]],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,,,,,,,,[-1]],,"33|7",[,,"751\\d{7}",,,,,,,[10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LA:[,[,,"[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",,,,,,,[8,9,10],[6]],[,,"(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",,,,"21212862",,,[8],[6]],[,,"(?:20(?:[239]\\d|5[24-9]|7[6-8]|88)|302\\d)\\d{6}",,,,"2023123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LA",856,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"30[013-9]\\d{6}",,,,"301234567",,,[9]],,,[,,,,,,,,,[-1]]],LB:[,[,,"[27-9]\\d{7}|[13-9]\\d{6}",,,,,,,[7,8]],[,,"7(?:62|8[0-7]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}",,,,"1123456"],[,,"793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}",,,,"71123456"],[,,,,,,,,,[-1]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,"80\\d{6}",,,,"80123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LC:[,[,,"(?:[58]\\d\\d|758|900)\\d{7}",,,,,,,[10],[7]],[,,"758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}",,,,"7584305678",,,,[7]],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",,,,"7582845678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"LC",1,"011","1",,,"1|([2-8]\\d{6})$","758$1",,,,,[,,,,,,,,,[-1]],,"758",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LI:[,[,,"[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",,,,,,,[7,9]],[,,"(?:2(?:01|1[27]|2[02]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",,,,"2345678",,,[7]],[,,"(?:6(?:(?:4[5-9]|5[0-4])\\d|6(?:[0245]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}",,,,"660234567"],[,,"8002[28]\\d\\d|80(?:05\\d|9)\\d{4}",,,,"8002222"],[,,"90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",,,,"9002222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LI",423,"00","0",,,"0|(1001)",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"870(?:28|87)\\d\\d",,,,"8702812",,,[7]],,,[,,"697(?:42|56|[78]\\d)\\d{4}",,,,"697861234",,,[9]]],LK:[,[,,"[1-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",,,,"112345678",,,,[7]],[,,"7(?:[0-25-8]\\d|4[0-4])\\d{6}",,,,"712345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"1973\\d{5}",,,,"197312345"],,,[,,,,,,,,,[-1]]],LR:[,[,,"(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",,,,,,,[7,8,9]],[,,"(?:2\\d{3}|33333)\\d{4}",,,,"21234567",,,[8,9]],[,,"(?:(?:330|555|(?:77|88)\\d)\\d|4[67])\\d{5}|[56]\\d{6}",,,,"770123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"332(?:02|[34]\\d)\\d{4}",,,,"332021234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LR",231,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LS:[,[,,"(?:[256]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2\\d{7}",,,,"22123456"],[,,"[56]\\d{7}",,,,"50123456"],[,,"800[256]\\d{4}",,,,"80021234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LT:[,[,,"(?:[3469]\\d|52|[78]0)\\d{6}",,,,,,,[8]],[,,"(?:3[1478]|4[124-6]|52)\\d{6}",,,,"31234567"],[,,"6\\d{7}",,,,"61234567"],[,,"80[02]\\d{5}",,,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,"70[05]\\d{5}",,,,"70012345"],[,,"[89]01\\d{5}",,,,"80123456"],"LT",370,"00","8",,,"[08]",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",,1],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",,1],[,"(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",,1],[,"(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70[67]\\d{5}",,,,"70712345"],,,[,,,,,,,,,[-1]]],LU:[,[,,"35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",,,,,,,[4,5,6,7,8,9,10,11]],[,,"(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",,,,"27123456"],[,,"6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",,,,"628123456",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90[015]\\d{5}",,,,"90012345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,,,,,,,,[-1]],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})",,,,"20201234",,,[4,5,6,7,8,9,10]],"LU",352,"00",,,,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LV:[,[,,"(?:[268]\\d|90)\\d{6}",,,,,,,[8]],[,,"6\\d{7}",,,,"63123456"],[,,"2\\d{7}",,,,"21234567"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,"81\\d{6}",,,,"81123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LV",371,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LY:[,[,,"[2-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",,,,"212345678",,,,[7]],[,,"9[1-6]\\d{7}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LY",218,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MA:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"5(?:29(?:[189][05]|2[29]|3[01])|38(?:8[057]|9[05]))\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|80|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",,,,"520123456"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|6[0-367]))\\d{6}",,,,"650123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"592(?:4[0-2]|93)\\d{4}",,,,"592401234"],"MA",212,"00","0",,,"0",,,,[[,"(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29|38)[89]","5(?:29|38)[89]0"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],[,"(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],[,"(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],[,"(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MC:[,[,,"(?:[3489]|6\\d)\\d{7}",,,,,,,[8,9]],[,,"(?:870|9[2-47-9]\\d)\\d{5}",,,,"99123456",,,[8]],[,,"4(?:[46]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}",,,,"612345678"],[,,"(?:800|90\\d)\\d{5}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MC",377,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["87"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"8[07]0\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MD:[,[,,"(?:[235-7]\\d|[89]0)\\d{6}",,,,,,,[8]],[,,"(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}",,,,"22212345"],[,,"562\\d{5}|(?:6\\d|7[16-9])\\d{6}",,,,"62112345"],[,,"800\\d{5}",,,,"80012345"],[,,"90[056]\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,,,,,,,,[-1]],[,,"3[08]\\d{6}",,,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"803\\d{5}",,,,"80312345"],,,[,,,,,,,,,[-1]]],ME:[,[,,"(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",,,,,,,[8,9],[6]],[,,"(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",,,,"30234567",,,[8],[6]],[,,"6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",,,,"67622901",,,[8]],[,,"80(?:[0-2578]|9\\d)\\d{5}",,,,"80080002"],[,,"9(?:4[1568]|5[178])\\d{5}",,,,"94515151",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"78[1-49]\\d{5}",,,,"78108780",,,[8]],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"77[1-9]\\d{5}",,,,"77273012",,,[8]],,,[,,,,,,,,,[-1]]],MF:[,[,,"(?:590|(?:69|80)\\d|976)\\d{6}",,,,,,,[9]],[,,"590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}",,,,"590271234"],[,,"69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976[01]\\d{5}",,,,"976012345"],"MF",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MG:[,[,,"[23]\\d{8}",,,,,,,[9],[7]],[,,"2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}",,,,"202123456",,,,[7]],[,,"3[2-489]\\d{7}",,,,"321234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"22\\d{7}",,,,"221234567"],"MG",261,"00","0",,,"0|([24-9]\\d{6})$","20$1",,,[[,"(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MH:[,[,,"329\\d{4}|(?:[256]\\d|45)\\d{5}",,,,,,,[7]],[,,"(?:247|528|625)\\d{4}",,,,"2471234"],[,,"(?:(?:23|54)5|329|45[56])\\d{4}",,,,"2351234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"635\\d{4}",,,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MK:[,[,,"[2-578]\\d{7}",,,,,,,[8],[6,7]],[,,"(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[23]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",,,,"22012345",,,,[6,7]],[,,"7(?:3555|4(?:60\\d|747)|94(?:[01]\\d|2[0-4]))\\d{3}|7(?:[0-25-8]\\d|3[1-4]|42|9[23])\\d{5}",,,,"72345678"],[,,"800\\d{5}",,,,"80012345"],[,,"5[02-9]\\d{6}",,,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}",,,,"80123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MK",389,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ML:[,[,,"[24-9]\\d{7}",,,,,,,[8]],[,,"2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}",,,,"20212345"],[,,"2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[239])\\d{6}",,,,"65012345"],[,,"80\\d{6}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ML",223,"00",,,,,,,,[[,"(\\d{4})","$1",["67[057-9]|74[045]","67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[,,,,,,,,,[-1]],,,[,,"80\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MM:[,[,,"1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",,,,,,,[6,7,8,9,10],[5]],[,,"(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[2-469]|39|46|6[25]|7[0-3]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|2[246]|39|46|62|7[0-3]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[0-3])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|247[23]|3(?:20\\d|470)|4(?:2[04]\\d|47[23])|7(?:(?:3\\d|8[01459])\\d|4(?:39|60|7[013]))))\\d{4}|5(?:2(?:2\\d{5,6}|47[023]\\d{4})|(?:347[23]|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[0-2])|8(?:20\\d|47[02])|9(?:20\\d|47[01]))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:2\\d|4[1-9]|51)\\d|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",,,,"1234567",,,[6,7,8,9],[5]],[,,"(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",,,,"92123456",,,[7,8,9,10]],[,,"80080(?:[01][1-9]|2\\d)\\d{3}",,,,"8008001234",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1333\\d{4}|[12]468\\d{4}",,,,"13331234",,,[8]],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],[,"(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],[,"(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MN:[,[,,"[12]\\d{7,9}|[57-9]\\d{7}",,,,,,,[8,9,10],[4,5,6]],[,,"[12]2[1-3]\\d{5,6}|7(?:0[0-5]\\d|128)\\d{4}|(?:[12](?:1|27)|5[368])\\d{6}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",,,,"53123456",,,,[4,5,6]],[,,"(?:83[01]|920)\\d{5}|(?:5[05]|8[05689]|9[013-9])\\d{6}",,,,"88123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"712[0-79]\\d{4}|7(?:1[013-9]|[25-8]\\d)\\d{5}",,,,"75123456",,,[8]],"MN",976,"001","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[57-9]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MO:[,[,,"0800\\d{3}|(?:28|[68]\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",,,,"28212345",,,[8]],[,,"6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",,,,"66123456",,,[8]],[,,"0800\\d{3}",,,,"0800501",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MO",853,"00",,,,,,,,[[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{4})(\\d{4})","$1 $2",["[268]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MP:[,[,,"[58]\\d{9}|(?:67|90)0\\d{7}",,,,,,,[10],[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MP",1,"011","1",,,"1|([2-9]\\d{6})$","670$1",,1,,,[,,,,,,,,,[-1]],,"670",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MQ:[,[,,"(?:69|80)\\d{7}|(?:59|97)6\\d{6}",,,,,,,[9]],[,,"596(?:[04-7]\\d|10|2[7-9]|3[014-9]|8[09]|9[4-9])\\d{4}",,,,"596301234"],[,,"69(?:6(?:[0-46-9]\\d|5[0-6])|727)\\d{4}",,,,"696201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"976(?:6\\d|7[0-367])\\d{4}",,,,"976612345"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MR:[,[,,"(?:[2-4]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"(?:25[08]|35\\d|45[1-7])\\d{5}",,,,"35123456"],[,,"[2-4][0-46-9]\\d{6}",,,,"22123456"],[,,"800\\d{5}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MR",222,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MS:[,[,,"(?:[58]\\d\\d|664|900)\\d{7}",,,,,,,[10],[7]],[,,"6644(?:1[0-3]|91)\\d{4}",,,,"6644912345",,,,[7]],[,,"664(?:3(?:49|9[1-6])|49[2-6])\\d{4}",,,,"6644923456",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MS",1,"011","1",,,"1|([34]\\d{6})$","664$1",,,,,[,,,,,,,,,[-1]],,"664",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MT:[,[,,"3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}",,,,"21001234"],[,,"(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",,,,"96961234"],[,,"800(?:02|[3467]\\d)\\d{3}",,,,"80071234"],[,,"5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}",,,,"50037123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3550\\d{4}",,,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],,[,,"7117\\d{4}",,,,"71171234"],,,[,,,,,,,,,[-1]],[,,"501\\d{5}",,,,"50112345"],,,[,,,,,,,,,[-1]]],MU:[,[,,"(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",,,,,,,[7,8,10]],[,,"(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-7])|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",,,,"54480123",,,[7,8]],[,,"5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])\\d{5}",,,,"52512345",,,[8]],[,,"802\\d{7}|80[0-2]\\d{4}",,,,"8001234",,,[7,10]],[,,"30\\d{5}",,,,"3012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3(?:20|9\\d)\\d{4}",,,,"3201234",,,[7]],"MU",230,"0(?:0|[24-7]0|3[03])",,,,,,"020",,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],[,"(\\d{4})(\\d{4})","$1 $2",["5"]],[,"(\\d{5})(\\d{5})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MV:[,[,,"(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",,,,,,,[7,10]],[,,"(?:3(?:0[0-3]|3[0-59])|6(?:[57][02468]|6[024-68]|8[024689]))\\d{4}",,,,"6701234",,,[7]],[,,"46[46]\\d{4}|(?:7\\d|9[13-9])\\d{5}",,,,"7712345",,,[7]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"4[05]0\\d{4}",,,,"4001234",,,[7]],,,[,,,,,,,,,[-1]]],MW:[,[,,"(?:[129]\\d|31|77|88)\\d{7}|1\\d{6}",,,,,,,[7,9]],[,,"(?:1[2-9]|2[12]\\d\\d)\\d{5}",,,,"1234567"],[,,"111\\d{6}|(?:31|77|88|9[89])\\d{7}",,,,"991234567",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MX:[,[,,"1(?:(?:44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[017]\\d|[235][1-9]|4[0-35-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",,,,,,,[10,11],[7,8]],[,,"6571\\d{6}|(?:2(?:0[01]|2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|6[1-9]|7[12]|8[1-8]|9\\d))\\d{7}",,,,"2001234567",,,[10],[7,8]],[,,"6571\\d{6}|(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|6[1-9]|7[12]|8[1-8]|9\\d))\\d{7}",,,,"12221234567",,,,[7,8]],[,,"8(?:00|88)\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,"300\\d{7}",,,,"3001234567",,,[10]],[,,"500\\d{7}",,,,"5001234567",,,[10]],[,,,,,,,,,[-1]],"MX",52,"0[09]","01",,,"0(?:[12]|4[45])|1",,"00",,[[,"(\\d{5})","$1",["53"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],,,1],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],,,1],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],,,1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MY:[,[,,"1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",,,,"323856789",,,[8,9],[6,7]],[,,"1(?:1888[69]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0134]\\d|2[1-9]|5[0-6]))|(?:(?:[269]|59)\\d|[37][1-9]|4[235-9])\\d|8(?:1[23]|[236]\\d|4[06]|5[7-9]|7[016-9]|8[01]|9[0-8]))\\d{5}",,,,"123456789",,,[9,10]],[,,"1[378]00\\d{6}",,,,"1300123456",,,[10]],[,,"1600\\d{6}",,,,"1600123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",,,,"1546012345",,,[10]],"MY",60,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9])|8"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1[36-8]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MZ:[,[,,"(?:2|8\\d)\\d{7}",,,,,,,[8,9]],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",,,,"21123456",,,[8]],[,,"8[2-79]\\d{7}",,,,"821234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MZ",258,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NA:[,[,,"[68]\\d{7,8}",,,,,,,[8,9]],[,,"64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}",,,,"61221234"],[,,"(?:60|8[1245])\\d{7}",,,,"811234567",,,[9]],[,,"80\\d{7}",,,,"800123456",,,[9]],[,,"8701\\d{5}",,,,"870123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8(?:3\\d\\d|86)\\d{5}",,,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NC:[,[,,"(?:050|[2-57-9]\\d\\d)\\d{3}",,,,,,,[6]],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}",,,,"201234"],[,,"(?:5[0-4]|[79]\\d|8[0-79])\\d{4}",,,,"751234"],[,,"050\\d{3}",,,,"050012"],[,,"36\\d{4}",,,,"366711"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NC",687,"00",,,,,,,,[[,"(\\d{3})","$1",["5[6-8]"]],[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NE:[,[,,"[027-9]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",,,,"20201234"],[,,"(?:23|7[04]|[89]\\d)\\d{6}",,,,"93123456"],[,,"08\\d{6}",,,,"08123456"],[,,"09\\d{6}",,,,"09123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NF:[,[,,"[13]\\d{5}",,,,,,,[6],[5]],[,,"(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}",,,,"106609",,,,[5]],[,,"(?:14|3[58])\\d{4}",,,,"381234",,,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NF",672,"00",,,,"([0-258]\\d{4})$","3$1",,,[[,"(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],[,"(\\d)(\\d{5})","$1 $2",["[13]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NG:[,[,,"(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",,,,,,,[7,8,10,11,12,13,14],[5,6]],[,,"(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",,,,"18040123",,,[7,8],[5,6]],[,,"(?:702[0-24-9]|8(?:01|19)[01])\\d{6}|(?:70[13-689]|8(?:0[2-9]|1[0-8])|9(?:0[1-9]|1[2356]))\\d{7}",,,,"8021234567",,,[10]],[,,"800\\d{7,11}",,,,"80017591759",,,[10,11,12,13,14]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NG",234,"009","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"700\\d{7,11}",,,,"7001234567",,,[10,11,12,13,14]],,,[,,,,,,,,,[-1]]],NI:[,[,,"(?:1800|[25-8]\\d{3})\\d{4}",,,,,,,[8]],[,,"2\\d{7}",,,,"21234567"],[,,"(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",,,,"81234567"],[,,"1800\\d{4}",,,,"18001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NL:[,[,,"(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",,,,,,,[5,6,7,8,9,10,11]],[,,"(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",,,,"101234567",,,[9]],[,,"(?:6[1-58]|970\\d)\\d{7}",,,,"612345678",,,[9,11]],[,,"800\\d{4,7}",,,,"8001234",,,[7,8,9,10]],[,,"90[069]\\d{4,7}",,,,"9061234",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:85|91)\\d{7}",,,,"851234567",,,[9]],"NL",31,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["1[238]|[34]"]],[,"(\\d{2})(\\d{3,4})","$1 $2",["14"]],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[,,"66\\d{7}",,,,"662345678",,,[9]],,,[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)\\d",,,,,,,[5,6]],[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",,,,"14020",,,[5,6,9]],,,[,,,,,,,,,[-1]]],NO:[,[,,"(?:0|[2-9]\\d{3})\\d{4}",,,,,,,[5,8]],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",,,,"21234567",,,[8]],[,,"(?:4[015-8]|59|9\\d)\\d{6}",,,,"40612345",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"NO",47,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],,[,,,,,,,,,[-1]],1,"[02-689]|7[0-8]",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],NP:[,[,,"(?:1\\d|9)\\d{9}|[1-9]\\d{7}",,,,,,,[8,10,11],[6,7]],[,,"(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",,,,"14567890",,,[8],[6,7]],[,,"9(?:6[0-3]|7[24-6]|8[0-24-68])\\d{7}",,,,"9841234567",,,[10]],[,,"1(?:66001|800\\d\\d)\\d{5}",,,,"16600101234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NP",977,"00","0",,,"0",,,,[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]],[,"(\\d{4})(\\d{2})(\\d{5})","$1-$2-$3",["1"]]],[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-579]|6[2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NR:[,[,,"(?:444|(?:55|8\\d)\\d|666)\\d{4}",,,,,,,[7]],[,,"444\\d{4}",,,,"4441234"],[,,"(?:55[3-9]|666|8\\d\\d)\\d{4}",,,,"5551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NU:[,[,,"(?:[47]|888\\d)\\d{3}",,,,,,,[4,7]],[,,"[47]\\d{3}",,,,"7012",,,[4]],[,,"888[4-9]\\d{3}",,,,"8884012",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NU",683,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NZ:[,[,,"[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",,,,,,,[5,6,7,8,9,10]],[,,"24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",,,,"32345678",,,[8],[7]],[,,"2[0-27-9]\\d{7,8}|21\\d{6}",,,,"211234567",,,[8,9,10]],[,,"508\\d{6,7}|80\\d{6,8}",,,,"800123456",,,[8,9,10]],[,,"(?:11\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",,,,"900123456",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,"70\\d{7}",,,,"701234567",,,[9]],[,,,,,,,,,[-1]],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],,[,,"[28]6\\d{6,7}",,,,"26123456",,,[8,9]],,,[,,,,,,,,,[-1]],[,,"8(?:1[6-9]|22|3\\d|4[045]|5[459]|7[0-3579]|90)\\d{2,7}",,,,"83012378"],,,[,,,,,,,,,[-1]]],OM:[,[,,"(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",,,,,,,[7,8,9]],[,,"2[2-6]\\d{6}",,,,"23123456",,,[8]],[,,"1505\\d{4}|(?:7(?:[1289]\\d|7[0-4])|9(?:0[1-9]|[1-9]\\d))\\d{5}",,,,"92123456",,,[8]],[,,"8007\\d{4,5}|(?:500|800[05])\\d{4}",,,,"80071234"],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"OM",968,"00",,,,,,,,[[,"(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],[,"(\\d{2})(\\d{6})","$1 $2",["2"]],[,"(\\d{4})(\\d{4})","$1 $2",["[179]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PA:[,[,,"(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",,,,,,,[7,8,10,11]],[,,"(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[58]|7[0167]|8[258]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[089]\\d|1[0-7]|2[0-5]|33|4[0-79]|5[0-35]|6[068]|7[0-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[056]|7[0-24-9]|8[5-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",,,,"2001234",,,[7]],[,,"(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}",,,,"61234567",,,[7,8]],[,,"800\\d{4,5}|(?:00800|800\\d)\\d{6}",,,,"8001234"],[,,"(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",,,,"8601234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[68]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PE:[,[,,"(?:[14-8]|9\\d)\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",,,,"11234567",,,[8],[6,7]],[,,"9\\d{8}",,,,"912345678",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"805\\d{5}",,,,"80512345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,"80[24]\\d{5}",,,,"80212345",,,[8]],[,,,,,,,,,[-1]],"PE",51,"19(?:1[124]|77|90)00","0"," Anexo ",,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PF:[,[,,"4\\d{5}(?:\\d{2})?|8\\d{7,8}",,,,,,,[6,8,9]],[,,"4(?:0[4-689]|9[4-68])\\d{5}",,,,"40412345",,,[8]],[,,"8[7-9]\\d{6}",,,,"87123456",,,[8]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"499\\d{5}",,,,"49901234",,,[8]],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,"44\\d{4}",,,,,,,[6]],[,,"44\\d{4}",,,,"440123",,,[6]],,,[,,,,,,,,,[-1]]],PG:[,[,,"(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",,,,,,,[7,8]],[,,"(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",,,,"3123456",,,[7]],[,,"(?:7\\d|8[18])\\d{6}",,,,"70123456",,,[8]],[,,"180\\d{4}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2(?:0[0-47]|7[568])\\d{4}",,,,"2751234",,,[7]],"PG",675,"00|140[1-3]",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],[,"(\\d{4})(\\d{4})","$1 $2",["[78]"]]],,[,,"27[01]\\d{4}",,,,"2700123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PH:[,[,,"(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",,,,,,,[6,8,9,10,11,12,13],[4,5,7]],[,,"(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",,,,"232345678",,,[6,8,9,10],[4,5,7]],[,,"(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",,,,"9051234567",,,[10]],[,,"1800\\d{7,9}",,,,"180012345678",,,[11,12,13]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PH",63,"00","0",,,"0",,,,[[,"(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PK:[,[,,"122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",,,,,,,[8,9,10,11,12],[5,6,7]],[,,"(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",,,,"2123456789",,,[9,10],[5,6,7,8]],[,,"3(?:[0-24]\\d|3[0-7]|55|64)\\d{7}",,,,"3012345678",,,[10]],[,,"800\\d{5}(?:\\d{3})?",,,,"80012345",,,[8,11]],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,"122\\d{6}",,,,"122044444",,,[9]],[,,,,,,,,,[-1]],"PK",92,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["1"]],[,"(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],[,"(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",,,,"21111825888",,,[11,12]],,,[,,,,,,,,,[-1]]],PL:[,[,,"6\\d{5}(?:\\d{2})?|8\\d{9}|[1-9]\\d{6}(?:\\d{2})?",,,,,,,[6,7,8,9,10]],[,,"47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",,,,"123456789",,,[7,9]],[,,"21(?:1(?:[145]\\d|3[1-5])|2[0-4]\\d)\\d{4}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",,,,"512345678",,,[9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"70[01346-8]\\d{6}",,,,"701234567",,,[9]],[,,"801\\d{6}",,,,"801234567",,,[9]],[,,,,,,,,,[-1]],[,,"39\\d{7}",,,,"391234567",,,[9]],"PL",48,"00",,,,,,,,[[,"(\\d{5})","$1",["19"]],[,"(\\d{3})(\\d{3})","$1 $2",["11|64"]],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],,[,,"64\\d{4,7}",,,,"641234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]],[,,"804\\d{6}",,,,"804123456",,,[9]],,,[,,,,,,,,,[-1]]],PM:[,[,,"(?:[45]|80\\d\\d)\\d{5}",,,,,,,[6,9]],[,,"(?:4[1-356]|50)\\d{4}",,,,"430123",,,[6]],[,,"(?:4[02-4]|5[056])\\d{4}",,,,"551234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PM",508,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PR:[,[,,"(?:[589]\\d\\d|787)\\d{7}",,,,,,,[10],[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"PR",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,"787|939",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PS:[,[,,"[2489]2\\d{6}|(?:1\\d|5)\\d{8}",,,,,,,[8,9,10],[7]],[,,"(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",,,,"22234567",,,[8],[7]],[,,"5[69]\\d{7}",,,,"599123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,,,,,,,,[-1]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PS",970,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PT:[,[,,"1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",,,,,,,[9]],[,,"2(?:[12]\\d|[35][1-689]|4[1-59]|6[1-35689]|7[1-9]|8[1-69]|9[1256])\\d{6}",,,,"212345678"],[,,"6[0356]92(?:30|9\\d)\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}",,,,"912345678"],[,,"80[02]\\d{6}",,,,"800123456"],[,,"(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}",,,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}",,,,"808123456"],[,,"884[0-4689]\\d{5}",,,,"884123456"],[,,"30\\d{7}",,,,"301234567"],"PT",351,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70(?:7\\d|8[17])\\d{5}",,,,"707123456"],,,[,,"600\\d{6}",,,,"600110000"]],PW:[,[,,"(?:[24-8]\\d\\d|345|900)\\d{4}",,,,,,,[7]],[,,"(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",,,,"2771234"],[,,"(?:(?:46|83)[0-5]|6[2-4689]0)\\d{4}|(?:45|77|88)\\d{5}",,,,"6201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PY:[,[,,"59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",,,,"212345678",,,[7,8,9],[5,6]],[,,"9(?:51|6[129]|[78][1-6]|9[1-5])\\d{6}",,,,"961456789",,,[9]],[,,"9800\\d{5,7}",,,,"98000123456",,,[9,10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8700[0-4]\\d{4}",,,,"870012345",,,[9]],"PY",595,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],[,"(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],[,"(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"[2-9]0\\d{4,7}",,,,"201234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]]],QA:[,[,,"[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",,,,,,,[7,8,9]],[,,"4141\\d{4}|(?:23|4[04])\\d{6}",,,,"44123456",,,[8]],[,,"(?:2[89]|[35-7]\\d)\\d{6}",,,,"33123456",,,[8]],[,,"800\\d{4}(?:\\d{2})?",,,,"8001234",,,[7,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"QA",974,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]],,[,,"2(?:[12]\\d|61)\\d{4}",,,,"2123456",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RE:[,[,,"9769\\d{5}|(?:26|[68]\\d)\\d{7}",,,,,,,[9]],[,,"26(?:2\\d\\d|30[0-5])\\d{4}",,,,"262161234"],[,,"(?:69(?:2\\d\\d|3(?:0[0-46]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|6[0-6]|7[0-27]|8[0-8]|9[0-479]))|9769\\d)\\d{4}",,,,"692123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89[1-37-9]\\d{6}",,,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RE",262,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],,[,,,,,,,,,[-1]],1,"26[23]|69|[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RO:[,[,,"(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",,,,,,,[6,9]],[,,"[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d",,,,"211234567"],[,,"7020\\d{5}|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[019])\\d{6}",,,,"712034567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[0136]\\d{6}",,,,"900123456",,,[9]],[,,"801\\d{6}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RO",40,"00","0"," int ",,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],[,"(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:37\\d|80[578])\\d{6}",,,,"372123456",,,[9]],,,[,,,,,,,,,[-1]]],RS:[,[,,"38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",,,,,,,[6,7,8,9,10,11,12],[4,5]],[,,"(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",,,,"10234567",,,[7,8,9,10,11,12],[4,5,6]],[,,"6(?:[0-689]|7\\d)\\d{6,7}",,,,"601234567",,,[8,9,10]],[,,"800\\d{3,9}",,,,"80012345"],[,,"(?:78\\d|90[0169])\\d{3,7}",,,,"90012345",,,[6,7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RS",381,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],[,"(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7[06]\\d{4,10}",,,,"700123456"],,,[,,,,,,,,,[-1]]],RU:[,[,,"8\\d{13}|[347-9]\\d{9}",,,,,,,[10,14],[7]],[,,"(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",,,,"3011234567",,,[10],[7]],[,,"9\\d{9}",,,,"9123456789",,,[10]],[,,"8(?:0[04]|108\\d{3})\\d{7}",,,,"8001234567"],[,,"80[39]\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,,,,,,,,[-1]],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[0-79]"]],[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[,,,,,,,,,[-1]],1,"3[04-689]|[489]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RW:[,[,,"(?:06|[27]\\d\\d|[89]00)\\d{6}",,,,,,,[8,9]],[,,"(?:06|2[23568]\\d)\\d{6}",,,,"250123456"],[,,"7[2389]\\d{7}",,,,"720123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900\\d{6}",,,,"900123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RW",250,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SA:[,[,,"92\\d{7}|(?:[15]|8\\d)\\d{8}",,,,,,,[9,10],[7]],[,,"1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",,,,"112345678",,,[9],[7]],[,,"579[01]\\d{5}|5(?:[013-689]\\d|7[0-35-8])\\d{6}",,,,"512345678",,,[9]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"925\\d{6}",,,,"925012345",,,[9]],[,,"920\\d{6}",,,,"920012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SA",966,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["9"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"811\\d{7}",,,,"8110123456",,,[10]],,,[,,,,,,,,,[-1]]],SB:[,[,,"(?:[1-6]|[7-9]\\d\\d)\\d{4}",,,,,,,[5,7]],[,,"(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",,,,"40123",,,[5]],[,,"48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",,,,"7421234"],[,,"1[38]\\d{3}",,,,"18123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[12]\\d{3}",,,,"51123",,,[5]],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SC:[,[,,"800\\d{4}|(?:[249]\\d|64)\\d{5}",,,,,,,[7]],[,,"4[2-46]\\d{5}",,,,"4217123"],[,,"2[125-8]\\d{5}",,,,"2510123"],[,,"800[08]\\d{3}",,,,"8000000"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"971\\d{4}|(?:64|95)\\d{5}",,,,"6412345"],"SC",248,"010|0[0-2]",,,,,,"00",,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SD:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1(?:5\\d|8[35-7])\\d{6}",,,,"153123456"],[,,"(?:1[0-2]|9[0-3569])\\d{7}",,,,"911231234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SE:[,[,,"(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",,,,,,,[6,7,8,9,10,12]],[,,"(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",,,,"8123456",,,[7,8,9]],[,,"7[02369]\\d{7}",,,,"701234567",,,[9]],[,,"20\\d{4,7}",,,,"20123456",,,[6,7,8,9]],[,,"649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",,,,"9001234567",,,[7,8,9,10]],[,,"77[0-7]\\d{6}",,,,"771234567",,,[9]],[,,"75[1-8]\\d{6}",,,,"751234567",,,[9]],[,,,,,,,,,[-1]],"SE",46,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1"],[,"(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1"],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1"]],[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(\\d{3})(\\d{4})","$1 $2",["9(?:00|39|44|9)"]],[,"(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"]],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1 $2 $3",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["10|7"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],[,,"74[02-9]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"10[1-8]\\d{6}",,,,"102345678",,,[9]],,,[,,"(?:25[245]|67[3-68])\\d{9}",,,,"254123456789",,,[12]]],SG:[,[,,"(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",,,,,,,[8,10,11]],[,,"662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",,,,"61234567",,,[8]],[,,"8(?:051|95[0-2])\\d{4}|(?:8(?:0[1-4]|[1-8]\\d|9[0-4])|9[0-8]\\d)\\d{5}",,,,"81234567",,,[8]],[,,"(?:18|8)00\\d{7}",,,,"18001234567",,,[10,11]],[,,"1900\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[12]\\d|666)\\d{5}",,,,"31234567",,,[8]],"SG",65,"0[0-3]\\d",,,,,,,,[[,"(\\d{4,5})","$1",["1[013-9]|77","1(?:[013-8]|9(?:0[1-9]|[1-9]))|77"]],[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7000\\d{7}",,,,"70001234567",,,[11]],,,[,,,,,,,,,[-1]]],SH:[,[,,"(?:[256]\\d|8)\\d{3}",,,,,,,[4,5]],[,,"2(?:[0-57-9]\\d|6[4-9])\\d\\d",,,,"22158"],[,,"[56]\\d{4}",,,,"51234",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"262\\d\\d",,,,"26212",,,[5]],"SH",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],1,"[256]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SI:[,[,,"[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",,,,,,,[5,6,7,8]],[,,"(?:[1-357][2-8]|4[24-8])\\d{6}",,,,"12345678",,,[8],[7]],[,,"65(?:1\\d|55|[67]0)\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",,,,"31234567",,,[8]],[,,"80\\d{4,6}",,,,"80123456",,,[6,7,8]],[,,"89[1-3]\\d{2,5}|90\\d{4,6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",,,,"59012345",,,[8]],"SI",386,"00|10(?:22|66|88|99)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SJ:[,[,,"0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",,,,,,,[5,8]],[,,"79\\d{6}",,,,"79123456",,,[8]],[,,"(?:4[015-8]|59|9\\d)\\d{6}",,,,"41234567",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"SJ",47,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"79",[,,,,,,,,,[-1]],[,,"(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],SK:[,[,,"[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",,,,,,,[6,7,9]],[,,"(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",,,,"221234567"],[,,"909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",,,,"912123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:00|[78]\\d)\\d{6}",,,,"900123456",,,[9]],[,,"8[5-9]\\d{7}",,,,"850123456",,,[9]],[,,,,,,,,,[-1]],[,,"6(?:02|5[0-4]|9[0-6])\\d{6}",,,,"690123456",,,[9]],"SK",421,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d{4})(\\d{3})","$1 $2",["909","9090"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[,,"9090\\d{3}",,,,"9090123",,,[7]],,,[,,"9090\\d{3}|(?:602|8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}",,,,,,,[7,9]],[,,"96\\d{7}",,,,"961234567",,,[9]],,,[,,,,,,,,,[-1]]],SL:[,[,,"(?:[237-9]\\d|66)\\d{6}",,,,,,,[8],[6]],[,,"22[2-4][2-9]\\d{4}",,,,"22221234",,,,[6]],[,,"(?:25|3[0-5]|66|7[2-9]|8[08]|9[09])\\d{6}",,,,"25123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SM:[,[,,"(?:0549|[5-7]\\d)\\d{6}",,,,,,,[8,10],[6]],[,,"0549(?:8[0157-9]|9\\d)\\d{4}",,,,"0549886377",,,[10],[6]],[,,"6[16]\\d{6}",,,,"66661212",,,[8]],[,,,,,,,,,[-1]],[,,"7[178]\\d{6}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[158]\\d{6}",,,,"58001110",,,[8]],"SM",378,"00",,,,"([89]\\d{5})$","0549$1",,,[[,"(\\d{6})","$1",["[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SN:[,[,,"(?:[378]\\d|93)\\d{7}",,,,,,,[9]],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}",,,,"301012345"],[,,"75(?:01|[38]3)\\d{5}|7(?:[06-8]\\d|21|5[4-7]|90)\\d{6}",,,,"701234567"],[,,"800\\d{6}",,,,"800123456"],[,,"88[4689]\\d{6}",,,,"884123456"],[,,"81[02468]\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}",,,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SO:[,[,,"[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",,,,,,,[6,7,8,9]],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",,,,"4012345",,,[6,7]],[,,"(?:(?:15|(?:3[59]|4[89]|79|8[08])\\d|6(?:0[5-7]|[1-9]\\d)|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:6\\d|7[1-9])\\d{6}",,,,"71123456",,,[7,8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SO",252,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4})","$1 $2",["8[125]"]],[,"(\\d{6})","$1",["[134]"]],[,"(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],[,"(\\d)(\\d{7})","$1 $2",["24|[67]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],[,"(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SR:[,[,,"(?:[2-5]|68|[78]\\d)\\d{5}",,,,,,,[6,7]],[,,"(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}",,,,"211234"],[,,"(?:7[124-7]|8[124-9])\\d{5}",,,,"7412345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"56\\d{4}",,,,"561234",,,[6]],"SR",597,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],[,"(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SS:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1[89]\\d{7}",,,,"181234567"],[,,"(?:12|9[1257-9])\\d{7}",,,,"977123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ST:[,[,,"(?:22|9\\d)\\d{5}",,,,,,,[7]],[,,"22\\d{5}",,,,"2221234"],[,,"900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}",,,,"9812345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SV:[,[,,"[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",,,,,,,[7,8,11]],[,,"2(?:[1-6]\\d{3}|[79]90[034]|890[0245])\\d{3}",,,,"21234567",,,[8]],[,,"66(?:[02-9]\\d\\d|1(?:[02-9]\\d|16))\\d{3}|(?:6[0-57-9]|7\\d)\\d{6}",,,,"70123456",,,[8]],[,,"800\\d{4}(?:\\d{4})?",,,,"8001234",,,[7,11]],[,,"900\\d{4}(?:\\d{4})?",,,,"9001234",,,[7,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SV",503,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[89]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[267]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SX:[,[,,"7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",,,,"7215425678",,,,[7]],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",,,,"7215205678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"SX",1,"011","1",,,"1|(5\\d{6})$","721$1",,,,,[,,,,,,,,,[-1]],,"721",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SY:[,[,,"[1-39]\\d{8}|[1-5]\\d{7}",,,,,,,[8,9],[6,7]],[,,"21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",,,,"112345678",,,,[6,7]],[,,"9[1-689]\\d{7}",,,,"944567890",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SZ:[,[,,"0800\\d{4}|(?:[237]\\d|900)\\d{6}",,,,,,,[8,9]],[,,"[23][2-5]\\d{6}",,,,"22171234",,,[8]],[,,"7[6-9]\\d{6}",,,,"76123456",,,[8]],[,,"0800\\d{4}",,,,"08001234",,,[8]],[,,"900\\d{6}",,,,"900012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70\\d{6}",,,,"70012345",,,[8]],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[0237]"]],[,"(\\d{5})(\\d{4})","$1 $2",["9"]]],,[,,,,,,,,,[-1]],,,[,,"0800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TA:[,[,,"8\\d{3}",,,,,,,[4]],[,,"8\\d{3}",,,,"8999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TA",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"8",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TC:[,[,,"(?:[58]\\d\\d|649|900)\\d{7}",,,,,,,[10],[7]],[,,"649(?:266|712|9(?:4\\d|50))\\d{4}",,,,"6497121234",,,,[7]],[,,"649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}",,,,"6492311234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"649(?:71[01]|966)\\d{4}",,,,"6497101234",,,,[7]],"TC",1,"011","1",,,"1|([2-479]\\d{6})$","649$1",,,,,[,,,,,,,,,[-1]],,"649",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TD:[,[,,"(?:22|[69]\\d|77)\\d{6}",,,,,,,[8]],[,,"22(?:[37-9]0|5[0-5]|6[89])\\d{4}",,,,"22501234"],[,,"(?:6[023568]|77|9\\d)\\d{6}",,,,"63012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TG:[,[,,"[279]\\d{7}",,,,,,,[8]],[,,"2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}",,,,"22212345"],[,,"(?:7[09]|9[0-36-9])\\d{6}",,,,"90112345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TH:[,[,,"(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",,,,,,,[8,9,10,13]],[,,"(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",,,,"21234567",,,[8]],[,,"671[0-8]\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",,,,"812345678",,,[9]],[,,"(?:001800\\d|1800)\\d{6}",,,,"1800123456",,,[10,13]],[,,"1900\\d{6}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"6[08]\\d{7}",,,,"601234567",,,[9]],"TH",66,"00[1-9]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TJ:[,[,,"(?:00|[1-57-9]\\d)\\d{7}",,,,,,,[9],[3,5,6,7]],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}",,,,"372123456",,,,[3,5,6,7]],[,,"41[18]\\d{6}|(?:[034]0|[17][017]|2[02]|5[05]|8[08]|9\\d)\\d{7}",,,,"917123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TJ",992,"810",,,,,,"8~10",,[[,"(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TK:[,[,,"[2-47]\\d{3,6}",,,,,,,[4,5,6,7]],[,,"(?:2[2-4]|[34]\\d)\\d{2,5}",,,,"3101"],[,,"7[2-4]\\d{2,5}",,,,"7290"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TK",690,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TL:[,[,,"7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",,,,,,,[7,8]],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",,,,"2112345",,,[7]],[,,"7[2-8]\\d{6}",,,,"77212345",,,[8]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,"70\\d{5}",,,,"7012345",,,[7]],[,,,,,,,,,[-1]],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],[,"(\\d{4})(\\d{4})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TM:[,[,,"[1-6]\\d{7}",,,,,,,[8]],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",,,,"12345678"],[,,"6\\d{7}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],[,"(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TN:[,[,,"[2-57-9]\\d{7}",,,,,,,[8]],[,,"81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}",,,,"30010123"],[,,"3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-7])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",,,,"20123456"],[,,"8010\\d{4}",,,,"80101234"],[,,"88\\d{6}",,,,"88123456"],[,,"8[12]10\\d{4}",,,,"81101234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TO:[,[,,"(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",,,,,,,[5,7]],[,,"(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",,,,"20123",,,[5]],[,,"(?:55[4-6]|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",,,,"7715123",,,[7]],[,,"0800\\d{3}",,,,"0800222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"55[0-37-9]\\d{4}",,,,"5510123",,,[7]],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TR:[,[,,"4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",,,,,,,[7,10,12,13]],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",,,,"2123456789",,,[10]],[,,"56161\\d{5}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",,,,"5012345678",,,[10]],[,,"8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",,,,"8001234567",,,[10,12,13]],[,,"(?:8[89]8|900)\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,"592(?:21[12]|461)\\d{4}",,,,"5922121234",,,[10]],[,,"850\\d{7}",,,,"8500123456",,,[10]],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d)(\\d{3})","$1 $2 $3",["444"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[,,"512\\d{7}",,,,"5123456789",,,[10]],,,[,,"(?:444|811\\d{3})\\d{4}",,,,,,,[7,10]],[,,"444\\d{4}",,,,"4441444",,,[7]],,,[,,,,,,,,,[-1]]],TT:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"868(?:2(?:0[13]|1[89]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",,,,"8682211234",,,,[7]],[,,"868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",,,,"8682911234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"TT",1,"011","1",,,"1|([2-46-8]\\d{6})$","868$1",,,,,[,,,,,,,,,[-1]],,"868",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"868619\\d{4}",,,,"8686191234",,,,[7]]],TV:[,[,,"(?:2|7\\d\\d|90)\\d{4}",,,,,,,[5,6,7]],[,,"2[02-9]\\d{3}",,,,"20123",,,[5]],[,,"(?:7[01]\\d|90)\\d{4}",,,,"901234",,,[6,7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TV",688,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2"]],[,"(\\d{2})(\\d{4})","$1 $2",["90"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TW:[,[,,"[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",,,,,,,[7,8,9,10,11]],[,,"(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",,,,"221234567",,,[8,9]],[,,"(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",,,,"912345678",,,[9]],[,,"80[0-79]\\d{6}|800\\d{5}",,,,"800123456",,,[8,9]],[,,"20(?:[013-9]\\d\\d|2)\\d{4}",,,,"203123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"99\\d{7}",,,,"990123456",,,[9]],[,,"7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",,,,"7012345678",,,[10,11]],"TW",886,"0(?:0[25-79]|19)","0","#",,"0",,,,[[,"(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"50[0-46-9]\\d{6}",,,,"500123456",,,[9]],,,[,,,,,,,,,[-1]]],TZ:[,[,,"(?:[26-8]\\d|41|90)\\d{7}",,,,,,,[9]],[,,"2[2-8]\\d{7}",,,,"222345678"],[,,"77[2-9]\\d{6}|(?:6[1-9]|7[1-689])\\d{7}",,,,"621234567"],[,,"80[08]\\d{6}",,,,"800123456"],[,,"90\\d{7}",,,,"900123456"],[,,"8(?:40|6[01])\\d{6}",,,,"840123456"],[,,,,,,,,,[-1]],[,,"41\\d{7}",,,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"(?:8(?:[04]0|6[01])|90\\d)\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UA:[,[,,"[89]\\d{9}|[3-9]\\d{8}",,,,,,,[9,10],[5,6,7]],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",,,,"311234567",,,[9],[5,6,7]],[,,"(?:50|6[36-8]|7[1-3]|9[1-9])\\d{7}",,,,"501234567",,,[9]],[,,"800[1-8]\\d{5,6}",,,,"800123456"],[,,"900[239]\\d{5,6}",,,,"900212345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"89[1-579]\\d{6}",,,,"891234567",,,[9]],"UA",380,"00","0",,,"0",,"0~0",,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["4[45][0-5]|5(?:0|6[37])|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]","4[45][0-5]|5(?:0|6(?:3[14-7]|7))|6(?:[12][018]|[36-8])|7|89|9[1-9]|(?:48|57)[0137-9]"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["[3-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UG:[,[,,"800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",,,,,,,[9],[5,6,7]],[,,"20(?:(?:(?:24|81)0|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|32|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",,,,"312345678",,,,[5,6,7]],[,,"726[01]\\d{5}|7(?:[01578]\\d|20|36|[46][0-4]|9[89])\\d{6}",,,,"712345678"],[,,"800[1-3]\\d{5}",,,,"800123456"],[,,"90[1-3]\\d{6}",,,,"901123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],US:[,[,,"[2-9]\\d{9}",,,,,,,[10],[7]],[,,"5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-3]|[268]2)|3(?:0[02]|22|33)|4(?:00|4[24]|65|82)|5(?:00|29|58|83)|6(?:00|66|82)|7(?:58|77)|8(?:00|42|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0157-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))|82(?:2(?:0[0-3]|[268]2)|3(?:0[02]|22|33)|4(?:00|4[24]|65|82)|5(?:00|29|58|83)|6(?:00|66|82)|7(?:58|77)|8(?:00|42|88)|9(?:00|9[89])))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0157-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],,,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UY:[,[,,"4\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",,,,,,,[7,8,10]],[,,"(?:1(?:770|987)|(?:2\\d|4[2-7])\\d\\d)\\d{4}",,,,"21231234",,,[8],[7]],[,,"9[1-9]\\d{6}",,,,"94231234",,,[8]],[,,"(?:4\\d{5}|80[05])\\d{4}|405\\d{4}",,,,"8001234",,,[7,10]],[,,"90[0-8]\\d{4}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UY",598,"0(?:0|1[3-9]\\d)","0"," int. ",,"0",,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[124]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UZ:[,[,,"(?:33|55|[679]\\d|88)\\d{7}",,,,,,,[9]],[,,"(?:6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|8\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|6(?:22|3[12457]|4[13-8])|9(?:22|5[1-9])))\\d{5}",,,,"669050123"],[,,"(?:(?:33|88|9[0-57-9])\\d{3}|55(?:50[013]|90\\d)|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|6(?:2(?:2[1245]|4[2-4])|39\\d|41[179]|5(?:[349]\\d|5[0-2])|7(?:0[017]|[13]\\d|22|44|55|67|88))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UZ",998,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VA:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"06698\\d{1,6}",,,,"0669812345",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"VA",39,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"06698",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],VC:[,[,,"(?:[58]\\d\\d|784|900)\\d{7}",,,,,,,[10],[7]],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",,,,"7842661234",,,,[7]],[,,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}",,,,"7844301234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"78451[0-2]\\d{4}",,,,"7845101234",,,,[7]],"VC",1,"011","1",,,"1|([2-7]\\d{6})$","784$1",,,,,[,,,,,,,,,[-1]],,"784",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VE:[,[,,"[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}",,,,"2121234567",,,,[7]],[,,"4(?:1[24-8]|2[46])\\d{7}",,,,"4121234567"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[01]\\d{7}",,,,"9001234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1","$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"501\\d{7}",,,,"5010123456",,,,[7]],,,[,,,,,,,,,[-1]]],VG:[,[,,"(?:284|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"284496[0-5]\\d{3}|284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}",,,,"2842291234",,,,[7]],[,,"284496[6-9]\\d{3}|284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|99)|5(?:4[0-7]|68|9[69]))\\d{4}",,,,"2843001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VG",1,"011","1",,,"1|([2-578]\\d{6})$","284$1",,,,,[,,,,,,,,,[-1]],,"284",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VI:[,[,,"[58]\\d{9}|(?:34|90)0\\d{7}",,,,,,,[10],[7]],[,,"340(?:2(?:0[0-38]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"340(?:2(?:0[0-38]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VI",1,"011","1",,,"1|([2-9]\\d{6})$","340$1",,1,,,[,,,,,,,,,[-1]],,"340",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VN:[,[,,"[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",,,,,,,[7,8,9,10]],[,,"2(?:0[3-9]|1[0-689]|2[0-25-9]|3[2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|8[2-79]|9[0-4679])\\d{7}",,,,"2101234567",,,[10]],[,,"(?:5(?:2[238]|59)|89[689]|99[013-9])\\d{6}|(?:3\\d|5[689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",,,,"912345678",,,[9]],[,,"1800\\d{4,6}|12(?:0[13]|28)\\d{4}",,,,"1800123456",,,[8,9,10]],[,,"1900\\d{4,6}",,,,"1900123456",,,[8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"672\\d{6}",,,,"672012345",,,[9]],"VN",84,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[17]99"],"0$1",,1],[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{3})(\\d{4,5})","$1 $2",["69"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"[17]99\\d{4}|69\\d{5,6}",,,,,,,[7,8]],[,,"(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",,,,"1992000",,,[7,8]],,,[,,,,,,,,,[-1]]],VU:[,[,,"[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",,,,,,,[5,7]],[,,"(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",,,,"22123",,,[5]],[,,"(?:[58]\\d|7[013-7])\\d{5}",,,,"5912345",,,[7]],[,,"81[18]\\d\\d",,,,"81123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:0[1-9]|1[01])\\d{4}",,,,"9010123",,,[7]],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:3[03]|900\\d)\\d{3}",,,,"30123"],,,[,,,,,,,,,[-1]]],WF:[,[,,"(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",,,,,,,[6,9]],[,,"72\\d{4}",,,,"721234",,,[6]],[,,"(?:72|8[23])\\d{4}",,,,"821234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WF",681,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"[48]0\\d{4}",,,,"401234",,,[6]]],WS:[,[,,"(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",,,,,,,[5,6,7,10]],[,,"6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",,,,"22123",,,[5,6]],[,,"(?:7[1-35-7]|8(?:[3-7]|9\\d{3}))\\d{5}",,,,"7212345",,,[7,10]],[,,"800\\d{3}",,,,"800123",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WS",685,"0",,,,,,,,[[,"(\\d{5})","$1",["[2-5]|6[1-9]"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],XK:[,[,,"[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",,,,,,,[8,9]],[,,"(?:2[89]|39)0\\d{6}|[23][89]\\d{6}",,,,"28012345"],[,,"4[3-9]\\d{6}",,,,"43201234",,,[8]],[,,"800\\d{5}",,,,"80001234",,,[8]],[,,"900\\d{5}",,,,"90001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"XK",383,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YE:[,[,,"(?:1|7\\d)\\d{7}|[1-7]\\d{6}",,,,,,,[7,8,9],[6]],[,,"78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",,,,"1234567",,,[7,8],[6]],[,,"7[0137]\\d{7}",,,,"712345678",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YE",967,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YT:[,[,,"80\\d{7}|(?:26|63)9\\d{6}",,,,,,,[9]],[,,"269(?:0[0-367]|5[0-3]|6\\d|[78]0)\\d{4}",,,,"269601234"],[,,"639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}",,,,"639012345"],[,,"80\\d{7}",,,,"801234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YT",262,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"269|63",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZA:[,[,,"[1-79]\\d{8}|8\\d{4,9}",,,,,,,[5,6,7,8,9,10]],[,,"(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",,,,"101234567",,,[9]],[,,"(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",,,,"711234567",,,[5,6,7,8,9]],[,,"80\\d{7}",,,,"801234567",,,[9]],[,,"(?:86[2-9]|9[0-2]\\d)\\d{6}",,,,"862345678",,,[9]],[,,"860\\d{6}",,,,"860123456",,,[9]],[,,,,,,,,,[-1]],[,,"87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",,,,"871234567",,,[9]],"ZA",27,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"861\\d{6,7}",,,,"861123456",,,[9,10]],,,[,,,,,,,,,[-1]]],ZM:[,[,,"800\\d{6}|(?:21|63|[79]\\d)\\d{7}",,,,,,,[9],[6]],[,,"21[1-8]\\d{6}",,,,"211234567",,,,[6]],[,,"(?:7[679]|9[5-8])\\d{7}",,,,"955123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"63\\d{7}",,,,"630123456"],"ZM",260,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[1-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZW:[,[,,"2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",,,,,,,[5,6,7,8,9,10],[3,4]],[,,"(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",,,,"1312345",,,,[3,4]],[,,"7(?:[178]\\d|3[1-9])\\d{6}",,,,"712345678",,,[9]],[,,"80(?:[01]\\d|20|8[0-8])\\d{3}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",,,,"8686123456",,,[10]],"ZW",263,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],[,"(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],[,"(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],800:[,[,,"(?:005|[1-9]\\d\\d)\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:005|[1-9]\\d\\d)\\d{5}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",800,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["\\d"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],808:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",808,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],870:[,[,,"7\\d{11}|[35-7]\\d{8}",,,,,,,[9,12]],[,,,,,,,,,[-1]],[,,"(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}",,,,"301234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",870,,,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],878:[,[,,"10\\d{10}",,,,,,,[12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"10\\d{10}",,,,"101234567890"],"001",878,,,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],881:[,[,,"[0-36-9]\\d{8}",,,,,,,[9]],[,,,,,,,,,[-1]],[,,"[0-36-9]\\d{8}",,,,"612345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",881,,,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],882:[,[,,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",,,,,,,[7,8,9,10,11,12]],[,,,,,,,,,[-1]],[,,"342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",,,,"3421234",,,[7,8,9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}",,,,"390123456789"],"001",882,,,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["16|342"]],[,"(\\d{2})(\\d{6})","$1 $2",["4"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"348[57]\\d{7}",,,,"34851234567",,,[11]]],883:[,[,,"(?:210|370\\d\\d)\\d{7}|51\\d{7}(?:\\d{3})?",,,,,,,[9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210|(?:370[1-9]|51[013]0)\\d)\\d{7}|5100\\d{5}",,,,"510012345"],"001",883,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[35]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],888:[,[,,"\\d{11}",,,,,,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",888,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"\\d{11}",,,,"12345678901"],,,[,,,,,,,,,[-1]]],979:[,[,,"[1359]\\d{8}",,,,,,,[9],[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1359]\\d{8}",,,,"123456789",,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",979,,,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]]};function en(){this.g={}}en.g=void 0,en.h=function(){return en.g?en.g:en.g=new en};var Mn={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"},Vn={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":"+","*":"*","#":"#"},ho={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},ci=/[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?/,wi=RegExp("[+]+"),Vt=RegExp("^[+]+"),ui=RegExp("([0-9---])"),dn=RegExp("[+0-9---]"),Ei=/[\\\/] *x/,yr=RegExp("[^0-9---A-Za-z#]+$"),fn=/(?:.*?[A-Za-z]){3}.*/;function Gn(k){return"([0-9---]{1,"+k+"})"}function Gt(){return";ext="+Gn("20")+"|[ \\t,]*(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)[:\\.]?[ \\t,-]*"+(Gn("20")+"#?|[ \\t,]*(?:[x#~]|int|)[:\\.]?[ \\t,-]*")+(Gn("9")+"#?|[- ]+")+(Gn("6")+"#|[ \\t]*(?:,{2}|;)[:\\.]?[ \\t,-]*")+(Gn("15")+"#?|[ \\t]*(?:,)+[:\\.]?[ \\t,-]*")+(Gn("9")+"#?")}var vr=new RegExp("(?:"+Gt()+")$","i"),Vr=new RegExp("^[0-9---]{2}$|^[+]*(?:[-x-- ().\\[\\]/~*]*[0-9---]){3,}[-x-- ().\\[\\]/~*A-Za-z0-9---]*(?:"+Gt()+")?$","i"),Pn=/(\$\d)/,Kn=/^\(?\$1\)?$/;function hi(k){return 2>k.length?!1:Ft(Vr,k)}function ji(k){return Ft(fn,k)?Xn(k,ho):Xn(k,Mn)}function Io(k){var V=ji(k.toString());_e(k),k.g(V)}function ns(){return Object.keys($n).filter(function(k){return isNaN(k)})}function Ln(){return Object.keys($n).filter(function(k){return!isNaN(k)}).map(function(k){return parseInt(k,10)})}function Ti(){var k=Object.keys(er);return[...Ln(),...k.map(function(V){return parseInt(V,10)})]}function fo(k){return k!=null&&(ht(k,9)!=1||We(k,9)[0]!=-1)}function Xn(k,V){for(var J=new tt,Ee,Ce=k.length,Ze=0;Ze<Ce;++Ze)Ee=k.charAt(Ze),Ee=V[Ee.toUpperCase()],Ee!=null&&J.g(Ee);return J.toString()}function Ui(k){return k.length==0||Kn.test(k)}function fi(k){return k!=null&&isNaN(k)&&k.toUpperCase()in $n}function wn(k,V,J){if(xe(V,2)==0&&Ie(V,5)){var Ee=Je(V,5);if(0<Ee.length)return Ee}Ee=Je(V,1);var Ce=pn(V);return J==0?Si(Ee,0,Ce,""):Ee in er?(k=En(k,Ee,ye(Ee)),V=j(V,k,J),Ce=Mo(Ce,k,J),Si(Ee,J,Ce,V)):Ce}function En(k,V,J){return J=="001"?ce(k,""+V):ce(k,J)}function Vi(k,V){var J=nn;if(!fi(V))return wn(J,k,1);var Ee=Je(k,1),Ce=pn(k);if(!(Ee in er))return Ce;if(Ee==1){if(V!=null&&er[1].includes(V.toUpperCase()))return Ee+" "+wn(J,k,2)}else if(Ee==De(J,V))return wn(J,k,2);var Ze=ce(J,V),_t=Je(Ze,11);return V="",Ie(Ze,17)?V=Je(Ze,17):Ft(ci,_t)&&(V=_t),J=En(J,Ee,ye(Ee)),Ce=Mo(Ce,J,1),k=j(k,J,1),0<V.length?V+" "+Ee+" "+Ce+k:Si(Ee,1,Ce,k)}function pn(k){if(!Ie(k,2))return"";var V=""+xe(k,2);return Ie(k,4)&&xe(k,4)&&0<Je(k,8)?Array(Je(k,8)+1).join("0")+V:V}function Si(k,V,J,Ee){switch(V){case 0:return"+"+k+J+Ee;case 1:return"+"+k+" "+J+Ee;case 3:return"tel:+"+k+"-"+J+Ee;default:return J+Ee}}function Mo(k,V,J){e:{V=We(V,20).length==0||J==2?We(V,19):We(V,20);for(var Ee,Ce=V.length,Ze=0;Ze<Ce;++Ze){Ee=V[Ze];var _t=ht(Ee,3);if((_t==0||k.search(xe(Ee,3,_t-1))==0)&&(_t=new RegExp(xe(Ee,1)),Ft(_t,k))){V=Ee;break e}}V=null}return V==null||(Ce=V,V=Je(Ce,2),Ee=new RegExp(xe(Ce,1)),Je(Ce,5),Ce=Je(Ce,4),k=J==2&&Ce!=null&&0<Ce.length?k.replace(Ee,V.replace(Pn,Ce)):k.replace(Ee,V),J==3&&(k=k.replace(RegExp("^[-x-- ().\\[\\]/~]+"),""),k=k.replace(RegExp("[-x-- ().\\[\\]/~]+","g"),"-"))),J=k,J}function le(k,V){var J=nn;if(!fi(k))return null;V=G(ce(J,k),V);try{if(Ie(V,6)){var Ee=xe(V,6);return Zt(J,Ee,k)}}catch{}return null}function j(k,V,J){return Ie(k,3)&&xe(k,3).length!=0?J==3?";ext="+xe(k,3):Ie(V,13)?xe(V,13)+Je(k,3):" ext. "+Je(k,3):""}function G(k,V){switch(V){case 4:return xe(k,5);case 3:return xe(k,4);case 1:return xe(k,3);case 0:case 2:return xe(k,2);case 5:return xe(k,6);case 6:return xe(k,8);case 7:return xe(k,7);case 8:return xe(k,21);case 9:return xe(k,25);case 10:return xe(k,28);default:return xe(k,1)}}function ie(k,V){return ge(k,xe(V,1))?ge(k,xe(V,5))?4:ge(k,xe(V,4))?3:ge(k,xe(V,6))?5:ge(k,xe(V,8))?6:ge(k,xe(V,7))?7:ge(k,xe(V,21))?8:ge(k,xe(V,25))?9:ge(k,xe(V,28))?10:ge(k,xe(V,2))?xe(V,18)||ge(k,xe(V,3))?2:0:!xe(V,18)&&ge(k,xe(V,3))?1:-1:-1}function ce(k,V){if(V==null)return null;V=V.toUpperCase();var J=k.g[V];if(J==null){if(J=$n[V],J==null)return null;J=new Ct().g(ut.m(),J),k.g[V]=J}return J}function ge(k,V){var J=k.length;return 0<ht(V,9)&&We(V,9).indexOf(J)==-1?!1:Ft(Je(V,2),k)}function Ae(k){var V=nn,J=Se(V,k),Ee=Je(k,1),Ce=En(V,Ee,J);return Ce==null||J!="001"&&Ee!=De(V,J)?Ce=!1:(k=pn(k),Ce=ie(k,Ce)!=-1),Ce}function Se(k,V){if(V==null)return null;var J=Je(V,1);if(J=er[J],J==null)k=null;else if(J.length==1)k=J[0];else e:{V=pn(V);for(var Ee,Ce=J.length,Ze=0;Ze<Ce;Ze++){Ee=J[Ze];var _t=ce(k,Ee);if(Ie(_t,23)){if(V.search(xe(_t,23))==0){k=Ee;break e}}else if(ie(V,_t)!=-1){k=Ee;break e}}k=null}return k}function ye(k){return k=er[k],k==null?"ZZ":k[0]}function De(k,V){if(k=ce(k,V),k==null)throw Error("Invalid region code: "+V);return Je(k,10)}function at(k){return k=it(k),k==0||k==4}function ct(k,V,J,Ee){var Ce=G(J,Ee),Ze=ht(Ce,9)==0?We(xe(J,1),9):We(Ce,9);if(Ce=We(Ce,10),Ee==2)if(fo(G(J,0)))k=G(J,1),fo(k)&&(Ze=Ze.concat(ht(k,9)==0?We(xe(J,1),9):We(k,9)),Ze.sort(),Ce.length==0?Ce=We(k,10):(Ce=Ce.concat(We(k,10)),Ce.sort()));else return ct(k,V,J,1);return Ze[0]==-1?5:(V=V.length,-1<Ce.indexOf(V)?4:(J=Ze[0],J==V?0:J>V?2:Ze[Ze.length-1]<V?3:-1<Ze.indexOf(V,1)?0:5))}function it(k){var V=nn,J=pn(k);return k=Je(k,1),k in er?(k=En(V,k,ye(k)),ct(V,J,k,-1)):1}function zt(k,V){if(k=k.toString(),k.length==0||k.charAt(0)=="0")return 0;for(var J,Ee=k.length,Ce=1;3>=Ce&&Ce<=Ee;++Ce)if(J=parseInt(k.substring(0,Ce),10),J in er)return V.g(k.substring(Ce)),J;return 0}function Kt(k,V,J,Ee,Ce){if(V.length==0)return 0;V=new tt(V);var Ze;J!=null&&(Ze=xe(J,11)),Ze==null&&(Ze="NonMatch");var _t=V.toString();if(_t.length==0)Ze=20;else if(Vt.test(_t))_t=_t.replace(Vt,""),_e(V),V.g(ji(_t)),Ze=1;else{if(_t=new RegExp(Ze),Io(V),Ze=V.toString(),Ze.search(_t)==0){_t=Ze.match(_t)[0].length;var bt=Ze.substring(_t).match(ui);bt&&bt[1]!=null&&0<bt[1].length&&Xn(bt[1],Mn)=="0"?Ze=!1:(_e(V),V.g(Ze.substring(_t)),Ze=!0)}else Ze=!1;Ze=Ze?5:20}if(Ze!=20){if(2>=V.h.length)throw Error("Phone number too short after IDD");if(k=zt(V,Ee),k!=0)return Lt(Ce,1,k),k;throw Error("Invalid country calling code")}return J!=null&&(Ze=Je(J,10),_t=""+Ze,bt=V.toString(),bt.lastIndexOf(_t,0)==0&&(_t=new tt(bt.substring(_t.length)),bt=xe(J,1),bt=new RegExp(Je(bt,2)),Bt(_t,J,null),_t=_t.toString(),!Ft(bt,V.toString())&&Ft(bt,_t)||ct(k,V.toString(),J,-1)==3))?(Ee.g(_t),Lt(Ce,1,Ze),Ze):(Lt(Ce,1,0),0)}function Bt(k,V,J){var Ee=k.toString(),Ce=Ee.length,Ze=xe(V,15);if(Ce!=0&&Ze!=null&&Ze.length!=0){var _t=new RegExp("^(?:"+Ze+")");if(Ce=_t.exec(Ee)){Ze=new RegExp(Je(xe(V,1),2));var bt=Ft(Ze,Ee),ar=Ce.length-1;V=xe(V,16),V==null||V.length==0||Ce[ar]==null||Ce[ar].length==0?(!bt||Ft(Ze,Ee.substring(Ce[0].length)))&&(J!=null&&0<ar&&Ce[ar]!=null&&J.g(Ce[1]),k.set(Ee.substring(Ce[0].length))):(Ee=Ee.replace(_t,V),(!bt||Ft(Ze,Ee))&&(J!=null&&0<ar&&J.g(Ce[1]),k.set(Ee)))}}}function Zt(k,V,J){if(V==null)throw Error("The string supplied did not seem to be a phone number");if(250<V.length)throw Error("The string supplied is too long to be a phone number");var Ee=new tt,Ce=V.indexOf(";phone-context=");if(0<=Ce){var Ze=Ce+15;if(V.charAt(Ze)=="+"){var _t=V.indexOf(";",Ze);0<_t?Ee.g(V.substring(Ze,_t)):Ee.g(V.substring(Ze))}Ze=V.indexOf("tel:"),Ee.g(V.substring(0<=Ze?Ze+4:0,Ce))}else Ce=Ee.g,Ze=V.search(dn),0<=Ze?(V=V.substring(Ze),V=V.replace(yr,""),Ze=V.search(Ei),0<=Ze&&(V=V.substring(0,Ze))):V="",Ce.call(Ee,V);if(V=Ee.toString(),Ce=V.indexOf(";isub="),0<Ce&&(_e(Ee),Ee.g(V.substring(0,Ce))),!hi(Ee.toString()))throw Error("The string supplied did not seem to be a phone number");if(V=Ee.toString(),!(fi(J)||V!=null&&0<V.length&&Vt.test(V)))throw Error("Invalid country calling code");V=new Qt;e:{if(Ce=Ee.toString(),Ze=Ce.search(vr),0<=Ze&&hi(Ce.substring(0,Ze))){_t=Ce.match(vr);for(var bt=_t.length,ar=1;ar<bt;++ar)if(_t[ar]!=null&&0<_t[ar].length){_e(Ee),Ee.g(Ce.substring(0,Ze)),Ce=_t[ar];break e}}Ce=""}0<Ce.length&&Lt(V,3,Ce),Ze=ce(k,J),Ce=new tt,_t=0,bt=Ee.toString();try{_t=Kt(k,bt,Ze,Ce,V)}catch(Qn){if(Qn.message=="Invalid country calling code"&&Vt.test(bt)){if(bt=bt.replace(Vt,""),_t=Kt(k,bt,Ze,Ce,V),_t==0)throw Qn}else throw Qn}if(_t!=0?(Ee=ye(_t),Ee!=J&&(Ze=En(k,_t,Ee))):(Io(Ee),Ce.g(Ee.toString()),J!=null&&(_t=Je(Ze,10),Lt(V,1,_t))),2>Ce.h.length||(Ze!=null&&(J=new tt(Ce.toString()),Bt(J,Ze,new tt),k=ct(k,J.toString(),Ze,-1),k!=2&&k!=4&&k!=5&&(Ce=J)),k=Ce.toString(),J=k.length,2>J))throw Error("The string supplied is too short to be a phone number");if(17<J)throw Error("The string supplied is too long to be a phone number");if(1<k.length&&k.charAt(0)=="0"){for(Lt(V,4,!0),J=1;J<k.length-1&&k.charAt(J)=="0";)J++;J!=1&&Lt(V,8,J)}return Lt(V,2,parseInt(k,10)),V}en.prototype.ia=function(k){var V=ce(this,Se(this,k));return V==null?!0:(k=pn(k),!ge(k,xe(V,24)))};function Ft(k,V){return!!((k=typeof k=="string"?V.match("^(?:"+k+")$"):V.match(k))&&k[0].length==V.length)}function Sr(k){this.ja=RegExp(""),this.ka="",this.v=new tt,this.ca="",this.s=new tt,this.aa=new tt,this.u=!0,this.da=this.ba=this.na=!1,this.oa=en.h(),this.$=0,this.h=new tt,this.ga=!1,this.o="",this.g=new tt,this.j=[],this.la=k,this.va=this.l=Rn(this,this.la)}var Rr=new ut;Lt(Rr,11,"NA");var tn=RegExp("^[-x-- ().\\[\\]/~]*\\$1[-x-- ().\\[\\]/~]*(\\$\\d[-x-- ().\\[\\]/~]*)*$"),Dr=/[- ]/;function Rn(k,V){var J=k.oa;return V=fi(V)?De(J,V):0,k=ce(k.oa,ye(V)),k??Rr}function Gr(k){for(var V=k.j.length,J=0;J<V;++J){var Ee=k.j[J],Ce=Je(Ee,1);if(k.ca==Ce)return!1;var Ze=k,_t=Ee,bt=Je(_t,1);_e(Ze.v);var ar=Ze;_t=Je(_t,2);var Qn="999999999999999".match(bt)[0];if(Qn.length<ar.g.h.length?ar="":(ar=Qn.replace(new RegExp(bt,"g"),_t),ar=ar.replace(RegExp("9","g"),"")),0<ar.length?(Ze.v.g(ar),Ze=!0):Ze=!1,Ze)return k.ca=Ce,k.ga=Dr.test(xe(Ee,4)),k.$=0,!0}return k.u=!1}function rn(k,V){for(var J=[],Ee=V.length-3,Ce=k.j.length,Ze=0;Ze<Ce;++Ze){var _t=k.j[Ze];ht(_t,3)==0?J.push(k.j[Ze]):(_t=xe(_t,3,Math.min(Ee,ht(_t,3)-1)),V.search(_t)==0&&J.push(k.j[Ze]))}k.j=J}function po(k,V){k.s.g(V);var J=V;if(ui.test(J)||k.s.h.length==1&&wi.test(J)?(V=="+"?(J=V,k.aa.g(V)):(J=Mn[V],k.aa.g(J),k.g.g(J)),V=J):(k.u=!1,k.na=!0),!k.u){if(!k.na){if(Lo(k)){if(Zn(k))return Za(k)}else if(0<k.o.length&&(V=k.g.toString(),_e(k.g),k.g.g(k.o),k.g.g(V),V=k.h.toString(),J=V.lastIndexOf(k.o),_e(k.h),k.h.g(V.substring(0,J))),k.o!=is(k))return k.h.g(" "),Za(k)}return k.s.toString()}switch(k.aa.h.length){case 0:case 1:case 2:return k.s.toString();case 3:if(Lo(k))k.da=!0;else return k.o=is(k),Po(k);default:return k.da?(Zn(k)&&(k.da=!1),k.h.toString()+k.g.toString()):0<k.j.length?(V=Yn(k,V),J=qs(k),0<J.length?J:(rn(k,k.g.toString()),Gr(k)?mo(k):k.u?Jt(k,V):k.s.toString())):Po(k)}}function Za(k){return k.u=!0,k.da=!1,k.j=[],k.$=0,_e(k.v),k.ca="",Po(k)}function qs(k){for(var V=k.g.toString(),J=k.j.length,Ee=0;Ee<J;++Ee){var Ce=k.j[Ee],Ze=Je(Ce,1);if(new RegExp("^(?:"+Ze+")$").test(V)&&(k.ga=Dr.test(xe(Ce,4)),Ce=V.replace(new RegExp(Ze,"g"),xe(Ce,2)),Ce=Jt(k,Ce),Xn(Ce,Vn)==k.aa))return Ce}return""}function Jt(k,V){var J=k.h.h.length;return k.ga&&0<J&&k.h.toString().charAt(J-1)!=" "?k.h+" "+V:k.h+V}function Po(k){var V=k.g.toString();if(3<=V.length){for(var J=k.ba&&k.o.length==0&&0<ht(k.l,20)?We(k.l,20):We(k.l,19),Ee=J.length,Ce=0;Ce<Ee;++Ce){var Ze=J[Ce];0<k.o.length&&Ui(Je(Ze,4))&&!xe(Ze,6)&&!Ie(Ze,5)||(k.o.length!=0||k.ba||Ui(Je(Ze,4))||xe(Ze,6))&&tn.test(Je(Ze,2))&&k.j.push(Ze)}return rn(k,V),V=qs(k),0<V.length?V:Gr(k)?mo(k):k.s.toString()}return Jt(k,V)}function mo(k){var V=k.g.toString(),J=V.length;if(0<J){for(var Ee="",Ce=0;Ce<J;Ce++)Ee=Yn(k,V.charAt(Ce));return k.u?Jt(k,Ee):k.s.toString()}return k.h.toString()}function is(k){var V=k.g.toString(),J=0;if(k.l.ha()!=1)var Ee=!1;else Ee=k.g.toString(),Ee=Ee.charAt(0)=="1"&&Ee.charAt(1)!="0"&&Ee.charAt(1)!="1";return Ee?(J=1,k.h.g("1").g(" "),k.ba=!0):Ie(k.l,15)&&(Ee=new RegExp("^(?:"+xe(k.l,15)+")"),Ee=V.match(Ee),Ee!=null&&Ee[0]!=null&&0<Ee[0].length&&(k.ba=!0,J=Ee[0].length,k.h.g(V.substring(0,J)))),_e(k.g),k.g.g(V.substring(J)),V.substring(0,J)}function Lo(k){var V=k.aa.toString(),J=new RegExp("^(?:\\+|"+xe(k.l,11)+")");return J=V.match(J),J!=null&&J[0]!=null&&0<J[0].length?(k.ba=!0,J=J[0].length,_e(k.g),k.g.g(V.substring(J)),_e(k.h),k.h.g(V.substring(0,J)),V.charAt(0)!="+"&&k.h.g(" "),!0):!1}function Zn(k){if(k.g.h.length==0)return!1;var V=new tt,J=zt(k.g,V);return J==0?!1:(_e(k.g),k.g.g(V.toString()),V=ye(J),V=="001"?k.l=ce(k.oa,""+J):V!=k.la&&(k.l=Rn(k,V)),k.h.g(""+J).g(" "),k.o="",!0)}function Yn(k,V){var J=k.v.toString();if(0<=J.substring(k.$).search(k.ja)){var Ee=J.search(k.ja);return V=J.replace(k.ja,V),_e(k.v),k.v.g(V),k.$=Ee,V.substring(0,k.$+1)}return k.j.length==1&&(k.u=!1),k.ca="",k.s.toString()}var nn=en.h();function Hs(k){var V=nn,J=Se(V,k);switch(V=En(V,Je(k,1),J),V==null?k=-1:(k=pn(k),k=ie(k,V)),k){case 0:return"fixed-line";case 2:return"fixed-line-or-mobile";case 1:return"mobile";case 8:return"pager";case 7:return"personal-number";case 4:return"premium-rate";case 5:return"shared-cost";case 3:return"toll-free";case 9:return"uan";case 6:return"voip";default:case-1:return"unknown"}}function Gi(k){switch(k){case"fixed-line":return 0;case"fixed-line-or-mobile":return 2;case"mobile":return 1;case"pager":return 8;case"personal-number":return 7;case"premium-rate":return 4;case"shared-cost":return 5;case"toll-free":return 3;case"uan":return 9;case"voip":return 6;default:case"unknown":return-1}}function Jn(k){try{switch(it(k)){case 0:return"is-possible";case 1:return"invalid-country-code";case 3:return"too-long";case 2:return"too-short"}if(at(k))return"is-possible"}catch{}return"unknown"}function Ro(k){if(k.charAt(0)!=="+")return{parsed:V,ea:J};try{var V=Zt(nn,k,void 0)}catch{}if(V){var J=Se(nn,V);if(J!=null&&J!=="ZZ")return{parsed:V,ea:J}}for(var Ee=1;4>Ee;++Ee){if(J=void 0,k.length<Ee+1)return{parsed:V,ea:J};if(J=ye(k.substring(1,Ee+1)),J!=="ZZ")return{ea:J}}return{parsed:V,ea:void 0}}function Te(k,V){if(!(this instanceof Te))return new Te(k,V);if(typeof k=="string")var J=!1;else try{Ae(k),J=!0}catch{J=!1}let Ee;if(!J&&typeof k!="string")throw Error("Invalid phone number, expected a string");if(!J&&V!=null&&typeof V!="string")throw Error("Invalid region code, expected a string");if(J||(k=k.trim(),V&&k.charAt(0)==="+"&&(V=null),V||({ea:V=null,parsed:Ee}=Ro(k))),this.g={number:{},regionCode:V,valid:!1,possible:!1},J)this.h=k;else{if(this.h=null,this.g.number.input=k,!V){this.g.possibility="invalid-country-code";return}if(os(V)===0){this.g.possibility="invalid-country-code";return}try{this.h=Ee||Zt(nn,k,V)}catch{this.g.possibility=Jn(k);return}}this.g.number.international=wn(nn,this.h,1),this.g.number.national=wn(nn,this.h,2),this.g.number.e164=wn(nn,this.h,0),this.g.number.rfc3966=wn(nn,this.h,3),this.g.number.significant=pn(this.h),this.g.canBeInternationallyDialled=nn.ia(this.h),this.g.possible=at(this.h),this.g.valid=Ae(this.h),this.g.type=Hs(this.h),this.g.possibility=Jn(this.h)}var Tn=["PhoneNumber$$module$src$index"],dr=a;Tn[0]in dr||typeof dr.execScript>"u"||dr.execScript("var "+Tn[0]);for(var Ar;Tn.length&&(Ar=Tn.shift());)Tn.length||Te===void 0?dr[Ar]&&dr[Ar]!==Object.prototype[Ar]?dr=dr[Ar]:dr=dr[Ar]={}:dr[Ar]=Te;function os(k){return fi(k)?De(nn,k):0}Te.getCountryCodeForRegionCode=os,Te.getRegionCodeForCountryCode=function(k){return ye(k)};function qn(k){var V={};return k.filter(J=>V.hasOwnProperty(J)?!1:(V[J]=1,!0))}Te.getSupportedRegionCodes=function(){return qn(ns())},Te.getSupportedCallingCodes=function(){return qn(Ti())},Te.getExample=function(k,V){var J;return V?J=le(k,Gi(V)):J=le(k,0),new Te(J,k)},Te.getAsYouType=function(k){return new Jr(k)},Te.prototype.toJSON=function(){return this.g},Te.prototype.toJSON=Te.prototype.toJSON,Te.prototype.ia=function(){return this.g.canBeInternationallyDialled},Te.prototype.canBeInternationallyDialled=Te.prototype.ia,Te.prototype.za=function(){return this.g.valid},Te.prototype.isValid=Te.prototype.za,Te.prototype.ya=function(){return this.g.possible},Te.prototype.isPossible=Te.prototype.ya,Te.prototype.ua=function(){return this.g.type},Te.prototype.getType=Te.prototype.ua,Te.prototype.xa=function(){return this.g.type==="mobile"||this.g.type==="fixed-line-or-mobile"},Te.prototype.isMobile=Te.prototype.xa,Te.prototype.wa=function(){return this.g.type==="fixed-line"||this.g.type==="fixed-line-or-mobile"},Te.prototype.isFixedLine=Te.prototype.wa,Te.prototype.qa=function(k){return this.g.number[k??"e164"]},Te.prototype.getNumber=Te.prototype.qa,Te.prototype.ra=function(k){return Vi(this.h,k)},Te.prototype.getNumberFrom=Te.prototype.ra,Te.prototype.ta=function(){return this.g.regionCode},Te.prototype.getRegionCode=Te.prototype.ta,Te.prototype.ha=function(){return os(this.g.regionCode)},Te.prototype.getCountryCode=Te.prototype.ha;function Jr(k){this.l=k,this.j=new Sr(k),this.g=this.h=""}Jr.prototype.pa=function(k){this.h+=k;var V=this.j;return V.ka=po(V,k),this.g=V.ka},Jr.prototype.addChar=Jr.prototype.pa,Jr.prototype.Aa=function(){return this.g},Jr.prototype.number=Jr.prototype.Aa,Jr.prototype.Ba=function(){return this.h===""?this.g:this.reset(this.h.slice(0,this.h.length-1))},Jr.prototype.removeChar=Jr.prototype.Ba,Jr.prototype.reset=function(k){var V=this.j;if(V.ka="",_e(V.s),_e(V.aa),_e(V.v),V.$=0,V.ca="",_e(V.h),V.o="",_e(V.g),V.u=!0,V.na=!1,V.ba=!1,V.da=!1,V.j=[],V.ga=!1,V.l!=V.va&&(V.l=Rn(V,V.la)),this.g=this.h="",k){V=0;for(var J=k.length;V<J;++V)this.pa(k.charAt(V))}return this.g},Jr.prototype.reset=Jr.prototype.reset,Jr.prototype.sa=function(){return new Te(this.g,this.l)},Jr.prototype.getPhoneNumber=Jr.prototype.sa}).call(s.exports||typeof globalThis<"u"&&globalThis||typeof In<"u"&&In||typeof window<"u"&&window||typeof self<"u"&&self||In)})(ly);var D5=ly.exports;(function(s){const a="PhoneNumber$$module$src$index";s.exports=D5[a]||(typeof globalThis<"u"&&globalThis||typeof In<"u"&&In||typeof window<"u"&&window||typeof self<"u"&&self||In)[a],Object.defineProperty(s.exports,"__esModule",{value:!0}),s.exports.default=s.exports})(ay);var O5=ay.exports;const z5=Gs(O5);var B5={},La={},Qo={},Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.EARTH_RADIUS_KILOMETERS=Bi.EARTH_RADIUS_MILES=Bi.Projection=Bi.Unit=void 0;const F5=Object.freeze({DEGREE:Symbol("deg"),KILOMETER:Symbol("km"),MILE:Symbol("mi"),RADIAN:Symbol("r")});Bi.Unit=F5;const N5=Object.freeze({MERCATOR:Symbol("mercator"),SPHERICAL:Symbol("spherical")});Bi.Projection=N5;const j5=3959;Bi.EARTH_RADIUS_MILES=j5;const U5=6371;Bi.EARTH_RADIUS_KILOMETERS=U5;var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.Coordinate=void 0;const Pr=Bi,V5=["latitude","lat"],G5=["longitude","lon","lng","long"];function Qg(s,a){for(const c of a)if(s[c]||s[c]===0)return s[c]}function e_(s){switch(typeof s){case"string":case"number":const a=Number.parseFloat(s);if(Number.isNaN(a))throw new Error(`'${s}' must be convertible to a Number'`);return a;default:throw new Error(`typeof '${s}' must be a number or a string that can be converted to a number, is '${typeof s}'`)}}function Fa(s){return s*Math.PI/180}function Yo(s){return s/Math.PI*180}function Z5(s,a){const c=Fa(s.latitude),m=Fa(a.latitude),v=m-c,$=Fa(a.longitude-s.longitude),S=Math.pow(Math.sin(v/2),2)+Math.cos(c)*Math.cos(m)*Math.pow(Math.sin($/2),2);return 2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S))}function q5(s,a){const c=Math.tan(Math.PI/360*(s+90)),m=Math.tan(Math.PI/360*(a+90));return Math.log(m/c)}function H5(s,a){const m=Math.tan(Math.PI/360*(s+90))*Math.pow(Math.E,a);return Math.atan(m)*360/Math.PI-90}class W5{constructor(a,c){let m=a;typeof a=="object"&&(m=Qg(a,V5),c=Qg(a,G5),m=typeof m=="function"?m():m,c=typeof c=="function"?c():c),this.latitude=m,this.longitude=c}get latitude(){return this._lat}get longitude(){return this._lon}get normalLon(){return((this._lon+180)%360+360)%360-180}set latitude(a){this._lat=Math.max(-90,Math.min(e_(a),90))}set longitude(a){this._lon=e_(a)}add(a,c,m=Pr.Unit.DEGREE,v=Pr.Projection.SPHERICAL){if(v==Pr.Projection.MERCATOR&&(m==Pr.Unit.DEGREE||m==Pr.Unit.RADIAN)){const $=m==Pr.Unit.DEGREE?Fa(a):a,S=m==Pr.Unit.DEGREE?c:Yo(c);this.latitude=H5(this.latitude,$),this.longitude+=S}else switch(m){case Pr.Unit.DEGREE:this.latitude+=a,this.longitude+=c;break;case Pr.Unit.KILOMETER:this.latitude+=Yo(a)*Pr.EARTH_RADIUS_KILOMETERS,this.longitude+=Yo(c)*Pr.EARTH_RADIUS_KILOMETERS*Math.cos(Fa(this.latitude));break;case Pr.Unit.MILE:this.latitude+=Yo(a)*Pr.EARTH_RADIUS_MILES,this.longitude+=Yo(c)*Pr.EARTH_RADIUS_MILES*Math.cos(Fa(this.latitude));break;case Pr.Unit.RADIAN:this.latitude+=Yo(a),this.longitude+=Yo(c);break}}distanceTo(a,c=Pr.Unit.MILE,m=Pr.Projection.SPHERICAL){if(m==Pr.Projection.MERCATOR&&(c==Pr.Unit.DEGREE||c==Pr.Unit.RADIAN)){const v=q5(this.latitude,a.latitude),$=Math.abs(a.normalLon-this.normalLon),S=Fa(Math.min($,360-$)),P=Math.sqrt(Math.pow(v,2)+Math.pow(S,2));switch(c){case Pr.Unit.DEGREE:return Yo(P);case Pr.Unit.RADIAN:return P}}else{const v=Z5(this,a);switch(c){case Pr.Unit.DEGREE:return Yo(v);case Pr.Unit.KILOMETER:return v*Pr.EARTH_RADIUS_KILOMETERS;case Pr.Unit.MILE:return v*Pr.EARTH_RADIUS_MILES;case Pr.Unit.RADIAN:return v}}}equals(a){return a&&a.latitude===this.latitude&&a.longitude===this.longitude}searchQueryString(){return`${this.latitude},${this.longitude}`}}Kc.Coordinate=W5;var n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.GeoBounds=void 0;const Wf=Bi,Ra=Kc;class K5{static fit(a){const c=a.map(I=>I.latitude),m=Math.max(...c),v=Math.min(...c),$=a.map(I=>I.normalLon).sort((I,N)=>I-N),S=$.map((I,N)=>({distance:(N<$.length-1?$[N+1]:$[0]+360)-I,index:N})).reduce((I,N)=>N.distance>I.distance?N:I).index,P=$[S],o=$[(S+1)%$.length];return new this(new Ra.Coordinate(v,o),new Ra.Coordinate(m,P))}constructor(a,c){this._ne=new Ra.Coordinate(c),this._sw=new Ra.Coordinate(a)}get ne(){return this._ne}get sw(){return this._sw}set ne(a){this._ne=new Ra.Coordinate(a)}set sw(a){this._sw=new Ra.Coordinate(a)}contains(a){const c=this._sw.latitude<=a.latitude&&a.latitude<=this._ne.latitude,m=this._ne.longitude-this._sw.longitude>=360,v=this._sw.normalLon<=this._ne.normalLon?this._sw.normalLon<=a.normalLon&&a.normalLon<=this._ne.normalLon:this._sw.normalLon<=a.normalLon||a.normalLon<=this._ne.normalLon;return c&&(m||v)}extend(a){if(this._ne.latitude=Math.max(this._ne.latitude,a.latitude),this._sw.latitude=Math.min(this._sw.latitude,a.latitude),!this.contains(a)){const c=((a.longitude-this._ne.longitude)%360+360)%360,m=((this._sw.longitude-a.longitude)%360+360)%360;c<m?this._ne.longitude+=c:this._sw.longitude-=m}}getCenter(a=Wf.Projection.SPHERICAL){const c=new Ra.Coordinate(this._ne.latitude,this._sw.longitude),m=this._sw.distanceTo(c,Wf.Unit.DEGREE,a),v=(c.longitude+this._ne.longitude)/2+(this._ne.longitude<c.longitude?180:0);return c.add(-m/2,0,Wf.Unit.DEGREE,a),c.longitude=v,c}}n1.GeoBounds=K5;(function(s){var a=In&&In.__createBinding||(Object.create?function(m,v,$,S){S===void 0&&(S=$);var P=Object.getOwnPropertyDescriptor(v,$);(!P||("get"in P?!v.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return v[$]}}),Object.defineProperty(m,S,P)}:function(m,v,$,S){S===void 0&&(S=$),m[S]=v[$]}),c=In&&In.__exportStar||function(m,v){for(var $ in m)$!=="default"&&!Object.prototype.hasOwnProperty.call(v,$)&&a(v,m,$)};Object.defineProperty(s,"__esModule",{value:!0}),c(Bi,s),c(Kc,s),c(n1,s)})(Qo);var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.assertInstance=Fi.assertType=Fi.Type=void 0;const X5={UNDEFINED:"undefined",NULL:"object",BOOLEAN:"boolean",NUMBER:"number",BIGINT:"bigint",STRING:"string",SYMBOL:"symbol",FUNCTION:"function",OBJECT:"object"};Fi.Type=X5;function Y5(s,a){if(typeof a!="string")throw new Error("Assertion error: 'type' must be a string");if(typeof s!==a)throw new Error(`Expected an object of type '${a}' but received '${typeof s}'`)}Fi.assertType=Y5;function J5(s,a){let c;try{c=s instanceof a}catch{throw new Error("Assertion error: 'instanceClass' is not a valid constructor")}if(!c)throw new Error(`Expected an instance of '${a.name}' but received '${s.constructor.name}'`)}Fi.assertInstance=J5;var Kf={},ka={},Da={},t_;function Ua(){if(t_)return Da;t_=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.ProviderMap=Da.ProviderMapOptions=void 0;const s=Fi,a=rs();class c{constructor($,S){(0,s.assertInstance)($,a.MapProvider),(0,s.assertInstance)(S,HTMLElement),this.providerMapClass=$.getMapClass(),this.wrapper=S,this.controlEnabled=!0,this.panHandler=()=>{},this.panStartHandler=()=>{},this.providerOptions={}}withControlEnabled($){return this.controlEnabled=$,this}withPanHandler($){return(0,s.assertType)($,s.Type.FUNCTION),this.panHandler=$,this}withPanStartHandler($){return(0,s.assertType)($,s.Type.FUNCTION),this.panStartHandler=$,this}withProviderOptions($){return this.providerOptions=$,this}build(){const $=this.providerMapClass;return new $(this)}}Da.ProviderMapOptions=c;let m=class{constructor($){(0,s.assertInstance)($,c),this._panHandler=$.panHandler,this._panStartHandler=$.panStartHandler}getCenter(){throw new Error("not implemented")}getZoom(){throw new Error("not implemented")}setCenter($,S){throw new Error("not implemented")}setZoom($,S){throw new Error("not implemented")}setZoomCenter($,S,P){this.setZoom($,P),this.setCenter(S,P)}};return Da.ProviderMap=m,Da}var Jo={},r_;function Va(){if(r_)return Jo;r_=1,Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.HTMLProviderPin=Jo.ProviderPin=Jo.ProviderPinOptions=void 0;const s=Fi,a=rs();class c{constructor(P){(0,s.assertInstance)(P,a.MapProvider),this.providerPinClass=P.getPinClass(),this.clickHandler=()=>{},this.focusHandler=o=>{},this.hoverHandler=o=>{},this.icons={}}withClickHandler(P){return(0,s.assertType)(P,s.Type.FUNCTION),this.clickHandler=P,this}withFocusHandler(P){return(0,s.assertType)(P,s.Type.FUNCTION),this.focusHandler=P,this}withHoverHandler(P){return(0,s.assertType)(P,s.Type.FUNCTION),this.hoverHandler=P,this}withIcons(P){return this.icons=P,this}build(){const P=this.providerPinClass;return new P(this)}}Jo.ProviderPinOptions=c;let m=class{constructor(P){(0,s.assertInstance)(P,c),this._clickHandler=P.clickHandler,this._focusHandler=P.focusHandler,this._hoverHandler=P.hoverHandler,this._icons=P.icons}setCoordinate(P){throw new Error("not implemented")}setMap(P,o){throw new Error("not implemented")}setProperties(P){throw new Error("not implemented")}};Jo.ProviderPin=m;const v=Object.freeze({backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"contain",left:"0",outline:"none",pointerEvents:"auto",position:"absolute",top:"0"});class $ extends m{static get baseStyle(){return v}constructor(P){super(P),this._pinEl=document.createElement("button"),Object.assign(this._pinEl.style,this.constructor.baseStyle),this._pinAlt=document.createElement("span"),this._pinAlt.classList.add("sr-only"),this._pinEl.appendChild(this._pinAlt),this._wrapper=document.createElement("div"),this._wrapper.style.pointerEvents="none",this._wrapper.appendChild(this._pinEl),this.addListeners()}addListeners(){this._wrapper.addEventListener("click",()=>this._clickHandler()),this._wrapper.addEventListener("focusin",()=>this._focusHandler(!0)),this._wrapper.addEventListener("focusout",()=>this._focusHandler(!1)),this._wrapper.addEventListener("mouseover",()=>this._hoverHandler(!0)),this._wrapper.addEventListener("mouseout",()=>this._hoverHandler(!1))}getPinElement(){return this._pinEl}getWrapperElement(){return this._wrapper}setProperties(P){this.setElementProperties(P);const o=P.getClass(),I=P.getElement()||this._pinEl,N=P.getZIndex();I.style.pointerEvents="auto",this._wrapper&&(this._wrapper.style.zIndex=N,this._wrapper.setAttribute("class",o),I!=this._wrapper.children[0]&&(this._wrapper.children[0].style.pointerEvents="",this._wrapper.removeChild(this._wrapper.children[0]),this._wrapper.appendChild(I)))}setElementProperties(P){const o=P.getAnchorX(),I=P.getAnchorY(),N=P.getHeight(),Y=this._icons[P.getIcon()],U=P.getSRText(),oe=P.getWidth();Object.assign(this._pinEl.style,{backgroundImage:Y?`url("${Y}")`:"",height:N+"px",transform:`translate(${-100*o}%, ${-100*I}%)`,width:oe+"px"}),this._pinAlt.innerText=U}}return Jo.HTMLProviderPin=$,Jo}var n_;function rs(){if(n_)return ka;n_=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.MapProvider=ka.MapProviderOptions=void 0;const s=Fi,a=Ua(),c=Va();class m{constructor(){this.loadFunction=(S,P,o,I)=>S(),this.mapClass=a.ProviderMap,this.pinClass=c.ProviderPin,this.providerName=""}withLoadFunction(S){return(0,s.assertType)(S,s.Type.FUNCTION),this.loadFunction=S,this}withMapClass(S){return this.mapClass=S,this}withPinClass(S){return this.pinClass=S,this}withProviderName(S){return this.providerName=S,this}build(){return new v(this)}}ka.MapProviderOptions=m;let v=class{constructor(S){(0,s.assertInstance)(S,m),this._loadFunction=S.loadFunction,this._mapClass=S.mapClass,this._pinClass=S.pinClass,this._providerName=S.providerName,this._loadPromise=new Promise((P,o)=>{this._resolveLoad=P,this._rejectLoad=o}),this._apiKey="",this._loadInvoked=!1,this._loaded=!1,this._options={}}get loaded(){return this._loaded}getMapClass(){return this._mapClass}getPinClass(){return this._pinClass}getProviderName(){return this._providerName}async load(S=this._apiKey,P=this._options){this._loadInvoked||(this._loadInvoked=!0,this._loadFunction(this._resolveLoad,this._rejectLoad,S,P)),await this.ready(),this._loaded=!0}async ready(){await this._loadPromise}setLoadOptions(S,P=null){this._loadInvoked||(this._apiKey=S,this._options=P||this._options)}};return ka.MapProvider=v,ka}var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.PinProperties=void 0;class Q5{constructor(){this._anchorX=.5,this._anchorY=1,this._height=39,this._icon="default",this._srText="map pin",this._width=33,this._zIndex=0,this._class="",this._element=null}getAnchorX(){return this._anchorX}getAnchorY(){return this._anchorY}getClass(){return this._class}getElement(){return this._element}getHeight(){return this._height}getIcon(){return this._icon}getSRText(){return this._srText}getWidth(){return this._width}getZIndex(){return this._zIndex}setAnchorX(a){return this._anchorX=a,this}setAnchorY(a){return this._anchorY=a,this}setClass(a){return this._class=a,this}setElement(a){return this._element=a,this}setHeight(a){return this._height=a,this}setIcon(a){return this._icon=a,this}setSRText(a){return this._srText=a,this}setWidth(a){return this._width=a,this}setZIndex(a){return this._zIndex=a,this}}Xc.PinProperties=Q5;var i_;function dy(){return i_||(i_=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.PinProperties=s.MapPin=s.MapPinOptions=void 0;const a=Qo,c=Fi,m=cy(),v=rs(),$=Xc;Object.defineProperty(s,"PinProperties",{enumerable:!0,get:function(){return $.PinProperties}});const S=Va();class P{constructor(){this.coordinate=new a.Coordinate(0,0),this.hideOffscreen=!1,this.icons={},this.propertiesForStatus=N=>new $.PinProperties,this.provider=null,this.type=""}withCoordinate(N){return this.coordinate=new a.Coordinate(N),this}withHideOffscreen(N){return this.hideOffscreen=N,this}withIcon(N,Y){return this.icons[N]=Y,this}withPropertiesForStatus(N){return(0,c.assertType)(N,c.Type.FUNCTION),this.propertiesForStatus=N,this}withProvider(N){return(0,c.assertInstance)(N,v.MapProvider),this.provider=N,this}withType(N){return this.type=N,this}build(){return new o(this)}}s.MapPinOptions=P;class o{constructor(N){if((0,c.assertInstance)(N,P),(0,c.assertInstance)(N.provider,v.MapProvider),!N.provider.loaded)throw new Error(`MapProvider '${N.provider.getProviderName()}' is not loaded. The MapProvider must be loaded before calling MapPin constructor.`);this._coordinate=N.coordinate,this._hideOffscreen=N.hideOffscreen,this._icons=Object.assign({},N.icons),this._propertiesForStatus=N.propertiesForStatus,this._type=N.type,this._clickHandler=()=>{},this._focusHandler=Y=>this._hoverHandler(Y),this._hoverHandler=Y=>{},this._hidden=!1,this._cancelHiddenUpdater=()=>{},this._map=null,this._pin=new S.ProviderPinOptions(N.provider).withIcons(Object.assign({},this._icons)).withClickHandler(()=>this._clickHandler()).withFocusHandler(Y=>this._focusHandler(Y)).withHoverHandler(Y=>this._hoverHandler(Y)).build(),this._pin.setCoordinate(N.coordinate),this._status={},this.setStatus(this._status)}getCoordinate(){return this._coordinate}getIcon(N){return this._icons[N]}getMap(){return this._map}getProviderPin(){return this._pin}getType(){return this._type}remove(){this.setMap(null)}setClickHandler(N){(0,c.assertType)(N,c.Type.FUNCTION),this._clickHandler=N}setCoordinate(N){this._coordinate=new a.Coordinate(N),this._pin.setCoordinate(this._coordinate),this._hideOffscreen&&this._hideIfOffscreen()}setFocusHandler(N){(0,c.assertType)(N,c.Type.FUNCTION),this._focusHandler=N}setHoverHandler(N){(0,c.assertType)(N,c.Type.FUNCTION),this._hoverHandler=N}setMap(N){if(N!=this._map&&(N!==null&&(0,c.assertInstance)(N,m.Map),this._pin.setMap(N,this._hidden?null:this._map),this._map=N,this._hidden=!1,this._cancelHiddenUpdater(),N&&this._hideOffscreen)){let Y=!1;const U=new Promise(oe=>{this._cancelHiddenUpdater=()=>{Y=!0,oe()}});(async()=>{for(;!Y;)this._hideIfOffscreen(),await Promise.race([U,N.moving()]),await Promise.race([U,N.idle()])})()}}setStatus(N){Object.assign(this._status,N),this._pin.setProperties(this._propertiesForStatus(this._status))}_hideIfOffscreen(){if(this._map){const N=this._map.getBounds().contains(this._coordinate);this._hidden&&N?this._pin.setMap(this._map,null):!this._hidden&&!N&&this._pin.setMap(null,this._map),this._hidden=!N}}}s.MapPin=o}(Kf)),Kf}var o_;function cy(){if(o_)return La;o_=1,Object.defineProperty(La,"__esModule",{value:!0}),La.Map=La.MapOptions=void 0;const s=Qo,a=Qo,c=Qo,m=Fi,v=dy(),$=rs(),S=Ua(),P=.98;function o(Y,U){return Math.max(typeof Y==m.Type.FUNCTION?Y():Y||0,0)/U}class I{constructor(){this.controlEnabled=!0,this.defaultCenter=new a.Coordinate(39.83,-98.58),this.defaultZoom=4,this.legendPins=[],this.padding={bottom:()=>50,left:()=>50,right:()=>50,top:()=>50},this.panHandler=(U,oe)=>{},this.panStartHandler=U=>{},this.provider=null,this.providerOptions={},this.singlePinZoom=14,this.wrapper=null}withControlEnabled(U){return this.controlEnabled=U,this}withDefaultCenter(U){return this.defaultCenter=new a.Coordinate(U),this}withDefaultZoom(U){return this.defaultZoom=U,this}withLegendPins(U){return this.legendPins=Array.from(U),this}withPadding(U){return this.padding=U,this}withPanHandler(U){return(0,m.assertType)(U,m.Type.FUNCTION),this.panHandler=U,this}withPanStartHandler(U){return(0,m.assertType)(U,m.Type.FUNCTION),this.panStartHandler=U,this}withProvider(U){return(0,m.assertInstance)(U,$.MapProvider),this.provider=U,this}withProviderOptions(U){return this.providerOptions=U,this}withSinglePinZoom(U){return this.singlePinZoom=U,this}withWrapper(U){return(0,m.assertInstance)(U,HTMLElement),this.wrapper=U,this}build(){return new N(this)}}La.MapOptions=I;class N{constructor(U){if((0,m.assertInstance)(U,I),(0,m.assertInstance)(U.provider,$.MapProvider),(0,m.assertInstance)(U.wrapper,HTMLElement),!U.provider.loaded)throw new Error(`MapProvider '${U.provider.getProviderName()}' is not loaded. The MapProvider must be loaded before calling Map constructor.`);for(this._defaultCenter=U.defaultCenter,this._defaultZoom=U.defaultZoom,this._legendPins=U.legendPins,this._provider=U.provider,this._singlePinZoom=U.singlePinZoom,this._wrapper=U.wrapper,this._padding={},this.setPadding(U.padding),this._cachedBounds=null,this._resolveIdle=()=>{},this._resolveMoving=()=>{},this._idlePromise=Promise.resolve(),this._setIdle(),this.setPanHandler(U.panHandler),this.setPanStartHandler(U.panStartHandler);this._wrapper.firstChild;)this._wrapper.removeChild(this._wrapper.lastChild);this._panHandlerRunning=!1,this._panStartHandlerRunning=!1,this._map=new S.ProviderMapOptions(U.provider,this._wrapper).withControlEnabled(U.controlEnabled).withPanHandler(()=>this.panHandler()).withPanStartHandler(()=>this.panStartHandler()).withProviderOptions(U.providerOptions).build(),this.setZoomCenter(this._defaultZoom,this._defaultCenter),this._currentBounds=this.getBounds()}fitCoordinates(U,oe=!1,ae=this._singlePinZoom){U.length?this.setBounds(c.GeoBounds.fit(U),oe,this._padding,ae):this.setZoomCenter(this._defaultZoom,this._defaultCenter,oe)}getBounds(){if(!this._cachedBounds){const U=this._wrapper.offsetHeight,oe=this._wrapper.offsetWidth,ae=this.getZoom(),$e=this.getCenter(),Ie=360/Math.pow(2,ae+8),Be=oe*Ie,xe=U*Ie;this._cachedBounds=new c.GeoBounds($e,$e),this._cachedBounds.ne.add(xe/2,Be/2,s.Unit.DEGREE,s.Projection.MERCATOR),this._cachedBounds.sw.add(-xe/2,-Be/2,s.Unit.DEGREE,s.Projection.MERCATOR),this.moving().then(()=>this._cachedBounds=null)}return new c.GeoBounds(this._cachedBounds.sw,this._cachedBounds.ne)}getCenter(){return this._map.getCenter()}getProviderMap(){return this._map}getZoom(){return this._map.getZoom()}async idle(){await this._idlePromise}async moving(){await this._movingPromise}newPinOptions(){return new v.MapPinOptions().withProvider(this._provider)}panHandler(){this._panHandlerRunning||(this._panHandlerRunning=!0,requestAnimationFrame(()=>{const U=this._currentBounds;this._currentBounds=this.getBounds(),this._panHandler(U,new c.GeoBounds(new a.Coordinate(this._currentBounds.sw),new a.Coordinate(this._currentBounds.ne))),this._panHandlerRunning=!1}),this._setIdle())}panStartHandler(){this._panStartHandlerRunning||(this._panStartHandlerRunning=!0,requestAnimationFrame(()=>{this._panStartHandler(new c.GeoBounds(new a.Coordinate(this._currentBounds.sw),new a.Coordinate(this._currentBounds.ne))),this._panStartHandlerRunning=!1}),this._setMoving())}setBounds({ne:U,sw:oe},ae=!1,$e={},Ie=1/0){const Be=this._wrapper.offsetHeight,xe=this._wrapper.offsetWidth;if(!Be||!xe)return;let Je=o($e.bottom,Be),We=o($e.left,xe),ht=o($e.right,xe),Lt=o($e.top,Be),Ye=We+ht,ft=Je+Lt;Ye>P&&(We*=P/Ye,ht*=P/Ye,Ye=P),ft>P&&(Je*=P/ft,Lt*=P/ft,ft=P);const gt=Be*(1-ft),ve=xe*(1-Ye),Ke=new c.GeoBounds(oe,U),Ct=new a.Coordinate(Ke.ne.latitude,Ke.sw.longitude),tt=Ke.sw.distanceTo(Ct,s.Unit.DEGREE,s.Projection.MERCATOR),_e=(Ke.ne.longitude-Ct.longitude+360)%360;let je=Math.max(tt,_e*gt/ve)/(1-ft),It=Math.max(_e,tt*ve/gt)/(1-Ye),Tt=Math.log2(xe*360/It)-8;Tt>Ie&&(Tt=Ie,It=xe*360/2**(Tt+8),je=It*Be/xe);const Wt=Ke.getCenter(s.Projection.MERCATOR),ut=(Lt-Je)/2*je,Br=(ht-We)/2*It;Wt.add(ut,Br,s.Unit.DEGREE,s.Projection.MERCATOR),this.setZoomCenter(Tt,Wt,ae)}setCenter(U,oe=!1){this._map.setCenter(new a.Coordinate(U),oe)}setPadding({bottom:U=this._padding.bottom,left:oe=this._padding.left,right:ae=this._padding.right,top:$e=this._padding.top}){return this._padding={bottom:U,left:oe,right:ae,top:$e},this}setPanHandler(U){(0,m.assertType)(U,m.Type.FUNCTION),this._panHandler=U}setPanStartHandler(U){(0,m.assertType)(U,m.Type.FUNCTION),this._panStartHandler=U}setZoom(U,oe=!1){this._map.setZoom(U,oe)}setZoomCenter(U,oe,ae=!1){this._map.setZoomCenter(U,oe,ae)}_setIdle(){this._resolveMoving(),this._movingPromise=new Promise(U=>this._resolveMoving=U),this._resolveIdle()}_setMoving(){this._resolveIdle(),this._idlePromise=new Promise(U=>this._resolveIdle=U),this._resolveMoving()}}return La.Map=N,La}var td={},Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.LoadScript=void 0;function e6(s,a=()=>{}){const c=document.createElement("script");c.async=!0,c.onload=a,c.src=s,document.head.appendChild(c)}Yc.LoadScript=e6;Object.defineProperty(td,"__esModule",{value:!0});td.Library=td.GoogleMaps=void 0;const t6=Qo,r6=Yc,n6=rs(),i6=Ua(),o6=Va(),vp={GEOCODER:"geocoder",PLACES:"places"};td.Library=vp;class s6 extends i6.ProviderMap{constructor(a){super(a),this.map=new google.maps.Map(a.wrapper,Object.assign({disableDefaultUI:!a.controlEnabled,fullscreenControl:!1,gestureHandling:a.controlEnabled?"auto":"none",mapTypeControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,zoomControl:a.controlEnabled,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}},a.providerOptions)),this._moving=!1,google.maps.event.addListener(this.map,"bounds_changed",()=>{this._moving||(this._moving=!0,this._panStartHandler())}),google.maps.event.addListener(this.map,"idle",()=>{this._moving=!1,this._panHandler()})}getCenter(){return new t6.Coordinate(this.map.getCenter())}getZoom(){return this.map.getZoom()}setCenter(a,c){const m=new google.maps.LatLng(a.latitude,a.longitude);c?this.map.panTo(m):this.map.setCenter(m)}setZoom(a,c){this.map.setZoom(Math.floor(a))}setZoomCenter(a,c,m){this.setCenter(c,m),this.setZoom(a,m)}}class a6 extends o6.HTMLProviderPin{constructor(a){super(a),this._wrapper.style.position="absolute",google.maps.OverlayView.preventMapHitsAndGesturesFrom(this._wrapper);const c=this;class m extends google.maps.OverlayView{draw(){var $;const S=($=this.getProjection())===null||$===void 0?void 0:$.fromLatLngToDivPixel(c._latLng);S&&(c._wrapper.style.left=S.x+"px",c._wrapper.style.top=S.y+"px")}onAdd(){this.getPanes().floatPane.appendChild(c._wrapper)}onRemove(){var $;($=c._wrapper.parentNode)===null||$===void 0||$.removeChild(c._wrapper)}}this.pin=new m}setCoordinate(a){this._latLng=new google.maps.LatLng(a.latitude,a.longitude),this.pin.draw()}setMap(a,c){this.pin.setMap(a?a.getProviderMap().map:null)}}const s_="GoogleMapsCallback_b7d77ff2",l6="https://maps.googleapis.com/maps/api/js";function d6(s,a,c,{autocomplete:m=!1,channel:v=window.location.hostname,client:$,language:S,libraries:P=[],params:o={}}={}){window[s_]=s,m&&P.push(vp.GEOCODER,vp.PLACES);const I=Object.assign({callback:s_,channel:v,language:S,libraries:P.join(",")},o);c&&(I.key=c),$&&(I.client=$),(0,r6.LoadScript)(l6+"?"+Object.entries(I).map(([N,Y])=>N+"="+Y).join("&"))}const c6=new n6.MapProviderOptions().withLoadFunction(d6).withMapClass(s6).withPinClass(a6).withProviderName("Google").build();td.GoogleMaps=c6;var i1={};Object.defineProperty(i1,"__esModule",{value:!0});i1.MapboxMaps=void 0;const u6=Qo,h6=rs(),f6=Ua(),p6=Va();class m6 extends f6.ProviderMap{constructor(a){if(super(a),this.map=new mapboxgl.Map(Object.assign({container:a.wrapper,interactive:a.controlEnabled,style:"mapbox://styles/mapbox/streets-v9"},a.providerOptions)),a.controlEnabled){const c=new mapboxgl.NavigationControl({showCompass:!1});this.map.addControl(c)}this.map.on("movestart",()=>this._panStartHandler()),this.map.on("moveend",()=>this._panHandler())}getCenter(){return new u6.Coordinate(this.map.getCenter())}getZoom(){return this.map.getZoom()+1}setCenter(a,c){const m=new mapboxgl.LngLat(a.longitude,a.latitude);this.map[c?"panTo":"setCenter"](m)}setZoom(a,c){this.map[c?"zoomTo":"setZoom"](a-1)}setZoomCenter(a,c,m){const v=new mapboxgl.LngLat(c.longitude,c.latitude);this.map[m?"easeTo":"jumpTo"]({center:v,zoom:a-1})}}class g6 extends p6.HTMLProviderPin{constructor(a){super(a),this._wrapper.style.position="relative",this.pin=new mapboxgl.Marker({anchor:"top-left",element:this._wrapper})}setCoordinate(a){this.pin.setLngLat(new mapboxgl.LngLat(a.longitude,a.latitude))}setMap(a,c){a?this.pin.addTo(a.getProviderMap().map):this.pin.remove()}}function _6(s,a,c,{version:m="v1.13.0"}={}){const v=`https://api.mapbox.com/mapbox-gl-js/${m}/mapbox-gl`,$=document.createElement("link");$.rel="stylesheet",$.href=v+".css";const S=document.createElement("script");S.src=v+".js",S.onload=()=>{mapboxgl.accessToken=c,s()},document.head.appendChild($),document.head.appendChild(S)}const y6=new h6.MapProviderOptions().withLoadFunction(_6).withMapClass(m6).withPinClass(g6).withProviderName("Mapbox").build();i1.MapboxMaps=y6;var o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.BingMaps=void 0;const v6=Qo,x6=Yc,b6=rs(),$6=Ua(),w6=Va();let uy;function E6(){class s extends Microsoft.Maps.CustomOverlay{constructor(){super({beneathLabels:!1}),this._container=document.createElement("div"),this._map=null,this._pins=new Set,this._viewChangeEventHandler=null,this._container.style.position="absolute",this._container.style.left="0",this._container.style.top="0"}addPin(c){this._pins.add(c),c._wrapper.style.position="absolute",this._container.appendChild(c._wrapper),this._map&&this.updatePinPosition(c)}onAdd(){this._map=this.getMap(),this.setHtmlElement(this._container)}onLoad(){this._viewChangeEventHandler=Microsoft.Maps.Events.addHandler(this._map,"viewchange",()=>this.updatePinPositions()),this.updatePinPositions()}onRemove(){Microsoft.Maps.Events.removeHandler(this._viewChangeEventHandler),this._map=null}removePin(c){this._pins.delete(c),this._container.removeChild(c._wrapper)}updatePinPosition(c){if(!this._map)return;const m=this._map.tryLocationToPixel(c._location,Microsoft.Maps.PixelReference.control);c._wrapper.style.left=m.x+"px",c._wrapper.style.top=m.y+"px"}updatePinPositions(){this._pins.forEach(c=>this.updatePinPosition(c))}}uy=s}class T6 extends $6.ProviderMap{constructor(a){super(a),this.wrapper=a.wrapper,this.map=new Microsoft.Maps.Map(this.wrapper,Object.assign({disablePanning:!a.controlEnabled,disableZooming:!a.controlEnabled,showLocateMeButton:!1,showMapTypeSelector:!1,showScalebar:!1,showTrafficButton:!1},a.providerOptions)),this.pinOverlay=new uy(this.map),this.map.layers.insert(this.pinOverlay),Microsoft.Maps.Events.addHandler(this.map,"viewchangestart",()=>this._panStartHandler()),Microsoft.Maps.Events.addHandler(this.map,"viewchangeend",()=>this._panHandler())}getCenter(){return new v6.Coordinate(this.map.getCenter())}getZoom(){return this.map.getZoom()}setCenter(a,c){const m=new Microsoft.Maps.Location(a.latitude,a.longitude);this.map.setView({center:m}),this.pinOverlay.updatePinPositions()}setZoom(a,c){this.map.setView({zoom:Math.floor(a)}),this.pinOverlay.updatePinPositions()}}class S6 extends w6.HTMLProviderPin{static getId(){return this._pinId=(this._pinId||0)+1,this._pinId}constructor(a){super(a),this._map=null,this._location=new Microsoft.Maps.Location(0,0)}setCoordinate(a){this._location=new Microsoft.Maps.Location(a.latitude,a.longitude),this._map&&this._map.getProviderMap().pinOverlay.updatePinPosition(this)}setMap(a,c){c&&c.getProviderMap().pinOverlay.removePin(this),a&&a.getProviderMap().pinOverlay.addPin(this),this._map=a}}const a_="BingMapsCallback_593d7d33",C6="https://www.bing.com/api/maps/mapcontrol";function A6(s,a,c,{params:m={}}={}){window[a_]=()=>{E6(),s()};const v=Object.assign({callback:a_,key:c},m);(0,x6.LoadScript)(C6+"?"+Object.entries(v).map(([$,S])=>$+"="+S).join("&"))}const I6=new b6.MapProviderOptions().withLoadFunction(A6).withMapClass(T6).withPinClass(S6).withProviderName("Bing").build();o1.BingMaps=I6;var rd={};Object.defineProperty(rd,"__esModule",{value:!0});rd.gcj02ToBD09=rd.BaiduMaps=void 0;const hy=Qo,M6=rs(),P6=Ua(),L6=Va(),xp=Math.log2(1.6745627884839434),R6=4,k6=19,bp="js-baidu-neg-lng-fix";let fy;const D6=new Promise(s=>fy=s),O6="https://api.map.baidu.com/geoconv/v1/";let Dc=[];const z6="gcj02ToBD09Callback_b872c21c";let B6=0,l_;async function Kp(s){return await new Promise((a,c)=>{Dc.push({coordinates:s,resolve:a,reject:c}),Dc.length==1&&(l_=setTimeout(m,100)),Dc.length>40&&(clearTimeout(l_),m());function m(){const v=Dc;Dc=[];const $=[].concat(...v.map(o=>o.coordinates)),S=z6+"_"+B6++,P=document.createElement("script");window[S]=o=>{if(o.status){const Y=new Error(`Unable to convert coordinates to BD-09: Received status code ${o.status}${o.message?": "+o.message:""}`);v.forEach(U=>U.reject(Y))}const I=o.result.map(Y=>new hy.Coordinate(Y.y,Y.x));let N=0;v.forEach(Y=>{Y.resolve(I.slice(N,N+=Y.coordinates.length))}),delete window[S],P.parentNode.removeChild(P)},D6.then(o=>{const I={ak:o,callback:S,coords:$.map(N=>`${N.longitude},${N.latitude}`).join(";"),from:3,to:5};P.src=O6+"?"+Object.entries(I).map(([N,Y])=>N+"="+Y).join("&"),document.head.appendChild(P)})}})}rd.gcj02ToBD09=Kp;class F6 extends P6.ProviderMap{constructor(a){super(a);const c=!!(window.MSInputMethodContext&&document.documentMode);this._wrapper=a.wrapper,this.map=new BMap.Map(this._wrapper,Object.assign({enableMapClick:a.controlEnabled,maxZoom:c?14:18},a.providerOptions)),a.controlEnabled?(this.map.enableScrollWheelZoom(),this.map.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_ZOOM}))):(this.map.disableDragging(),this.map.disableDoubleClickZoom(),this.map.disablePinchToZoom()),this.map.addEventListener("movestart",()=>this._panStartHandler()),this.map.addEventListener("moveend",()=>this._panHandler()),this.map.addEventListener("zoomstart",()=>this._panStartHandler()),this.map.addEventListener("zoomend",()=>{this._wrapper.dataset.baiduZoom=this.map.getZoom(),this._panHandler()}),this._centerReady=Promise.resolve()}getCenter(){return new hy.Coordinate(this.map.getCenter())}getZoom(){return this.map.getZoom()-xp}setCenter(a,c){this._centerReady=Kp([a]).then(([m])=>{const v=new BMap.Point(m.longitude,m.latitude);this.map.panTo(v,{noAnimation:!c})})}setZoom(a,c){this._centerReady.then(()=>{this.map.setViewport({center:this.map.getCenter(),zoom:Math.floor(a+xp)},{enableAnimation:c})})}}class N6 extends L6.HTMLProviderPin{constructor(a){super(a),this._wrapper=null,this._zIndex=0,this._wrapperClass="",this._originalWrapperClass="",this._element=this._pinEl,this._coordinateReady=Promise.resolve(),this._negativeLngFix=!1;const c=this;class m extends BMap.Marker{initialize(S){return c._wrapper=super.initialize(S),c._wrapper&&(c._wrapper.style.zIndex=c._zIndex,c._originalWrapperClass=c._wrapper.getAttribute("class"),c._wrapper.setAttribute("class",c._getClass()),c._wrapper.appendChild(c._element),c.addListeners()),c._wrapper}draw(){if(c._wrapper){const S=c._wrapper.style.zIndex;super.draw(),c._wrapper.style.height="",c._wrapper.style.width="",c._wrapper.style.pointerEvents="none",c._wrapper.style.zIndex=S}else super.draw()}}this.pin=new m(new BMap.Point(0,0));const v=new BMap.Icon("data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",{height:0,width:0});this.pin.setIcon(v),this.pin.setShadow(v)}addListeners(){super.addListeners(),this._wrapper.addEventListener("touchend",()=>this._clickHandler())}setCoordinate(a){this._coordinateReady=Kp([a]).then(([c])=>{this._negativeLngFix=c.longitude<0,this.pin.setPosition(new BMap.Point(c.longitude+(this._negativeLngFix?180:0),c.latitude)),this._wrapper&&this._wrapper.classList[this._negativeLngFix?"add":"remove"](bp)})}setMap(a,c){this._coordinateReady.then(()=>{c&&c.getProviderMap().map.removeOverlay(this.pin),a&&a.getProviderMap().map.addOverlay(this.pin)})}setProperties(a){super.setProperties(a),this._wrapperClass=a.getClass(),this._element=a.getElement()||this._pinEl,this._zIndex=a.getZIndex(),this._wrapper&&this._wrapper.setAttribute("class",this._getClass())}_getClass(){return`${this._originalWrapperClass} ${this._negativeLngFix?bp:""} ${this._wrapperClass}`}}const j6="https://api.map.baidu.com/getscript";function U6(s,a,c,{params:m={},version:v="3.0"}={}){window.BMAP_PROTOCOL="https",window.BMap_loadScriptTime=new Date().getTime();const $=c,S=Object.assign({ak:$,v},m);fy($);const P=document.createElement("script");P.src=j6+"?"+Object.entries(S).map(([N,Y])=>N+"="+Y).join("&"),P.onload=()=>s(),document.head.appendChild(P);let o="";for(let N=R6;N<=k6;N++){const Y=2**(N-xp+7);o+=`[data-baidu-zoom="${N}"] .${bp}{transform:translateX(-${Y}px);}`}const I=document.createElement("style");I.innerHTML=o,document.head.appendChild(I)}const V6=new M6.MapProviderOptions().withLoadFunction(U6).withMapClass(F6).withPinClass(N6).withProviderName("Baidu").build();rd.BaiduMaps=V6;(function(s){var a=In&&In.__createBinding||(Object.create?function(m,v,$,S){S===void 0&&(S=$);var P=Object.getOwnPropertyDescriptor(v,$);(!P||("get"in P?!v.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return v[$]}}),Object.defineProperty(m,S,P)}:function(m,v,$,S){S===void 0&&(S=$),m[S]=v[$]}),c=In&&In.__exportStar||function(m,v){for(var $ in m)$!=="default"&&!Object.prototype.hasOwnProperty.call(v,$)&&a(v,m,$)};Object.defineProperty(s,"__esModule",{value:!0}),c(cy(),s),c(dy(),s),c(rs(),s),c(Xc,s),c(Ua(),s),c(Va(),s),c(td,s),c(i1,s),c(o1,s),c(rd,s)})(B5);const G6=s=>s.linkType==="Email"||py(s.link)?`mailto:${s.link}`:s.linkType==="Phone"||W6(s.link)?`tel:${s.link}`:s.link;function Z6(s,a="URL",c){return{link:s,linkType:q6(a),label:typeof c=="string"?c:""}}function q6(s){if(typeof s!="string")return s;switch(s){case"Email":return"Email";case"Phone":return"Phone";default:return"URL"}}function H6(s){return"href"in s}const py=s=>/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(s),W6=s=>new z5(s).isValid(),K6=s=>{for(var a=s.length-1,c="";a>=0;c+=s[a--]);return c},Xp=Ge.createContext({components:{}});function X6(){return Ge.useContext(Xp)}Xp.displayName="@yext/sites-react-components/utils/ConfigurationProvider";const Y6=Xp.Provider;var J6=Object.defineProperty,Q6=Object.defineProperties,e9=Object.getOwnPropertyDescriptors,Ph=Object.getOwnPropertySymbols,my=Object.prototype.hasOwnProperty,gy=Object.prototype.propertyIsEnumerable,d_=(s,a,c)=>a in s?J6(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c,c_=(s,a)=>{for(var c in a||(a={}))my.call(a,c)&&d_(s,c,a[c]);if(Ph)for(var c of Ph(a))gy.call(a,c)&&d_(s,c,a[c]);return s},t9=(s,a)=>Q6(s,e9(a)),r9=(s,a)=>{var c={};for(var m in s)my.call(s,m)&&a.indexOf(m)<0&&(c[m]=s[m]);if(s!=null&&Ph)for(var m of Ph(s))a.indexOf(m)<0&&gy.call(s,m)&&(c[m]=s[m]);return c};let Xf;Xf=pt.forwardRef((s,a)=>{Xf.defaultProps=X6().components.Link,Xf.displayName="Link";const c=s,{children:m,onClick:v,yaTrack:$,className:S,cta:P,href:o}=c,I=r9(c,["children","onClick","yaTrack","className","cta","href"]),N=H6(s)?Z6(o,s.linkType):P,Y=s.obfuscate||s.obfuscate!==!1&&py(N.link),[U,oe]=Ge.useState(!1),ae=Je=>{oe(!0),v&&v(Je)},$e=!m&&!N.label,Ie=!U&&Y!==!1,Be=t9(c_({},s.style),{unicodeBidi:"bidi-override",direction:$e&&Ie?"rtl":"ltr"}),xe=Ie?K6(N.link):N.link;return pt.createElement("a",c_({className:sd("Link",S),"data-ya-track":$,href:U||!Y?G6(N):"obfuscate",onClick:Je=>ae(Je),rel:s.target&&!s.rel?"noopener":void 0,ref:a,style:Be},I),m||N.label||xe)});const n9=["768px","992px","1200px"],i9=(s,a)=>{const c=s.split("/");c.pop();const m=c.join("/");return a.map(([v,$])=>{const[S,P]=$.split("x");if(!Number(S))throw new Error("couldn't parse width as a number");return`${m}/${S}x0.webp ${S}w`}).join(", ")};function o9(s){return n9.map((a,c)=>[a,s[c]])}function s9(s,a){return a.map(([c,m])=>{const[v,$]=m.split("x"),S=v===""||isFinite(Number(v)),P=$===""||isFinite(Number($));if(!(S&&P))throw new Error("invalid height or width in dimensions, expected unitless [width]x[height]");if(Number(v))return[c,m];const o=Number($)*(s.width/s.height);return[c,`${o}x${$}`]})}function a9(s){return s.map(([a,c])=>{const[m,v]=c.split("x");if(!Number(m))throw new Error("couldn't parse width as a number");return`(max-width: ${a}) ${m}px`}).join(", ")}const l9=s=>s.url;var d9=Object.defineProperty,Lh=Object.getOwnPropertySymbols,_y=Object.prototype.hasOwnProperty,yy=Object.prototype.propertyIsEnumerable,u_=(s,a,c)=>a in s?d9(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c,c9=(s,a)=>{for(var c in a||(a={}))_y.call(a,c)&&u_(s,c,a[c]);if(Lh)for(var c of Lh(a))yy.call(a,c)&&u_(s,c,a[c]);return s},u9=(s,a)=>{var c={};for(var m in s)_y.call(s,m)&&a.indexOf(m)<0&&(c[m]=s[m]);if(s!=null&&Lh)for(var m of Lh(s))a.indexOf(m)<0&&yy.call(s,m)&&(c[m]=s[m]);return c};pt.forwardRef((s,a)=>{const c=s,{imageField:m,bpSizes:v,customSizes:$,src:S,srcSet:P,sizes:o,alt:I="",loading:N="lazy"}=c,Y=u9(c,["imageField","bpSizes","customSizes","src","srcSet","sizes","alt","loading"]),U=S||l9(m);let oe=[],ae,$e;m&&(oe=$||(v?o9(v):oe),oe=s9(m,oe),oe&&oe.length>0&&(ae=a9(oe),$e=i9(m.url,oe)));const Ie=o||ae,Be=P||$e;return pt.createElement("img",c9({ref:a,src:U,srcSet:Be,sizes:Ie,alt:I||"",loading:N||"lazy"},Y))});function vy(s,a){a===void 0&&(a={});var c=a.insertAt;if(!(!s||typeof document>"u")){var m=document.head||document.getElementsByTagName("head")[0],v=document.createElement("style");v.type="text/css",c==="top"&&m.firstChild?m.insertBefore(v,m.firstChild):m.appendChild(v),v.styleSheet?v.styleSheet.cssText=s:v.appendChild(document.createTextNode(s))}}var h9=`@layer components {
	html {
		--yxt-breadcrumbs-spacing: 1rem;
	}
		.Breadcrumbs-list {
			display: flex;
		}

		.Breadcrumbs-separator {
			margin: 0 var(--yxt-breadcrumbs-spacing);
		}
}`;vy(h9);Ge.createContext(null);var f9=`@layer components {
  html {
    --yxt-hoursTable-col1-width: 128px;
    --yxt-hoursTable-col2-width: 256px;
  }
  
  .HoursTable-row {
    display: flex;
  }
  
  .HoursTable-day {
    flex: 0 0 var(--yxt-hoursTable-col1-width);
  }
  
  .HoursTable-intervals {
    display: flex;
    flex-direction: column;
    flex: 0 0 var(--yxt-hoursTable-col2-width);
  }
}
`;vy(f9);function p9(s){const a=Ge.createContext(void 0);function c(){const m=Ge.useContext(a);if(m===void 0)throw new Error(s??"Attempted to call useProfile outside of ProfileProvider");return m}return[c,a.Provider]}const[zC,m9]=p9("Attempted to call useTemplateData outside of TemplateDataProvider"),g9=s=>s.href?St.jsx(e1,{href:s.href,...s,children:s.children}):St.jsx(St.Fragment,{children:s.children}),_9=s=>{const{logoPath:a,logoLink:c,links:m}=s;return St.jsx("header",{className:"Header relative bg-brand-primary",children:St.jsxs("div",{className:"container py-5 flex justify-between",children:[a&&St.jsx(g9,{className:"Header-logoLink",href:c,eventName:"logo",children:St.jsx("div",{className:"flex w-[120px] sm:w-[162px] mr-2",children:St.jsx("img",{className:"w-full",src:a,alt:"Thrivent Logo"})})}),St.jsx("div",{className:"flex items-center",children:St.jsx("ul",{className:"flex",children:m.map(v=>St.jsx("li",{children:St.jsx(e1,{className:"Link Link--header text-white text-[14px] bg-brand-gray-400 rounded px-8 py-[10px] mx-2 lg:mx-5",cta:v,eventName:`${v.label}`})},v.label))})})]})})};var xy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h_=pt.createContext&&pt.createContext(xy),Fs=function(){return Fs=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Fs.apply(this,arguments)},y9=function(s,a){var c={};for(var m in s)Object.prototype.hasOwnProperty.call(s,m)&&a.indexOf(m)<0&&(c[m]=s[m]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,m=Object.getOwnPropertySymbols(s);v<m.length;v++)a.indexOf(m[v])<0&&Object.prototype.propertyIsEnumerable.call(s,m[v])&&(c[m[v]]=s[m[v]]);return c};function by(s){return s&&s.map(function(a,c){return pt.createElement(a.tag,Fs({key:c},a.attr),by(a.child))})}function Jc(s){return function(a){return pt.createElement(v9,Fs({attr:Fs({},s.attr)},a),by(s.child))}}function v9(s){var a=function(c){var m=s.attr,v=s.size,$=s.title,S=y9(s,["attr","size","title"]),P=v||c.size||"1em",o;return c.className&&(o=c.className),s.className&&(o=(o?o+" ":"")+s.className),pt.createElement("svg",Fs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,m,S,{className:o,style:Fs(Fs({color:s.color||c.color},c.style),s.style),height:P,width:P,xmlns:"http://www.w3.org/2000/svg"}),$&&pt.createElement("title",null,$),s.children)};return h_!==void 0?pt.createElement(h_.Consumer,null,function(c){return a(c)}):a(xy)}function x9(s){return Jc({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"}}]})(s)}function b9(s){return Jc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"}}]})(s)}function $9(s){return Jc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"}}]})(s)}function w9(s){return Jc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(s)}function E9(s){return Jc({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 378.7c-73.4 0-133.3 59.9-133.3 133.3S438.6 645.3 512 645.3 645.3 585.4 645.3 512 585.4 378.7 512 378.7zM911.8 512c0-55.2.5-109.9-2.6-165-3.1-64-17.7-120.8-64.5-167.6-46.9-46.9-103.6-61.4-167.6-64.5-55.2-3.1-109.9-2.6-165-2.6-55.2 0-109.9-.5-165 2.6-64 3.1-120.8 17.7-167.6 64.5C132.6 226.3 118.1 283 115 347c-3.1 55.2-2.6 109.9-2.6 165s-.5 109.9 2.6 165c3.1 64 17.7 120.8 64.5 167.6 46.9 46.9 103.6 61.4 167.6 64.5 55.2 3.1 109.9 2.6 165 2.6 55.2 0 109.9.5 165-2.6 64-3.1 120.8-17.7 167.6-64.5 46.9-46.9 61.4-103.6 64.5-167.6 3.2-55.1 2.6-109.8 2.6-165zM512 717.1c-113.5 0-205.1-91.6-205.1-205.1S398.5 306.9 512 306.9 717.1 398.5 717.1 512 625.5 717.1 512 717.1zm213.5-370.7c-26.5 0-47.9-21.4-47.9-47.9s21.4-47.9 47.9-47.9 47.9 21.4 47.9 47.9a47.84 47.84 0 0 1-47.9 47.9z"}}]})(s)}const T9=s=>{const{logoPath:a,copyright:c,footerImage:m,cFPLogic:v,cFPCopyright:$}=s,S=Wc(),P=[{name:"facebook",link:s.facebook,label:St.jsx(x9,{className:"w-6 h-6 mr-4"})},{name:"twitter",link:s.twitter,label:St.jsx($9,{className:"w-6 h-6 mr-4"})},{name:"linkedin",link:s.linkedIn,label:St.jsx(b9,{className:"w-6 h-6 mr-4"})},{name:"instagram",link:s.instagram,label:St.jsx(E9,{className:"w-6 h-6 mr-4"})}].filter(I=>I.link),o=s.footerLinks||[];return St.jsx("footer",{className:"Footer bg-brand-primary pt-8 pb-8 md:pt-[100px] md:pb-16",children:St.jsxs("div",{className:"container",children:[St.jsxs("div",{className:"border-b border-brand-secondary",children:[a&&St.jsx("div",{className:"w-fit",children:St.jsx("a",{className:"flex w-[144px]",href:"https://www.thrivent.com/",onClick:S==null?void 0:S.trackClick("logo"),children:St.jsx("img",{className:"w-full",src:a,alt:"Thrivent logo"})})}),St.jsx("div",{className:"flex flex-col md:flex-row justify-between py-5 md:py-14 gap-4",children:o.map((I,N)=>St.jsx(S9,{column:I,social:N===1,socialMobile:N===2,socialLinks:P,phone:N===o.length-1?s.phone:null},I.title))})]}),St.jsxs("div",{className:"flex flex-col md:flex-row justify-between text-white pt-2 md:pt-[40px]",children:[St.jsxs("div",{className:"Footer-copyright w-full md:w-[60%] text-[12px] text-brand-gray-300 py-4 pr-4",children:[St.jsx(c5,{serializedAST:JSON.stringify(c==null?void 0:c.json)}),v&&St.jsx("div",{className:"Footer-cFPCopyright w-full text-[12px] text-brand-gray-300 py-4 pr-4",children:$})]}),m&&St.jsxs("div",{className:"w-full md:w-[30%] flex flex-col md:items-end justify-start",children:[St.jsx("a",{className:"flex w-[120px] md:w-[144px] mb-4",href:m.clickthroughUrl,onClick:S==null?void 0:S.trackClick("brokercheck"),children:St.jsx(u5,{image:m,layout:"fill"})}),St.jsx("div",{className:"text-[12px] text-brand-gray-300",children:m.description})]})]})]})})},S9=s=>{const{column:a,social:c,socialMobile:m,socialLinks:v,phone:$}=s,{title:S,footerLink:P,footerText:o}=a,I=Wc();return St.jsxs("div",{className:"flex flex-col items-start w-full pb-4",children:[St.jsx("div",{className:sd("font-bold pb-3",{"text-brand-secondary":o},{"text-white":!o}),children:S}),P==null?void 0:P.map((N,Y)=>St.jsx(e1,{className:"Link--footer text-[14px] py-1 text-brand-gray-300",cta:N,eventName:"link"},Y)),o&&St.jsx("div",{className:"text-sm text-brand-gray-300 whitespace-break-spaces",children:o}),c&&St.jsx(f_,{links:v,mobile:!1}),m&&St.jsx(f_,{links:v,mobile:!0}),$&&St.jsxs(St.Fragment,{children:[St.jsx("a",{className:"block md:hidden Link--footer font-extrabold mt-4 text-[14px]",href:`tel:${$.link}`,onClick:I==null?void 0:I.trackClick("link"),children:$.label}),St.jsx("div",{className:"hidden md:block Link--footer font-extrabold mt-4 text-[14px]",children:$.label})]})]})},f_=s=>{const{links:a,mobile:c}=s;return St.jsx(iy,{name:"social",children:St.jsxs("div",{className:sd({"block md:hidden":c},{"hidden md:block":!c}),children:[St.jsx("div",{className:"font-extrabold text-white my-2",children:"Follow Us"}),St.jsx("div",{className:"my-4 md:my-0 flex flex-row items-center justify-center md:justify-end",children:a.map((m,v)=>m.link?St.jsxs(e1,{className:"Link--footer",href:m.link,eventName:`${m.name}`,children:[m.label,St.jsxs("div",{className:"hidden",children:[m.label," Link"]})]},v):null)})]})})};function C9(){const s=Wc();if(!s)throw new Error("Attempted to enable Analytics outside of AnalyticsProvider");h5().name==="browser"&&(window.enableYextAnalytics=()=>{window.yextAnalyticsEnabled=!0,s.optIn()},window.yextAnalyticsEnabled&&window.enableYextAnalytics())}var $y={exports:{}},wy={},Ey={exports:{}},Ty={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Ge;function A9(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var I9=typeof Object.is=="function"?Object.is:A9,M9=nd.useState,P9=nd.useEffect,L9=nd.useLayoutEffect,R9=nd.useDebugValue;function k9(s,a){var c=a(),m=M9({inst:{value:c,getSnapshot:a}}),v=m[0].inst,$=m[1];return L9(function(){v.value=c,v.getSnapshot=a,Yf(v)&&$({inst:v})},[s,c,a]),P9(function(){return Yf(v)&&$({inst:v}),s(function(){Yf(v)&&$({inst:v})})},[s]),R9(c),c}function Yf(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!I9(s,c)}catch{return!0}}function D9(s,a){return a()}var O9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D9:k9;Ty.useSyncExternalStore=nd.useSyncExternalStore!==void 0?nd.useSyncExternalStore:O9;Ey.exports=Ty;var z9=Ey.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1=Ge,B9=z9;function F9(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var N9=typeof Object.is=="function"?Object.is:F9,j9=B9.useSyncExternalStore,U9=s1.useRef,V9=s1.useEffect,G9=s1.useMemo,Z9=s1.useDebugValue;wy.useSyncExternalStoreWithSelector=function(s,a,c,m,v){var $=U9(null);if($.current===null){var S={hasValue:!1,value:null};$.current=S}else S=$.current;$=G9(function(){function o(oe){if(!I){if(I=!0,N=oe,oe=m(oe),v!==void 0&&S.hasValue){var ae=S.value;if(v(ae,oe))return Y=ae}return Y=oe}if(ae=Y,N9(N,oe))return ae;var $e=m(oe);return v!==void 0&&v(ae,$e)?ae:(N=oe,Y=$e)}var I=!1,N,Y,U=c===void 0?null:c;return[function(){return o(a())},U===null?void 0:function(){return o(U())}]},[a,c,m,v]);var P=j9(s,$[0],$[1]);return V9(function(){S.hasValue=!0,S.value=P},[P]),Z9(P),P};$y.exports=wy;var q9=$y.exports,H9=function(){function s(a,c,m){this.searchService=a,this.questionSubmissionService=c,this.autoCompleteService=m}return s.prototype.universalSearch=function(a){return this.searchService.universalSearch(a)},s.prototype.verticalSearch=function(a){return this.searchService.verticalSearch(a)},s.prototype.submitQuestion=function(a){return this.questionSubmissionService.submitQuestion(a)},s.prototype.universalAutocomplete=function(a){return this.autoCompleteService.universalAutocomplete(a)},s.prototype.verticalAutocomplete=function(a){return this.autoCompleteService.verticalAutocomplete(a)},s.prototype.filterSearch=function(a){return this.autoCompleteService.filterSearch(a)},s}(),Zl;(function(s){s.FeaturedSnippet="FEATURED_SNIPPET",s.FieldValue="FIELD_VALUE"})(Zl||(Zl={}));var An;(function(s){s.KnowledgeManager="KNOWLEDGE_MANAGER",s.Google="GOOGLE_CSE",s.Bing="BING_CSE",s.Zendesk="ZENDESK",s.Algolia="ALGOLIA",s.Custom="CUSTOM_SEARCHER",s.DocumentVertical="DOCUMENT_VERTICAL"})(An||(An={}));var Yp=function(){function s(){}return s.create=function(a,c){var m=this;return a?a.map(function(v,$){var S=$+1;switch(c){case An.KnowledgeManager:return m.fromKnowledgeManager(v,S);case An.Google:return m.fromGoogleCustomSearchEngine(v,S);case An.Bing:return m.fromBingCustomSearchEngine(v,S);case An.Zendesk:return m.fromZendeskSearchEngine(v,S);case An.Algolia:return m.fromAlgoliaSearchEngine(v,S);case An.DocumentVertical:return m.fromDocumentVertical(v,S);default:return m.fromCustomSource(v,S)}}):[]},s.fromKnowledgeManager=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.KnowledgeManager,index:c,name:v.name,description:v.description,link:v.website,id:v.id,distance:a.distance,distanceFromFilter:a.distanceFromFilter,highlightedFields:a.highlightedFields,entityType:v.type}},s.fromDocumentVertical=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.DocumentVertical,name:v.name,description:v.description,link:v.website,id:v.id,index:c,segment:a.segment,document:a.document,documents:a.documents}},s.fromGoogleCustomSearchEngine=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.Google,index:c,name:v.htmlTitle.replace(/(<([^>]+)>)/ig,""),description:v.htmlSnippet,link:v.link}},s.fromBingCustomSearchEngine=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.Bing,index:c,name:v.name,description:v.snippet,link:v.url}},s.fromZendeskSearchEngine=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.Zendesk,index:c,name:v.title,description:v.snippet,link:v.html_url}},s.fromAlgoliaSearchEngine=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.Algolia,index:c,name:v.name,id:v.objectID}},s.fromCustomSource=function(a,c){var m,v=(m=a.data)!==null&&m!==void 0?m:a;return{rawData:v,source:An.Custom,index:c,name:v.name,description:v.description,link:v.website,id:v.id}},s.fromDirectAnswer=function(a){var c,m=(c=a.fieldValues)!==null&&c!==void 0?c:{};return{rawData:m,source:An.KnowledgeManager,name:m.name,description:m.description,link:a.website,id:a.id,entityType:a.type}},s}(),zs;(function(s){s.URL="url",s.ComplexURL="complex_url",s.IOSAppURL="ios_app_url",s.AndroidAppURL="android_app_url",s.FacebookURL="facebook_url",s.Email="email",s.InstagramHandle="instagram_handle",s.TwitterHandle="twitter_handle",s.Phone="phone",s.Address="address",s.Hours="hours",s.Decimal="decimal",s.Integer="integer",s.SingleLineText="single_line_text",s.RichText="rich_text",s.MultiLineText="multi_line_text",s.RichText_v2="rich_text_v2",s.Html="html",s.Markdown="markdown"})(zs||(zs={}));var ql=function(){return ql=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},ql.apply(this,arguments)},W9=[zs.MultiLineText,zs.RichText,zs.RichText_v2,zs.Markdown,zs.Html];function Sy(s){var a=(s==null?void 0:s.type)===Zl.FieldValue,c=(s==null?void 0:s.type)===Zl.FeaturedSnippet,m={value:s.answer.value,relatedResult:Yp.fromDirectAnswer(s.relatedItem.data),verticalKey:s.relatedItem.verticalConfigId,fieldType:Object.values(zs).includes(s.answer.fieldType)?s.answer.fieldType:"unknown"};if(a)return ql(ql({type:Zl.FieldValue},m),{entityName:s.answer.entityName,fieldName:s.answer.fieldName,fieldApiName:s.answer.fieldApiName});if(c){var v=m.fieldType;if(!W9.includes(v)){console.warn("Unexpected fieldType for featured snippet direct answer: ".concat(v));return}return ql(ql({type:Zl.FeaturedSnippet},m),{snippet:s.answer.snippet})}else throw new Error("The Search API returned an unknown direct answer type: ".concat(s==null?void 0:s.type))}var Wn;(function(s){s.Equals="$eq",s.NotEquals="!$eq",s.LessThan="$lt",s.LessThanOrEqualTo="$le",s.GreaterThan="$gt",s.GreaterThanOrEqualTo="$ge",s.Near="$near",s.Between="$between"})(Wn||(Wn={}));function Jp(s){var a=Object.keys(s)[0],c=Object.keys(s[a])[0],m;return c===Wn.Between?m=K9(s[a][c]):m=s[a][c],{fieldId:a,matcher:c,value:m}}function K9(s){var a={};return Object.keys(s).forEach(function(c){c===Wn.GreaterThan||c===Wn.GreaterThanOrEqualTo?a.start={matcher:c,value:s[c]}:(c===Wn.LessThan||c===Wn.LessThanOrEqualTo)&&(a.end={matcher:c,value:s[c]})}),a}function X9(s){return s?s.map(function(a){return{fieldId:a.fieldId,displayName:a.displayName,options:Y9(a.options)}}):[]}function Y9(s){return s.map(function(a){var c=Jp(a.filter);return{displayName:a.displayName,count:a.count,selected:a.selected,matcher:c.matcher,value:c.value}})}function Cy(s){return{latitude:s.latitude,longitude:s.longitude,displayName:s.locationDisplayName,method:s.accuracy}}function Ay(s){return{originalQuery:s.originalQuery,correctedQuery:s.correctedQuery.value,type:s.type,matchedSubstrings:s.correctedQuery.matchedSubstrings}}var $p=function(){return $p=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},$p.apply(this,arguments)};function J9(s){return $p({displayKey:s.displayKey,displayValue:s.displayValue,filter:Jp(s.filter),type:s.type},s.details&&{details:s.details})}function wp(s){var a=s.appliedQueryFilters?s.appliedQueryFilters.map(J9):[];return{appliedQueryFilters:a,queryDurationMillis:s.queryDurationMillis,results:Yp.create(s.results,s.source),resultsCount:s.resultsCount,source:s.source,verticalKey:s.verticalConfigId}}function Iy(s){var a,c,m;return{verticalResults:wp(s.response),queryId:s.response.queryId,directAnswer:s.response.directAnswer&&Sy(s.response.directAnswer),searchIntents:s.response.searchIntents,facets:X9(s.response.facets),spellCheck:s.response.spellCheck&&Ay(s.response.spellCheck),locationBias:s.response.locationBias&&Cy(s.response.locationBias),allResultsForVertical:s.response.allResultsForVertical&&Iy({response:s.response.allResultsForVertical}),alternativeVerticals:(c=(a=s.response.alternativeVerticals)===null||a===void 0?void 0:a.modules)===null||c===void 0?void 0:c.map(wp),uuid:(m=s.meta)===null||m===void 0?void 0:m.uuid,queryRulesActionsData:s.response.queryRulesActionsData}}var Rh;(function(s){s.PROD="prod",s.SANDBOX="sbx"})(Rh||(Rh={}));var kh;(function(s){s.US="us",s.EU="eu"})(kh||(kh={}));var Xl=20220511,My=function(){function s(a){this.environment=(a==null?void 0:a.environment)||Rh.PROD,this.cloudRegion=(a==null?void 0:a.cloudRegion)||kh.US}return s.prototype.getDomain=function(){return"https://".concat(this.environment,"-cdn.").concat(this.cloudRegion,".yextapis.com")},s.prototype.getEndpoints=function(){return{universalSearch:"".concat(this.getDomain(),"/v2/accounts/me/search/query"),verticalSearch:"".concat(this.getDomain(),"/v2/accounts/me/search/vertical/query"),questionSubmission:"".concat(this.getDomain(),"/v2/accounts/me/createQuestion"),status:"https://answersstatus.pagescdn.com",universalAutocomplete:"".concat(this.getDomain(),"/v2/accounts/me/search/autocomplete"),verticalAutocomplete:"".concat(this.getDomain(),"/v2/accounts/me/search/vertical/autocomplete"),filterSearch:"".concat(this.getDomain(),"/v2/accounts/me/search/filtersearch")}},s}();new My({environment:Rh.SANDBOX,cloudRegion:kh.US}).getEndpoints();var jc;(function(s){s.Standard="STANDARD",s.Overlay="OVERLAY",s.Autocomplete="AUTOCOMPLETE"})(jc||(jc={}));function Q9(s){return{verticalKey:s.verticalConfigId,errorType:s.errorType,queryDurationMillis:s.queryDurationMillis,details:s.details}}function ex(s){var a,c=Array.isArray(s.response.modules)?s.response.modules.map(wp):[];return{verticalResults:c,queryId:s.response.queryId,directAnswer:s.response.directAnswer&&Sy(s.response.directAnswer),searchIntents:s.response.searchIntents,spellCheck:s.response.spellCheck&&Ay(s.response.spellCheck),locationBias:s.response.locationBias&&Cy(s.response.locationBias),uuid:s.meta.uuid,queryRulesActionsData:s.response.queryRulesActionsData,failedVerticals:(a=s.response.failedVerticals)===null||a===void 0?void 0:a.map(Q9)}}function tx(s){return typeof s=="object"&&!!s&&("start"in s||"end"in s)}function rx(s){if(s.kind!=="fieldValue"){var a=Py(s.combinator,s.filters);return a&&JSON.stringify(a)}return JSON.stringify(Qp(s))}function Py(s,a){for(var c,m=[],v=0,$=a;v<$.length;v++){var S=$[v];if(S.kind!=="fieldValue"){var P=Py(S.combinator,S.filters);P&&m.push(P)}else m.push(Qp(S))}return m.length===0?void 0:m.length===1?m[0]:(c={},c[s]=m,c)}function Qp(s){var a,c,m={};return tx(s.value)?(s.value.start&&(m[s.value.start.matcher]=s.value.start.value),s.value.end&&(m[s.value.end.matcher]=s.value.end.value)):m=(a={},a[s.matcher]=s.value,a),c={},c[s.fieldId]=m,c}var Dh=function(){return Dh=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Dh.apply(this,arguments)};function nx(s){return JSON.stringify(s.reduce(function(a,c){var m=c.fieldId,v=ix(c.options,m);return a[m]=v,a},{}))}function ix(s,a){return s.map(function(c){return Qp(Dh(Dh({},c),{fieldId:a}))})}const ox="@yext/search-core",sx="2.5.0",ax="Typescript Networking Library for the Yext Search API",lx="./dist/commonjs/src/index.js",dx="./dist/esm/src/index.js",cx="./dist/bundle.d.ts",ux=!1,hx=["networking","search api","search","browser","nodejs","typescript","commonjs","es6","yext"],fx=["dist","legacy","lib","src","THIRD-PARTY-NOTICES"],px={node:">=12"},mx={test:"npm run lint && jest",lint:"eslint . --max-warnings=0","tsc-cjs":"tsc -p tsconfig.cjs.json","tsc-esm":"tsc -p tsconfig.esm.json",tsc:"npm run tsc-cjs && npm run tsc-esm","build-legacy-bundle":"npx webpack",build:"rm -rf dist/** && npm run tsc && npm run build-legacy-bundle && npm run api-extractor && npm run generate-docs","build-ci":"npm run tsc-cjs && npm run api-extractor && npm run generate-docs",dev:"npm run tsc-esm -- --watch",prepublishOnly:"npm run build","api-extractor":"api-extractor run --local --verbose","generate-docs":"api-documenter markdown --input-folder temp --output-folder docs && rm -rf temp && npm run generate-notices","generate-notices":"generate-license-file --input package.json --output THIRD-PARTY-NOTICES --overwrite"},gx={type:"git",url:"https://github.com/yext/search-core.git"},_x="slapshot@yext.com",yx="BSD-3-Clause",vx={url:"https://github.com/yext/search-core/issues"},xx="https://github.com/yext/search-core#readme",bx={"@babel/core":"^7.12.3","@babel/plugin-transform-runtime":"^7.12.10","@babel/preset-env":"^7.12.1","@babel/preset-typescript":"^7.12.1","@microsoft/api-documenter":"^7.13.76","@microsoft/api-extractor":"^7.19.2","@types/jest":"^28.1.1","@typescript-eslint/eslint-plugin":"^5.16.0","@typescript-eslint/parser":"^5.16.0","@yext/eslint-config-slapshot":"^0.4.0","@yext/eslint-plugin-export-star":"^1.0.2","babel-jest":"^28.1.0","babel-loader":"^8.3.0",eslint:"^8.11.0","eslint-config-react-app":"^7.0.1","eslint-plugin-tsdoc":"^0.2.14","generate-license-file":"^1.3.0",jest:"^28.1.0","jest-environment-jsdom":"^28.1.0","ts-loader":"^8.4.0",typescript:"^4.0.3",webpack:"^5.73.0","webpack-cli":"^4.4.0"},$x={"@babel/runtime-corejs3":"^7.12.5","cross-fetch":"^3.1.5"},wx={bail:0,collectCoverage:!0,collectCoverageFrom:["src/**","!src/models/**/*.ts"],verbose:!0,moduleFileExtensions:["js","ts"],moduleDirectories:["node_modules","<rootDir>"],testEnvironment:"jsdom",testPathIgnorePatterns:["./tests/mocks/*"],testMatch:["<rootDir>/tests/**/*.[jt]s"]},Ex={name:ox,version:sx,description:ax,main:lx,module:dx,types:cx,sideEffects:ux,keywords:hx,files:fx,engines:px,scripts:mx,repository:gx,author:_x,license:yx,bugs:vx,homepage:xx,devDependencies:bx,dependencies:$x,jest:wx};var Oh=function(){return Oh=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Oh.apply(this,arguments)},Tx=Ex.version;function Oi(s){var a,c={ANSWERS_CORE:Tx};if(!s)return c;var m=(a=s["Client-SDK"])!==null&&a!==void 0?a:{};return Object.entries(m).reduce(function(v,$){var S,P=$[0],o=$[1];return o?Oh(Oh({},v),(S={},S[P]=o,S)):v},c)}var Ds=function(){return Ds=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Ds.apply(this,arguments)},p_=function(s,a,c,m){function v($){return $ instanceof c?$:new c(function(S){S($)})}return new(c||(c=Promise))(function($,S){function P(N){try{I(m.next(N))}catch(Y){S(Y)}}function o(N){try{I(m.throw(N))}catch(Y){S(Y)}}function I(N){N.done?$(N.value):v(N.value).then(P,o)}I((m=m.apply(s,a||[])).next())})},m_=function(s,a){var c={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},m,v,$,S;return S={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function P(I){return function(N){return o([I,N])}}function o(I){if(m)throw new TypeError("Generator is already executing.");for(;c;)try{if(m=1,v&&($=I[0]&2?v.return:I[0]?v.throw||(($=v.return)&&$.call(v),0):v.next)&&!($=$.call(v,I[1])).done)return $;switch(v=0,$&&(I=[I[0]&2,$.value]),I[0]){case 0:case 1:$=I;break;case 4:return c.label++,{value:I[1],done:!1};case 5:c.label++,v=I[1],I=[0];continue;case 7:I=c.ops.pop(),c.trys.pop();continue;default:if($=c.trys,!($=$.length>0&&$[$.length-1])&&(I[0]===6||I[0]===2)){c=0;continue}if(I[0]===3&&(!$||I[1]>$[0]&&I[1]<$[3])){c.label=I[1];break}if(I[0]===6&&c.label<$[1]){c.label=$[1],$=I;break}if($&&c.label<$[2]){c.label=$[2],c.ops.push(I);break}$[2]&&c.ops.pop(),c.trys.pop();continue}I=a.call(s,c)}catch(N){I=[6,N],v=0}finally{m=$=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},Sx=function(){function s(a,c,m){this.config=a,this.httpService=c,this.apiResponseValidator=m,this.universalSearchEndpoint=a.endpoints.universalSearch,this.verticalSearchEndpoint=a.endpoints.verticalSearch}return s.prototype.universalSearch=function(a){var c,m,v,$;return p_(this,void 0,void 0,function(){var S,P,o,I;return m_(this,function(N){switch(N.label){case 0:return S=Ds(Ds(Ds({input:a.query,experienceKey:this.config.experienceKey},"apiKey"in this.config&&{api_key:this.config.apiKey}),{v:Xl,version:this.config.experienceVersion,limit:JSON.stringify(a.limit),location:this.stringifyLatLong(a.location),locale:this.config.locale,skipSpellCheck:a.skipSpellCheck,session_id:a.sessionId,sessionTrackingEnabled:a.sessionTrackingEnabled,queryTrigger:a.queryTrigger,context:JSON.stringify(a.context),referrerPageUrl:a.referrerPageUrl,source:a.querySource||jc.Standard,visitorId:(c=this.config.visitor)===null||c===void 0?void 0:c.id,visitorIdMethod:(m=this.config.visitor)===null||m===void 0?void 0:m.idMethod,restrictVerticals:(v=a.restrictVerticals)===null||v===void 0?void 0:v.join(",")}),($=this.config)===null||$===void 0?void 0:$.additionalQueryParams),"token"in this.config?[4,this.httpService.get(this.universalSearchEndpoint,S,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return o=N.sent(),[3,4];case 2:return[4,this.httpService.get(this.universalSearchEndpoint,S,Oi(a.additionalHttpHeaders))];case 3:o=N.sent(),N.label=4;case 4:return P=o,I=this.apiResponseValidator.validate(P),I instanceof Error?[2,Promise.reject(I)]:[2,ex(P)]}})})},s.prototype.verticalSearch=function(a){var c,m,v,$;return p_(this,void 0,void 0,function(){var S,P,o,I;return m_(this,function(N){switch(N.label){case 0:return S=Ds(Ds(Ds({experienceKey:this.config.experienceKey},"apiKey"in this.config&&{api_key:this.config.apiKey}),{v:Xl,version:this.config.experienceVersion,locale:this.config.locale,input:a.query,location:this.stringifyLatLong(a.location),verticalKey:a.verticalKey,filters:a.staticFilter&&rx(a.staticFilter),limit:a.limit,offset:a.offset,retrieveFacets:a.retrieveFacets,facetFilters:a.facets&&nx(a.facets),skipSpellCheck:a.skipSpellCheck,queryTrigger:a.queryTrigger,session_id:a.sessionId,sessionTrackingEnabled:a.sessionTrackingEnabled,sortBys:JSON.stringify(a.sortBys||[]),context:JSON.stringify(a.context),referrerPageUrl:a.referrerPageUrl,source:a.querySource||jc.Standard,locationRadius:(c=a.locationRadius)===null||c===void 0?void 0:c.toString(),queryId:a.queryId,visitorId:(m=this.config.visitor)===null||m===void 0?void 0:m.id,visitorIdMethod:(v=this.config.visitor)===null||v===void 0?void 0:v.idMethod}),($=this.config)===null||$===void 0?void 0:$.additionalQueryParams),"token"in this.config?[4,this.httpService.get(this.verticalSearchEndpoint,S,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return o=N.sent(),[3,4];case 2:return[4,this.httpService.get(this.verticalSearchEndpoint,S,Oi(a.additionalHttpHeaders))];case 3:o=N.sent(),N.label=4;case 4:return P=o,I=this.apiResponseValidator.validate(P),I instanceof Error?[2,Promise.reject(I)]:[2,Iy(P)]}})})},s.prototype.stringifyLatLong=function(a){if(a)return"".concat(a.latitude,",").concat(a.longitude)},s}(),Nc=function(){return Nc=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Nc.apply(this,arguments)},Cx=function(s,a,c,m){function v($){return $ instanceof c?$:new c(function(S){S($)})}return new(c||(c=Promise))(function($,S){function P(N){try{I(m.next(N))}catch(Y){S(Y)}}function o(N){try{I(m.throw(N))}catch(Y){S(Y)}}function I(N){N.done?$(N.value):v(N.value).then(P,o)}I((m=m.apply(s,a||[])).next())})},Ax=function(s,a){var c={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},m,v,$,S;return S={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function P(I){return function(N){return o([I,N])}}function o(I){if(m)throw new TypeError("Generator is already executing.");for(;c;)try{if(m=1,v&&($=I[0]&2?v.return:I[0]?v.throw||(($=v.return)&&$.call(v),0):v.next)&&!($=$.call(v,I[1])).done)return $;switch(v=0,$&&(I=[I[0]&2,$.value]),I[0]){case 0:case 1:$=I;break;case 4:return c.label++,{value:I[1],done:!1};case 5:c.label++,v=I[1],I=[0];continue;case 7:I=c.ops.pop(),c.trys.pop();continue;default:if($=c.trys,!($=$.length>0&&$[$.length-1])&&(I[0]===6||I[0]===2)){c=0;continue}if(I[0]===3&&(!$||I[1]>$[0]&&I[1]<$[3])){c.label=I[1];break}if(I[0]===6&&c.label<$[1]){c.label=$[1],$=I;break}if($&&c.label<$[2]){c.label=$[2],c.ops.push(I);break}$[2]&&c.ops.pop(),c.trys.pop();continue}I=a.call(s,c)}catch(N){I=[6,N],v=0}finally{m=$=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},Ix=function(){function s(a,c,m){this.config=a,this.httpService=c,this.apiResponseValidator=m,this.endpoint=this.config.endpoints.questionSubmission}return s.prototype.submitQuestion=function(a){var c;return Cx(this,void 0,void 0,function(){var m,v,$,S,P;return Ax(this,function(o){switch(o.label){case 0:return m=Nc(Nc(Nc({v:Xl},"apiKey"in this.config&&{api_key:this.config.apiKey}),{sessionTrackingEnabled:a.sessionTrackingEnabled}),(c=this.config)===null||c===void 0?void 0:c.additionalQueryParams),v={email:a.email,entityId:a.entityId,name:a.name,questionDescription:a.questionDescription,questionLanguage:this.config.locale,questionText:a.questionText,site:"FIRSTPARTY"},"token"in this.config?[4,this.httpService.post(this.endpoint,m,v,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return S=o.sent(),[3,4];case 2:return[4,this.httpService.post(this.endpoint,m,v,Oi(a.additionalHttpHeaders))];case 3:S=o.sent(),o.label=4;case 4:return $=S,P=this.apiResponseValidator.validate($),P instanceof Error?[2,Promise.reject(P)]:[2,{uuid:$.meta.uuid}]}})})},s}(),Ep={exports:{}};(function(s,a){var c=typeof self<"u"?self:In,m=function(){function $(){this.fetch=!1,this.DOMException=c.DOMException}return $.prototype=c,new $}();(function($){(function(S){var P={searchParams:"URLSearchParams"in $,iterable:"Symbol"in $&&"iterator"in Symbol,blob:"FileReader"in $&&"Blob"in $&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in $,arrayBuffer:"ArrayBuffer"in $};function o(_e){return _e&&DataView.prototype.isPrototypeOf(_e)}if(P.arrayBuffer)var I=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],N=ArrayBuffer.isView||function(_e){return _e&&I.indexOf(Object.prototype.toString.call(_e))>-1};function Y(_e){if(typeof _e!="string"&&(_e=String(_e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_e))throw new TypeError("Invalid character in header field name");return _e.toLowerCase()}function U(_e){return typeof _e!="string"&&(_e=String(_e)),_e}function oe(_e){var je={next:function(){var It=_e.shift();return{done:It===void 0,value:It}}};return P.iterable&&(je[Symbol.iterator]=function(){return je}),je}function ae(_e){this.map={},_e instanceof ae?_e.forEach(function(je,It){this.append(It,je)},this):Array.isArray(_e)?_e.forEach(function(je){this.append(je[0],je[1])},this):_e&&Object.getOwnPropertyNames(_e).forEach(function(je){this.append(je,_e[je])},this)}ae.prototype.append=function(_e,je){_e=Y(_e),je=U(je);var It=this.map[_e];this.map[_e]=It?It+", "+je:je},ae.prototype.delete=function(_e){delete this.map[Y(_e)]},ae.prototype.get=function(_e){return _e=Y(_e),this.has(_e)?this.map[_e]:null},ae.prototype.has=function(_e){return this.map.hasOwnProperty(Y(_e))},ae.prototype.set=function(_e,je){this.map[Y(_e)]=U(je)},ae.prototype.forEach=function(_e,je){for(var It in this.map)this.map.hasOwnProperty(It)&&_e.call(je,this.map[It],It,this)},ae.prototype.keys=function(){var _e=[];return this.forEach(function(je,It){_e.push(It)}),oe(_e)},ae.prototype.values=function(){var _e=[];return this.forEach(function(je){_e.push(je)}),oe(_e)},ae.prototype.entries=function(){var _e=[];return this.forEach(function(je,It){_e.push([It,je])}),oe(_e)},P.iterable&&(ae.prototype[Symbol.iterator]=ae.prototype.entries);function $e(_e){if(_e.bodyUsed)return Promise.reject(new TypeError("Already read"));_e.bodyUsed=!0}function Ie(_e){return new Promise(function(je,It){_e.onload=function(){je(_e.result)},_e.onerror=function(){It(_e.error)}})}function Be(_e){var je=new FileReader,It=Ie(je);return je.readAsArrayBuffer(_e),It}function xe(_e){var je=new FileReader,It=Ie(je);return je.readAsText(_e),It}function Je(_e){for(var je=new Uint8Array(_e),It=new Array(je.length),Tt=0;Tt<je.length;Tt++)It[Tt]=String.fromCharCode(je[Tt]);return It.join("")}function We(_e){if(_e.slice)return _e.slice(0);var je=new Uint8Array(_e.byteLength);return je.set(new Uint8Array(_e)),je.buffer}function ht(){return this.bodyUsed=!1,this._initBody=function(_e){this._bodyInit=_e,_e?typeof _e=="string"?this._bodyText=_e:P.blob&&Blob.prototype.isPrototypeOf(_e)?this._bodyBlob=_e:P.formData&&FormData.prototype.isPrototypeOf(_e)?this._bodyFormData=_e:P.searchParams&&URLSearchParams.prototype.isPrototypeOf(_e)?this._bodyText=_e.toString():P.arrayBuffer&&P.blob&&o(_e)?(this._bodyArrayBuffer=We(_e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):P.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_e)||N(_e))?this._bodyArrayBuffer=We(_e):this._bodyText=_e=Object.prototype.toString.call(_e):this._bodyText="",this.headers.get("content-type")||(typeof _e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):P.searchParams&&URLSearchParams.prototype.isPrototypeOf(_e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},P.blob&&(this.blob=function(){var _e=$e(this);if(_e)return _e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?$e(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Be)}),this.text=function(){var _e=$e(this);if(_e)return _e;if(this._bodyBlob)return xe(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Je(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},P.formData&&(this.formData=function(){return this.text().then(gt)}),this.json=function(){return this.text().then(JSON.parse)},this}var Lt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ye(_e){var je=_e.toUpperCase();return Lt.indexOf(je)>-1?je:_e}function ft(_e,je){je=je||{};var It=je.body;if(_e instanceof ft){if(_e.bodyUsed)throw new TypeError("Already read");this.url=_e.url,this.credentials=_e.credentials,je.headers||(this.headers=new ae(_e.headers)),this.method=_e.method,this.mode=_e.mode,this.signal=_e.signal,!It&&_e._bodyInit!=null&&(It=_e._bodyInit,_e.bodyUsed=!0)}else this.url=String(_e);if(this.credentials=je.credentials||this.credentials||"same-origin",(je.headers||!this.headers)&&(this.headers=new ae(je.headers)),this.method=Ye(je.method||this.method||"GET"),this.mode=je.mode||this.mode||null,this.signal=je.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&It)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(It)}ft.prototype.clone=function(){return new ft(this,{body:this._bodyInit})};function gt(_e){var je=new FormData;return _e.trim().split("&").forEach(function(It){if(It){var Tt=It.split("="),Wt=Tt.shift().replace(/\+/g," "),ut=Tt.join("=").replace(/\+/g," ");je.append(decodeURIComponent(Wt),decodeURIComponent(ut))}}),je}function ve(_e){var je=new ae,It=_e.replace(/\r?\n[\t ]+/g," ");return It.split(/\r?\n/).forEach(function(Tt){var Wt=Tt.split(":"),ut=Wt.shift().trim();if(ut){var Br=Wt.join(":").trim();je.append(ut,Br)}}),je}ht.call(ft.prototype);function Ke(_e,je){je||(je={}),this.type="default",this.status=je.status===void 0?200:je.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in je?je.statusText:"OK",this.headers=new ae(je.headers),this.url=je.url||"",this._initBody(_e)}ht.call(Ke.prototype),Ke.prototype.clone=function(){return new Ke(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ae(this.headers),url:this.url})},Ke.error=function(){var _e=new Ke(null,{status:0,statusText:""});return _e.type="error",_e};var Ct=[301,302,303,307,308];Ke.redirect=function(_e,je){if(Ct.indexOf(je)===-1)throw new RangeError("Invalid status code");return new Ke(null,{status:je,headers:{location:_e}})},S.DOMException=$.DOMException;try{new S.DOMException}catch{S.DOMException=function(je,It){this.message=je,this.name=It;var Tt=Error(je);this.stack=Tt.stack},S.DOMException.prototype=Object.create(Error.prototype),S.DOMException.prototype.constructor=S.DOMException}function tt(_e,je){return new Promise(function(It,Tt){var Wt=new ft(_e,je);if(Wt.signal&&Wt.signal.aborted)return Tt(new S.DOMException("Aborted","AbortError"));var ut=new XMLHttpRequest;function Br(){ut.abort()}ut.onload=function(){var Qt={status:ut.status,statusText:ut.statusText,headers:ve(ut.getAllResponseHeaders()||"")};Qt.url="responseURL"in ut?ut.responseURL:Qt.headers.get("X-Request-URL");var Tr="response"in ut?ut.response:ut.responseText;It(new Ke(Tr,Qt))},ut.onerror=function(){Tt(new TypeError("Network request failed"))},ut.ontimeout=function(){Tt(new TypeError("Network request failed"))},ut.onabort=function(){Tt(new S.DOMException("Aborted","AbortError"))},ut.open(Wt.method,Wt.url,!0),Wt.credentials==="include"?ut.withCredentials=!0:Wt.credentials==="omit"&&(ut.withCredentials=!1),"responseType"in ut&&P.blob&&(ut.responseType="blob"),Wt.headers.forEach(function(Qt,Tr){ut.setRequestHeader(Tr,Qt)}),Wt.signal&&(Wt.signal.addEventListener("abort",Br),ut.onreadystatechange=function(){ut.readyState===4&&Wt.signal.removeEventListener("abort",Br)}),ut.send(typeof Wt._bodyInit>"u"?null:Wt._bodyInit)})}return tt.polyfill=!0,$.fetch||($.fetch=tt,$.Headers=ae,$.Request=ft,$.Response=Ke),S.Headers=ae,S.Request=ft,S.Response=Ke,S.fetch=tt,Object.defineProperty(S,"__esModule",{value:!0}),S})({})})(m),m.fetch.ponyfill=!0,delete m.fetch.polyfill;var v=m;a=v.fetch,a.default=v.fetch,a.fetch=v.fetch,a.Headers=v.Headers,a.Request=v.Request,a.Response=v.Response,s.exports=a})(Ep,Ep.exports);var Mx=Ep.exports;const Px=Gs(Mx);function Lx(s,a){var c=new URL(s),m=new URLSearchParams(c.search.substring(1)),v=Ly(a);for(var $ in v)m.append($,v[$].toString());var S=c.origin+c.pathname,P=m.toString();return P&&(S+="?"+P),S}function Ly(s){return Object.keys(s).forEach(function(a){(s[a]===void 0||s[a]===null)&&delete s[a]}),s}var Hl=function(){return Hl=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Hl.apply(this,arguments)},zh;(function(s){s.GET="get",s.POST="post"})(zh||(zh={}));var Rx=function(){function s(){}return s.prototype.get=function(a,c,m,v){return g_(a,c,{method:zh.GET,mode:"cors",credentials:"include",headers:Hl({"Client-SDK":__(m)},v&&{Authorization:"Bearer ".concat(v)})}).then(function($){return $.json()})},s.prototype.post=function(a,c,m,v,$){var S=Ly(m);return g_(a,c,Hl(Hl({method:zh.POST,body:JSON.stringify(S),mode:"cors"},$&&{credentials:"include"}),{headers:Hl({"Client-SDK":__(v),"Content-Type":"application/json"},$&&{Authorization:"Bearer ".concat($)})})).then(function(P){return P.json()})},s}();function g_(s,a,c){var m=Lx(s,a);return typeof window<"u"&&window.fetch?window.fetch(m,c):Px(m,c)}function __(s){return Object.keys(s).reduce(function(a,c){var m="".concat(c,"=").concat(s[c]);return a?"".concat(a,", ").concat(m):m},"")}var kx=function(){var s=function(a,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var $ in v)Object.prototype.hasOwnProperty.call(v,$)&&(m[$]=v[$])},s(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(a,c);function m(){this.constructor=a}a.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),Sh=function(s){kx(a,s);function a(c,m,v){var $=s.call(this,c)||this;return $.message=c,$.code=m,$.type=v,Object.setPrototypeOf($,a.prototype),$}return a}(Error);function Ry(s){var a,c=s.relatedItem?Yp.create([s.relatedItem],An.KnowledgeManager)[0]:s.relatedItem;return{filter:s.filter&&Jp(s.filter),key:s.key,matchedSubstrings:s.matchedSubstrings||[],value:s.value,relatedItem:c,verticalKeys:s.verticalKeys,inputIntents:(a=s.queryIntents)!==null&&a!==void 0?a:[]}}function y_(s){var a,c;if(!s.response)throw new Error("The autocomplete data does not contain a response property");if(!Object.keys(s.response).length)throw new Error("The autocomplete response is empty");var m=s.response,v=m.results.map(Ry),$=(c=(a=m.input)===null||a===void 0?void 0:a.queryIntents)!==null&&c!==void 0?c:[];return{results:v,queryId:m.queryId,inputIntents:$||[],uuid:s.meta.uuid}}function Dx(s){if(!s.response)throw new Error("The autocomplete data does not contain a response property");if(!Object.keys(s.response).length)throw new Error("The autocomplete response is empty");var a=s.response;if(a.failedVerticals&&a.failedVerticals.length!=0){var c=a.failedVerticals[0];throw new Sh(c.details.description,c.details.responseCode,c.errorType)}var m=a.sections.map(function(v){return{label:v.label,results:v.results.map(Ry)}});return{sections:m,queryId:a.queryId,businessId:a.businessId,uuid:s.meta.uuid}}function Ox(s){return s.map(function(a){var c=a.fieldApiName,m=a.entityType,v=a.fetchEntities;return{fieldId:c,entityTypeId:m,shouldFetchEntities:v}})}function zx(s){return s==null?void 0:s.map(function(a){var c,m,v=a.fieldId,$=a.matcher,S=a.value;return c={},c[v]=(m={},m[$]=S,m),c})}var lo=function(){return lo=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},lo.apply(this,arguments)},Jf=function(s,a,c,m){function v($){return $ instanceof c?$:new c(function(S){S($)})}return new(c||(c=Promise))(function($,S){function P(N){try{I(m.next(N))}catch(Y){S(Y)}}function o(N){try{I(m.throw(N))}catch(Y){S(Y)}}function I(N){N.done?$(N.value):v(N.value).then(P,o)}I((m=m.apply(s,a||[])).next())})},Qf=function(s,a){var c={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},m,v,$,S;return S={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function P(I){return function(N){return o([I,N])}}function o(I){if(m)throw new TypeError("Generator is already executing.");for(;c;)try{if(m=1,v&&($=I[0]&2?v.return:I[0]?v.throw||(($=v.return)&&$.call(v),0):v.next)&&!($=$.call(v,I[1])).done)return $;switch(v=0,$&&(I=[I[0]&2,$.value]),I[0]){case 0:case 1:$=I;break;case 4:return c.label++,{value:I[1],done:!1};case 5:c.label++,v=I[1],I=[0];continue;case 7:I=c.ops.pop(),c.trys.pop();continue;default:if($=c.trys,!($=$.length>0&&$[$.length-1])&&(I[0]===6||I[0]===2)){c=0;continue}if(I[0]===3&&(!$||I[1]>$[0]&&I[1]<$[3])){c.label=I[1];break}if(I[0]===6&&c.label<$[1]){c.label=$[1],$=I;break}if($&&c.label<$[2]){c.label=$[2],c.ops.push(I);break}$[2]&&c.ops.pop(),c.trys.pop();continue}I=a.call(s,c)}catch(N){I=[6,N],v=0}finally{m=$=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},Bx=function(){function s(a,c,m){this.config=a,this.httpService=c,this.apiResponseValidator=m,this.universalEndpoint=this.config.endpoints.universalAutocomplete,this.verticalEndpoint=this.config.endpoints.verticalAutocomplete,this.filterEndpoint=this.config.endpoints.filterSearch}return s.prototype.universalAutocomplete=function(a){var c,m,v;return Jf(this,void 0,void 0,function(){var $,S,P,o;return Qf(this,function(I){switch(I.label){case 0:return $=lo(lo(lo({input:a.input,experienceKey:this.config.experienceKey},"apiKey"in this.config&&{api_key:this.config.apiKey}),{v:Xl,version:this.config.experienceVersion,locale:this.config.locale,sessionTrackingEnabled:a.sessionTrackingEnabled,visitorId:(c=this.config.visitor)===null||c===void 0?void 0:c.id,visitorIdMethod:(m=this.config.visitor)===null||m===void 0?void 0:m.idMethod}),(v=this.config)===null||v===void 0?void 0:v.additionalQueryParams),"token"in this.config?[4,this.httpService.get(this.universalEndpoint,$,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return P=I.sent(),[3,4];case 2:return[4,this.httpService.get(this.universalEndpoint,$,Oi(a.additionalHttpHeaders))];case 3:P=I.sent(),I.label=4;case 4:return S=P,o=this.apiResponseValidator.validate(S),o instanceof Error?[2,Promise.reject(o)]:[2,y_(S)]}})})},s.prototype.verticalAutocomplete=function(a){var c,m,v;return Jf(this,void 0,void 0,function(){var $,S,P,o;return Qf(this,function(I){switch(I.label){case 0:return $=lo(lo(lo({input:a.input,experienceKey:this.config.experienceKey},"apiKey"in this.config&&{api_key:this.config.apiKey}),{v:Xl,version:this.config.experienceVersion,locale:this.config.locale,verticalKey:a.verticalKey,sessionTrackingEnabled:a.sessionTrackingEnabled,visitorId:(c=this.config.visitor)===null||c===void 0?void 0:c.id,visitorIdMethod:(m=this.config.visitor)===null||m===void 0?void 0:m.idMethod}),(v=this.config)===null||v===void 0?void 0:v.additionalQueryParams),"token"in this.config?[4,this.httpService.get(this.verticalEndpoint,$,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return P=I.sent(),[3,4];case 2:return[4,this.httpService.get(this.verticalEndpoint,$,Oi(a.additionalHttpHeaders))];case 3:P=I.sent(),I.label=4;case 4:return S=P,o=this.apiResponseValidator.validate(S),o instanceof Error?[2,Promise.reject(o)]:[2,y_(S)]}})})},s.prototype.filterSearch=function(a){var c,m,v;return Jf(this,void 0,void 0,function(){var $,S,P,o,I;return Qf(this,function(N){switch(N.label){case 0:return $={sectioned:a.sectioned,fields:Ox(a.fields)},S=lo(lo(lo({input:a.input,experienceKey:this.config.experienceKey},"apiKey"in this.config&&{api_key:this.config.apiKey}),{v:Xl,version:this.config.experienceVersion,locale:this.config.locale,search_parameters:JSON.stringify($),verticalKey:a.verticalKey,sessionTrackingEnabled:a.sessionTrackingEnabled,visitorId:(c=this.config.visitor)===null||c===void 0?void 0:c.id,visitorIdMethod:(m=this.config.visitor)===null||m===void 0?void 0:m.idMethod,excluded:JSON.stringify(zx(a.excluded))}),(v=this.config)===null||v===void 0?void 0:v.additionalQueryParams),"token"in this.config?[4,this.httpService.get(this.filterEndpoint,S,Oi(a.additionalHttpHeaders),this.config.token)]:[3,2];case 1:return o=N.sent(),[3,4];case 2:return[4,this.httpService.get(this.filterEndpoint,S,Oi(a.additionalHttpHeaders))];case 3:o=N.sent(),N.label=4;case 4:return P=o,I=this.apiResponseValidator.validate(P),I instanceof Error?[2,Promise.reject(I)]:[2,Dx(P)]}})})},s}(),Fx=function(){function s(){}return s.prototype.validate=function(a){var c=[this.validateResponseProp,this.validateMetaProp,this.checkForApiErrors],m=c.map(function(v){return v(a)});return m.find(function(v){return v})},s.prototype.validateResponseProp=function(a){if(!a.response)return new Sh("Malformed Search API response: missing response property.")},s.prototype.validateMetaProp=function(a){if(!a.meta)return new Sh("Malformed Search API response: missing meta property.")},s.prototype.checkForApiErrors=function(a){var c,m;if(((m=(c=a.meta)===null||c===void 0?void 0:c.errors)===null||m===void 0?void 0:m.length)>=1){var v=a.meta.errors[0];return new Sh(v.message,v.code,v.type)}},s}(),Wl=function(){return Wl=Object.assign||function(s){for(var a,c=1,m=arguments.length;c<m;c++){a=arguments[c];for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&(s[v]=a[v])}return s},Wl.apply(this,arguments)};function Nx(s){if("apiKey"in s&&"token"in s)throw new Error("Both apiKey and token are present. Only one authentication method should be provided");var a=Wl(Wl({},s),{endpoints:Wl(Wl({},new My(s).getEndpoints()),s.endpoints)}),c=new Rx,m=new Fx,v=new Sx(a,c,m),$=new Ix(a,c,m),S=new Bx(a,c,m);return new H9(v,$,S)}var Bh;(function(s){s.AND="$and",s.OR="$or"})(Bh||(Bh={}));var Tp;(function(s){s.NearMe="NEAR_ME"})(Tp||(Tp={}));class jx{constructor(){this.latestRequestIds={universalQuery:0,verticalQuery:0},this.latestResponseIds={universalQuery:0,verticalQuery:0}}updateRequestId(a){return++this.latestRequestIds[a]}setResponseId(a,c){this.latestResponseIds[a]=c}getLatestResponseId(a){return this.latestResponseIds[a]}processRequestId(a,c){const m=this.getLatestResponseId(a);return c>m?(this.setResponseId(a,c),!0):!1}}class Ux{constructor(a,c,m){this.store=a,this.headlessId=c,m.addAnswersReducer(this.headlessId),a.replaceReducer(m.getParentReducer())}getState(){return this.store.getState()[this.headlessId]}dispatchEvent(a,c){const m=a==="set-state"?"set-state":this.headlessId+"/"+a;this.store.dispatch({type:m,payload:c,headlessId:this.headlessId})}addListener(a){let c=a.valueAccessor(this.getState());return this.store.subscribe(()=>{const m=a.valueAccessor(this.getState());m!==c&&(c=m,a.callback(m))})}}var Vx=function(){function s(a,c,m,v,$){return a<c||m<c?a>m?m+1:a+1:v===$?c:c+1}return function(a,c){if(a===c)return 0;if(a.length>c.length){var m=a;a=c,c=m}for(var v=a.length,$=c.length;v>0&&a.charCodeAt(v-1)===c.charCodeAt($-1);)v--,$--;for(var S=0;S<v&&a.charCodeAt(S)===c.charCodeAt(S);)S++;if(v-=S,$-=S,v===0||$<3)return $;var P=0,o,I,N,Y,U,oe,ae,$e,Ie,Be,xe,Je,We=[];for(o=0;o<v;o++)We.push(o+1),We.push(a.charCodeAt(S+o));for(var ht=We.length-1;P<$-3;)for(Ie=c.charCodeAt(S+(I=P)),Be=c.charCodeAt(S+(N=P+1)),xe=c.charCodeAt(S+(Y=P+2)),Je=c.charCodeAt(S+(U=P+3)),oe=P+=4,o=0;o<ht;o+=2)ae=We[o],$e=We[o+1],I=s(ae,I,N,Ie,$e),N=s(I,N,Y,Be,$e),Y=s(N,Y,U,xe,$e),oe=s(Y,U,oe,Je,$e),We[o]=oe,U=Y,Y=N,N=I,I=ae;for(;P<$;)for(Ie=c.charCodeAt(S+(I=P)),oe=++P,o=0;o<ht;o+=2)ae=We[o],We[o]=oe=s(ae,I,oe,Ie,We[o+1]),I=ae;return oe}}();const Gx=Gs(Vx);function Zx(s,a){return s.includes(a)?!0:a.length<3?!1:qx(s,a)<=1}function qx(s,a){const c=[];for(let v=0;v<=s.length-a.length;v++)c.push(s.substr(v,a.length));let m=a.length;for(const v of c){const $=Gx(v,a);$<m&&(m=$)}return m}function Hx(s,a){return Object.assign(Object.assign({},s),{options:s.options.filter(c=>ky(c.displayName,a))})}function ky(s,a){return Zx(s.toLowerCase(),a.toLowerCase())}const Wx=Object.freeze(Object.defineProperty({__proto__:null,isCloseMatch:ky,searchThroughFacet:Hx},Symbol.toStringTag,{value:"Module"}));function v_(s){return s.length===1?s[0]:{kind:"disjunction",combinator:Bh.OR,filters:s}}function Kx(s){if(!s)return null;const a=s.filter($=>$.selected).map($=>$.filter);if(a.length===0)return null;if(a.length===1)return a[0];const c=[],m=a.reduce(($,S)=>(S.kind!=="fieldValue"?c.push(S):$[S.fieldId]?$[S.fieldId].push(S):$[S.fieldId]=[S],$),{}),v=Object.values(m);return v.length===1&&c.length===0?v_(v[0]):{kind:"conjunction",combinator:Bh.AND,filters:v.map($=>v_($)).concat(c)}}var zi;(function(s){s.Universal="universal",s.Vertical="vertical"})(zi||(zi={}));function co(s){for(var a=arguments.length,c=Array(a>1?a-1:0),m=1;m<a;m++)c[m-1]=arguments[m];throw Error("[Immer] minified error nr: "+s+(c.length?" "+c.map(function(v){return"'"+v+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Us(s){return!!s&&!!s[Ur]}function es(s){var a;return!!s&&(function(c){if(!c||typeof c!="object")return!1;var m=Object.getPrototypeOf(c);if(m===null)return!0;var v=Object.hasOwnProperty.call(m,"constructor")&&m.constructor;return v===Object||typeof v=="function"&&Function.toString.call(v)===i8}(s)||Array.isArray(s)||!!s[S_]||!!(!((a=s.constructor)===null||a===void 0)&&a[S_])||e0(s)||t0(s))}function ja(s,a,c){c===void 0&&(c=!1),ad(s)===0?(c?Object.keys:Jl)(s).forEach(function(m){c&&typeof m=="symbol"||a(m,s[m],s)}):s.forEach(function(m,v){return a(v,m,s)})}function ad(s){var a=s[Ur];return a?a.i>3?a.i-4:a.i:Array.isArray(s)?1:e0(s)?2:t0(s)?3:0}function Yl(s,a){return ad(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function Xx(s,a){return ad(s)===2?s.get(a):s[a]}function Dy(s,a,c){var m=ad(s);m===2?s.set(a,c):m===3?s.add(c):s[a]=c}function Oy(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}function e0(s){return r8&&s instanceof Map}function t0(s){return n8&&s instanceof Set}function Oa(s){return s.o||s.t}function r0(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var a=By(s);delete a[Ur];for(var c=Jl(a),m=0;m<c.length;m++){var v=c[m],$=a[v];$.writable===!1&&($.writable=!0,$.configurable=!0),($.get||$.set)&&(a[v]={configurable:!0,writable:!0,enumerable:$.enumerable,value:s[v]})}return Object.create(Object.getPrototypeOf(s),a)}function n0(s,a){return a===void 0&&(a=!1),i0(s)||Us(s)||!es(s)||(ad(s)>1&&(s.set=s.add=s.clear=s.delete=Yx),Object.freeze(s),a&&ja(s,function(c,m){return n0(m,!0)},!0)),s}function Yx(){co(2)}function i0(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Ao(s){var a=Ip[s];return a||co(18,s),a}function Jx(s,a){Ip[s]||(Ip[s]=a)}function Sp(){return Uc}function ep(s,a){a&&(Ao("Patches"),s.u=[],s.s=[],s.v=a)}function Fh(s){Cp(s),s.p.forEach(Qx),s.p=null}function Cp(s){s===Uc&&(Uc=s.l)}function x_(s){return Uc={p:[],l:Uc,h:s,m:!0,_:0}}function Qx(s){var a=s[Ur];a.i===0||a.i===1?a.j():a.g=!0}function tp(s,a){a._=a.p.length;var c=a.p[0],m=s!==void 0&&s!==c;return a.h.O||Ao("ES5").S(a,s,m),m?(c[Ur].P&&(Fh(a),co(4)),es(s)&&(s=Nh(a,s),a.l||jh(a,s)),a.u&&Ao("Patches").M(c[Ur].t,s,a.u,a.s)):s=Nh(a,c,[]),Fh(a),a.u&&a.v(a.u,a.s),s!==zy?s:void 0}function Nh(s,a,c){if(i0(a))return a;var m=a[Ur];if(!m)return ja(a,function(P,o){return b_(s,m,a,P,o,c)},!0),a;if(m.A!==s)return a;if(!m.P)return jh(s,m.t,!0),m.t;if(!m.I){m.I=!0,m.A._--;var v=m.i===4||m.i===5?m.o=r0(m.k):m.o,$=v,S=!1;m.i===3&&($=new Set(v),v.clear(),S=!0),ja($,function(P,o){return b_(s,m,v,P,o,c,S)}),jh(s,v,!1),c&&s.u&&Ao("Patches").N(m,c,s.u,s.s)}return m.o}function b_(s,a,c,m,v,$,S){if(Us(v)){var P=Nh(s,v,$&&a&&a.i!==3&&!Yl(a.R,m)?$.concat(m):void 0);if(Dy(c,m,P),!Us(P))return;s.m=!1}else S&&c.add(v);if(es(v)&&!i0(v)){if(!s.h.D&&s._<1)return;Nh(s,v),a&&a.A.l||jh(s,v)}}function jh(s,a,c){c===void 0&&(c=!1),!s.l&&s.h.D&&s.m&&n0(a,c)}function rp(s,a){var c=s[Ur];return(c?Oa(c):s)[a]}function $_(s,a){if(a in s)for(var c=Object.getPrototypeOf(s);c;){var m=Object.getOwnPropertyDescriptor(c,a);if(m)return m;c=Object.getPrototypeOf(c)}}function Bs(s){s.P||(s.P=!0,s.l&&Bs(s.l))}function np(s){s.o||(s.o=r0(s.t))}function Ap(s,a,c){var m=e0(a)?Ao("MapSet").F(a,c):t0(a)?Ao("MapSet").T(a,c):s.O?function(v,$){var S=Array.isArray(v),P={i:S?1:0,A:$?$.A:Sp(),P:!1,I:!1,R:{},l:$,t:v,k:null,o:null,j:null,C:!1},o=P,I=Vc;S&&(o=[P],I=Bc);var N=Proxy.revocable(o,I),Y=N.revoke,U=N.proxy;return P.k=U,P.j=Y,U}(a,c):Ao("ES5").J(a,c);return(c?c.A:Sp()).p.push(m),m}function e8(s){return Us(s)||co(22,s),function a(c){if(!es(c))return c;var m,v=c[Ur],$=ad(c);if(v){if(!v.P&&(v.i<4||!Ao("ES5").K(v)))return v.t;v.I=!0,m=w_(c,$),v.I=!1}else m=w_(c,$);return ja(m,function(S,P){v&&Xx(v.t,S)===P||Dy(m,S,a(P))}),$===3?new Set(m):m}(s)}function w_(s,a){switch(a){case 2:return new Map(s);case 3:return Array.from(s)}return r0(s)}function t8(){function s($,S){var P=v[$];return P?P.enumerable=S:v[$]=P={configurable:!0,enumerable:S,get:function(){var o=this[Ur];return Vc.get(o,$)},set:function(o){var I=this[Ur];Vc.set(I,$,o)}},P}function a($){for(var S=$.length-1;S>=0;S--){var P=$[S][Ur];if(!P.P)switch(P.i){case 5:m(P)&&Bs(P);break;case 4:c(P)&&Bs(P)}}}function c($){for(var S=$.t,P=$.k,o=Jl(P),I=o.length-1;I>=0;I--){var N=o[I];if(N!==Ur){var Y=S[N];if(Y===void 0&&!Yl(S,N))return!0;var U=P[N],oe=U&&U[Ur];if(oe?oe.t!==Y:!Oy(U,Y))return!0}}var ae=!!S[Ur];return o.length!==Jl(S).length+(ae?0:1)}function m($){var S=$.k;if(S.length!==$.t.length)return!0;var P=Object.getOwnPropertyDescriptor(S,S.length-1);if(P&&!P.get)return!0;for(var o=0;o<S.length;o++)if(!S.hasOwnProperty(o))return!0;return!1}var v={};Jx("ES5",{J:function($,S){var P=Array.isArray($),o=function(N,Y){if(N){for(var U=Array(Y.length),oe=0;oe<Y.length;oe++)Object.defineProperty(U,""+oe,s(oe,!0));return U}var ae=By(Y);delete ae[Ur];for(var $e=Jl(ae),Ie=0;Ie<$e.length;Ie++){var Be=$e[Ie];ae[Be]=s(Be,N||!!ae[Be].enumerable)}return Object.create(Object.getPrototypeOf(Y),ae)}(P,$),I={i:P?5:4,A:S?S.A:Sp(),P:!1,I:!1,R:{},l:S,t:$,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,Ur,{value:I,writable:!0}),o},S:function($,S,P){P?Us(S)&&S[Ur].A===$&&a($.p):($.u&&function o(I){if(I&&typeof I=="object"){var N=I[Ur];if(N){var Y=N.t,U=N.k,oe=N.R,ae=N.i;if(ae===4)ja(U,function(Je){Je!==Ur&&(Y[Je]!==void 0||Yl(Y,Je)?oe[Je]||o(U[Je]):(oe[Je]=!0,Bs(N)))}),ja(Y,function(Je){U[Je]!==void 0||Yl(U,Je)||(oe[Je]=!1,Bs(N))});else if(ae===5){if(m(N)&&(Bs(N),oe.length=!0),U.length<Y.length)for(var $e=U.length;$e<Y.length;$e++)oe[$e]=!1;else for(var Ie=Y.length;Ie<U.length;Ie++)oe[Ie]=!0;for(var Be=Math.min(U.length,Y.length),xe=0;xe<Be;xe++)U.hasOwnProperty(xe)||(oe[xe]=!0),oe[xe]===void 0&&o(U[xe])}}}}($.p[0]),a($.p))},K:function($){return $.i===4?c($):m($)}})}var E_,Uc,o0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",r8=typeof Map<"u",n8=typeof Set<"u",T_=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",zy=o0?Symbol.for("immer-nothing"):((E_={})["immer-nothing"]=!0,E_),S_=o0?Symbol.for("immer-draftable"):"__$immer_draftable",Ur=o0?Symbol.for("immer-state"):"__$immer_state",i8=""+Object.prototype.constructor,Jl=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,By=Object.getOwnPropertyDescriptors||function(s){var a={};return Jl(s).forEach(function(c){a[c]=Object.getOwnPropertyDescriptor(s,c)}),a},Ip={},Vc={get:function(s,a){if(a===Ur)return s;var c=Oa(s);if(!Yl(c,a))return function(v,$,S){var P,o=$_($,S);return o?"value"in o?o.value:(P=o.get)===null||P===void 0?void 0:P.call(v.k):void 0}(s,c,a);var m=c[a];return s.I||!es(m)?m:m===rp(s.t,a)?(np(s),s.o[a]=Ap(s.A.h,m,s)):m},has:function(s,a){return a in Oa(s)},ownKeys:function(s){return Reflect.ownKeys(Oa(s))},set:function(s,a,c){var m=$_(Oa(s),a);if(m!=null&&m.set)return m.set.call(s.k,c),!0;if(!s.P){var v=rp(Oa(s),a),$=v==null?void 0:v[Ur];if($&&$.t===c)return s.o[a]=c,s.R[a]=!1,!0;if(Oy(c,v)&&(c!==void 0||Yl(s.t,a)))return!0;np(s),Bs(s)}return s.o[a]===c&&(c!==void 0||a in s.o)||Number.isNaN(c)&&Number.isNaN(s.o[a])||(s.o[a]=c,s.R[a]=!0),!0},deleteProperty:function(s,a){return rp(s.t,a)!==void 0||a in s.t?(s.R[a]=!1,np(s),Bs(s)):delete s.R[a],s.o&&delete s.o[a],!0},getOwnPropertyDescriptor:function(s,a){var c=Oa(s),m=Reflect.getOwnPropertyDescriptor(c,a);return m&&{writable:!0,configurable:s.i!==1||a!=="length",enumerable:m.enumerable,value:c[a]}},defineProperty:function(){co(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){co(12)}},Bc={};ja(Vc,function(s,a){Bc[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),Bc.deleteProperty=function(s,a){return Bc.set.call(this,s,a,void 0)},Bc.set=function(s,a,c){return Vc.set.call(this,s[0],a,c,s[0])};var o8=function(){function s(c){var m=this;this.O=T_,this.D=!0,this.produce=function(v,$,S){if(typeof v=="function"&&typeof $!="function"){var P=$;$=v;var o=m;return function($e){var Ie=this;$e===void 0&&($e=P);for(var Be=arguments.length,xe=Array(Be>1?Be-1:0),Je=1;Je<Be;Je++)xe[Je-1]=arguments[Je];return o.produce($e,function(We){var ht;return(ht=$).call.apply(ht,[Ie,We].concat(xe))})}}var I;if(typeof $!="function"&&co(6),S!==void 0&&typeof S!="function"&&co(7),es(v)){var N=x_(m),Y=Ap(m,v,void 0),U=!0;try{I=$(Y),U=!1}finally{U?Fh(N):Cp(N)}return typeof Promise<"u"&&I instanceof Promise?I.then(function($e){return ep(N,S),tp($e,N)},function($e){throw Fh(N),$e}):(ep(N,S),tp(I,N))}if(!v||typeof v!="object"){if((I=$(v))===void 0&&(I=v),I===zy&&(I=void 0),m.D&&n0(I,!0),S){var oe=[],ae=[];Ao("Patches").M(v,I,oe,ae),S(oe,ae)}return I}co(21,v)},this.produceWithPatches=function(v,$){if(typeof v=="function")return function(I){for(var N=arguments.length,Y=Array(N>1?N-1:0),U=1;U<N;U++)Y[U-1]=arguments[U];return m.produceWithPatches(I,function(oe){return v.apply(void 0,[oe].concat(Y))})};var S,P,o=m.produce(v,$,function(I,N){S=I,P=N});return typeof Promise<"u"&&o instanceof Promise?o.then(function(I){return[I,S,P]}):[o,S,P]},typeof(c==null?void 0:c.useProxies)=="boolean"&&this.setUseProxies(c.useProxies),typeof(c==null?void 0:c.autoFreeze)=="boolean"&&this.setAutoFreeze(c.autoFreeze)}var a=s.prototype;return a.createDraft=function(c){es(c)||co(8),Us(c)&&(c=e8(c));var m=x_(this),v=Ap(this,c,void 0);return v[Ur].C=!0,Cp(m),v},a.finishDraft=function(c,m){var v=c&&c[Ur],$=v.A;return ep($,m),tp(void 0,$)},a.setAutoFreeze=function(c){this.D=c},a.setUseProxies=function(c){c&&!T_&&co(20),this.O=c},a.applyPatches=function(c,m){var v;for(v=m.length-1;v>=0;v--){var $=m[v];if($.path.length===0&&$.op==="replace"){c=$.value;break}}v>-1&&(m=m.slice(v+1));var S=Ao("Patches").$;return Us(c)?S(c,m):this.produce(c,function(P){return S(P,m)})},s}(),xi=new o8,Fy=xi.produce;xi.produceWithPatches.bind(xi);xi.setAutoFreeze.bind(xi);xi.setUseProxies.bind(xi);xi.applyPatches.bind(xi);xi.createDraft.bind(xi);xi.finishDraft.bind(xi);function Gc(s){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Gc(s)}function s8(s,a){if(Gc(s)!=="object"||s===null)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var m=c.call(s,a||"default");if(Gc(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function a8(s){var a=s8(s,"string");return Gc(a)==="symbol"?a:String(a)}function l8(s,a,c){return a=a8(a),a in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}function C_(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,m)}return c}function A_(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?C_(Object(c),!0).forEach(function(m){l8(s,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):C_(Object(c)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(c,m))})}return s}function Un(s){return"Minified Redux error #"+s+"; visit https://redux.js.org/Errors?code="+s+" for the full message or use the non-minified dev environment for full errors. "}var I_=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ip=function(){return Math.random().toString(36).substring(7).split("").join(".")},Uh={INIT:"@@redux/INIT"+ip(),REPLACE:"@@redux/REPLACE"+ip(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ip()}};function d8(s){if(typeof s!="object"||s===null)return!1;for(var a=s;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(s)===a}function Ny(s,a,c){var m;if(typeof a=="function"&&typeof c=="function"||typeof c=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof a=="function"&&typeof c>"u"&&(c=a,a=void 0),typeof c<"u"){if(typeof c!="function")throw new Error(Un(1));return c(Ny)(s,a)}if(typeof s!="function")throw new Error(Un(2));var v=s,$=a,S=[],P=S,o=!1;function I(){P===S&&(P=S.slice())}function N(){if(o)throw new Error(Un(3));return $}function Y($e){if(typeof $e!="function")throw new Error(Un(4));if(o)throw new Error(Un(5));var Ie=!0;return I(),P.push($e),function(){if(Ie){if(o)throw new Error(Un(6));Ie=!1,I();var xe=P.indexOf($e);P.splice(xe,1),S=null}}}function U($e){if(!d8($e))throw new Error(Un(7));if(typeof $e.type>"u")throw new Error(Un(8));if(o)throw new Error(Un(9));try{o=!0,$=v($,$e)}finally{o=!1}for(var Ie=S=P,Be=0;Be<Ie.length;Be++){var xe=Ie[Be];xe()}return $e}function oe($e){if(typeof $e!="function")throw new Error(Un(10));v=$e,U({type:Uh.REPLACE})}function ae(){var $e,Ie=Y;return $e={subscribe:function(xe){if(typeof xe!="object"||xe===null)throw new Error(Un(11));function Je(){xe.next&&xe.next(N())}Je();var We=Ie(Je);return{unsubscribe:We}}},$e[I_]=function(){return this},$e}return U({type:Uh.INIT}),m={dispatch:U,subscribe:Y,getState:N,replaceReducer:oe},m[I_]=ae,m}function c8(s){Object.keys(s).forEach(function(a){var c=s[a],m=c(void 0,{type:Uh.INIT});if(typeof m>"u")throw new Error(Un(12));if(typeof c(void 0,{type:Uh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function s0(s){for(var a=Object.keys(s),c={},m=0;m<a.length;m++){var v=a[m];typeof s[v]=="function"&&(c[v]=s[v])}var $=Object.keys(c),S;try{c8(c)}catch(P){S=P}return function(o,I){if(o===void 0&&(o={}),S)throw S;for(var N=!1,Y={},U=0;U<$.length;U++){var oe=$[U],ae=c[oe],$e=o[oe],Ie=ae($e,I);if(typeof Ie>"u")throw I&&I.type,new Error(Un(14));Y[oe]=Ie,N=N||Ie!==$e}return N=N||$.length!==Object.keys(o).length,N?Y:o}}function Vh(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return a.length===0?function(m){return m}:a.length===1?a[0]:a.reduce(function(m,v){return function(){return m(v.apply(void 0,arguments))}})}function u8(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return function(m){return function(){var v=m.apply(void 0,arguments),$=function(){throw new Error(Un(15))},S={getState:v.getState,dispatch:function(){return $.apply(void 0,arguments)}},P=a.map(function(o){return o(S)});return $=Vh.apply(void 0,P)(v.dispatch),A_(A_({},v),{},{dispatch:$})}}}function jy(s){var a=function(m){var v=m.dispatch,$=m.getState;return function(S){return function(P){return typeof P=="function"?P(v,$,s):S(P)}}};return a}var Uy=jy();Uy.withExtraArgument=jy;const M_=Uy;var Vy=function(){var s=function(a,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,v){m.__proto__=v}||function(m,v){for(var $ in v)Object.prototype.hasOwnProperty.call(v,$)&&(m[$]=v[$])},s(a,c)};return function(a,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(a,c);function m(){this.constructor=a}a.prototype=c===null?Object.create(c):(m.prototype=c.prototype,new m)}}(),h8=function(s,a){var c={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},m,v,$,S;return S={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function P(I){return function(N){return o([I,N])}}function o(I){if(m)throw new TypeError("Generator is already executing.");for(;c;)try{if(m=1,v&&($=I[0]&2?v.return:I[0]?v.throw||(($=v.return)&&$.call(v),0):v.next)&&!($=$.call(v,I[1])).done)return $;switch(v=0,$&&(I=[I[0]&2,$.value]),I[0]){case 0:case 1:$=I;break;case 4:return c.label++,{value:I[1],done:!1};case 5:c.label++,v=I[1],I=[0];continue;case 7:I=c.ops.pop(),c.trys.pop();continue;default:if($=c.trys,!($=$.length>0&&$[$.length-1])&&(I[0]===6||I[0]===2)){c=0;continue}if(I[0]===3&&(!$||I[1]>$[0]&&I[1]<$[3])){c.label=I[1];break}if(I[0]===6&&c.label<$[1]){c.label=$[1],$=I;break}if($&&c.label<$[2]){c.label=$[2],c.ops.push(I);break}$[2]&&c.ops.pop(),c.trys.pop();continue}I=a.call(s,c)}catch(N){I=[6,N],v=0}finally{m=$=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},id=function(s,a){for(var c=0,m=a.length,v=s.length;c<m;c++,v++)s[v]=a[c];return s},f8=Object.defineProperty,p8=Object.defineProperties,m8=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertySymbols,g8=Object.prototype.hasOwnProperty,_8=Object.prototype.propertyIsEnumerable,L_=function(s,a,c){return a in s?f8(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c},Ns=function(s,a){for(var c in a||(a={}))g8.call(a,c)&&L_(s,c,a[c]);if(P_)for(var m=0,v=P_(a);m<v.length;m++){var c=v[m];_8.call(a,c)&&L_(s,c,a[c])}return s},op=function(s,a){return p8(s,m8(a))},y8=function(s,a,c){return new Promise(function(m,v){var $=function(o){try{P(c.next(o))}catch(I){v(I)}},S=function(o){try{P(c.throw(o))}catch(I){v(I)}},P=function(o){return o.done?m(o.value):Promise.resolve(o.value).then($,S)};P((c=c.apply(s,a)).next())})},v8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Vh:Vh.apply(null,arguments)};function x8(s){if(typeof s!="object"||s===null)return!1;var a=Object.getPrototypeOf(s);if(a===null)return!0;for(var c=a;Object.getPrototypeOf(c)!==null;)c=Object.getPrototypeOf(c);return a===c}function js(s,a){function c(){for(var m=[],v=0;v<arguments.length;v++)m[v]=arguments[v];if(a){var $=a.apply(void 0,m);if(!$)throw new Error("prepareAction did not return an object");return Ns(Ns({type:s,payload:$.payload},"meta"in $&&{meta:$.meta}),"error"in $&&{error:$.error})}return{type:s,payload:m[0]}}return c.toString=function(){return""+s},c.type=s,c.match=function(m){return m.type===s},c}var b8=function(s){Vy(a,s);function a(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];var v=s.apply(this,c)||this;return Object.setPrototypeOf(v,a.prototype),v}return Object.defineProperty(a,Symbol.species,{get:function(){return a},enumerable:!1,configurable:!0}),a.prototype.concat=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];return s.prototype.concat.apply(this,c)},a.prototype.prepend=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];return c.length===1&&Array.isArray(c[0])?new(a.bind.apply(a,id([void 0],c[0].concat(this)))):new(a.bind.apply(a,id([void 0],c.concat(this))))},a}(Array),$8=function(s){Vy(a,s);function a(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];var v=s.apply(this,c)||this;return Object.setPrototypeOf(v,a.prototype),v}return Object.defineProperty(a,Symbol.species,{get:function(){return a},enumerable:!1,configurable:!0}),a.prototype.concat=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];return s.prototype.concat.apply(this,c)},a.prototype.prepend=function(){for(var c=[],m=0;m<arguments.length;m++)c[m]=arguments[m];return c.length===1&&Array.isArray(c[0])?new(a.bind.apply(a,id([void 0],c[0].concat(this)))):new(a.bind.apply(a,id([void 0],c.concat(this))))},a}(Array);function Mp(s){return es(s)?Fy(s,function(){}):s}function w8(s){return typeof s=="boolean"}function E8(){return function(a){return T8(a)}}function T8(s){s===void 0&&(s={});var a=s.thunk,c=a===void 0?!0:a;s.immutableCheck,s.serializableCheck,s.actionCreatorCheck;var m=new b8;return c&&(w8(c)?m.push(M_):m.push(M_.withExtraArgument(c.extraArgument))),m}var S8=!0;function C8(s){var a=E8(),c=s||{},m=c.reducer,v=m===void 0?void 0:m,$=c.middleware,S=$===void 0?a():$,P=c.devTools,o=P===void 0?!0:P,I=c.preloadedState,N=I===void 0?void 0:I,Y=c.enhancers,U=Y===void 0?void 0:Y,oe;if(typeof v=="function")oe=v;else if(x8(v))oe=s0(v);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var ae=S;typeof ae=="function"&&(ae=ae(a));var $e=u8.apply(void 0,ae),Ie=Vh;o&&(Ie=v8(Ns({trace:!S8},typeof o=="object"&&o)));var Be=new $8($e),xe=Be;Array.isArray(U)?xe=id([$e],U):typeof U=="function"&&(xe=U(Be));var Je=Ie.apply(void 0,xe);return Ny(oe,N,Je)}function Gy(s){var a={},c=[],m,v={addCase:function($,S){var P=typeof $=="string"?$:$.type;if(!P)throw new Error("`builder.addCase` cannot be called with an empty action type");if(P in a)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return a[P]=S,v},addMatcher:function($,S){return c.push({matcher:$,reducer:S}),v},addDefaultCase:function($){return m=$,v}};return s(v),[a,c,m]}function A8(s){return typeof s=="function"}function I8(s,a,c,m){c===void 0&&(c=[]);var v=typeof a=="function"?Gy(a):[a,c,m],$=v[0],S=v[1],P=v[2],o;if(A8(s))o=function(){return Mp(s())};else{var I=Mp(s);o=function(){return I}}function N(Y,U){Y===void 0&&(Y=o());var oe=id([$[U.type]],S.filter(function(ae){var $e=ae.matcher;return $e(U)}).map(function(ae){var $e=ae.reducer;return $e}));return oe.filter(function(ae){return!!ae}).length===0&&(oe=[P]),oe.reduce(function(ae,$e){if($e)if(Us(ae)){var Ie=ae,Be=$e(Ie,U);return Be===void 0?ae:Be}else{if(es(ae))return Fy(ae,function(xe){return $e(xe,U)});var Be=$e(ae,U);if(Be===void 0){if(ae===null)return ae;throw Error("A case reducer on a non-draftable value must not return undefined")}return Be}return ae},Y)}return N.getInitialState=o,N}function M8(s,a){return s+"/"+a}function uo(s){var a=s.name;if(!a)throw new Error("`name` is a required option for createSlice");typeof yp.process<"u";var c=typeof s.initialState=="function"?s.initialState:Mp(s.initialState),m=s.reducers||{},v=Object.keys(m),$={},S={},P={};v.forEach(function(N){var Y=m[N],U=M8(a,N),oe,ae;"reducer"in Y?(oe=Y.reducer,ae=Y.prepare):oe=Y,$[N]=oe,S[U]=oe,P[N]=ae?js(U,ae):js(U)});function o(){var N=typeof s.extraReducers=="function"?Gy(s.extraReducers):[s.extraReducers],Y=N[0],U=Y===void 0?{}:Y,oe=N[1],ae=oe===void 0?[]:oe,$e=N[2],Ie=$e===void 0?void 0:$e,Be=Ns(Ns({},U),S);return I8(c,function(xe){for(var Je in Be)xe.addCase(Je,Be[Je]);for(var We=0,ht=ae;We<ht.length;We++){var Lt=ht[We];xe.addMatcher(Lt.matcher,Lt.reducer)}Ie&&xe.addDefaultCase(Ie)})}var I;return{name:a,reducer:function(N,Y){return I||(I=o()),I(N,Y)},actions:P,caseReducers:$,getInitialState:function(){return I||(I=o()),I.getInitialState()}}}var P8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",L8=function(s){s===void 0&&(s=21);for(var a="",c=s;c--;)a+=P8[Math.random()*64|0];return a},R8=["name","message","stack","code"],sp=function(){function s(a,c){this.payload=a,this.meta=c}return s}(),R_=function(){function s(a,c){this.payload=a,this.meta=c}return s}(),k8=function(s){if(typeof s=="object"&&s!==null){for(var a={},c=0,m=R8;c<m.length;c++){var v=m[c];typeof s[v]=="string"&&(a[v]=s[v])}return a}return{message:String(s)}};(function(){function s(a,c,m){var v=js(a+"/fulfilled",function(I,N,Y,U){return{payload:I,meta:op(Ns({},U||{}),{arg:Y,requestId:N,requestStatus:"fulfilled"})}}),$=js(a+"/pending",function(I,N,Y){return{payload:void 0,meta:op(Ns({},Y||{}),{arg:N,requestId:I,requestStatus:"pending"})}}),S=js(a+"/rejected",function(I,N,Y,U,oe){return{payload:U,error:(m&&m.serializeError||k8)(I||"Rejected"),meta:op(Ns({},oe||{}),{arg:Y,requestId:N,rejectedWithValue:!!U,requestStatus:"rejected",aborted:(I==null?void 0:I.name)==="AbortError",condition:(I==null?void 0:I.name)==="ConditionError"})}}),P=typeof AbortController<"u"?AbortController:function(){function I(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return I.prototype.abort=function(){},I}();function o(I){return function(N,Y,U){var oe=m!=null&&m.idGenerator?m.idGenerator(I):L8(),ae=new P,$e;function Ie(xe){$e=xe,ae.abort()}var Be=function(){return y8(this,null,function(){var xe,Je,We,ht,Lt,Ye,ft;return h8(this,function(gt){switch(gt.label){case 0:return gt.trys.push([0,4,,5]),ht=(xe=m==null?void 0:m.condition)==null?void 0:xe.call(m,I,{getState:Y,extra:U}),O8(ht)?[4,ht]:[3,2];case 1:ht=gt.sent(),gt.label=2;case 2:if(ht===!1||ae.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Lt=new Promise(function(ve,Ke){return ae.signal.addEventListener("abort",function(){return Ke({name:"AbortError",message:$e||"Aborted"})})}),N($(oe,I,(Je=m==null?void 0:m.getPendingMeta)==null?void 0:Je.call(m,{requestId:oe,arg:I},{getState:Y,extra:U}))),[4,Promise.race([Lt,Promise.resolve(c(I,{dispatch:N,getState:Y,extra:U,requestId:oe,signal:ae.signal,abort:Ie,rejectWithValue:function(ve,Ke){return new sp(ve,Ke)},fulfillWithValue:function(ve,Ke){return new R_(ve,Ke)}})).then(function(ve){if(ve instanceof sp)throw ve;return ve instanceof R_?v(ve.payload,oe,I,ve.meta):v(ve,oe,I)})])];case 3:return We=gt.sent(),[3,5];case 4:return Ye=gt.sent(),We=Ye instanceof sp?S(null,oe,I,Ye.payload,Ye.meta):S(Ye,oe,I),[3,5];case 5:return ft=m&&!m.dispatchConditionRejection&&S.match(We)&&We.meta.condition,ft||N(We),[2,We]}})})}();return Object.assign(Be,{abort:Ie,requestId:oe,arg:I,unwrap:function(){return Be.then(D8)}})}}return Object.assign(o,{pending:$,rejected:S,fulfilled:v,typePrefix:a})}return s.withTypes=function(){return s},s})();function D8(s){if(s.meta&&s.meta.rejectedWithValue)throw s.payload;if(s.error)throw s.error;return s.payload}function O8(s){return s!==null&&typeof s=="object"&&typeof s.then=="function"}var a0="listenerMiddleware";js(a0+"/add");js(a0+"/removeAll");js(a0+"/remove");var k_;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof yp.global<"u"?yp.global:globalThis);t8();const Zy={},z8={handleSearchResponse:(s,a)=>{var c,m,v,$,S,P,o,I,N,Y,U,oe,ae,$e;if(!((c=a.payload)===null||c===void 0)&&c.allResultsForVertical&&(!((m=a.payload)===null||m===void 0)&&m.alternativeVerticals)){const Ie={facets:a.payload.allResultsForVertical.facets||[],results:(v=a.payload.allResultsForVertical.verticalResults)===null||v===void 0?void 0:v.results,resultsCount:($=a.payload.allResultsForVertical.verticalResults)===null||$===void 0?void 0:$.resultsCount};s.noResults={allResultsForVertical:Ie,alternativeVerticals:a.payload.alternativeVerticals}}else s.noResults=void 0;s.appliedQueryFilters=(P=(S=a.payload)===null||S===void 0?void 0:S.verticalResults)===null||P===void 0?void 0:P.appliedQueryFilters,s.queryDurationMillis=(I=(o=a.payload)===null||o===void 0?void 0:o.verticalResults)===null||I===void 0?void 0:I.queryDurationMillis,s.results=(Y=(N=a.payload)===null||N===void 0?void 0:N.verticalResults)===null||Y===void 0?void 0:Y.results,s.resultsCount=(oe=(U=a.payload)===null||U===void 0?void 0:U.verticalResults)===null||oe===void 0?void 0:oe.resultsCount,s.source=($e=(ae=a.payload)===null||ae===void 0?void 0:ae.verticalResults)===null||$e===void 0?void 0:$e.source},setDisplayName:(s,a)=>{s.displayName=a.payload},setLimit:(s,a)=>{s.limit=a.payload},setOffset:(s,a)=>{s.offset=a.payload},setSortBys:(s,a)=>{s.sortBys=a.payload},setVerticalKey:(s,a)=>{s.verticalKey=a.payload},setLocationRadius:(s,a)=>{s.locationRadius=a.payload}};function B8(s){return uo({name:s+"vertical",initialState:Zy,reducers:z8})}const qy={},F8={setVerticals:(s,a)=>{s.verticals=a.payload},setLimit:(s,a)=>{s.limit=a.payload},setRestrictVerticals:(s,a)=>{s.restrictVerticals=a.payload}};function N8(s){return uo({name:s+"universal",initialState:qy,reducers:F8})}var j8="__lodash_hash_undefined__";function U8(s){return this.__data__.set(s,j8),this}var V8=U8;function G8(s){return this.__data__.has(s)}var Z8=G8,q8=g5,H8=V8,W8=Z8;function Gh(s){var a=-1,c=s==null?0:s.length;for(this.__data__=new q8;++a<c;)this.add(s[a])}Gh.prototype.add=Gh.prototype.push=H8;Gh.prototype.has=W8;var K8=Gh;function X8(s,a){for(var c=-1,m=s==null?0:s.length;++c<m;)if(a(s[c],c,s))return!0;return!1}var Y8=X8;function J8(s,a){return s.has(a)}var Q8=J8,e7=K8,t7=Y8,r7=Q8,n7=1,i7=2;function o7(s,a,c,m,v,$){var S=c&n7,P=s.length,o=a.length;if(P!=o&&!(S&&o>P))return!1;var I=$.get(s),N=$.get(a);if(I&&N)return I==a&&N==s;var Y=-1,U=!0,oe=c&i7?new e7:void 0;for($.set(s,a),$.set(a,s);++Y<P;){var ae=s[Y],$e=a[Y];if(m)var Ie=S?m($e,ae,Y,a,s,$):m(ae,$e,Y,s,a,$);if(Ie!==void 0){if(Ie)continue;U=!1;break}if(oe){if(!t7(a,function(Be,xe){if(!r7(oe,xe)&&(ae===Be||v(ae,Be,c,m,$)))return oe.push(xe)})){U=!1;break}}else if(!(ae===$e||v(ae,$e,c,m,$))){U=!1;break}}return $.delete(s),$.delete(a),U}var Hy=o7;function s7(s){var a=-1,c=Array(s.size);return s.forEach(function(m,v){c[++a]=[v,m]}),c}var a7=s7;function l7(s){var a=-1,c=Array(s.size);return s.forEach(function(m){c[++a]=m}),c}var d7=l7,D_=_5,O_=y5,c7=v5,u7=Hy,h7=a7,f7=d7,p7=1,m7=2,g7="[object Boolean]",_7="[object Date]",y7="[object Error]",v7="[object Map]",x7="[object Number]",b7="[object RegExp]",$7="[object Set]",w7="[object String]",E7="[object Symbol]",T7="[object ArrayBuffer]",S7="[object DataView]",z_=D_?D_.prototype:void 0,ap=z_?z_.valueOf:void 0;function C7(s,a,c,m,v,$,S){switch(c){case S7:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case T7:return!(s.byteLength!=a.byteLength||!$(new O_(s),new O_(a)));case g7:case _7:case x7:return c7(+s,+a);case y7:return s.name==a.name&&s.message==a.message;case b7:case w7:return s==a+"";case v7:var P=h7;case $7:var o=m&p7;if(P||(P=f7),s.size!=a.size&&!o)return!1;var I=S.get(s);if(I)return I==a;m|=m7,S.set(s,a);var N=u7(P(s),P(a),m,v,$,S);return S.delete(s),N;case E7:if(ap)return ap.call(s)==ap.call(a)}return!1}var A7=C7;function I7(s,a){for(var c=-1,m=a.length,v=s.length;++c<m;)s[v+c]=a[c];return s}var M7=I7,P7=M7,L7=oy;function R7(s,a,c){var m=a(s);return L7(s)?m:P7(m,c(s))}var k7=R7;function D7(s,a){for(var c=-1,m=s==null?0:s.length,v=0,$=[];++c<m;){var S=s[c];a(S,c,s)&&($[v++]=S)}return $}var O7=D7;function z7(){return[]}var B7=z7,F7=O7,N7=B7,j7=Object.prototype,U7=j7.propertyIsEnumerable,B_=Object.getOwnPropertySymbols,V7=B_?function(s){return s==null?[]:(s=Object(s),F7(B_(s),function(a){return U7.call(s,a)}))}:N7,G7=V7,Z7=x5,q7=Z7(Object.keys,Object),H7=q7,W7=b5,K7=H7,X7=Object.prototype,Y7=X7.hasOwnProperty;function J7(s){if(!W7(s))return K7(s);var a=[];for(var c in Object(s))Y7.call(s,c)&&c!="constructor"&&a.push(c);return a}var Q7=J7,eb=$5,tb=Q7,rb=w5;function nb(s){return rb(s)?eb(s):tb(s)}var ib=nb,ob=k7,sb=G7,ab=ib;function lb(s){return ob(s,ab,sb)}var db=lb,F_=db,cb=1,ub=Object.prototype,hb=ub.hasOwnProperty;function fb(s,a,c,m,v,$){var S=c&cb,P=F_(s),o=P.length,I=F_(a),N=I.length;if(o!=N&&!S)return!1;for(var Y=o;Y--;){var U=P[Y];if(!(S?U in a:hb.call(a,U)))return!1}var oe=$.get(s),ae=$.get(a);if(oe&&ae)return oe==a&&ae==s;var $e=!0;$.set(s,a),$.set(a,s);for(var Ie=S;++Y<o;){U=P[Y];var Be=s[U],xe=a[U];if(m)var Je=S?m(xe,Be,U,a,s,$):m(Be,xe,U,s,a,$);if(!(Je===void 0?Be===xe||v(Be,xe,c,m,$):Je)){$e=!1;break}Ie||(Ie=U=="constructor")}if($e&&!Ie){var We=s.constructor,ht=a.constructor;We!=ht&&"constructor"in s&&"constructor"in a&&!(typeof We=="function"&&We instanceof We&&typeof ht=="function"&&ht instanceof ht)&&($e=!1)}return $.delete(s),$.delete(a),$e}var pb=fb,mb=t1,gb=r1,_b=mb(gb,"DataView"),yb=_b,vb=t1,xb=r1,bb=vb(xb,"Promise"),$b=bb,wb=t1,Eb=r1,Tb=wb(Eb,"Set"),Sb=Tb,Cb=t1,Ab=r1,Ib=Cb(Ab,"WeakMap"),Mb=Ib,Pp=yb,Lp=E5,Rp=$b,kp=Sb,Dp=Mb,Wy=T5,ld=S5,N_="[object Map]",Pb="[object Object]",j_="[object Promise]",U_="[object Set]",V_="[object WeakMap]",G_="[object DataView]",Lb=ld(Pp),Rb=ld(Lp),kb=ld(Rp),Db=ld(kp),Ob=ld(Dp),za=Wy;(Pp&&za(new Pp(new ArrayBuffer(1)))!=G_||Lp&&za(new Lp)!=N_||Rp&&za(Rp.resolve())!=j_||kp&&za(new kp)!=U_||Dp&&za(new Dp)!=V_)&&(za=function(s){var a=Wy(s),c=a==Pb?s.constructor:void 0,m=c?ld(c):"";if(m)switch(m){case Lb:return G_;case Rb:return N_;case kb:return j_;case Db:return U_;case Ob:return V_}return a});var zb=za,lp=C5,Bb=Hy,Fb=A7,Nb=pb,Z_=zb,q_=oy,H_=A5,jb=I5,Ub=1,W_="[object Arguments]",K_="[object Array]",$h="[object Object]",Vb=Object.prototype,X_=Vb.hasOwnProperty;function Gb(s,a,c,m,v,$){var S=q_(s),P=q_(a),o=S?K_:Z_(s),I=P?K_:Z_(a);o=o==W_?$h:o,I=I==W_?$h:I;var N=o==$h,Y=I==$h,U=o==I;if(U&&H_(s)){if(!H_(a))return!1;S=!0,N=!1}if(U&&!N)return $||($=new lp),S||jb(s)?Bb(s,a,c,m,v,$):Fb(s,a,o,c,m,v,$);if(!(c&Ub)){var oe=N&&X_.call(s,"__wrapped__"),ae=Y&&X_.call(a,"__wrapped__");if(oe||ae){var $e=oe?s.value():s,Ie=ae?a.value():a;return $||($=new lp),v($e,Ie,c,m,$)}}return U?($||($=new lp),Nb(s,a,c,m,v,$)):!1}var Zb=Gb,qb=Zb,Y_=M5;function Ky(s,a,c,m,v){return s===a?!0:s==null||a==null||!Y_(s)&&!Y_(a)?s!==s&&a!==a:qb(s,a,c,m,Ky,v)}var Hb=Ky,Wb=Hb;function Kb(s,a){return Wb(s,a)}var Xb=Kb;const l0=Gs(Xb);function Yb(s,a){return s.fieldId===a.fieldId&&s.matcher===a.matcher&&l0(s.value,a.value)}function Op(s,a){return s.kind==="fieldValue"?a.kind==="fieldValue"?Yb(s,a):!1:a.kind==="fieldValue"?!1:s.combinator===a.combinator&&s.filters.length===a.filters.length&&s.filters.every(c=>a.filters.some(m=>Op(c,m)))&&a.filters.every(c=>s.filters.some(m=>Op(c,m)))}const Xy={},Jb={setStatic:(s,a)=>{s.static=a.payload},setFacets:(s,a)=>{s.facets=a.payload},resetFacets:s=>{var a;(a=s.facets)===null||a===void 0||a.forEach(c=>{c.options.forEach(m=>m.selected=!1)})},setFacetOption:(s,{payload:a})=>{if(!s.facets){console.warn("Trying to select a facet option when no facets exist.");return}const{fieldId:c,facetOption:m,shouldSelect:v}=a,$=s.facets.filter(S=>S.fieldId===c);if($.length===0){console.warn(`Could not select a facet option for fieldId "${c}": the fieldId was not found.`);return}$.forEach(S=>{S.options=S.options.map(P=>P.matcher!==m.matcher||!l0(P.value,m.value)?P:Object.assign(Object.assign({},P),{selected:v}))})},setFilterOption:(s,{payload:a})=>{s.static||(s.static=[]);const{selected:c,displayName:m,filter:v}=a,$=s.static.find(S=>Op(S.filter,v));$?$.selected=c:c?s.static.push(a):console.warn(`Could not unselect a non-existing filter option in state with the following fields:
${JSON.stringify(v)}.`)}};function Qb(s){return uo({name:s+"filters",initialState:Xy,reducers:Jb})}const Yy={},e$={setResult:(s,a)=>{s.result=a.payload}};function t$(s){return uo({name:s+"directAnswer",initialState:Yy,reducers:e$})}const Jy={actions:[]},r$={setActions:(s,a)=>{s.actions=a.payload}};function n$(s){return uo({name:s+"queryRules",initialState:Jy,reducers:r$})}const Qy={},i$={setIsLoading:(s,a)=>{s.isLoading=a.payload}};function o$(s){return uo({name:s+"searchStatus",initialState:Qy,reducers:i$})}class s${constructor(a,c,m,v){this.core=a,this.stateManager=c,this.httpManager=m,this.additionalHttpHeaders=v,this.utilities=Wx}setQuery(a){this.stateManager.dispatchEvent("query/setInput",a)}setQueryTrigger(a){this.stateManager.dispatchEvent("query/setTrigger",a)}setQuerySource(a){this.stateManager.dispatchEvent("query/setSource",a)}setVertical(a){this._resetSearcherStates(),this.stateManager.dispatchEvent("vertical/setVerticalKey",a),this.stateManager.dispatchEvent("meta/setSearchType",zi.Vertical)}setUniversal(){this._resetSearcherStates(),this.stateManager.dispatchEvent("vertical/setVerticalKey",void 0),this.stateManager.dispatchEvent("meta/setSearchType",zi.Universal)}_resetSearcherStates(){this.stateManager.dispatchEvent("set-state",Object.assign(Object.assign({},this.state),{directAnswer:Yy,filters:Xy,queryRules:Jy,searchStatus:Qy,vertical:Zy,universal:qy}))}setVerticalLimit(a){this.stateManager.dispatchEvent("vertical/setLimit",a)}setUniversalLimit(a){this.stateManager.dispatchEvent("universal/setLimit",a)}setOffset(a){this.stateManager.dispatchEvent("vertical/setOffset",a)}setStaticFilters(a){this.stateManager.dispatchEvent("filters/setStatic",a)}setFacets(a){this.stateManager.dispatchEvent("filters/setFacets",a)}resetFacets(){this.stateManager.dispatchEvent("filters/resetFacets")}setSpellCheckEnabled(a){this.stateManager.dispatchEvent("spellCheck/setEnabled",a)}setSessionTrackingEnabled(a){this.stateManager.dispatchEvent("sessionTracking/setEnabled",a)}setSessionId(a){this.stateManager.dispatchEvent("sessionTracking/setSessionId",a)}setAlternativeVerticals(a){this.stateManager.dispatchEvent("vertical/setAlternativeVerticals",a)}setSortBys(a){this.stateManager.dispatchEvent("vertical/setSortBys",a)}setContext(a){this.stateManager.dispatchEvent("meta/setContext",a)}setReferrerPageUrl(a){this.stateManager.dispatchEvent("meta/setReferrerPageUrl",a)}setUserLocation(a){this.stateManager.dispatchEvent("location/setUserLocation",a)}setState(a){this.stateManager.dispatchEvent("set-state",a)}setRestrictVerticals(a){this.stateManager.dispatchEvent("universal/setRestrictVerticals",a)}setLocationRadius(a){this.stateManager.dispatchEvent("vertical/setLocationRadius",a)}get state(){return this.stateManager.getState()}addListener(a){return this.stateManager.addListener(a)}async submitQuestion(a){return this.core.submitQuestion(Object.assign(Object.assign({},a),{additionalHttpHeaders:this.additionalHttpHeaders}))}async executeUniversalQuery(){if(this.state.meta.searchType!==zi.Universal){console.error("The meta.searchType must be set to 'universal' for universal search. Set the searchType to universal by calling `setUniversal()`");return}const a=this.httpManager.updateRequestId("universalQuery");this.stateManager.dispatchEvent("searchStatus/setIsLoading",!0);const{input:c,querySource:m,queryTrigger:v}=this.state.query,$=!this.state.spellCheck.enabled,S=this.state.sessionTracking.enabled,{limit:P,restrictVerticals:o}=this.state.universal,I=this.state.sessionTracking.sessionId,{referrerPageUrl:N,context:Y}=this.state.meta,{userLocation:U}=this.state.location,oe=Object.assign(Object.assign({query:c||"",querySource:m,queryTrigger:v,skipSpellCheck:$},S&&{sessionId:I}),{sessionTrackingEnabled:S,limit:P,location:U,context:Y,referrerPageUrl:N,restrictVerticals:o,additionalHttpHeaders:this.additionalHttpHeaders});let ae;try{ae=await this.core.universalSearch(oe)}catch(Ie){return this.httpManager.processRequestId("universalQuery",a)&&this.stateManager.dispatchEvent("searchStatus/setIsLoading",!1),Promise.reject(Ie)}return this.httpManager.processRequestId("universalQuery",a)&&(this.stateManager.dispatchEvent("universal/setVerticals",ae.verticalResults),this.stateManager.dispatchEvent("query/setQueryId",ae.queryId),this.stateManager.dispatchEvent("query/setMostRecentSearch",c),this.stateManager.dispatchEvent("spellCheck/setResult",ae.spellCheck),this.stateManager.dispatchEvent("query/setSearchIntents",ae.searchIntents||[]),this.stateManager.dispatchEvent("location/setLocationBias",ae.locationBias),this.stateManager.dispatchEvent("searchStatus/setIsLoading",!1),this.stateManager.dispatchEvent("meta/setUUID",ae.uuid),this.stateManager.dispatchEvent("directAnswer/setResult",ae.directAnswer),this.stateManager.dispatchEvent("queryRules/setActions",ae.queryRulesActionsData||[])),ae}async executeUniversalAutocomplete(){const a=this.state.query.input||"";return this.core.universalAutocomplete({input:a,additionalHttpHeaders:this.additionalHttpHeaders})}async executeVerticalQuery(){var a;if(this.state.meta.searchType!==zi.Vertical){console.error("The meta.searchType must be set to 'vertical' for vertical search. Set the searchType to vertical by calling `setVertical()`");return}const c=this.httpManager.updateRequestId("verticalQuery"),m=this.state.vertical.verticalKey;if(!m){console.error("no verticalKey supplied for vertical search");return}this.stateManager.dispatchEvent("searchStatus/setIsLoading",!0);const{input:v,querySource:$,queryTrigger:S}=this.state.query,P=!this.state.spellCheck.enabled,o=this.state.sessionTracking.enabled,I=this.state.sessionTracking.sessionId,N=Kx(this.state.filters.static)||void 0,Y=(a=this.state.filters)===null||a===void 0?void 0:a.facets,{limit:U,offset:oe,sortBys:ae,locationRadius:$e}=this.state.vertical,{referrerPageUrl:Ie,context:Be}=this.state.meta,{userLocation:xe}=this.state.location,Je=Y==null?void 0:Y.map(Ye=>({fieldId:Ye.fieldId,options:Ye.options.filter(ft=>ft.selected)})),We=Object.assign(Object.assign({query:v||"",querySource:$,queryTrigger:S,verticalKey:m,staticFilter:N,facets:Je,retrieveFacets:!0,limit:U,offset:oe,skipSpellCheck:P},o&&{sessionId:I}),{sessionTrackingEnabled:o,location:xe,sortBys:ae,context:Be,referrerPageUrl:Ie,locationRadius:$e,additionalHttpHeaders:this.additionalHttpHeaders});let ht;try{ht=await this.core.verticalSearch(We)}catch(Ye){return this.httpManager.processRequestId("verticalQuery",c)&&this.stateManager.dispatchEvent("searchStatus/setIsLoading",!1),Promise.reject(Ye)}return this.httpManager.processRequestId("verticalQuery",c)&&(this.stateManager.dispatchEvent("query/setQueryId",ht.queryId),this.stateManager.dispatchEvent("query/setMostRecentSearch",v),this.stateManager.dispatchEvent("filters/setFacets",ht.facets),this.stateManager.dispatchEvent("spellCheck/setResult",ht.spellCheck),this.stateManager.dispatchEvent("query/setSearchIntents",ht.searchIntents||[]),this.stateManager.dispatchEvent("location/setLocationBias",ht.locationBias),this.stateManager.dispatchEvent("directAnswer/setResult",ht.directAnswer),this.stateManager.dispatchEvent("meta/setUUID",ht.uuid),this.stateManager.dispatchEvent("searchStatus/setIsLoading",!1),this.stateManager.dispatchEvent("vertical/handleSearchResponse",ht),this.stateManager.dispatchEvent("queryRules/setActions",ht.queryRulesActionsData||[])),ht}async executeVerticalAutocomplete(){if(this.state.meta.searchType!==zi.Vertical){console.error("The meta.searchType must be set to 'vertical' for vertical autocomplete. Set the searchType to vertical by calling `setVertical()`");return}const a=this.state.query.input||"",c=this.state.vertical.verticalKey;if(!c){console.error("no verticalKey supplied for vertical autocomplete");return}return this.core.verticalAutocomplete({input:a,verticalKey:c,additionalHttpHeaders:this.additionalHttpHeaders})}async executeFilterSearch(a,c,m){if(this.state.meta.searchType!==zi.Vertical){console.error("The meta.searchType must be set to 'vertical' for filter search. Set the searchType to vertical by calling `setVertical()`");return}const v=this.state.vertical.verticalKey;if(!v){console.error("no verticalKey supplied for filter search");return}return this.core.filterSearch({input:a,verticalKey:v,sessionTrackingEnabled:this.state.sessionTracking.enabled,sectioned:c,fields:m,additionalHttpHeaders:this.additionalHttpHeaders})}setFacetOption(a,c,m){const v={shouldSelect:m,fieldId:a,facetOption:c};this.stateManager.dispatchEvent("filters/setFacetOption",v)}setFilterOption(a){this.stateManager.dispatchEvent("filters/setFilterOption",a)}}const a$=s=>s||{};function l$(){return C8({middleware:a=>a({serializableCheck:!1}),reducer:a$,devTools:!1})}const d$={},c$={setInput:(s,a)=>{s.input=a.payload},setTrigger:(s,a)=>{s.queryTrigger=a.payload},setSource:(s,a)=>{s.querySource=a.payload},setQueryId:(s,a)=>{s.queryId=a.payload},setMostRecentSearch:(s,a)=>{s.mostRecentSearch=a.payload},setSearchIntents:(s,a)=>{s.searchIntents=a.payload}};function u$(s){return uo({name:s+"query",initialState:d$,reducers:c$})}const h$={enabled:!0},f$={setResult:(s,a)=>Object.assign({enabled:s.enabled},a.payload),setEnabled:(s,a)=>{s.enabled=a.payload}};function p$(s){return uo({name:s+"spellCheck",initialState:h$,reducers:f$})}const m$={enabled:!1},g$={setEnabled:(s,a)=>{s.enabled=a.payload},setSessionId:(s,a)=>{s.sessionId=a.payload}};function _$(s){return uo({name:s+"sessionTracking",initialState:m$,reducers:g$})}const y$={searchType:zi.Universal},v$={setContext:(s,a)=>{s.context=a.payload},setReferrerPageUrl:(s,a)=>{s.referrerPageUrl=a.payload},setUUID:(s,a)=>{s.uuid=a.payload},setSearchType:(s,a)=>{s.searchType=a.payload}};function x$(s){return uo({name:s+"meta",initialState:y$,reducers:v$})}const b$={},$$={setUserLocation:(s,a)=>{s.userLocation=a.payload},setLocationBias:(s,a)=>{s.locationBias=a.payload}};function w$(s){return uo({name:s+"location",initialState:b$,reducers:$$})}class E${constructor(){this.headlessIdToReducer={}}addAnswersReducer(a){this.headlessIdToReducer[a]=T$(a+"/")}getParentReducer(){const a=s0(this.headlessIdToReducer);return(c,m)=>m.type==="set-state"?Object.assign(Object.assign({},c),{[m.headlessId]:m.payload}):a(c,m)}}function T$(s){return s0({query:u$(s).reducer,vertical:B8(s).reducer,universal:N8(s).reducer,directAnswer:t$(s).reducer,queryRules:n$(s).reducer,filters:Qb(s).reducer,spellCheck:p$(s).reducer,sessionTracking:_$(s).reducer,searchStatus:o$(s).reducer,meta:x$(s).reducer,location:w$(s).reducer})}const J_="main",S$="@yext/search-headless",C$="2.5.0",A$="A library for powering UI components for Yext Search integrations",I$="slapshot@yext.com",M$="BSD-3-Clause",P$="./dist/commonjs/src/index.js",L$="./dist/esm/src/index.js",R$=["search","yext","redux","state management"],k$=["dist","lib","src","THIRD-PARTY-NOTICES"],D$={build:"rm -rf dist/** && tsc -p tsconfig.cjs.json && tsc -p tsconfig.esm.json && npm run api-extractor && npm run generate-docs",lint:"eslint .",prepublishOnly:"npm run build",test:"jest","api-extractor":"api-extractor run --local --verbose","generate-docs":"api-documenter markdown --input-folder temp --output-folder docs && rm -rf temp","generate-notices":"generate-license-file --input package.json --output THIRD-PARTY-NOTICES --overwrite"},O$={"@reduxjs/toolkit":"^1.8.1","@yext/search-core":"^2.5.0","js-levenshtein":"^1.1.6",lodash:"^4.17.21"},z$={"@babel/preset-env":"^7.16.5","@babel/preset-typescript":"^7.16.5","@microsoft/api-documenter":"^7.13.76","@microsoft/api-extractor":"^7.19.2","@types/jest":"^28.1.1","@types/lodash":"^4.14.178","@types/node":"^16.11.12","@typescript-eslint/eslint-plugin":"^5.16.0","@typescript-eslint/parser":"^5.16.0","@yext/eslint-config-slapshot":"^0.4.0","@yext/eslint-plugin-export-star":"^1.0.0","babel-jest":"^27.4.5",eslint:"^8.11.0","eslint-config-react-app":"^7.0.1","eslint-plugin-tsdoc":"^0.2.14","generate-license-file":"^1.3.0",jest:"^28.1.0","ts-node":"^10.4.0",typescript:"^4.5.4"},B$={bail:0,verbose:!0,collectCoverage:!0,collectCoverageFrom:["src/**/*.ts","!src/models/**/*.ts"],moduleFileExtensions:["js","ts"],moduleDirectories:["node_modules","<rootDir>"],testMatch:["<rootDir>/tests/**/*.[jt]s"],testPathIgnorePatterns:["<rootDir>/tests/mocks/*","<rootDir>/tests/utils/*","<rootDir>/test-site-node/*"]},F$={type:"git",url:"https://github.com/yext/search-headless.git"},N$={name:S$,version:C$,description:A$,author:I$,license:M$,main:P$,module:L$,keywords:R$,files:k$,scripts:D$,dependencies:O$,devDependencies:z$,jest:B$,repository:F$},Q_="Client-SDK",{version:j$}=N$;function U$(s){const a=Object.assign(Object.assign({},s==null?void 0:s[Q_]),{ANSWERS_HEADLESS:j$});return Object.assign(Object.assign({},s),{[Q_]:a})}var V$=function(s,a){var c={};for(var m in s)Object.prototype.hasOwnProperty.call(s,m)&&a.indexOf(m)<0&&(c[m]=s[m]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,m=Object.getOwnPropertySymbols(s);v<m.length;v++)a.indexOf(m[v])<0&&Object.prototype.propertyIsEnumerable.call(s,m[v])&&(c[m[v]]=s[m[v]]);return c};let wh;const G$=l$(),Z$=new E$;function q$(s,a){const{verticalKey:c,headlessId:m}=s,v=V$(s,["verticalKey","headlessId"]);if(m===J_)throw new Error(`Cannot instantiate a SearchHeadless using the default headlessId "${m}". Specify a different headlessId.`);const $=Nx(v),S=new Ux(G$,m||J_,Z$),P=new jx,o=U$(a),I=new s$($,S,P,o);return c?I.setVertical(c):I.setUniversal(),wh?(e3(wh,I),e3(I,wh)):wh=I,I}function e3(s,a){s.addListener({valueAccessor:c=>c.sessionTracking,callback:c=>{a.setState(Object.assign(Object.assign({},a.state),{sessionTracking:c}))}})}var a1=Ge.createContext({});function Ga(){const s=Ge.useContext(a1);if(s.state===void 0)throw new Error("Attempted to call useSearchActions() outside of SearchHeadlessProvider. Please ensure that 'useSearchActions()' is called within an SearchHeadlessProvider component.");return s}function vi(s){const a=Ge.useContext(a1);if(a.state===void 0)throw new Error("Attempted to call useSearchState() outside of SearchHeadlessProvider. Please ensure that 'useSearchState()' is called within an SearchHeadlessProvider component.");const c=Ge.useCallback(()=>a.state,[a.state]),m=Ge.useRef(!1);Ge.useEffect(()=>(m.current=!0,()=>{m.current=!1}),[]);const v=Ge.useCallback(S=>a.addListener({valueAccessor:P=>P,callback:()=>{m.current&&S()}}),[a]);return q9.useSyncExternalStoreWithSelector(v,c,c,s)}function H$(){return Ge.useContext(a1).utilities}function BC(s){const{children:a,searcher:c}=s;return pt.createElement(a1.Provider,{value:c},a)}const W$={components:{}},FC="pk.eyJ1IjoieWV4dCIsImEiOiJqNzVybUhnIn0.hTOO5A1yqfpN42-_z_GuLw",NC="index.html",t3="builtin.location",jC="c_fPName",K$="location",zp=50,UC=(s,a,c,m)=>{const v=f5(c)?"PRODUCTION":"STAGING";return q$({apiKey:s,experienceKey:"locator",locale:a,verticalKey:m,experienceVersion:v})},X$=(s,a)=>{const c=s[a];return c?typeof c=="function"?c():Promise.resolve(c):new Promise((m,v)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(v.bind(null,new Error("Unknown variable dynamic import: "+a)))})},Y$={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,a){console&&console[s]&&console[s].apply(console,a)}};class Zh{constructor(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(a,c)}init(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=a||Y$,this.options=c,this.debug=c.debug}log(){for(var a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];return this.forward(c,"log","",!0)}warn(){for(var a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];return this.forward(c,"warn","",!0)}error(){for(var a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];return this.forward(c,"error","")}deprecate(){for(var a=arguments.length,c=new Array(a),m=0;m<a;m++)c[m]=arguments[m];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}forward(a,c,m,v){return v&&!this.debug?null:(typeof a[0]=="string"&&(a[0]=`${m}${this.prefix} ${a[0]}`),this.logger[c](a))}create(a){return new Zh(this.logger,{prefix:`${this.prefix}:${a}:`,...this.options})}clone(a){return a=a||this.options,a.prefix=a.prefix||this.prefix,new Zh(this.logger,a)}}var Co=new Zh;class l1{constructor(){this.observers={}}on(a,c){return a.split(" ").forEach(m=>{this.observers[m]=this.observers[m]||[],this.observers[m].push(c)}),this}off(a,c){if(this.observers[a]){if(!c){delete this.observers[a];return}this.observers[a]=this.observers[a].filter(m=>m!==c)}}emit(a){for(var c=arguments.length,m=new Array(c>1?c-1:0),v=1;v<c;v++)m[v-1]=arguments[v];this.observers[a]&&[].concat(this.observers[a]).forEach(S=>{S(...m)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(S=>{S.apply(S,[a,...m])})}}function Oc(){let s,a;const c=new Promise((m,v)=>{s=m,a=v});return c.resolve=s,c.reject=a,c}function r3(s){return s==null?"":""+s}function J$(s,a,c){s.forEach(m=>{a[m]&&(c[m]=a[m])})}function d0(s,a,c){function m(S){return S&&S.indexOf("###")>-1?S.replace(/###/g,"."):S}function v(){return!s||typeof s=="string"}const $=typeof a!="string"?[].concat(a):a.split(".");for(;$.length>1;){if(v())return{};const S=m($.shift());!s[S]&&c&&(s[S]=new c),Object.prototype.hasOwnProperty.call(s,S)?s=s[S]:s={}}return v()?{}:{obj:s,k:m($.shift())}}function n3(s,a,c){const{obj:m,k:v}=d0(s,a,Object);m[v]=c}function Q$(s,a,c,m){const{obj:v,k:$}=d0(s,a,Object);v[$]=v[$]||[],m&&(v[$]=v[$].concat(c)),m||v[$].push(c)}function qh(s,a){const{obj:c,k:m}=d0(s,a);if(c)return c[m]}function ew(s,a,c){const m=qh(s,c);return m!==void 0?m:qh(a,c)}function e2(s,a,c){for(const m in a)m!=="__proto__"&&m!=="constructor"&&(m in s?typeof s[m]=="string"||s[m]instanceof String||typeof a[m]=="string"||a[m]instanceof String?c&&(s[m]=a[m]):e2(s[m],a[m],c):s[m]=a[m]);return s}function Ul(s){return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var tw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function rw(s){return typeof s=="string"?s.replace(/[&<>"'\/]/g,a=>tw[a]):s}const nw=[" ",",","?","!",";"];function iw(s,a,c){a=a||"",c=c||"";const m=nw.filter(S=>a.indexOf(S)<0&&c.indexOf(S)<0);if(m.length===0)return!0;const v=new RegExp(`(${m.map(S=>S==="?"?"\\?":S).join("|")})`);let $=!v.test(s);if(!$){const S=s.indexOf(c);S>0&&!v.test(s.substring(0,S))&&($=!0)}return $}function Hh(s,a){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!s)return;if(s[a])return s[a];const m=a.split(c);let v=s;for(let $=0;$<m.length;++$){if(!v||typeof v[m[$]]=="string"&&$+1<m.length)return;if(v[m[$]]===void 0){let S=2,P=m.slice($,$+S).join(c),o=v[P];for(;o===void 0&&m.length>$+S;)S++,P=m.slice($,$+S).join(c),o=v[P];if(o===void 0)return;if(o===null)return null;if(a.endsWith(P)){if(typeof o=="string")return o;if(P&&typeof o[P]=="string")return o[P]}const I=m.slice($+S).join(c);return I?Hh(o,I,c):void 0}v=v[m[$]]}return v}function Wh(s){return s&&s.indexOf("_")>0?s.replace("_","-"):s}class i3 extends l1{constructor(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=a||{},this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}removeNamespaces(a){const c=this.options.ns.indexOf(a);c>-1&&this.options.ns.splice(c,1)}getResource(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const $=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator,S=v.ignoreJSONStructure!==void 0?v.ignoreJSONStructure:this.options.ignoreJSONStructure;let P=[a,c];m&&typeof m!="string"&&(P=P.concat(m)),m&&typeof m=="string"&&(P=P.concat($?m.split($):m)),a.indexOf(".")>-1&&(P=a.split("."));const o=qh(this.data,P);return o||!S||typeof m!="string"?o:Hh(this.data&&this.data[a]&&this.data[a][c],m,$)}addResource(a,c,m,v){let $=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const S=$.keySeparator!==void 0?$.keySeparator:this.options.keySeparator;let P=[a,c];m&&(P=P.concat(S?m.split(S):m)),a.indexOf(".")>-1&&(P=a.split("."),v=c,c=P[1]),this.addNamespaces(c),n3(this.data,P,v),$.silent||this.emit("added",a,c,m,v)}addResources(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const $ in m)(typeof m[$]=="string"||Object.prototype.toString.apply(m[$])==="[object Array]")&&this.addResource(a,c,$,m[$],{silent:!0});v.silent||this.emit("added",a,c,m)}addResourceBundle(a,c,m,v,$){let S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},P=[a,c];a.indexOf(".")>-1&&(P=a.split("."),v=m,m=c,c=P[1]),this.addNamespaces(c);let o=qh(this.data,P)||{};v?e2(o,m,$):o={...o,...m},n3(this.data,P,o),S.silent||this.emit("added",a,c,m)}removeResourceBundle(a,c){this.hasResourceBundle(a,c)&&delete this.data[a][c],this.removeNamespaces(c),this.emit("removed",a,c)}hasResourceBundle(a,c){return this.getResource(a,c)!==void 0}getResourceBundle(a,c){return c||(c=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(a,c)}:this.getResource(a,c)}getDataByLanguage(a){return this.data[a]}hasLanguageSomeTranslations(a){const c=this.getDataByLanguage(a);return!!(c&&Object.keys(c)||[]).find(v=>c[v]&&Object.keys(c[v]).length>0)}toJSON(){return this.data}}var t2={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,a,c,m,v){return s.forEach($=>{this.processors[$]&&(a=this.processors[$].process(a,c,m,v))}),a}};const o3={};class Kh extends l1{constructor(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),J$(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,this),this.options=c,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Co.create("translator")}changeLanguage(a){a&&(this.language=a)}exists(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(a==null)return!1;const m=this.resolve(a,c);return m&&m.res!==void 0}extractFromKey(a,c){let m=c.nsSeparator!==void 0?c.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const v=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let $=c.ns||this.options.defaultNS||[];const S=m&&a.indexOf(m)>-1,P=!this.options.userDefinedKeySeparator&&!c.keySeparator&&!this.options.userDefinedNsSeparator&&!c.nsSeparator&&!iw(a,m,v);if(S&&!P){const o=a.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:a,namespaces:$};const I=a.split(m);(m!==v||m===v&&this.options.ns.indexOf(I[0])>-1)&&($=I.shift()),a=I.join(v)}return typeof $=="string"&&($=[$]),{key:a,namespaces:$}}translate(a,c,m){if(typeof c!="object"&&this.options.overloadTranslationOptionHandler&&(c=this.options.overloadTranslationOptionHandler(arguments)),typeof c=="object"&&(c={...c}),c||(c={}),a==null)return"";Array.isArray(a)||(a=[String(a)]);const v=c.returnDetails!==void 0?c.returnDetails:this.options.returnDetails,$=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator,{key:S,namespaces:P}=this.extractFromKey(a[a.length-1],c),o=P[P.length-1],I=c.lng||this.language,N=c.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(I&&I.toLowerCase()==="cimode"){if(N){const We=c.nsSeparator||this.options.nsSeparator;return v?{res:`${o}${We}${S}`,usedKey:S,exactUsedKey:S,usedLng:I,usedNS:o}:`${o}${We}${S}`}return v?{res:S,usedKey:S,exactUsedKey:S,usedLng:I,usedNS:o}:S}const Y=this.resolve(a,c);let U=Y&&Y.res;const oe=Y&&Y.usedKey||S,ae=Y&&Y.exactUsedKey||S,$e=Object.prototype.toString.apply(U),Ie=["[object Number]","[object Function]","[object RegExp]"],Be=c.joinArrays!==void 0?c.joinArrays:this.options.joinArrays,xe=!this.i18nFormat||this.i18nFormat.handleAsObject;if(xe&&U&&(typeof U!="string"&&typeof U!="boolean"&&typeof U!="number")&&Ie.indexOf($e)<0&&!(typeof Be=="string"&&$e==="[object Array]")){if(!c.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const We=this.options.returnedObjectHandler?this.options.returnedObjectHandler(oe,U,{...c,ns:P}):`key '${S} (${this.language})' returned an object instead of string.`;return v?(Y.res=We,Y):We}if($){const We=$e==="[object Array]",ht=We?[]:{},Lt=We?ae:oe;for(const Ye in U)if(Object.prototype.hasOwnProperty.call(U,Ye)){const ft=`${Lt}${$}${Ye}`;ht[Ye]=this.translate(ft,{...c,joinArrays:!1,ns:P}),ht[Ye]===ft&&(ht[Ye]=U[Ye])}U=ht}}else if(xe&&typeof Be=="string"&&$e==="[object Array]")U=U.join(Be),U&&(U=this.extendTranslation(U,a,c,m));else{let We=!1,ht=!1;const Lt=c.count!==void 0&&typeof c.count!="string",Ye=Kh.hasDefaultValue(c),ft=Lt?this.pluralResolver.getSuffix(I,c.count,c):"",gt=c.ordinal&&Lt?this.pluralResolver.getSuffix(I,c.count,{ordinal:!1}):"",ve=c[`defaultValue${ft}`]||c[`defaultValue${gt}`]||c.defaultValue;!this.isValidLookup(U)&&Ye&&(We=!0,U=ve),this.isValidLookup(U)||(ht=!0,U=S);const Ct=(c.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ht?void 0:U,tt=Ye&&ve!==U&&this.options.updateMissing;if(ht||We||tt){if(this.logger.log(tt?"updateKey":"missingKey",I,o,S,tt?ve:U),$){const Tt=this.resolve(S,{...c,keySeparator:!1});Tt&&Tt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let _e=[];const je=this.languageUtils.getFallbackCodes(this.options.fallbackLng,c.lng||this.language);if(this.options.saveMissingTo==="fallback"&&je&&je[0])for(let Tt=0;Tt<je.length;Tt++)_e.push(je[Tt]);else this.options.saveMissingTo==="all"?_e=this.languageUtils.toResolveHierarchy(c.lng||this.language):_e.push(c.lng||this.language);const It=(Tt,Wt,ut)=>{const Br=Ye&&ut!==U?ut:Ct;this.options.missingKeyHandler?this.options.missingKeyHandler(Tt,o,Wt,Br,tt,c):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Tt,o,Wt,Br,tt,c),this.emit("missingKey",Tt,o,Wt,U)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Lt?_e.forEach(Tt=>{this.pluralResolver.getSuffixes(Tt,c).forEach(Wt=>{It([Tt],S+Wt,c[`defaultValue${Wt}`]||ve)})}):It(_e,S,ve))}U=this.extendTranslation(U,a,c,Y,m),ht&&U===S&&this.options.appendNamespaceToMissingKey&&(U=`${o}:${S}`),(ht||We)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?U=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${o}:${S}`:S,We?U:void 0):U=this.options.parseMissingKeyHandler(U))}return v?(Y.res=U,Y):U}extendTranslation(a,c,m,v,$){var S=this;if(this.i18nFormat&&this.i18nFormat.parse)a=this.i18nFormat.parse(a,{...this.options.interpolation.defaultVariables,...m},v.usedLng,v.usedNS,v.usedKey,{resolved:v});else if(!m.skipInterpolation){m.interpolation&&this.interpolator.init({...m,interpolation:{...this.options.interpolation,...m.interpolation}});const I=typeof a=="string"&&(m&&m.interpolation&&m.interpolation.skipOnVariables!==void 0?m.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let N;if(I){const U=a.match(this.interpolator.nestingRegexp);N=U&&U.length}let Y=m.replace&&typeof m.replace!="string"?m.replace:m;if(this.options.interpolation.defaultVariables&&(Y={...this.options.interpolation.defaultVariables,...Y}),a=this.interpolator.interpolate(a,Y,m.lng||this.language,m),I){const U=a.match(this.interpolator.nestingRegexp),oe=U&&U.length;N<oe&&(m.nest=!1)}!m.lng&&this.options.compatibilityAPI!=="v1"&&v&&v.res&&(m.lng=v.usedLng),m.nest!==!1&&(a=this.interpolator.nest(a,function(){for(var U=arguments.length,oe=new Array(U),ae=0;ae<U;ae++)oe[ae]=arguments[ae];return $&&$[0]===oe[0]&&!m.context?(S.logger.warn(`It seems you are nesting recursively key: ${oe[0]} in key: ${c[0]}`),null):S.translate(...oe,c)},m)),m.interpolation&&this.interpolator.reset()}const P=m.postProcess||this.options.postProcess,o=typeof P=="string"?[P]:P;return a!=null&&o&&o.length&&m.applyPostProcessor!==!1&&(a=t2.handle(o,a,c,this.options&&this.options.postProcessPassResolved?{i18nResolved:v,...m}:m,this)),a}resolve(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,v,$,S,P;return typeof a=="string"&&(a=[a]),a.forEach(o=>{if(this.isValidLookup(m))return;const I=this.extractFromKey(o,c),N=I.key;v=N;let Y=I.namespaces;this.options.fallbackNS&&(Y=Y.concat(this.options.fallbackNS));const U=c.count!==void 0&&typeof c.count!="string",oe=U&&!c.ordinal&&c.count===0&&this.pluralResolver.shouldUseIntlApi(),ae=c.context!==void 0&&(typeof c.context=="string"||typeof c.context=="number")&&c.context!=="",$e=c.lngs?c.lngs:this.languageUtils.toResolveHierarchy(c.lng||this.language,c.fallbackLng);Y.forEach(Ie=>{this.isValidLookup(m)||(P=Ie,!o3[`${$e[0]}-${Ie}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(P)&&(o3[`${$e[0]}-${Ie}`]=!0,this.logger.warn(`key "${v}" for languages "${$e.join(", ")}" won't get resolved as namespace "${P}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),$e.forEach(Be=>{if(this.isValidLookup(m))return;S=Be;const xe=[N];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(xe,N,Be,Ie,c);else{let We;U&&(We=this.pluralResolver.getSuffix(Be,c.count,c));const ht=`${this.options.pluralSeparator}zero`,Lt=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(U&&(xe.push(N+We),c.ordinal&&We.indexOf(Lt)===0&&xe.push(N+We.replace(Lt,this.options.pluralSeparator)),oe&&xe.push(N+ht)),ae){const Ye=`${N}${this.options.contextSeparator}${c.context}`;xe.push(Ye),U&&(xe.push(Ye+We),c.ordinal&&We.indexOf(Lt)===0&&xe.push(Ye+We.replace(Lt,this.options.pluralSeparator)),oe&&xe.push(Ye+ht))}}let Je;for(;Je=xe.pop();)this.isValidLookup(m)||($=Je,m=this.getResource(Be,Ie,Je,c))}))})}),{res:m,usedKey:v,exactUsedKey:$,usedLng:S,usedNS:P}}isValidLookup(a){return a!==void 0&&!(!this.options.returnNull&&a===null)&&!(!this.options.returnEmptyString&&a==="")}getResource(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(a,c,m,v):this.resourceStore.getResource(a,c,m,v)}static hasDefaultValue(a){const c="defaultValue";for(const m in a)if(Object.prototype.hasOwnProperty.call(a,m)&&c===m.substring(0,c.length)&&a[m]!==void 0)return!0;return!1}}function dp(s){return s.charAt(0).toUpperCase()+s.slice(1)}class s3{constructor(a){this.options=a,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Co.create("languageUtils")}getScriptPartFromCode(a){if(a=Wh(a),!a||a.indexOf("-")<0)return null;const c=a.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}getLanguagePartFromCode(a){if(a=Wh(a),!a||a.indexOf("-")<0)return a;const c=a.split("-");return this.formatLanguageCode(c[0])}formatLanguageCode(a){if(typeof a=="string"&&a.indexOf("-")>-1){const c=["hans","hant","latn","cyrl","cans","mong","arab"];let m=a.split("-");return this.options.lowerCaseLng?m=m.map(v=>v.toLowerCase()):m.length===2?(m[0]=m[0].toLowerCase(),m[1]=m[1].toUpperCase(),c.indexOf(m[1].toLowerCase())>-1&&(m[1]=dp(m[1].toLowerCase()))):m.length===3&&(m[0]=m[0].toLowerCase(),m[1].length===2&&(m[1]=m[1].toUpperCase()),m[0]!=="sgn"&&m[2].length===2&&(m[2]=m[2].toUpperCase()),c.indexOf(m[1].toLowerCase())>-1&&(m[1]=dp(m[1].toLowerCase())),c.indexOf(m[2].toLowerCase())>-1&&(m[2]=dp(m[2].toLowerCase()))),m.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}isSupportedCode(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}getBestMatchFromCodes(a){if(!a)return null;let c;return a.forEach(m=>{if(c)return;const v=this.formatLanguageCode(m);(!this.options.supportedLngs||this.isSupportedCode(v))&&(c=v)}),!c&&this.options.supportedLngs&&a.forEach(m=>{if(c)return;const v=this.getLanguagePartFromCode(m);if(this.isSupportedCode(v))return c=v;c=this.options.supportedLngs.find($=>{if($===v)return $;if(!($.indexOf("-")<0&&v.indexOf("-")<0)&&$.indexOf(v)===0)return $})}),c||(c=this.getFallbackCodes(this.options.fallbackLng)[0]),c}getFallbackCodes(a,c){if(!a)return[];if(typeof a=="function"&&(a=a(c)),typeof a=="string"&&(a=[a]),Object.prototype.toString.apply(a)==="[object Array]")return a;if(!c)return a.default||[];let m=a[c];return m||(m=a[this.getScriptPartFromCode(c)]),m||(m=a[this.formatLanguageCode(c)]),m||(m=a[this.getLanguagePartFromCode(c)]),m||(m=a.default),m||[]}toResolveHierarchy(a,c){const m=this.getFallbackCodes(c||this.options.fallbackLng||[],a),v=[],$=S=>{S&&(this.isSupportedCode(S)?v.push(S):this.logger.warn(`rejecting language code not found in supportedLngs: ${S}`))};return typeof a=="string"&&(a.indexOf("-")>-1||a.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&$(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&$(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&$(this.getLanguagePartFromCode(a))):typeof a=="string"&&$(this.formatLanguageCode(a)),m.forEach(S=>{v.indexOf(S)<0&&$(this.formatLanguageCode(S))}),v}}let ow=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],sw={1:function(s){return+(s>1)},2:function(s){return+(s!=1)},3:function(s){return 0},4:function(s){return s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2},5:function(s){return s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5},6:function(s){return s==1?0:s>=2&&s<=4?1:2},7:function(s){return s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2},8:function(s){return s==1?0:s==2?1:s!=8&&s!=11?2:3},9:function(s){return+(s>=2)},10:function(s){return s==1?0:s==2?1:s<7?2:s<11?3:4},11:function(s){return s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3},12:function(s){return+(s%10!=1||s%100==11)},13:function(s){return+(s!==0)},14:function(s){return s==1?0:s==2?1:s==3?2:3},15:function(s){return s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2},16:function(s){return s%10==1&&s%100!=11?0:s!==0?1:2},17:function(s){return s==1||s%10==1&&s%100!=11?0:1},18:function(s){return s==0?0:s==1?1:2},19:function(s){return s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3},20:function(s){return s==1?0:s==0||s%100>0&&s%100<20?1:2},21:function(s){return s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0},22:function(s){return s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3}};const aw=["v1","v2","v3"],lw=["v4"],a3={zero:0,one:1,two:2,few:3,many:4,other:5};function dw(){const s={};return ow.forEach(a=>{a.lngs.forEach(c=>{s[c]={numbers:a.nr,plurals:sw[a.fc]}})}),s}class cw{constructor(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=a,this.options=c,this.logger=Co.create("pluralResolver"),(!this.options.compatibilityJSON||lw.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=dw()}addRule(a,c){this.rules[a]=c}getRule(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(Wh(a),{type:c.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[a]||this.rules[this.languageUtils.getLanguagePartFromCode(a)]}needsPlural(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const m=this.getRule(a,c);return this.shouldUseIntlApi()?m&&m.resolvedOptions().pluralCategories.length>1:m&&m.numbers.length>1}getPluralFormsOfKey(a,c){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(a,m).map(v=>`${c}${v}`)}getSuffixes(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const m=this.getRule(a,c);return m?this.shouldUseIntlApi()?m.resolvedOptions().pluralCategories.sort((v,$)=>a3[v]-a3[$]).map(v=>`${this.options.prepend}${c.ordinal?`ordinal${this.options.prepend}`:""}${v}`):m.numbers.map(v=>this.getSuffix(a,v,c)):[]}getSuffix(a,c){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const v=this.getRule(a,m);return v?this.shouldUseIntlApi()?`${this.options.prepend}${m.ordinal?`ordinal${this.options.prepend}`:""}${v.select(c)}`:this.getSuffixRetroCompatible(v,c):(this.logger.warn(`no plural rule found for: ${a}`),"")}getSuffixRetroCompatible(a,c){const m=a.noAbs?a.plurals(c):a.plurals(Math.abs(c));let v=a.numbers[m];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(v===2?v="plural":v===1&&(v=""));const $=()=>this.options.prepend&&v.toString()?this.options.prepend+v.toString():v.toString();return this.options.compatibilityJSON==="v1"?v===1?"":typeof v=="number"?`_plural_${v.toString()}`:$():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?$():this.options.prepend&&m.toString()?this.options.prepend+m.toString():m.toString()}shouldUseIntlApi(){return!aw.includes(this.options.compatibilityJSON)}}function l3(s,a,c){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,$=ew(s,a,c);return!$&&v&&typeof c=="string"&&($=Hh(s,c,m),$===void 0&&($=Hh(a,c,m))),$}class uw{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Co.create("interpolator"),this.options=a,this.format=a.interpolation&&a.interpolation.format||(c=>c),this.init(a)}init(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});const c=a.interpolation;this.escape=c.escape!==void 0?c.escape:rw,this.escapeValue=c.escapeValue!==void 0?c.escapeValue:!0,this.useRawValueToEscape=c.useRawValueToEscape!==void 0?c.useRawValueToEscape:!1,this.prefix=c.prefix?Ul(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?Ul(c.suffix):c.suffixEscaped||"}}",this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||",",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?Ul(c.nestingPrefix):c.nestingPrefixEscaped||Ul("$t("),this.nestingSuffix=c.nestingSuffix?Ul(c.nestingSuffix):c.nestingSuffixEscaped||Ul(")"),this.nestingOptionsSeparator=c.nestingOptionsSeparator?c.nestingOptionsSeparator:c.nestingOptionsSeparator||",",this.maxReplaces=c.maxReplaces?c.maxReplaces:1e3,this.alwaysFormat=c.alwaysFormat!==void 0?c.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const a=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(a,"g");const c=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(c,"g");const m=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(m,"g")}interpolate(a,c,m,v){let $,S,P;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function I(ae){return ae.replace(/\$/g,"$$$$")}const N=ae=>{if(ae.indexOf(this.formatSeparator)<0){const xe=l3(c,o,ae,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(xe,void 0,m,{...v,...c,interpolationkey:ae}):xe}const $e=ae.split(this.formatSeparator),Ie=$e.shift().trim(),Be=$e.join(this.formatSeparator).trim();return this.format(l3(c,o,Ie,this.options.keySeparator,this.options.ignoreJSONStructure),Be,m,{...v,...c,interpolationkey:Ie})};this.resetRegExp();const Y=v&&v.missingInterpolationHandler||this.options.missingInterpolationHandler,U=v&&v.interpolation&&v.interpolation.skipOnVariables!==void 0?v.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:ae=>I(ae)},{regex:this.regexp,safeValue:ae=>this.escapeValue?I(this.escape(ae)):I(ae)}].forEach(ae=>{for(P=0;$=ae.regex.exec(a);){const $e=$[1].trim();if(S=N($e),S===void 0)if(typeof Y=="function"){const Be=Y(a,$,v);S=typeof Be=="string"?Be:""}else if(v&&Object.prototype.hasOwnProperty.call(v,$e))S="";else if(U){S=$[0];continue}else this.logger.warn(`missed to pass in variable ${$e} for interpolating ${a}`),S="";else typeof S!="string"&&!this.useRawValueToEscape&&(S=r3(S));const Ie=ae.safeValue(S);if(a=a.replace($[0],Ie),U?(ae.regex.lastIndex+=S.length,ae.regex.lastIndex-=$[0].length):ae.regex.lastIndex=0,P++,P>=this.maxReplaces)break}}),a}nest(a,c){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v,$,S;function P(o,I){const N=this.nestingOptionsSeparator;if(o.indexOf(N)<0)return o;const Y=o.split(new RegExp(`${N}[ ]*{`));let U=`{${Y[1]}`;o=Y[0],U=this.interpolate(U,S);const oe=U.match(/'/g),ae=U.match(/"/g);(oe&&oe.length%2===0&&!ae||ae.length%2!==0)&&(U=U.replace(/'/g,'"'));try{S=JSON.parse(U),I&&(S={...I,...S})}catch($e){return this.logger.warn(`failed parsing options string in nesting for key ${o}`,$e),`${o}${N}${U}`}return delete S.defaultValue,o}for(;v=this.nestingRegexp.exec(a);){let o=[];S={...m},S=S.replace&&typeof S.replace!="string"?S.replace:S,S.applyPostProcessor=!1,delete S.defaultValue;let I=!1;if(v[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(v[1])){const N=v[1].split(this.formatSeparator).map(Y=>Y.trim());v[1]=N.shift(),o=N,I=!0}if($=c(P.call(this,v[1].trim(),S),S),$&&v[0]===a&&typeof $!="string")return $;typeof $!="string"&&($=r3($)),$||(this.logger.warn(`missed to resolve ${v[1]} for nesting ${a}`),$=""),I&&($=o.reduce((N,Y)=>this.format(N,Y,m.lng,{...m,interpolationkey:v[1].trim()}),$.trim())),a=a.replace(v[0],$),this.regexp.lastIndex=0}return a}}function hw(s){let a=s.toLowerCase().trim();const c={};if(s.indexOf("(")>-1){const m=s.split("(");a=m[0].toLowerCase().trim();const v=m[1].substring(0,m[1].length-1);a==="currency"&&v.indexOf(":")<0?c.currency||(c.currency=v.trim()):a==="relativetime"&&v.indexOf(":")<0?c.range||(c.range=v.trim()):v.split(";").forEach(S=>{if(!S)return;const[P,...o]=S.split(":"),I=o.join(":").trim().replace(/^'+|'+$/g,"");c[P.trim()]||(c[P.trim()]=I),I==="false"&&(c[P.trim()]=!1),I==="true"&&(c[P.trim()]=!0),isNaN(I)||(c[P.trim()]=parseInt(I,10))})}return{formatName:a,formatOptions:c}}function Vl(s){const a={};return function(m,v,$){const S=v+JSON.stringify($);let P=a[S];return P||(P=s(Wh(v),$),a[S]=P),P(m)}}class fw{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Co.create("formatter"),this.options=a,this.formats={number:Vl((c,m)=>{const v=new Intl.NumberFormat(c,{...m});return $=>v.format($)}),currency:Vl((c,m)=>{const v=new Intl.NumberFormat(c,{...m,style:"currency"});return $=>v.format($)}),datetime:Vl((c,m)=>{const v=new Intl.DateTimeFormat(c,{...m});return $=>v.format($)}),relativetime:Vl((c,m)=>{const v=new Intl.RelativeTimeFormat(c,{...m});return $=>v.format($,m.range||"day")}),list:Vl((c,m)=>{const v=new Intl.ListFormat(c,{...m});return $=>v.format($)})},this.init(a)}init(a){const m=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=m.formatSeparator?m.formatSeparator:m.formatSeparator||","}add(a,c){this.formats[a.toLowerCase().trim()]=c}addCached(a,c){this.formats[a.toLowerCase().trim()]=Vl(c)}format(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return c.split(this.formatSeparator).reduce((P,o)=>{const{formatName:I,formatOptions:N}=hw(o);if(this.formats[I]){let Y=P;try{const U=v&&v.formatParams&&v.formatParams[v.interpolationkey]||{},oe=U.locale||U.lng||v.locale||v.lng||m;Y=this.formats[I](P,oe,{...N,...v,...U})}catch(U){this.logger.warn(U)}return Y}else this.logger.warn(`there was no format function for ${I}`);return P},a)}}function pw(s,a){s.pending[a]!==void 0&&(delete s.pending[a],s.pendingCount--)}class mw extends l1{constructor(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=a,this.store=c,this.services=m,this.languageUtils=m.languageUtils,this.options=v,this.logger=Co.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=v.maxParallelReads||10,this.readingCalls=0,this.maxRetries=v.maxRetries>=0?v.maxRetries:5,this.retryTimeout=v.retryTimeout>=1?v.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(m,v.backend,v)}queueLoad(a,c,m,v){const $={},S={},P={},o={};return a.forEach(I=>{let N=!0;c.forEach(Y=>{const U=`${I}|${Y}`;!m.reload&&this.store.hasResourceBundle(I,Y)?this.state[U]=2:this.state[U]<0||(this.state[U]===1?S[U]===void 0&&(S[U]=!0):(this.state[U]=1,N=!1,S[U]===void 0&&(S[U]=!0),$[U]===void 0&&($[U]=!0),o[Y]===void 0&&(o[Y]=!0)))}),N||(P[I]=!0)}),(Object.keys($).length||Object.keys(S).length)&&this.queue.push({pending:S,pendingCount:Object.keys(S).length,loaded:{},errors:[],callback:v}),{toLoad:Object.keys($),pending:Object.keys(S),toLoadLanguages:Object.keys(P),toLoadNamespaces:Object.keys(o)}}loaded(a,c,m){const v=a.split("|"),$=v[0],S=v[1];c&&this.emit("failedLoading",$,S,c),m&&this.store.addResourceBundle($,S,m),this.state[a]=c?-1:2;const P={};this.queue.forEach(o=>{Q$(o.loaded,[$],S),pw(o,a),c&&o.errors.push(c),o.pendingCount===0&&!o.done&&(Object.keys(o.loaded).forEach(I=>{P[I]||(P[I]={});const N=o.loaded[I];N.length&&N.forEach(Y=>{P[I][Y]===void 0&&(P[I][Y]=!0)})}),o.done=!0,o.errors.length?o.callback(o.errors):o.callback())}),this.emit("loaded",P),this.queue=this.queue.filter(o=>!o.done)}read(a,c,m){let v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,S=arguments.length>5?arguments[5]:void 0;if(!a.length)return S(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:a,ns:c,fcName:m,tried:v,wait:$,callback:S});return}this.readingCalls++;const P=(I,N)=>{if(this.readingCalls--,this.waitingReads.length>0){const Y=this.waitingReads.shift();this.read(Y.lng,Y.ns,Y.fcName,Y.tried,Y.wait,Y.callback)}if(I&&N&&v<this.maxRetries){setTimeout(()=>{this.read.call(this,a,c,m,v+1,$*2,S)},$);return}S(I,N)},o=this.backend[m].bind(this.backend);if(o.length===2){try{const I=o(a,c);I&&typeof I.then=="function"?I.then(N=>P(null,N)).catch(P):P(null,I)}catch(I){P(I)}return}return o(a,c,P)}prepareLoading(a,c){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},v=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),v&&v();typeof a=="string"&&(a=this.languageUtils.toResolveHierarchy(a)),typeof c=="string"&&(c=[c]);const $=this.queueLoad(a,c,m,v);if(!$.toLoad.length)return $.pending.length||v(),null;$.toLoad.forEach(S=>{this.loadOne(S)})}load(a,c,m){this.prepareLoading(a,c,{},m)}reload(a,c,m){this.prepareLoading(a,c,{reload:!0},m)}loadOne(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const m=a.split("|"),v=m[0],$=m[1];this.read(v,$,"read",void 0,void 0,(S,P)=>{S&&this.logger.warn(`${c}loading namespace ${$} for language ${v} failed`,S),!S&&P&&this.logger.log(`${c}loaded namespace ${$} for language ${v}`,P),this.loaded(a,S,P)})}saveMissing(a,c,m,v,$){let S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},P=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(c)){this.logger.warn(`did not save key "${m}" as the namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(m==null||m==="")){if(this.backend&&this.backend.create){const o={...S,isUpdate:$},I=this.backend.create.bind(this.backend);if(I.length<6)try{let N;I.length===5?N=I(a,c,m,v,o):N=I(a,c,m,v),N&&typeof N.then=="function"?N.then(Y=>P(null,Y)).catch(P):P(null,N)}catch(N){P(N)}else I(a,c,m,v,P,o)}!a||!a[0]||this.store.addResource(a[0],c,m,v)}}}function d3(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(a){let c={};if(typeof a[1]=="object"&&(c=a[1]),typeof a[1]=="string"&&(c.defaultValue=a[1]),typeof a[2]=="string"&&(c.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const m=a[3]||a[2];Object.keys(m).forEach(v=>{c[v]=m[v]})}return c},interpolation:{escapeValue:!0,format:(s,a,c,m)=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function c3(s){return typeof s.ns=="string"&&(s.ns=[s.ns]),typeof s.fallbackLng=="string"&&(s.fallbackLng=[s.fallbackLng]),typeof s.fallbackNS=="string"&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s}function Eh(){}function gw(s){Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(c=>{typeof s[c]=="function"&&(s[c]=s[c].bind(s))})}class Zc extends l1{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;if(super(),this.options=c3(a),this.services={},this.logger=Co,this.modules={external:[]},gw(this),c&&!this.isInitialized&&!a.isClone){if(!this.options.initImmediate)return this.init(a,c),this;setTimeout(()=>{this.init(a,c)},0)}}init(){var a=this;let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0;typeof c=="function"&&(m=c,c={}),!c.defaultNS&&c.defaultNS!==!1&&c.ns&&(typeof c.ns=="string"?c.defaultNS=c.ns:c.ns.indexOf("translation")<0&&(c.defaultNS=c.ns[0]));const v=d3();this.options={...v,...this.options,...c3(c)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...v.interpolation,...this.options.interpolation}),c.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=c.keySeparator),c.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=c.nsSeparator);function $(N){return N?typeof N=="function"?new N:N:null}if(!this.options.isClone){this.modules.logger?Co.init($(this.modules.logger),this.options):Co.init(null,this.options);let N;this.modules.formatter?N=this.modules.formatter:typeof Intl<"u"&&(N=fw);const Y=new s3(this.options);this.store=new i3(this.options.resources,this.options);const U=this.services;U.logger=Co,U.resourceStore=this.store,U.languageUtils=Y,U.pluralResolver=new cw(Y,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),N&&(!this.options.interpolation.format||this.options.interpolation.format===v.interpolation.format)&&(U.formatter=$(N),U.formatter.init(U,this.options),this.options.interpolation.format=U.formatter.format.bind(U.formatter)),U.interpolator=new uw(this.options),U.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},U.backendConnector=new mw($(this.modules.backend),U.resourceStore,U,this.options),U.backendConnector.on("*",function(oe){for(var ae=arguments.length,$e=new Array(ae>1?ae-1:0),Ie=1;Ie<ae;Ie++)$e[Ie-1]=arguments[Ie];a.emit(oe,...$e)}),this.modules.languageDetector&&(U.languageDetector=$(this.modules.languageDetector),U.languageDetector.init&&U.languageDetector.init(U,this.options.detection,this.options)),this.modules.i18nFormat&&(U.i18nFormat=$(this.modules.i18nFormat),U.i18nFormat.init&&U.i18nFormat.init(this)),this.translator=new Kh(this.services,this.options),this.translator.on("*",function(oe){for(var ae=arguments.length,$e=new Array(ae>1?ae-1:0),Ie=1;Ie<ae;Ie++)$e[Ie-1]=arguments[Ie];a.emit(oe,...$e)}),this.modules.external.forEach(oe=>{oe.init&&oe.init(this)})}if(this.format=this.options.interpolation.format,m||(m=Eh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const N=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);N.length>0&&N[0]!=="dev"&&(this.options.lng=N[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(N=>{this[N]=function(){return a.store[N](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(N=>{this[N]=function(){return a.store[N](...arguments),a}});const o=Oc(),I=()=>{const N=(Y,U)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(U),m(Y,U)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return N(null,this.t.bind(this));this.changeLanguage(this.options.lng,N)};return this.options.resources||!this.options.initImmediate?I():setTimeout(I,0),o}loadResources(a){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Eh;const v=typeof a=="string"?a:this.language;if(typeof a=="function"&&(m=a),!this.options.resources||this.options.partialBundledLanguages){if(v&&v.toLowerCase()==="cimode")return m();const $=[],S=P=>{if(!P)return;this.services.languageUtils.toResolveHierarchy(P).forEach(I=>{$.indexOf(I)<0&&$.push(I)})};v?S(v):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(o=>S(o)),this.options.preload&&this.options.preload.forEach(P=>S(P)),this.services.backendConnector.load($,this.options.ns,P=>{!P&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),m(P)})}else m(null)}reloadResources(a,c,m){const v=Oc();return a||(a=this.languages),c||(c=this.options.ns),m||(m=Eh),this.services.backendConnector.reload(a,c,$=>{v.resolve(),m($)}),v}use(a){if(!a)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!a.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return a.type==="backend"&&(this.modules.backend=a),(a.type==="logger"||a.log&&a.warn&&a.error)&&(this.modules.logger=a),a.type==="languageDetector"&&(this.modules.languageDetector=a),a.type==="i18nFormat"&&(this.modules.i18nFormat=a),a.type==="postProcessor"&&t2.addPostProcessor(a),a.type==="formatter"&&(this.modules.formatter=a),a.type==="3rdParty"&&this.modules.external.push(a),this}setResolvedLanguage(a){if(!(!a||!this.languages)&&!(["cimode","dev"].indexOf(a)>-1))for(let c=0;c<this.languages.length;c++){const m=this.languages[c];if(!(["cimode","dev"].indexOf(m)>-1)&&this.store.hasLanguageSomeTranslations(m)){this.resolvedLanguage=m;break}}}changeLanguage(a,c){var m=this;this.isLanguageChangingTo=a;const v=Oc();this.emit("languageChanging",a);const $=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},S=(o,I)=>{I?($(I),this.translator.changeLanguage(I),this.isLanguageChangingTo=void 0,this.emit("languageChanged",I),this.logger.log("languageChanged",I)):this.isLanguageChangingTo=void 0,v.resolve(function(){return m.t(...arguments)}),c&&c(o,function(){return m.t(...arguments)})},P=o=>{!a&&!o&&this.services.languageDetector&&(o=[]);const I=typeof o=="string"?o:this.services.languageUtils.getBestMatchFromCodes(o);I&&(this.language||$(I),this.translator.language||this.translator.changeLanguage(I),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(I)),this.loadResources(I,N=>{S(N,I)})};return!a&&this.services.languageDetector&&!this.services.languageDetector.async?P(this.services.languageDetector.detect()):!a&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(P):this.services.languageDetector.detect(P):P(a),v}getFixedT(a,c,m){var v=this;const $=function(S,P){let o;if(typeof P!="object"){for(var I=arguments.length,N=new Array(I>2?I-2:0),Y=2;Y<I;Y++)N[Y-2]=arguments[Y];o=v.options.overloadTranslationOptionHandler([S,P].concat(N))}else o={...P};o.lng=o.lng||$.lng,o.lngs=o.lngs||$.lngs,o.ns=o.ns||$.ns,o.keyPrefix=o.keyPrefix||m||$.keyPrefix;const U=v.options.keySeparator||".";let oe;return o.keyPrefix&&Array.isArray(S)?oe=S.map(ae=>`${o.keyPrefix}${U}${ae}`):oe=o.keyPrefix?`${o.keyPrefix}${U}${S}`:S,v.t(oe,o)};return typeof a=="string"?$.lng=a:$.lngs=a,$.ns=c,$.keyPrefix=m,$}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(a){this.options.defaultNS=a}hasLoadedNamespace(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const m=c.lng||this.resolvedLanguage||this.languages[0],v=this.options?this.options.fallbackLng:!1,$=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;const S=(P,o)=>{const I=this.services.backendConnector.state[`${P}|${o}`];return I===-1||I===2};if(c.precheck){const P=c.precheck(this,S);if(P!==void 0)return P}return!!(this.hasResourceBundle(m,a)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||S(m,a)&&(!v||S($,a)))}loadNamespaces(a,c){const m=Oc();return this.options.ns?(typeof a=="string"&&(a=[a]),a.forEach(v=>{this.options.ns.indexOf(v)<0&&this.options.ns.push(v)}),this.loadResources(v=>{m.resolve(),c&&c(v)}),m):(c&&c(),Promise.resolve())}loadLanguages(a,c){const m=Oc();typeof a=="string"&&(a=[a]);const v=this.options.preload||[],$=a.filter(S=>v.indexOf(S)<0);return $.length?(this.options.preload=v.concat($),this.loadResources(S=>{m.resolve(),c&&c(S)}),m):(c&&c(),Promise.resolve())}dir(a){if(a||(a=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!a)return"rtl";const c=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],m=this.services&&this.services.languageUtils||new s3(d3());return c.indexOf(m.getLanguagePartFromCode(a))>-1||a.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return new Zc(a,c)}cloneInstance(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Eh;const m=a.forkResourceStore;m&&delete a.forkResourceStore;const v={...this.options,...a,isClone:!0},$=new Zc(v);return(a.debug!==void 0||a.prefix!==void 0)&&($.logger=$.logger.clone(a)),["store","services","language"].forEach(P=>{$[P]=this[P]}),$.services={...this.services},$.services.utils={hasLoadedNamespace:$.hasLoadedNamespace.bind($)},m&&($.store=new i3(this.store.data,v),$.services.resourceStore=$.store),$.translator=new Kh($.services,v),$.translator.on("*",function(P){for(var o=arguments.length,I=new Array(o>1?o-1:0),N=1;N<o;N++)I[N-1]=arguments[N];$.emit(P,...I)}),$.init(v,c),$.translator.options=v,$.translator.backendConnector.services.utils={hasLoadedNamespace:$.hasLoadedNamespace.bind($)},$}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const xn=Zc.createInstance();xn.createInstance=Zc.createInstance;xn.createInstance;xn.dir;xn.init;xn.loadResources;xn.reloadResources;xn.use;xn.changeLanguage;xn.getFixedT;xn.t;xn.exists;xn.setDefaultNamespace;xn.hasLoadedNamespace;xn.loadNamespaces;xn.loadLanguages;function Xh(){return Xh=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(s[m]=c[m])}return s},Xh.apply(this,arguments)}const _w=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,yw={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},vw=s=>yw[s],xw=s=>s.replace(_w,vw);let u3={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:xw};function bw(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};u3={...u3,...s}}const $w={type:"3rdParty",init(s){bw(s.options.react)}};async function VC(s){return await X$(Object.assign({}),`../locales/${s}/translation.json`).then(a=>({[s]:{translation:a.default}})).catch(()=>(console.error(`unable to load translations for: ${s}`),{}))}function ww(s,a){return xn.use($w).init({resources:s,compatibilityJSON:"v3",returnEmptyString:!1,interpolation:{escapeValue:!1}}),xn.changeLanguage(a),xn}const h3="/assets/static/headerLogo-8Xkoq5l2.svg",GC=s=>(ww(s.data.translations||{},s.data.document.locale),St.jsx(Y6,{value:W$,children:St.jsx(p5,{templateData:s.data,children:St.jsx(Ew,{...s})})})),Ew=s=>{var m;const{_site:a}=s.data.document,{children:c}=s;return C9(),St.jsxs(m9,{value:s.data,children:[St.jsx(Jg,{name:"header",children:St.jsx(_9,{logoPath:h3,logoLink:"https://www.thrivent.com/",links:((m=a==null?void 0:a.c_header)==null?void 0:m.links)||[]})}),c,St.jsx(Jg,{name:"footer",children:St.jsx(T9,{copyrightMessage:a.c_copyrightMessage||"",facebook:a.c_facebook,instagram:a.c_instagram,youtube:a.c_youtube,twitter:a.c_twitter,linkedIn:a.c_linkedIn,footerLinks:a.c_footerColumns||void 0,phone:a.c_companyPhoneNumber,logoPath:h3,copyright:a.c_copyrightText,footerImage:a.c_footerPhoto,cFPLogic:a.c_cFPLogic,cFPCopyright:a.c_cFPCopyRightText})})]})},Tw={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([457]\\d{6})$","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2457]\\d{6})$","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"1|([267]\\d{6})$","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"0|(183[12])",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:[25689]\\d|40)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([3-8]\\d{6})$","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|6[578])|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|13|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-7]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","(?:10|2[0-57-9])(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"0|(1(?:[12]\\d|79)\\d\\d)",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"0|([59]\\d{7})$","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:83[0-38]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-9]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[013579])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-246-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94|80\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"0|([25-9]\\d{5})$","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d\\d|606)\\d{5}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|6[0-289]|7[08]|8[0-689]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"1|([3-9]\\d{6})$","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-489]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-489]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([25-8]\\d{5})$","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"0|([0-24-8]\\d{5})$","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"1|([2-8]\\d{6})$","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"0|(1001)"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:2|33|5\\d|77|88)\\d{7}|[4-6]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[89]|389)","5(?:29[89]|389)0"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:29(?:[189][05]|2[29]|3[01])|389[05])\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|90)|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[08]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]|8[0-3]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590|(?:69|80)\\d|976)\\d{6}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["976[01]\\d{5}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"0|([24-9]\\d{6})$","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","670$1",0,"670"],MQ:["596","00","(?:69|80)\\d{7}|(?:59|97)6\\d{6}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"1|([34]\\d{6})$","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:5|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["5"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[3467]|9[13-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[017]\\d|[235][1-9]|4[0-35-9]|6[0-46-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","(?:[45]|80\\d\\d)\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","[2-7]\\d{7}|800\\d{4}(?:\\d{2})?|2\\d{6}",[7,8,9],[["(\\d{3})(\\d{4})","$1 $2",["2[126]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]]]],RE:["262","00","976\\d{6}|(?:26|[68]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,"26[23]|69|[89]"],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-6]2|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-6]2|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-5]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["24|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|(5\\d{6})$","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"1|([2-479]\\d{6})$","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-46-8]\\d{6})$","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["505(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|44))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-289]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-7]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","4\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|55|[679]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"1|([2-7]\\d{6})$","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"1|([2-578]\\d{6})$","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"1|([2-9]\\d{6})$","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7[24-68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","80\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,"269|63"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|285\\d{9}|(?:[19]\\d|49)\\d{6}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["4"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[19]"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["34[57]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-3]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|3(?:2|47|7\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:(?:285\\d\\d|3(?:45|[69]\\d{3}))\\d|9[89])\\d{6}"]]],883:["883",0,"(?:210|370\\d\\d)\\d{7}|51\\d{7}(?:\\d{3})?",[9,10,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["2"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[35]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:210|(?:370[1-9]|51[013]0)\\d)\\d{7}|5100\\d{5}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function Sw(s,a){var c=Array.prototype.slice.call(a);return c.push(Tw),s.apply(this,c)}function Bp(s){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Bp(s)}function f3(s,a){for(var c=0;c<a.length;c++){var m=a[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}function Cw(s,a,c){return a&&f3(s.prototype,a),c&&f3(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}function Aw(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function Iw(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&qc(s,a)}function Mw(s){var a=n2();return function(){var m=Hc(s),v;if(a){var $=Hc(this).constructor;v=Reflect.construct(m,arguments,$)}else v=m.apply(this,arguments);return Pw(this,v)}}function Pw(s,a){if(a&&(Bp(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r2(s)}function r2(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Fp(s){var a=typeof Map=="function"?new Map:void 0;return Fp=function(m){if(m===null||!Lw(m))return m;if(typeof m!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(m))return a.get(m);a.set(m,v)}function v(){return Ch(m,arguments,Hc(this).constructor)}return v.prototype=Object.create(m.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),qc(v,m)},Fp(s)}function Ch(s,a,c){return n2()?Ch=Reflect.construct:Ch=function(v,$,S){var P=[null];P.push.apply(P,$);var o=Function.bind.apply(v,P),I=new o;return S&&qc(I,S.prototype),I},Ch.apply(null,arguments)}function n2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lw(s){return Function.toString.call(s).indexOf("[native code]")!==-1}function qc(s,a){return qc=Object.setPrototypeOf||function(m,v){return m.__proto__=v,m},qc(s,a)}function Hc(s){return Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},Hc(s)}var Os=function(s){Iw(c,s);var a=Mw(c);function c(m){var v;return Aw(this,c),v=a.call(this,m),Object.setPrototypeOf(r2(v),c.prototype),v.name=v.constructor.name,v}return Cw(c)}(Fp(Error)),c0=2,Rw=17,kw=3,Vs="0-9---",Dw="--",Ow="/",zw=".",Bw=" ",Fw="()\\[\\]",Nw="~",Yh="".concat(Dw).concat(Ow).concat(zw).concat(Bw).concat(Fw).concat(Nw),u0="+";function p3(s,a){s=s.split("-"),a=a.split("-");for(var c=s[0].split("."),m=a[0].split("."),v=0;v<3;v++){var $=Number(c[v]),S=Number(m[v]);if($>S)return 1;if(S>$)return-1;if(!isNaN($)&&isNaN(S))return 1;if(isNaN($)&&!isNaN(S))return-1}return s[1]&&a[1]?s[1]>a[1]?1:s[1]<a[1]?-1:0:!s[1]&&a[1]?1:s[1]&&!a[1]?-1:0}function Jh(s){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Jh(s)}function d1(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function m3(s,a){for(var c=0;c<a.length;c++){var m=a[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}function c1(s,a,c){return a&&m3(s.prototype,a),c&&m3(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}var jw="1.2.0",Uw="1.7.35",g3=" ext. ",Vw=/^\d+$/,bi=function(){function s(a){d1(this,s),Hw(a),this.metadata=a,i2.call(this,a)}return c1(s,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(c){return c!=="001"})}},{key:"getCountryMetadata",value:function(c){return this.metadata.countries[c]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(c){return this.getCountryMetadata(c)!==void 0}},{key:"hasCallingCode",value:function(c){if(this.getCountryCodesForCallingCode(c))return!0;if(this.nonGeographic()){if(this.nonGeographic()[c])return!0}else{var m=this.countryCallingCodes()[c];if(m&&m.length===1&&m[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(c){return this.nonGeographic()?!!this.nonGeographic()[c]:!this.getCountryCodesForCallingCode(c)}},{key:"country",value:function(c){return this.selectNumberingPlan(c)}},{key:"selectNumberingPlan",value:function(c,m){if(c&&Vw.test(c)&&(m=c,c=null),c&&c!=="001"){if(!this.hasCountry(c))throw new Error("Unknown country: ".concat(c));this.numberingPlan=new _3(this.getCountryMetadata(c),this)}else if(m){if(!this.hasCallingCode(m))throw new Error("Unknown calling code: ".concat(m));this.numberingPlan=new _3(this.getNumberingPlanMetadata(m),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(c){var m=this.countryCallingCodes()[c];if(m)return m.length===1&&m[0].length===3?void 0:m}},{key:"getCountryCodeForCallingCode",value:function(c){var m=this.getCountryCodesForCallingCode(c);if(m)return m[0]}},{key:"getNumberingPlanMetadata",value:function(c){var m=this.getCountryCodeForCallingCode(c);if(m)return this.getCountryMetadata(m);if(this.nonGeographic()){var v=this.nonGeographic()[c];if(v)return v}else{var $=this.countryCallingCodes()[c];if($&&$.length===1&&$[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(c){return this.numberingPlan.type(c)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(c){return this.selectNumberingPlan(c)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),s}(),_3=function(){function s(a,c){d1(this,s),this.globalMetadataObject=c,this.metadata=a,i2.call(this,c.metadata)}return c1(s,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(c){return c[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var c=this,m=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return m.map(function(v){return new Gw(v,c)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(c){return c[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(c){if(this.hasTypes()&&y3(this.types(),c))return new qw(y3(this.types(),c),this)}},{key:"ext",value:function(){return this.v1||this.v2?g3:this.metadata[13]||g3}}]),s}(),Gw=function(){function s(a,c){d1(this,s),this._format=a,this.metadata=c}return c1(s,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!Zw.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),s}(),Zw=/^\(?\$1\)?$/,qw=function(){function s(a,c){d1(this,s),this.type=a,this.metadata=c}return c1(s,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),s}();function y3(s,a){switch(a){case"FIXED_LINE":return s[0];case"MOBILE":return s[1];case"TOLL_FREE":return s[2];case"PREMIUM_RATE":return s[3];case"PERSONAL_NUMBER":return s[4];case"VOICEMAIL":return s[5];case"UAN":return s[6];case"PAGER":return s[7];case"VOIP":return s[8];case"SHARED_COST":return s[9]}}function Hw(s){if(!s)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!cp(s)||!cp(s.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(cp(s)?"an object of shape: { "+Object.keys(s).join(", ")+" }":"a "+Ww(s)+": "+s,"."))}var cp=function(a){return Jh(a)==="object"},Ww=function(a){return Jh(a)};function h0(s,a){if(a=new bi(a),a.hasCountry(s))return a.country(s).countryCallingCode();throw new Error("Unknown country: ".concat(s))}function i2(s){var a=s.version;typeof a=="number"?(this.v1=a===1,this.v2=a===2,this.v3=a===3,this.v4=a===4):a?p3(a,jw)===-1?this.v2=!0:p3(a,Uw)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var Kw=";ext=",Gl=function(a){return"([".concat(Vs,"]{1,").concat(a,"})")};function o2(s){var a="20",c="15",m="9",v="6",$="[ \\t,]*",S="[:\\.]?[ \\t,-]*",P="#?",o="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",I="(?:[x#~]|int|)",N="[- ]+",Y="[ \\t]*",U="(?:,{2}|;)",oe=Kw+Gl(a),ae=$+o+S+Gl(a)+P,$e=$+I+S+Gl(m)+P,Ie=N+Gl(v)+"#",Be=Y+U+S+Gl(c)+P,xe=Y+"(?:,)+"+S+Gl(m)+P;return oe+"|"+ae+"|"+$e+"|"+Ie+"|"+Be+"|"+xe}var Xw="["+Vs+"]{"+c0+"}",Yw="["+u0+"]{0,1}(?:["+Yh+"]*["+Vs+"]){3,}["+Yh+Vs+"]*",Jw=new RegExp("^["+u0+"]{0,1}(?:["+Yh+"]*["+Vs+"]){1,2}$","i"),Qw=Yw+"(?:"+o2()+")?",eE=new RegExp("^"+Xw+"$|^"+Qw+"$","i");function s2(s){return s.length>=c0&&eE.test(s)}function tE(s){return Jw.test(s)}var v3=new RegExp("(?:"+o2()+")$","i");function rE(s){var a=s.search(v3);if(a<0)return{};for(var c=s.slice(0,a),m=s.match(v3),v=1;v<m.length;){if(m[v])return{number:c,ext:m[v]};v++}}var nE={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function iE(s){return nE[s]}function oE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=sE(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sE(s,a){if(s){if(typeof s=="string")return x3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return x3(s,a)}}function x3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function b3(s){for(var a="",c=oE(s.split("")),m;!(m=c()).done;){var v=m.value;a+=aE(v,a)||""}return a}function aE(s,a){return s==="+"?a?void 0:"+":iE(s)}function lE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=dE(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dE(s,a){if(s){if(typeof s=="string")return $3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return $3(s,a)}}function $3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function cE(s,a){for(var c=s.slice(),m=lE(a),v;!(v=m()).done;){var $=v.value;s.indexOf($)<0&&c.push($)}return c.sort(function(S,P){return S-P})}function f0(s,a){return a2(s,void 0,a)}function a2(s,a,c){var m=c.type(a),v=m&&m.possibleLengths()||c.possibleLengths();if(!v)return"IS_POSSIBLE";if(a==="FIXED_LINE_OR_MOBILE"){if(!c.type("FIXED_LINE"))return a2(s,"MOBILE",c);var $=c.type("MOBILE");$&&(v=cE(v,$.possibleLengths()))}else if(a&&!m)return"INVALID_LENGTH";var S=s.length,P=v[0];return P===S?"IS_POSSIBLE":P>S?"TOO_SHORT":v[v.length-1]<S?"TOO_LONG":v.indexOf(S,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function uE(s,a,c){if(a===void 0&&(a={}),c=new bi(c),a.v2){if(!s.countryCallingCode)throw new Error("Invalid phone number object passed");c.selectNumberingPlan(s.countryCallingCode)}else{if(!s.phone)return!1;if(s.country){if(!c.hasCountry(s.country))throw new Error("Unknown country: ".concat(s.country));c.country(s.country)}else{if(!s.countryCallingCode)throw new Error("Invalid phone number object passed");c.selectNumberingPlan(s.countryCallingCode)}}if(c.possibleLengths())return l2(s.phone||s.nationalNumber,c);if(s.countryCallingCode&&c.isNonGeographicCallingCode(s.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function l2(s,a){switch(f0(s,a)){case"IS_POSSIBLE":return!0;default:return!1}}function hE(s,a){return mE(s)||pE(s,a)||d2(s,a)||fE()}function fE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pE(s,a){var c=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var m=[],v=!0,$=!1,S,P;try{for(c=c.call(s);!(v=(S=c.next()).done)&&(m.push(S.value),!(a&&m.length===a));v=!0);}catch(o){$=!0,P=o}finally{try{!v&&c.return!=null&&c.return()}finally{if($)throw P}}return m}}function mE(s){if(Array.isArray(s))return s}function gE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=d2(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d2(s,a){if(s){if(typeof s=="string")return w3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return w3(s,a)}}function w3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function _E(s){var a,c;s=s.replace(/^tel:/,"tel=");for(var m=gE(s.split(";")),v;!(v=m()).done;){var $=v.value,S=$.split("="),P=hE(S,2),o=P[0],I=P[1];switch(o){case"tel":a=I;break;case"ext":c=I;break;case"phone-context":I[0]==="+"&&(a=I+a);break}}if(!s2(a))return{};var N={number:a};return c&&(N.ext=c),N}function yE(s){var a=s.number,c=s.ext;if(!a)return"";if(a[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(a).concat(c?";ext="+c:"")}function ts(s,a){return s=s||"",new RegExp("^(?:"+a+")$").test(s)}function vE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=xE(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xE(s,a){if(s){if(typeof s=="string")return E3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return E3(s,a)}}function E3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}var bE=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function p0(s,a,c){if(a=a||{},!!s.country){c=new bi(c),c.selectNumberingPlan(s.country,s.countryCallingCode);var m=a.v2?s.nationalNumber:s.phone;if(ts(m,c.nationalNumberPattern())){if(up(m,"FIXED_LINE",c))return c.type("MOBILE")&&c.type("MOBILE").pattern()===""||!c.type("MOBILE")||up(m,"MOBILE",c)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var v=vE(bE),$;!($=v()).done;){var S=$.value;if(up(m,S,c))return S}}}}function up(s,a,c){return a=c.type(a),!a||!a.pattern()||a.possibleLengths()&&a.possibleLengths().indexOf(s.length)<0?!1:ts(s,a.pattern())}function $E(s,a,c){if(a=a||{},c=new bi(c),!s.country)return!1;if(c.selectNumberingPlan(s.country,s.countryCallingCode),c.hasTypes())return p0(s,a,c.metadata)!==void 0;var m=a.v2?s.nationalNumber:s.phone;return ts(m,c.nationalNumberPattern())}function wE(s){return s.replace(new RegExp("[".concat(Yh,"]+"),"g")," ").trim()}var EE=/(\$\d)/;function TE(s,a,c){var m=c.useInternationalFormat,v=c.withNationalPrefix;c.carrierCode,c.metadata;var $=s.replace(new RegExp(a.pattern()),m?a.internationalFormat():v&&a.nationalPrefixFormattingRule()?a.format().replace(EE,a.nationalPrefixFormattingRule()):a.format());return m?wE($):$}var SE=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function CE(s,a,c){var m=new bi(c);if(m.selectNumberingPlan(s,a),m.defaultIDDPrefix())return m.defaultIDDPrefix();if(SE.test(m.IDDPrefix()))return m.IDDPrefix()}function AE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=IE(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IE(s,a){if(s){if(typeof s=="string")return T3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return T3(s,a)}}function T3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function S3(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,m)}return c}function C3(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?S3(Object(c),!0).forEach(function(m){ME(s,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):S3(Object(c)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(c,m))})}return s}function ME(s,a,c){return a in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}var A3={formatExtension:function(a,c,m){return"".concat(a).concat(m.ext()).concat(c)}};function PE(s,a,c,m){if(c?c=C3(C3({},A3),c):c=A3,m=new bi(m),s.country&&s.country!=="001"){if(!m.hasCountry(s.country))throw new Error("Unknown country: ".concat(s.country));m.country(s.country)}else if(s.countryCallingCode)m.selectNumberingPlan(s.countryCallingCode);else return s.phone||"";var v=m.countryCallingCode(),$=c.v2?s.nationalNumber:s.phone,S;switch(a){case"NATIONAL":return $?(S=Qh($,s.carrierCode,"NATIONAL",m,c),hp(S,s.ext,m,c.formatExtension)):"";case"INTERNATIONAL":return $?(S=Qh($,null,"INTERNATIONAL",m,c),S="+".concat(v," ").concat(S),hp(S,s.ext,m,c.formatExtension)):"+".concat(v);case"E.164":return"+".concat(v).concat($);case"RFC3966":return yE({number:"+".concat(v).concat($),ext:s.ext});case"IDD":if(!c.fromCountry)return;var P=RE($,s.carrierCode,v,c.fromCountry,m);return hp(P,s.ext,m,c.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(a,'"'))}}function Qh(s,a,c,m,v){var $=LE(m.formats(),s);return $?TE(s,$,{useInternationalFormat:c==="INTERNATIONAL",withNationalPrefix:!($.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&v&&v.nationalPrefix===!1),carrierCode:a,metadata:m}):s}function LE(s,a){for(var c=AE(s),m;!(m=c()).done;){var v=m.value;if(v.leadingDigitsPatterns().length>0){var $=v.leadingDigitsPatterns()[v.leadingDigitsPatterns().length-1];if(a.search($)!==0)continue}if(ts(a,v.pattern()))return v}}function hp(s,a,c,m){return a?m(s,a,c):s}function RE(s,a,c,m,v){var $=h0(m,v.metadata);if($===c){var S=Qh(s,a,"NATIONAL",v);return c==="1"?c+" "+S:S}var P=CE(m,void 0,v.metadata);if(P)return"".concat(P," ").concat(c," ").concat(Qh(s,null,"INTERNATIONAL",v))}function I3(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,m)}return c}function M3(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?I3(Object(c),!0).forEach(function(m){kE(s,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):I3(Object(c)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(c,m))})}return s}function kE(s,a,c){return a in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}function DE(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function P3(s,a){for(var c=0;c<a.length;c++){var m=a[c];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(s,m.key,m)}}function OE(s,a,c){return a&&P3(s.prototype,a),c&&P3(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}var zE=function(){function s(a,c,m){if(DE(this,s),!a)throw new TypeError("`country` or `countryCallingCode` not passed");if(!c)throw new TypeError("`nationalNumber` not passed");if(!m)throw new TypeError("`metadata` not passed");var v=new bi(m);BE(a)&&(this.country=a,v.country(a),a=v.countryCallingCode()),this.countryCallingCode=a,this.nationalNumber=c,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=m}return OE(s,[{key:"setExt",value:function(c){this.ext=c}},{key:"isPossible",value:function(){return uE(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return $E(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){var c=new bi(this.metadata);return c.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(c){return this.number===c.number&&this.ext===c.ext}},{key:"getType",value:function(){return p0(this,{v2:!0},this.metadata)}},{key:"format",value:function(c,m){return PE(this,c,m?M3(M3({},m),{},{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(c){return this.format("NATIONAL",c)}},{key:"formatInternational",value:function(c){return this.format("INTERNATIONAL",c)}},{key:"getURI",value:function(c){return this.format("RFC3966",c)}}]),s}(),BE=function(a){return/^[A-Z]{2}$/.test(a)},FE=new RegExp("(["+Vs+"])");function NE(s,a,c,m){if(a){var v=new bi(m);v.selectNumberingPlan(a,c);var $=new RegExp(v.IDDPrefix());if(s.search($)===0){s=s.slice(s.match($)[0].length);var S=s.match(FE);if(!(S&&S[1]!=null&&S[1].length>0&&S[1]==="0"))return s}}}function jE(s,a){if(s&&a.numberingPlan.nationalPrefixForParsing()){var c=new RegExp("^(?:"+a.numberingPlan.nationalPrefixForParsing()+")"),m=c.exec(s);if(m){var v,$,S=m.length-1,P=S>0&&m[S];if(a.nationalPrefixTransformRule()&&P)v=s.replace(c,a.nationalPrefixTransformRule()),S>1&&($=m[1]);else{var o=m[0];v=s.slice(o.length),P&&($=m[1])}var I;if(P){var N=s.indexOf(m[1]),Y=s.slice(0,N);Y===a.numberingPlan.nationalPrefix()&&(I=a.numberingPlan.nationalPrefix())}else I=m[0];return{nationalNumber:v,nationalPrefix:I,carrierCode:$}}}return{nationalNumber:s}}function Np(s,a){var c=jE(s,a),m=c.carrierCode,v=c.nationalNumber;if(v!==s){if(!UE(s,v,a))return{nationalNumber:s};if(a.possibleLengths()&&!VE(v,a))return{nationalNumber:s}}return{nationalNumber:v,carrierCode:m}}function UE(s,a,c){return!(ts(s,c.nationalNumberPattern())&&!ts(a,c.nationalNumberPattern()))}function VE(s,a){switch(f0(s,a)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function GE(s,a,c,m){var v=a?h0(a,m):c;if(s.indexOf(v)===0){m=new bi(m),m.selectNumberingPlan(a,c);var $=s.slice(v.length),S=Np($,m),P=S.nationalNumber,o=Np(s,m),I=o.nationalNumber;if(!ts(I,m.nationalNumberPattern())&&ts(P,m.nationalNumberPattern())||f0(I,m)==="TOO_LONG")return{countryCallingCode:v,number:$}}return{number:s}}function ZE(s,a,c,m){if(!s)return{};if(s[0]!=="+"){var v=NE(s,a,c,m);if(v&&v!==s)s="+"+v;else{if(a||c){var $=GE(s,a,c,m),S=$.countryCallingCode,P=$.number;if(S)return{countryCallingCode:S,number:P}}return{number:s}}}if(s[1]==="0")return{};m=new bi(m);for(var o=2;o-1<=kw&&o<=s.length;){var I=s.slice(1,o);if(m.hasCallingCode(I))return m.selectNumberingPlan(I),{countryCallingCode:I,number:s.slice(o)};o++}return{}}function qE(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=HE(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HE(s,a){if(s){if(typeof s=="string")return L3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return L3(s,a)}}function L3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function WE(s,a,c){var m=c.getCountryCodesForCallingCode(s);if(m)return m.length===1?m[0]:KE(m,a,c.metadata)}function KE(s,a,c){c=new bi(c);for(var m=qE(s),v;!(v=m()).done;){var $=v.value;if(c.country($),c.leadingDigits()){if(a&&a.search(c.leadingDigits())===0)return $}else if(p0({phone:a,country:$},void 0,c.metadata))return $}}var XE=250,YE=new RegExp("["+u0+Vs+"]"),JE=new RegExp("[^"+Vs+"#]+$");function QE(s,a,c){if(a=a||{},c=new bi(c),a.defaultCountry&&!c.hasCountry(a.defaultCountry))throw a.v2?new Os("INVALID_COUNTRY"):new Error("Unknown country: ".concat(a.defaultCountry));var m=tT(s,a.v2,a.extract),v=m.number,$=m.ext,S=m.error;if(!v){if(a.v2)throw S==="TOO_SHORT"?new Os("TOO_SHORT"):new Os("NOT_A_NUMBER");return{}}var P=nT(v,a.defaultCountry,a.defaultCallingCode,c),o=P.country,I=P.nationalNumber,N=P.countryCallingCode,Y=P.carrierCode;if(!c.hasSelectedNumberingPlan()){if(a.v2)throw new Os("INVALID_COUNTRY");return{}}if(!I||I.length<c0){if(a.v2)throw new Os("TOO_SHORT");return{}}if(I.length>Rw){if(a.v2)throw new Os("TOO_LONG");return{}}if(a.v2){var U=new zE(N,I,c.metadata);return o&&(U.country=o),Y&&(U.carrierCode=Y),$&&(U.ext=$),U}var oe=(a.extended?c.hasSelectedNumberingPlan():o)?ts(I,c.nationalNumberPattern()):!1;return a.extended?{country:o,countryCallingCode:N,carrierCode:Y,valid:oe,possible:oe?!0:!!(a.extended===!0&&c.possibleLengths()&&l2(I,c)),phone:I,ext:$}:oe?rT(o,I,$):{}}function eT(s,a,c){if(s){if(s.length>XE){if(c)throw new Os("TOO_LONG");return}if(a===!1)return s;var m=s.search(YE);if(!(m<0))return s.slice(m).replace(JE,"")}}function tT(s,a,c){if(s&&s.indexOf("tel:")===0)return _E(s);var m=eT(s,c,a);if(!m)return{};if(!s2(m))return tE(m)?{error:"TOO_SHORT"}:{};var v=rE(m);return v.ext?v:{number:m}}function rT(s,a,c){var m={country:s,phone:a};return c&&(m.ext=c),m}function nT(s,a,c,m){var v=ZE(b3(s),a,c,m.metadata),$=v.countryCallingCode,S=v.number,P;if($)m.selectNumberingPlan($);else if(S&&(a||c))m.selectNumberingPlan(a,c),a&&(P=a),$=c||h0(a,m.metadata);else return{};if(!S)return{countryCallingCode:$};var o=Np(b3(S),m),I=o.nationalNumber,N=o.carrierCode,Y=WE($,I,m);return Y&&(P=Y,Y==="001"||m.country(P)),{country:P,countryCallingCode:$,nationalNumber:I,carrierCode:N}}function R3(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,m)}return c}function k3(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?R3(Object(c),!0).forEach(function(m){iT(s,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):R3(Object(c)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(c,m))})}return s}function iT(s,a,c){return a in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}function oT(s,a,c){return QE(s,k3(k3({},a),{},{v2:!0}),c)}function jp(s){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},jp(s)}function D3(s,a){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);a&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(s,v).enumerable})),c.push.apply(c,m)}return c}function sT(s){for(var a=1;a<arguments.length;a++){var c=arguments[a]!=null?arguments[a]:{};a%2?D3(Object(c),!0).forEach(function(m){aT(s,m,c[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):D3(Object(c)).forEach(function(m){Object.defineProperty(s,m,Object.getOwnPropertyDescriptor(c,m))})}return s}function aT(s,a,c){return a in s?Object.defineProperty(s,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[a]=c,s}function lT(s,a){return hT(s)||uT(s,a)||cT(s,a)||dT()}function dT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cT(s,a){if(s){if(typeof s=="string")return O3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return O3(s,a)}}function O3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function uT(s,a){var c=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var m=[],v=!0,$=!1,S,P;try{for(c=c.call(s);!(v=(S=c.next()).done)&&(m.push(S.value),!(a&&m.length===a));v=!0);}catch(o){$=!0,P=o}finally{try{!v&&c.return!=null&&c.return()}finally{if($)throw P}}return m}}function hT(s){if(Array.isArray(s))return s}function fT(){var s=pT(arguments),a=s.text,c=s.options,m=s.metadata;return oT(a,c,m)}function pT(s){var a=Array.prototype.slice.call(s),c=lT(a,4),m=c[0],v=c[1],$=c[2],S=c[3],P,o,I;if(typeof m=="string")P=m;else throw new TypeError("A text for parsing must be a string.");if(!v||typeof v=="string")S?(o=$,I=S):(o=void 0,I=$),v&&(o=sT({defaultCountry:v},o));else if(mT(v))$?(o=v,I=$):I=v;else throw new Error("Invalid second argument: ".concat(v));return{text:P,options:o,metadata:I}}var mT=function(a){return jp(a)==="object"};function gT(){return Sw(fT,arguments)}function ZC(s,a){if(s)try{const c=gT(s,a);return a==="US"?c.formatNational():c.formatInternational()}catch(c){c instanceof Os&&console.error(c.message)}return s}const qC=s=>{const{url:a,label:c,primary:m}=s,v=Wc();return St.jsx("div",{children:St.jsxs("a",{href:a,className:sd("CardCTA p-3 my-3 border-2 border-brand-secondary font-bold text-[17px] text-center",{block:m},{"flex items-center justify-between bg-brand-secondary":!m}),onClick:v==null?void 0:v.trackClick("cta"),children:[St.jsx("div",{className:"mx-2 sm:mx-0 flex-grow pr-4 whitespace-nowrap",children:c}),!m&&St.jsx(w9,{className:"CardCTA-arrow"})]})})};var c2={exports:{}};(function(s,a){(function(m,v){s.exports=v()})(typeof self<"u"?self:In,function(){return function(c){var m={};function v($){if(m[$])return m[$].exports;var S=m[$]={i:$,l:!1,exports:{}};return c[$].call(S.exports,S,S.exports,v),S.l=!0,S.exports}return v.m=c,v.c=m,v.d=function($,S,P){v.o($,S)||Object.defineProperty($,S,{enumerable:!0,get:P})},v.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},v.t=function($,S){if(S&1&&($=v($)),S&8||S&4&&typeof $=="object"&&$&&$.__esModule)return $;var P=Object.create(null);if(v.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:$}),S&2&&typeof $!="string")for(var o in $)v.d(P,o,(function(I){return $[I]}).bind(null,o));return P},v.n=function($){var S=$&&$.__esModule?function(){return $.default}:function(){return $};return v.d(S,"a",S),S},v.o=function($,S){return Object.prototype.hasOwnProperty.call($,S)},v.p="",v(v.s=0)}([function(c,m,v){v.r(m);function $(gt,ve){if(!(gt instanceof ve))throw new TypeError("Cannot call a class as a function")}function S(gt,ve,Ke){return ve in gt?Object.defineProperty(gt,ve,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):gt[ve]=Ke,gt}var P=function gt(ve){var Ke=this;$(this,gt),S(this,"DATA",{}),S(this,"KEY",void 0),S(this,"DEFAULT_VALUE",void 0),S(this,"getItem",function(){return Ke.DATA[Ke.KEY]||Ke.DEFAULT_VALUE}),S(this,"setItem",function(_e){return Ke.DATA[Ke.KEY]=_e,!0});var Ct=ve.key,tt=ve.defaultValue;this.DATA={},this.KEY=Ct||Y,this.DEFAULT_VALUE=tt},o=P;function I(gt,ve){if(!(gt instanceof ve))throw new TypeError("Cannot call a class as a function")}function N(gt,ve,Ke){return ve in gt?Object.defineProperty(gt,ve,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):gt[ve]=Ke,gt}var Y="__RECENT_SEARCHES__",U=function(){var ve="__TEST__KEY__";try{return localStorage.setItem(ve,""),localStorage.removeItem(ve),!0}catch{return!1}},oe=function(ve,Ke){if(!ve)return Ke;try{return JSON.parse(ve)}catch{return Ke}},ae=function gt(ve){var Ke=this;I(this,gt),N(this,"KEY",void 0),N(this,"DEFAULT_VALUE",void 0),N(this,"getItem",function(){var _e=localStorage.getItem(Ke.KEY);return oe(_e,Ke.DEFAULT_VALUE)}),N(this,"setItem",function(_e){try{return localStorage.setItem(Ke.KEY,JSON.stringify(_e)),!0}catch{return!1}});var Ct=ve.key,tt=ve.defaultValue;this.KEY=Ct||Y,this.DEFAULT_VALUE=tt},$e=function(ve){return U()?new ae(ve):new o(ve)},Ie=$e,Be=function(ve,Ke,Ct,tt){var _e=String(Ke);switch(Ct){case"PROXIMITY":return ve.query.indexOf(_e);case"TIME":return Math.log10(new Date().getTime()-ve.timestamp);default:var je=ve.query.indexOf(_e),It=Math.log2((new Date().getTime()-ve.timestamp)/tt+1),Tt=Math.log2(je+1)||1;return je===-1?je:(.01+.49*Tt+.49*It)/1}},xe=Be,Je=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return/^\s*$/.test(ve)},We=function(ve){return typeof ve=="string"&&!Je(ve)||typeof ve=="number"},ht=We;v.d(m,"RecentSearches",function(){return ft});function Lt(gt,ve){if(!(gt instanceof ve))throw new TypeError("Cannot call a class as a function")}function Ye(gt,ve,Ke){return ve in gt?Object.defineProperty(gt,ve,{value:Ke,enumerable:!0,configurable:!0,writable:!0}):gt[ve]=Ke,gt}var ft=function gt(){var ve=this,Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt(this,gt),Ye(this,"TTL",void 0),Ye(this,"LIMIT",void 0),Ye(this,"STORAGE",void 0),Ye(this,"RANKING",void 0),Ye(this,"RECENT_SEARCHES",[]),Ye(this,"getRecentSearches",function(Ct){if(!ht(Ct))return ve.RECENT_SEARCHES;var tt=ve.RECENT_SEARCHES.map(function(_e){var je=xe(_e,Ct,ve.RANKING,ve.TTL);return{data:_e.data,query:_e.query,score:je,timestamp:_e.timestamp}}).filter(ve.filterScoredResults).sort(ve.sortScoredResults).map(function(_e){return{data:_e.data,query:_e.query,timestamp:_e.timestamp}});return tt}),Ye(this,"setRecentSearch",function(Ct,tt){if(!ht(Ct))return ve.RECENT_SEARCHES;var _e={data:tt,query:String(Ct),timestamp:new Date().getTime()},je=ve.RECENT_SEARCHES.findIndex(function(It){return It.query===Ct});return je>-1&&ve.RECENT_SEARCHES.splice(je,1),ve.RECENT_SEARCHES.unshift(_e),ve.RECENT_SEARCHES=ve.RECENT_SEARCHES.slice(0,ve.LIMIT),ve.STORAGE.setItem(ve.RECENT_SEARCHES),ve.RECENT_SEARCHES}),Ye(this,"filterScoredResults",function(Ct){return ve.RANKING==="TIME"?!0:Ct.score>-1}),Ye(this,"sortScoredResults",function(Ct,tt){return Ct.score-tt.score}),Ye(this,"initializeStorageData",function(){var Ct=new Date().getTime(),tt=ve.STORAGE.getItem().filter(function(_e){return _e.timestamp+ve.TTL>=Ct}).slice(0,ve.LIMIT);return ve.STORAGE.setItem(tt),ve.RECENT_SEARCHES=tt,tt}),this.TTL=Ke.ttl||1e3*60*60*24,this.LIMIT=Ke.limit||50,this.STORAGE=Ie({defaultValue:[],key:Ke.namespace}),this.RECENT_SEARCHES=this.initializeStorageData(),this.RANKING=Ke.ranking||"PROXIMITY_AND_TIME"};m.default=ft}])})})(c2);var fp=c2.exports;const _T=!!(typeof window<"u"&&window.document&&window.document.createElement);var Up=!1,Vp=!1;try{var pp={get passive(){return Up=!0},get once(){return Vp=Up=!0}};_T&&(window.addEventListener("test",pp,pp),window.removeEventListener("test",pp,!0))}catch{}function yT(s,a,c,m){if(m&&typeof m!="boolean"&&!Vp){var v=m.once,$=m.capture,S=c;!Vp&&v&&(S=c.__once||function P(o){this.removeEventListener(a,P,$),c.call(this,o)},c.__once=S),s.addEventListener(a,S,Up?m:$)}s.addEventListener(a,c,m)}function vT(s,a,c,m){var v=m&&typeof m!="boolean"?m.capture:m;s.removeEventListener(a,c,v),c.__once&&s.removeEventListener(a,c.__once,v)}function Fc(s,a,c,m){return yT(s,a,c,m),function(){vT(s,a,c,m)}}function u2(s){return s&&s.ownerDocument||document}function xT(s){var a=Ge.useRef(s);return Ge.useEffect(function(){a.current=s},[s]),a}function Gp(s){var a=xT(s);return Ge.useCallback(function(){return a.current&&a.current.apply(a,arguments)},[a])}function z3(s,a){if(s.contains)return s.contains(a);if(s.compareDocumentPosition)return s===a||!!(s.compareDocumentPosition(a)&16)}var bT=function(){},$T=bT;const wT=Gs($T),B3=()=>{};function ET(s){return s.button===0}function TT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}const Ah=s=>s&&("current"in s?s.current:s),F3={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function ST(s,a=B3,{disabled:c,clickTrigger:m="click"}={}){const v=Ge.useRef(!1),$=Ge.useRef(!1),S=Ge.useCallback(I=>{const N=Ah(s);wT(!!N,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),v.current=!N||TT(I)||!ET(I)||!!z3(N,I.target)||$.current,$.current=!1},[s]),P=Gp(I=>{const N=Ah(s);N&&z3(N,I.target)&&($.current=!0)}),o=Gp(I=>{v.current||a(I)});Ge.useEffect(()=>{var I,N;if(c||s==null)return;const Y=u2(Ah(s)),U=Y.defaultView||window;let oe=(I=U.event)!=null?I:(N=U.parent)==null?void 0:N.event,ae=null;F3[m]&&(ae=Fc(Y,F3[m],P,!0));const $e=Fc(Y,m,S,!0),Ie=Fc(Y,m,xe=>{if(xe===oe){oe=void 0;return}o(xe)});let Be=[];return"ontouchstart"in Y.documentElement&&(Be=[].slice.call(Y.body.children).map(xe=>Fc(xe,"mousemove",B3))),()=>{ae==null||ae(),$e(),Ie(),Be.forEach(xe=>xe())}},[s,c,m,S,P,o])}function CT(s){return s.code==="Escape"||s.keyCode===27}const AT=()=>{};function mp(s,a,{disabled:c,clickTrigger:m}={}){const v=a||AT;ST(s,v,{disabled:c,clickTrigger:m});const $=Gp(S=>{CT(S)&&v(S)});Ge.useEffect(()=>{if(c||s==null)return;const S=u2(Ah(s));let P=(S.defaultView||window).event;const o=Fc(S,"keyup",I=>{if(I===P){P=void 0;return}$(I)});return()=>{o()}},[s,c,$])}var Ql=Ge.useLayoutEffect;/**
  * @reach/utils v0.18.0
  *
  * Copyright (c) 2018-2022, React Training LLC
  *
  * This source code is licensed under the MIT license found in the
  * LICENSE.md file in the root directory of this source tree.
  *
  * @license MIT
  */function IT(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var MT=IT()?Ge.useLayoutEffect:Ge.useEffect,gp=!1,PT=0;function N3(){return++PT}var j3=m5.useId;function LT(s){if(j3!==void 0){let v=j3();return s??v}let a=s??(gp?N3():null),[c,m]=Ge.useState(a);return MT(()=>{c===null&&m(N3())},[]),Ge.useEffect(()=>{gp===!1&&(gp=!0)},[]),s??c??void 0}function Zp(){return Zp=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var c=arguments[a];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(s[m]=c[m])}return s},Zp.apply(this,arguments)}function RT(s,a){if(s){if(typeof s=="string")return U3(s,a);var c=Object.prototype.toString.call(s).slice(8,-1);if(c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set")return Array.from(s);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return U3(s,a)}}function U3(s,a){(a==null||a>s.length)&&(a=s.length);for(var c=0,m=new Array(a);c<a;c++)m[c]=s[c];return m}function kT(s,a){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c)return(c=c.call(s)).next.bind(c);if(Array.isArray(s)||(c=RT(s))||a&&s&&typeof s.length=="number"){c&&(s=c);var m=0;return function(){return m>=s.length?{done:!0}:{done:!1,value:s[m++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DT=function(s){if(!s)throw Error("hashlru must have a max value, of type number, greater than 0");var a=0,c=Object.create(null),m=Object.create(null);function v($,S){c[$]=S,a++,a>=s&&(a=0,m=c,c=Object.create(null))}return{has:function($){return c[$]!==void 0||m[$]!==void 0},remove:function($){c[$]!==void 0&&(c[$]=void 0),m[$]!==void 0&&(m[$]=void 0)},get:function($){var S=c[$];if(S!==void 0)return S;if((S=m[$])!==void 0)return v($,S),S},set:function($,S){c[$]!==void 0?c[$]=S:v($,S)},clear:function(){c=Object.create(null),m=Object.create(null)}}};const OT=Gs(DT);function zT(s){return s>=1?OT(s):{get:function(){},set:function(){}}}var m0="-";function BT(s){var a=NT(s);function c(v){var $=v.split(m0);return $[0]===""&&$.length!==1&&$.shift(),h2($,a)||FT(v)}function m(v){return s.conflictingClassGroups[v]||[]}return{getClassGroupId:c,getConflictingClassGroupIds:m}}function h2(s,a){var c;if(s.length===0)return a.classGroupId;var m=s[0],v=a.nextPart[m],$=v?h2(s.slice(1),v):void 0;if($)return $;if(a.validators.length!==0){var S=s.join(m0);return(c=a.validators.find(function(P){var o=P.validator;return o(S)}))==null?void 0:c.classGroupId}}var V3=/^\[(.+)\]$/;function FT(s){if(V3.test(s)){var a=V3.exec(s)[1],c=a==null?void 0:a.substring(0,a.indexOf(":"));if(c)return"arbitrary.."+c}}function NT(s){var a=s.theme,c=s.prefix,m={nextPart:{},validators:[]},v=UT(Object.entries(s.classGroups),c);return v.forEach(function($){var S=$[0],P=$[1];qp(P,m,S,a)}),m}function qp(s,a,c,m){s.forEach(function(v){if(typeof v=="string"){var $=v===""?a:G3(a,v);$.classGroupId=c;return}if(typeof v=="function"){if(jT(v)){qp(v(m),a,c,m);return}a.validators.push({validator:v,classGroupId:c});return}Object.entries(v).forEach(function(S){var P=S[0],o=S[1];qp(o,G3(a,P),c,m)})})}function G3(s,a){var c=s;return a.split(m0).forEach(function(m){c.nextPart[m]===void 0&&(c.nextPart[m]={nextPart:{},validators:[]}),c=c.nextPart[m]}),c}function jT(s){return s.isThemeGetter}function UT(s,a){return a?s.map(function(c){var m=c[0],v=c[1],$=v.map(function(S){return typeof S=="string"?a+S:typeof S=="object"?Object.fromEntries(Object.entries(S).map(function(P){var o=P[0],I=P[1];return[a+o,I]})):S});return[m,$]}):s}function VT(s){return Zp({cache:zT(s.cacheSize)},BT(s))}var GT=/\s+/,f2="!";function ZT(s,a){var c=a.getClassGroupId,m=a.getConflictingClassGroupIds,v=new Set;return s.trim().split(GT).map(function($){var S=qT($),P=S.modifiers,o=S.hasImportantModifier,I=S.baseClassName,N=c(I);if(!N)return{isTailwindClass:!1,originalClassName:$};var Y=HT(P).join(""),U=o?Y+f2:Y;return{isTailwindClass:!0,modifierId:U,classGroupId:N,originalClassName:$}}).reverse().filter(function($){if(!$.isTailwindClass)return!0;var S=$.modifierId,P=$.classGroupId,o=""+S+P;return v.has(o)?!1:(v.add(o),m(P).forEach(function(I){return v.add(""+S+I)}),!0)}).reverse().map(function($){return $.originalClassName}).join(" ")}function qT(s){for(var a=[],c=0,m=0,v=kT(s.matchAll(/[:[\]]/g)),$;!($=v()).done;){var S=$.value;if(S[0]===":"){if(c===0){var P=S.index+1;a.push(s.substring(m,P)),m=P}}else S[0]==="["?c++:S[0]==="]"&&c--}var o=a.length===0?s:s.substring(m),I=o.startsWith(f2),N=I?o.substring(1):o;return{modifiers:a,hasImportantModifier:I,baseClassName:N}}function HT(s){if(s.length<=1)return s;var a=[],c=[];return s.forEach(function(m){var v=m[0]==="[";v?(a.push.apply(a,c.sort().concat([m])),c=[]):c.push(m)}),a.push.apply(a,c.sort()),a}function Z3(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];var m,v,$,S=P;function P(I){var N=a[0],Y=a.slice(1),U=Y.reduce(function(oe,ae){return ae(oe)},N());return m=VT(U),v=m.cache.get,$=m.cache.set,S=o,o(I)}function o(I){var N=v(I);if(N)return N;var Y=ZT(I,m);return $(I,Y),Y}return function(){for(var N="",Y,U=0;U<arguments.length;U+=1)(Y=arguments[U])&&(N&&(N+=" "),N+=Y);return S(N)}}function jr(s){var a=function(m){return m[s]||[]};return a.isThemeGetter=!0,a}var Zs=/^\[(.+)\]$/,WT=/^\d+\/\d+$/,KT=new Set(["px","full","screen"]),XT=/^(\d+)?(xs|sm|md|lg|xl)$/,YT=/\d+(%|px|em|rem|vh|vw|pt|pc|in|cm|mm|cap|ch|ex|lh|rlh|vi|vb|vmin|vmax)/,JT=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Di(s){return!Number.isNaN(Number(s))||KT.has(s)||WT.test(s)||Ba(s)}function Ba(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?c.startsWith("length:")||YT.test(c):!1}function QT(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?c.startsWith("size:"):!1}function eS(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?c.startsWith("position:"):!1}function tS(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?c.startsWith("url(")||c.startsWith("url:"):!1}function rS(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?!Number.isNaN(Number(c))||c.startsWith("number:"):!1}function di(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?Number.isInteger(Number(c)):Number.isInteger(Number(s))}function Cn(s){return Zs.test(s)}function zc(){return!0}function ks(s){return XT.test(s)}function nS(s){var a,c=(a=Zs.exec(s))==null?void 0:a[1];return c?JT.test(c):!1}function q3(){var s=jr("colors"),a=jr("spacing"),c=jr("blur"),m=jr("brightness"),v=jr("borderColor"),$=jr("borderRadius"),S=jr("borderSpacing"),P=jr("borderWidth"),o=jr("contrast"),I=jr("grayscale"),N=jr("hueRotate"),Y=jr("invert"),U=jr("gap"),oe=jr("gradientColorStops"),ae=jr("inset"),$e=jr("margin"),Ie=jr("opacity"),Be=jr("padding"),xe=jr("saturate"),Je=jr("scale"),We=jr("sepia"),ht=jr("skew"),Lt=jr("space"),Ye=jr("translate"),ft=function(){return["auto","contain","none"]},gt=function(){return["auto","hidden","clip","visible","scroll"]},ve=function(){return["auto",a]},Ke=function(){return["",Di]},Ct=function(){return["auto",di]},tt=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},_e=function(){return["solid","dashed","dotted","double","none"]},je=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},It=function(){return["start","end","center","between","around","evenly"]},Tt=function(){return["","0",Cn]},Wt=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]};return{cacheSize:500,theme:{colors:[zc],spacing:[Di],blur:["none","",ks,Ba],brightness:[di],borderColor:[s],borderRadius:["none","","full",ks,Ba],borderSpacing:[a],borderWidth:Ke(),contrast:[di],grayscale:Tt(),hueRotate:[di],invert:Tt(),gap:[a],gradientColorStops:[s],inset:ve(),margin:ve(),opacity:[di],padding:[a],saturate:[di],scale:[di],sepia:Tt(),skew:[di,Cn],space:[a],translate:[a]},classGroups:{aspect:[{aspect:["auto","square","video",Cn]}],container:["container"],columns:[{columns:[ks]}],"break-after":[{"break-after":Wt()}],"break-before":[{"break-before":Wt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(tt(),[Cn])}],overflow:[{overflow:gt()}],"overflow-x":[{"overflow-x":gt()}],"overflow-y":[{"overflow-y":gt()}],overscroll:[{overscroll:ft()}],"overscroll-x":[{"overscroll-x":ft()}],"overscroll-y":[{"overscroll-y":ft()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ae]}],"inset-x":[{"inset-x":[ae]}],"inset-y":[{"inset-y":[ae]}],top:[{top:[ae]}],right:[{right:[ae]}],bottom:[{bottom:[ae]}],left:[{left:[ae]}],visibility:["visible","invisible"],z:[{z:[Di]}],basis:[{basis:[a]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Cn]}],grow:[{grow:Tt()}],shrink:[{shrink:Tt()}],order:[{order:["first","last","none",di]}],"grid-cols":[{"grid-cols":[zc]}],"col-start-end":[{col:["auto",{span:[di]}]}],"col-start":[{"col-start":Ct()}],"col-end":[{"col-end":Ct()}],"grid-rows":[{"grid-rows":[zc]}],"row-start-end":[{row:["auto",{span:[di]}]}],"row-start":[{"row-start":Ct()}],"row-end":[{"row-end":Ct()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Cn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Cn]}],gap:[{gap:[U]}],"gap-x":[{"gap-x":[U]}],"gap-y":[{"gap-y":[U]}],"justify-content":[{justify:It()}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:It()}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(It(),["stretch"])}],"place-items":[{"place-items":["start","end","center","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[Be]}],px:[{px:[Be]}],py:[{py:[Be]}],pt:[{pt:[Be]}],pr:[{pr:[Be]}],pb:[{pb:[Be]}],pl:[{pl:[Be]}],m:[{m:[$e]}],mx:[{mx:[$e]}],my:[{my:[$e]}],mt:[{mt:[$e]}],mr:[{mr:[$e]}],mb:[{mb:[$e]}],ml:[{ml:[$e]}],"space-x":[{"space-x":[Lt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Lt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max",a]}],"min-w":[{"min-w":["min","max","fit",Di]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ks]},ks,Ba]}],h:[{h:ve()}],"min-h":[{"min-h":["min","max","fit",Di]}],"max-h":[{"max-h":[a,"min","max","fit"]}],"font-size":[{text:["base",ks,Ba]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rS]}],"font-family":[{font:[zc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ba]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Di]}],"list-style-type":[{list:["none","disc","decimal",Cn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[Ie]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(_e(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Di]}],"underline-offset":[{"underline-offset":["auto",Di]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[a]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ba]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap"]}],break:[{break:["normal","words","all"]}],content:[{content:["none",Cn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Ie]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(tt(),[eS])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",QT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tS]}],"bg-color":[{bg:[s]}],"gradient-from":[{from:[oe]}],"gradient-via":[{via:[oe]}],"gradient-to":[{to:[oe]}],rounded:[{rounded:[$]}],"rounded-t":[{"rounded-t":[$]}],"rounded-r":[{"rounded-r":[$]}],"rounded-b":[{"rounded-b":[$]}],"rounded-l":[{"rounded-l":[$]}],"rounded-tl":[{"rounded-tl":[$]}],"rounded-tr":[{"rounded-tr":[$]}],"rounded-br":[{"rounded-br":[$]}],"rounded-bl":[{"rounded-bl":[$]}],"border-w":[{border:[P]}],"border-w-x":[{"border-x":[P]}],"border-w-y":[{"border-y":[P]}],"border-w-t":[{"border-t":[P]}],"border-w-r":[{"border-r":[P]}],"border-w-b":[{"border-b":[P]}],"border-w-l":[{"border-l":[P]}],"border-opacity":[{"border-opacity":[Ie]}],"border-style":[{border:[].concat(_e(),["hidden"])}],"divide-x":[{"divide-x":[P]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[P]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Ie]}],"divide-style":[{divide:_e()}],"border-color":[{border:[v]}],"border-color-x":[{"border-x":[v]}],"border-color-y":[{"border-y":[v]}],"border-color-t":[{"border-t":[v]}],"border-color-r":[{"border-r":[v]}],"border-color-b":[{"border-b":[v]}],"border-color-l":[{"border-l":[v]}],"divide-color":[{divide:[v]}],"outline-style":[{outline:[""].concat(_e(),["hidden"])}],"outline-offset":[{"outline-offset":[Di]}],"outline-w":[{outline:[Di]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:Ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[Ie]}],"ring-offset-w":[{"ring-offset":[Di]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",ks,nS]}],"shadow-color":[{shadow:[zc]}],opacity:[{opacity:[Ie]}],"mix-blend":[{"mix-blend":je()}],"bg-blend":[{"bg-blend":je()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[m]}],contrast:[{contrast:[o]}],"drop-shadow":[{"drop-shadow":["","none",ks,Cn]}],grayscale:[{grayscale:[I]}],"hue-rotate":[{"hue-rotate":[N]}],invert:[{invert:[Y]}],saturate:[{saturate:[xe]}],sepia:[{sepia:[We]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[m]}],"backdrop-contrast":[{"backdrop-contrast":[o]}],"backdrop-grayscale":[{"backdrop-grayscale":[I]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[N]}],"backdrop-invert":[{"backdrop-invert":[Y]}],"backdrop-opacity":[{"backdrop-opacity":[Ie]}],"backdrop-saturate":[{"backdrop-saturate":[xe]}],"backdrop-sepia":[{"backdrop-sepia":[We]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[S]}],"border-spacing-x":[{"border-spacing-x":[S]}],"border-spacing-y":[{"border-spacing-y":[S]}],"table-layout":[{table:["auto","fixed"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Cn]}],duration:[{duration:[di]}],ease:[{ease:["linear","in","out","in-out",Cn]}],delay:[{delay:[di]}],animate:[{animate:["none","spin","ping","pulse","bounce",Cn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Je]}],"scale-x":[{"scale-x":[Je]}],"scale-y":[{"scale-y":[Je]}],rotate:[{rotate:[di,Cn]}],"translate-x":[{"translate-x":[Ye]}],"translate-y":[{"translate-y":[Ye]}],"skew-x":[{"skew-x":[ht]}],"skew-y":[{"skew-y":[ht]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Cn]}],accent:[{accent:["auto",s]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Cn]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[a]}],"scroll-mx":[{"scroll-mx":[a]}],"scroll-my":[{"scroll-my":[a]}],"scroll-mt":[{"scroll-mt":[a]}],"scroll-mr":[{"scroll-mr":[a]}],"scroll-mb":[{"scroll-mb":[a]}],"scroll-ml":[{"scroll-ml":[a]}],"scroll-p":[{"scroll-p":[a]}],"scroll-px":[{"scroll-px":[a]}],"scroll-py":[{"scroll-py":[a]}],"scroll-pt":[{"scroll-pt":[a]}],"scroll-pr":[{"scroll-pr":[a]}],"scroll-pb":[{"scroll-pb":[a]}],"scroll-pl":[{"scroll-pl":[a]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Cn]}],fill:[{fill:[s]}],"stroke-w":[{stroke:[Di]}],stroke:[{stroke:[s]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],"col-start-end":["col-start","col-end"],"row-start-end":["row-start","row-end"],gap:["gap-x","gap-y"],p:["px","py","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-t","rounded-r","rounded-b","rounded-l","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]}}}function iS(s,a){for(var c in a)p2(s,c,a[c]);return s}var oS=Object.prototype.hasOwnProperty,sS=new Set(["string","number","boolean"]);function p2(s,a,c){if(!oS.call(s,a)||sS.has(typeof c)||c===null){s[a]=c;return}if(Array.isArray(c)&&Array.isArray(s[a])){s[a]=s[a].concat(c);return}if(typeof c=="object"&&typeof s[a]=="object"){if(s[a]===null){s[a]=c;return}for(var m in c)p2(s[a],m,c[m])}}function aS(s){for(var a=arguments.length,c=new Array(a>1?a-1:0),m=1;m<a;m++)c[m-1]=arguments[m];return typeof s=="function"?Z3.apply(void 0,[q3,s].concat(c)):Z3.apply(void 0,[function(){return iS(q3(),s)}].concat(c))}var m2={exports:{}},lS="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",dS=lS,cS=dS;function g2(){}function _2(){}_2.resetWarningCache=g2;var uS=function(){function s(m,v,$,S,P,o){if(o!==cS){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}s.isRequired=s;function a(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:_2,resetWarningCache:g2};return c.PropTypes=c,c};m2.exports=uS();var hS=m2.exports;const vn=Gs(hS);var fS={exports:{}};(function(s,a){var c={};(function(m,v){s.exports=v()})(In,function(){var m,v,$;function S(o,I){if(!m)m=I;else if(!v)v=I;else{var N="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+m+")(sharedChunk); ("+v+")(sharedChunk); self.onerror = null;",Y={};m(Y),$=I(Y),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&($.workerUrl=window.URL.createObjectURL(new Blob([N],{type:"text/javascript"})))}}S(["exports"],function(o){var I=typeof self<"u"?self:{},N="2.15.0";let Y;const U={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Y==null){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Y=c.API_URL_REGEX!=null?new RegExp(c.API_URL_REGEX):t}catch{Y=t}}return Y},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!U.API_URL)return null;try{const t=new URL(U.API_URL);return t.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":t.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:function(t){!Ie&&$e&&(Be?xe(t):ae=t)}};let ae,$e,Ie=!1,Be=!1;function xe(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,$e),t.isContextLost())return;oe.supported=!0}catch{}t.deleteTexture(e),Ie=!0}I.document&&($e=I.document.createElement("img"),$e.onload=function(){ae&&xe(ae),ae=null,Be=!0},$e.onerror=function(){Ie=!0,ae=null},$e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Je="01";function We(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ht=Lt;function Lt(t,e,r,i){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=i}Lt.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(e===void 0&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,i=0;i<8;i++){var d=this.sampleCurveX(r)-t;if(Math.abs(d)<e)return r;var h=this.sampleCurveDerivativeX(r);if(Math.abs(h)<1e-6)break;r-=d/h}var p=0,_=1;for(r=t,i=0;i<20&&(d=this.sampleCurveX(r),!(Math.abs(d-t)<e));i++)t>d?p=r:_=r,r=.5*(_-p)+p;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Ye=We(ht),ft=gt;function gt(t,e){this.x=t,this.y=e}gt.prototype={clone:function(){return new gt(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),i=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),i=Math.sin(t),d=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-i*(this.y-e.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},gt.convert=function(t){return t instanceof gt?t:Array.isArray(t)?new gt(t[0],t[1]):t};var ve=We(ft);const Ke=Math.PI/180,Ct=180/Math.PI;function tt(t){return t*Ke}function _e(t){return t*Ct}const je=[[0,0],[1,0],[1,1],[0,1]];function It(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function Tt(t,e,r,i){const d=new Ye(t,e,r,i);return function(h){return d.solve(h)}}const Wt=Tt(.25,.1,.25,1);function ut(t,e,r){return Math.min(r,Math.max(e,t))}function Br(t,e,r){return(r=ut((r-t)/(e-t),0,1))*r*(3-2*r)}function Qt(t,e,r){const i=r-e,d=((t-e)%i+i)%i+e;return d===e?r:d}function Tr(t,e,r){if(!t.length)return r(null,[]);let i=t.length;const d=new Array(t.length);let h=null;t.forEach((p,_)=>{e(p,(x,b)=>{x&&(h=x),d[_]=b,--i==0&&r(h,d)})})}function bn(t){const e=[];for(const r in t)e.push(t[r]);return e}function er(t,...e){for(const r of e)for(const i in r)t[i]=r[i];return t}let $n=1;function en(){return $n++}function Mn(){return function t(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function Vn(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ho(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function ci(t,e){t.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function wi(t,e){return t.indexOf(e,t.length-e.length)!==-1}function Vt(t,e,r){const i={};for(const d in t)i[d]=e.call(r||this,t[d],d,t);return i}function ui(t,e,r){const i={};for(const d in t)e.call(r||this,t[d],d,t)&&(i[d]=t[d]);return i}function dn(t){return Array.isArray(t)?t.map(dn):typeof t=="object"&&t?Vt(t,dn):t}const Ei={};function yr(t){Ei[t]||(typeof console<"u"&&console.warn(t),Ei[t]=!0)}function fn(t,e,r){return(r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function Gn(t){let e=0;for(let r,i,d=0,h=t.length,p=h-1;d<h;p=d++)r=t[d],i=t[p],e+=(i.x-r.x)*(r.y+i.y);return e}function Gt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function vr(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,i,d,h)=>{const p=d||h;return e[i]=!p||p.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let Vr=null;function Pn(t){if(Vr==null){const e=t.navigator?t.navigator.userAgent:null;Vr=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Vr}function Kn(t){try{const e=I[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function hi(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}const ji="mapbox-tiles";let Io=500,ns=50,Ln,Ti;function fo(){try{return I.caches}catch{}}function Xn(){fo()&&!Ln&&(Ln=I.caches.open(ji))}function Ui(t){const e=t.indexOf("?");if(e<0)return t;const r=function(d){const h=d.indexOf("?");return h>0?d.slice(h+1).split("&"):[]}(t),i=r.filter(d=>{const h=d.split("=");return h[0]==="language"||h[0]==="worldview"});return i.length?`${t.slice(0,e)}?${i.join("&")}`:t.slice(0,e)}let fi=1/0;const wn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(wn);class En extends Error{constructor(e,r,i){r===401&&Ae(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Vi=Gt()?()=>self.worker&&self.worker.referrer:()=>(I.location.protocol==="blob:"?I.parent:I).location.href,pn=function(t,e){if(!(/^file:/.test(r=t.url)||/^file:/.test(Vi())&&!/^\w+:/.test(r))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return function(i,d){const h=new I.AbortController,p=new I.Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:Vi(),referrerPolicy:i.referrerPolicy,signal:h.signal});let _=!1,x=!1;const b=(T=p.url).indexOf("sku=")>0&&Ae(T);var T;i.type==="json"&&p.headers.set("Accept","application/json");const A=(D,O,F)=>{if(x)return;if(D&&D.message!=="SecurityError"&&yr(D.toString()),O&&F)return M(O);const q=Date.now();I.fetch(p).then(ee=>{if(ee.ok){const de=b?ee.clone():null;return M(ee,de,q)}return d(new En(ee.statusText,ee.status,i.url))}).catch(ee=>{ee.name!=="AbortError"&&d(new Error(`${ee.message} ${i.url}`))})},M=(D,O,F)=>{(i.type==="arrayBuffer"?D.arrayBuffer():i.type==="json"?D.json():D.text()).then(q=>{x||(O&&F&&function(ee,de,te){if(Xn(),!Ln)return;const se={status:de.status,statusText:de.statusText,headers:new I.Headers};de.headers.forEach((ke,Pe)=>se.headers.set(Pe,ke));const he=vr(de.headers.get("Cache-Control")||"");if(he["no-store"])return;he["max-age"]&&se.headers.set("Expires",new Date(te+1e3*he["max-age"]).toUTCString());const ue=se.headers.get("Expires");ue&&(new Date(ue).getTime()-te<42e4||function(ke,Pe){if(Ti===void 0)try{new Response(new ReadableStream),Ti=!0}catch{Ti=!1}Ti?Pe(ke.body):ke.blob().then(Pe)}(de,ke=>{const Pe=new I.Response(ke,se);Xn(),Ln&&Ln.then(Ne=>Ne.put(Ui(ee.url),Pe)).catch(Ne=>yr(Ne.message))}))}(p,O,F),_=!0,d(null,q,D.headers.get("Cache-Control"),D.headers.get("Expires")))}).catch(q=>{x||d(new Error(q.message))})};return b?function(D,O){if(Xn(),!Ln)return O(null);const F=Ui(D.url);Ln.then(q=>{q.match(F).then(ee=>{const de=function(te){if(!te)return!1;const se=new Date(te.headers.get("Expires")||0),he=vr(te.headers.get("Cache-Control")||"");return se>Date.now()&&!he["no-cache"]}(ee);q.delete(F),de&&q.put(F,ee.clone()),O(null,ee,de)}).catch(O)}).catch(O)}(p,A):A(null,null),{cancel:()=>{x=!0,_||h.abort()}}}(t,e);if(Gt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var r;return function(i,d){const h=new I.XMLHttpRequest;h.open(i.method||"GET",i.url,!0),i.type==="arrayBuffer"&&(h.responseType="arraybuffer");for(const p in i.headers)h.setRequestHeader(p,i.headers[p]);return i.type==="json"&&(h.responseType="text",h.setRequestHeader("Accept","application/json")),h.withCredentials=i.credentials==="include",h.onerror=()=>{d(new Error(h.statusText))},h.onload=()=>{if((h.status>=200&&h.status<300||h.status===0)&&h.response!==null){let p=h.response;if(i.type==="json")try{p=JSON.parse(h.response)}catch(_){return d(_)}d(null,p,h.getResponseHeader("Cache-Control"),h.getResponseHeader("Expires"))}else d(new En(h.statusText,h.status,i.url))},h.send(i.body),{cancel:()=>h.abort()}}(t,e)},Si=function(t,e){return pn(er(t,{type:"arrayBuffer"}),e)};function Mo(t){const e=I.document.createElement("a");return e.href=t,e.protocol===I.document.location.protocol&&e.host===I.document.location.host}const le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let j,G;j=[],G=0;const ie=function(t,e){if(oe.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),G>=U.MAX_PARALLEL_IMAGE_REQUESTS){const h={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return j.push(h),h}G++;let r=!1;const i=()=>{if(!r)for(r=!0,G--;j.length&&G<U.MAX_PARALLEL_IMAGE_REQUESTS;){const h=j.shift(),{requestParameters:p,callback:_,cancelled:x}=h;x||(h.cancel=ie(p,_).cancel)}},d=Si(t,(h,p,_,x)=>{i(),h?e(h):p&&(I.createImageBitmap?function(b,T){const A=new I.Blob([new Uint8Array(b)],{type:"image/png"});I.createImageBitmap(A).then(M=>{T(null,M)}).catch(M=>{T(new Error(`Could not load image because of ${M.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(p,(b,T)=>e(b,T,_,x)):function(b,T){const A=new I.Image,M=I.URL;A.onload=()=>{T(null,A),M.revokeObjectURL(A.src),A.onload=null,I.requestAnimationFrame(()=>{A.src=le})},A.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const D=new I.Blob([new Uint8Array(b)],{type:"image/png"});A.src=b.byteLength?M.createObjectURL(D):le}(p,(b,T)=>e(b,T,_,x)))});return{cancel:()=>{d.cancel(),i()}}},ce="NO_ACCESS_TOKEN";function ge(t){return t.indexOf("mapbox:")===0}function Ae(t){return U.API_URL_REGEX.test(t)}function Se(t){return U.API_CDN_URL_REGEX.test(t)}function ye(t){return U.API_STYLE_REGEX.test(t)&&!De(t)}function De(t){return U.API_SPRITE_REGEX.test(t)}const at=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ct(t){const e=t.match(at);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function it(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}const zt="mapbox.eventData";function Kt(t){if(!t)return null;const e=t.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Bt{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=Kt(U.ACCESS_TOKEN);let i="";return i=r&&r.u?I.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(d,h)=>String.fromCharCode(+("0x"+h)))):U.ACCESS_TOKEN||"",e?`${zt}.${e}:${i}`:`${zt}:${i}`}fetchEventData(){const e=Kn("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const d=I.localStorage.getItem(r);d&&(this.eventData=JSON.parse(d));const h=I.localStorage.getItem(i);h&&(this.anonId=h)}catch{yr("Unable to read from LocalStorage")}}saveEventData(){const e=Kn("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{I.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{yr("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,i,d){if(!U.EVENTS_URL)return;const h=ct(U.EVENTS_URL);h.params.push(`access_token=${d||U.ACCESS_TOKEN||""}`);const p={event:this.type,created:new Date(e).toISOString()},_=r?er(p,r):p,x={url:it(h),headers:{"Content-Type":"text/plain"},body:JSON.stringify([_])};this.pendingRequest=function(b,T){return pn(er(b,{method:"POST"}),T)}(x,b=>{this.pendingRequest=null,i(b),this.saveEventData(),this.processRequests(d)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const Zt=new class extends Bt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(t)&&t.some(r=>ge(r)||Ae(r))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=Kt(U.ACCESS_TOKEN),r=e?e.u:U.ACCESS_TOKEN;let i=r!==this.eventData.tokenU;ho(this.anonId)||(this.anonId=Mn(),i=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const h=new Date(this.eventData.lastSuccess),p=new Date(d),_=(d-this.eventData.lastSuccess)/864e5;i=i||_>=1||_<-1||h.getDate()!==p.getDate()}else i=!0;i?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:N,skuId:Je,"enabled.telemetry":!1,userId:this.anonId},h=>{h||(this.eventData.lastSuccess=d,this.eventData.tokenU=r)},t):this.processRequests()}},Ft=Zt.postTurnstileEvent.bind(Zt),Sr=new class extends Bt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,r,i){this.skuToken=e,this.errorCb=i,U.EVENTS_URL&&(r||U.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(ce)))}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),ho(this.anonId)||(this.anonId=Mn()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:N,skuId:Je,skuToken:this.skuToken,userId:this.anonId},i=>{i?this.errorCb(i):e&&(this.success[e]=!0)},t))}},Rr=Sr.postMapLoadEvent.bind(Sr),tn=new class extends Bt{constructor(){super("gljs.performance")}postPerformanceEvent(t,e){U.EVENTS_URL&&(t||U.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},t)}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:r}=this.queue.shift(),i=function(d){const h=I.performance.getEntriesByType("resource"),p=I.performance.getEntriesByType("mark"),_=function(M){const D={};if(M){for(const O in M)if(O!=="other")for(const F of M[O]){const q=`${O}ResolveRangeMin`,ee=`${O}ResolveRangeMax`,de=`${O}RequestCount`,te=`${O}RequestCachedCount`;D[q]=Math.min(D[q]||1/0,F.startTime),D[ee]=Math.max(D[ee]||-1/0,F.responseEnd);const se=he=>{D[he]===void 0&&(D[he]=0),++D[he]};F.transferSize!==void 0&&F.transferSize===0&&se(te),se(de)}}return D}(function(M,D){const O={};if(M)for(const F of M){const q=D(F);O[q]===void 0&&(O[q]=[]),O[q].push(F)}return O}(h,qs)),x=I.devicePixelRatio,b=I.navigator.connection||I.navigator.mozConnection||I.navigator.webkitConnection,T={counters:[],metadata:[],attributes:[]},A=(M,D,O)=>{O!=null&&M.push({name:D,value:O.toString()})};for(const M in _)A(T.counters,M,_[M]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(A(T.counters,"interactionRangeMin",d.interactionRange[0]),A(T.counters,"interactionRangeMax",d.interactionRange[1])),p)for(const M of Object.keys(po)){const D=po[M],O=p.find(F=>F.name===D);O&&A(T.counters,D,O.startTime)}return A(T.counters,"visibilityHidden",d.visibilityHidden),A(T.attributes,"style",function(M){if(M)for(const D of M){const O=D.name.split("?")[0];if(ye(O)){const F=O.split("/").slice(-2);if(F.length===2)return`mapbox://styles/${F[0]}/${F[1]}`}}}(h)),A(T.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),A(T.attributes,"fogEnabled",d.fogEnabled?"true":"false"),A(T.attributes,"projection",d.projection),A(T.attributes,"zoom",d.zoom),A(T.metadata,"devicePixelRatio",x),A(T.metadata,"connectionEffectiveType",b?b.effectiveType:void 0),A(T.metadata,"navigatorUserAgent",I.navigator.userAgent),A(T.metadata,"screenWidth",I.screen.width),A(T.metadata,"screenHeight",I.screen.height),A(T.metadata,"windowWidth",I.innerWidth),A(T.metadata,"windowHeight",I.innerHeight),A(T.metadata,"mapWidth",d.width/x),A(T.metadata,"mapHeight",d.height/x),A(T.metadata,"webglRenderer",d.renderer),A(T.metadata,"webglVendor",d.vendor),A(T.metadata,"sdkVersion",N),A(T.metadata,"sdkIdentifier","mapbox-gl-js"),T}(r);for(const d of i.metadata);for(const d of i.counters);for(const d of i.attributes);this.postEvent(e,i,()=>{},t)}},Dr=tn.postPerformanceEvent.bind(tn),Rn=new class extends Bt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,r,i){if(!U.API_URL||!U.SESSION_PATH)return;const d=ct(U.API_URL+U.SESSION_PATH);d.params.push(`sku=${e||""}`),d.params.push(`access_token=${i||U.ACCESS_TOKEN||""}`);const h={url:it(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(p,_){return pn(er(p,{method:"GET"}),_)}(h,p=>{this.pendingRequest=null,r(p),this.saveEventData(),this.processRequests(i)})}getSessionAPI(t,e,r,i){this.skuToken=e,this.errorCb=i,U.SESSION_PATH&&U.API_URL&&(r||U.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(ce)))}processRequests(t){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,i=>{i?this.errorCb(i):e&&(this.success[e]=!0)},t)}},Gr=Rn.getSessionAPI.bind(Rn),rn=new Set,po={create:"create",load:"load",fullLoad:"fullLoad"},Za={mark(t){I.performance.mark(t)},measure(t,e,r){I.performance.measure(t,e,r)}};function qs(t){const e=t.name.split("?")[0];return Se(e)&&e.includes("mapbox-gl.js")?"javascript":Se(e)&&e.includes("mapbox-gl.css")?"css":function(r){return U.API_FONTS_REGEX.test(r)}(e)?"fontRange":De(e)?"sprite":ye(e)?"style":function(r){return U.API_TILEJSON_REGEX.test(r)}(e)?"tilejson":"other"}const Jt=I.performance;function Po(t){const e=t?t.url.toString():void 0;return Jt.getEntriesByName(e)}let mo,is,Lo,Zn;const Yn={now:()=>Lo!==void 0?Lo:I.performance.now(),setNow(t){Lo=t},restoreNow(){Lo=void 0},frame(t){const e=I.requestAnimationFrame(t);return{cancel:()=>I.cancelAnimationFrame(e)}},getImageData(t,e=0){const{width:r,height:i}=t;Zn||(Zn=I.document.createElement("canvas"));const d=Zn.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(r>Zn.width||i>Zn.height)&&(Zn.width=r,Zn.height=i),d.clearRect(-e,-e,r+2*e,i+2*e),d.drawImage(t,0,0,r,i),d.getImageData(-e,-e,r+2*e,i+2*e)},resolveURL:t=>(mo||(mo=I.document.createElement("a")),mo.href=t,mo.href),get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(is==null&&(is=I.matchMedia("(prefers-reduced-motion: reduce)")),is.matches)}};function nn(t,e,r){r[t]&&r[t].indexOf(e)!==-1||(r[t]=r[t]||[],r[t].push(e))}function Hs(t,e,r){if(r&&r[t]){const i=r[t].indexOf(e);i!==-1&&r[t].splice(i,1)}}class Gi{constructor(e,r={}){er(this,r),this.type=e}}class Jn extends Gi{constructor(e,r={}){super("error",er({error:e},r))}}class Ro{on(e,r){return this._listeners=this._listeners||{},nn(e,r,this._listeners),this}off(e,r){return Hs(e,r,this._listeners),Hs(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},nn(e,r,this._oneTimeListeners),this):new Promise(i=>this.once(e,i))}fire(e,r){typeof e=="string"&&(e=new Gi(e,r||{}));const i=e.type;if(this.listens(i)){e.target=this;const d=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const _ of d)_.call(this,e);const h=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const _ of h)Hs(i,_,this._oneTimeListeners),_.call(this,e);const p=this._eventedParent;p&&(er(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),p.fire(e))}else e instanceof Jn&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Te=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Tn(t,...e){for(const r of e)for(const i in r)t[i]=r[i];return t}function dr(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ar(t){if(Array.isArray(t))return t.map(Ar);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=Ar(t[r]);return e}return dr(t)}class os extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var qn=os;class Jr{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[i,d]of r)this.bindings[i]=d}concat(e){return new Jr(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var k=Jr;const V={kind:"null"},J={kind:"number"},Ee={kind:"string"},Ce={kind:"boolean"},Ze={kind:"color"},_t={kind:"object"},bt={kind:"value"},ar={kind:"collator"},Qn={kind:"formatted"},ko={kind:"resolvedImage"};function ei(t,e){return{kind:"array",itemType:t,N:e}}function Ir(t){if(t.kind==="array"){const e=Ir(t.itemType);return typeof t.N=="number"?`array<${e}, ${t.N}>`:t.itemType.kind==="value"?"array":`array<${e}>`}return t.kind}const eu=[V,J,Ee,Ce,Ze,Qn,_t,ei(bt),ko];function Zi(t,e){if(e.kind==="error")return null;if(t.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Zi(t.itemType,e.itemType))&&(typeof t.N!="number"||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if(t.kind==="value"){for(const r of eu)if(!Zi(r,e))return null}}return`Expected ${Ir(t)} but found ${Ir(e)} instead.`}function Ws(t,e){return e.some(r=>r.kind===t.kind)}function Ks(t,e){return e.some(r=>r==="null"?t===null:r==="array"?Array.isArray(t):r==="object"?t&&!Array.isArray(t)&&typeof t=="object":r===typeof t)}var dd,tu={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Xs(t){return(t=Math.round(t))<0?0:t>255?255:t}function Ys(t){return Xs(t[t.length-1]==="%"?parseFloat(t)/100*255:parseInt(t))}function qa(t){return(e=t[t.length-1]==="%"?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function ss(t,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?t+(e-t)*r*6:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}try{dd={}.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in tu)return tu[r].slice();if(r[0]==="#")return r.length===4?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:r.length===7&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var i=r.indexOf("("),d=r.indexOf(")");if(i!==-1&&d+1===r.length){var h=r.substr(0,i),p=r.substr(i+1,d-(i+1)).split(","),_=1;switch(h){case"rgba":if(p.length!==4)return null;_=qa(p.pop());case"rgb":return p.length!==3?null:[Ys(p[0]),Ys(p[1]),Ys(p[2]),_];case"hsla":if(p.length!==4)return null;_=qa(p.pop());case"hsl":if(p.length!==3)return null;var x=(parseFloat(p[0])%360+360)%360/360,b=qa(p[1]),T=qa(p[2]),A=T<=.5?T*(b+1):T+b-T*b,M=2*T-A;return[Xs(255*ss(M,A,x+1/3)),Xs(255*ss(M,A,x)),Xs(255*ss(M,A,x-1/3)),_];default:return null}}return null}}catch{}class kn{constructor(e,r,i,d=1){this.r=e,this.g=r,this.b=i,this.a=d}static parse(e){if(!e)return;if(e instanceof kn)return e;if(typeof e!="string")return;const r=dd(e);return r?new kn(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,i,d]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(i)},${d})`}toArray(){const{r:e,g:r,b:i,a:d}=this;return d===0?[0,0,0,0]:[255*e/d,255*r/d,255*i/d,d]}toArray01(){const{r:e,g:r,b:i,a:d}=this;return d===0?[0,0,0,0]:[e/d,r/d,i/d,d]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:i,a:d}=this;return[e,r,i,d]}}kn.black=new kn(0,0,0,1),kn.white=new kn(1,1,1,1),kn.transparent=new kn(0,0,0,0),kn.red=new kn(1,0,0,1),kn.blue=new kn(0,0,1,1);var Fr=kn;class cd{constructor(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ud{constructor(e,r,i,d,h){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=i,this.fontStack=d,this.textColor=h}}class Dn{constructor(e){this.sections=e}static fromString(e){return new Dn([new ud(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Dn?e:Dn.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}return e}}class ti{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ti({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ru(t,e,r,i){return typeof t=="number"&&t>=0&&t<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?i===void 0||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,r,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[t,e,r,i]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Js(t){if(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||t instanceof Fr||t instanceof cd||t instanceof Dn||t instanceof ti)return!0;if(Array.isArray(t)){for(const e of t)if(!Js(e))return!1;return!0}if(typeof t=="object"){for(const e in t)if(!Js(t[e]))return!1;return!0}return!1}function Or(t){if(t===null)return V;if(typeof t=="string")return Ee;if(typeof t=="boolean")return Ce;if(typeof t=="number")return J;if(t instanceof Fr)return Ze;if(t instanceof cd)return ar;if(t instanceof Dn)return Qn;if(t instanceof ti)return ko;if(Array.isArray(t)){const e=t.length;let r;for(const i of t){const d=Or(i);if(r){if(r===d)continue;r=bt;break}r=d}return ei(r||bt,e)}return _t}function Qs(t){const e=typeof t;return t===null?"":e==="string"||e==="number"||e==="boolean"?String(t):t instanceof Fr||t instanceof Dn||t instanceof ti?t.toString():JSON.stringify(t)}class hd{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Js(e[1]))return r.error("invalid value");const i=e[1];let d=Or(i);const h=r.expectedType;return d.kind!=="array"||d.N!==0||!h||h.kind!=="array"||typeof h.N=="number"&&h.N!==0||(d=h),new hd(d,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Fr?["rgba"].concat(this.value.toArray()):this.value instanceof Dn?this.value.serialize():this.value}}var Do=hd,cn=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const fd={string:Ee,number:J,boolean:Ce,object:_t};class pd{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let i,d=1;const h=e[0];if(h==="array"){let _,x;if(e.length>2){const b=e[1];if(typeof b!="string"||!(b in fd)||b==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);_=fd[b],d++}else _=bt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);x=e[2],d++}i=ei(_,x)}else i=fd[h];const p=[];for(;d<e.length;d++){const _=r.parse(e[d],d,bt);if(!_)return null;p.push(_)}return new pd(i,p)}evaluate(e){for(let r=0;r<this.args.length;r++){const i=this.args[r].evaluate(e);if(!Zi(this.type,Or(i)))return i;if(r===this.args.length-1)throw new cn(`Expected value to be of type ${Ir(this.type)}, but found ${Ir(Or(i))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);const d=e.N;(typeof d=="number"||this.args.length>1)&&r.push(d)}}return r.concat(this.args.map(i=>i.serialize()))}}var qi=pd;class go{constructor(e){this.type=Qn,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");const d=[];let h=!1;for(let p=1;p<=e.length-1;++p){const _=e[p];if(h&&typeof _=="object"&&!Array.isArray(_)){h=!1;let x=null;if(_["font-scale"]&&(x=r.parse(_["font-scale"],1,J),!x))return null;let b=null;if(_["text-font"]&&(b=r.parse(_["text-font"],1,ei(Ee)),!b))return null;let T=null;if(_["text-color"]&&(T=r.parse(_["text-color"],1,Ze),!T))return null;const A=d[d.length-1];A.scale=x,A.font=b,A.textColor=T}else{const x=r.parse(e[p],1,bt);if(!x)return null;const b=x.type.kind;if(b!=="string"&&b!=="value"&&b!=="null"&&b!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,d.push({content:x,scale:null,font:null,textColor:null})}}return new go(d)}evaluate(e){return new Dn(this.sections.map(r=>{const i=r.content.evaluate(e);return Or(i)===ko?new ud("",i,null,null,null):new ud(Qs(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}return e}}class Ha{constructor(e){this.type=ko,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const i=r.parse(e[1],1,Ee);return i?new Ha(i):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),i=ti.fromString(r);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(r)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const p1={"to-boolean":Ce,"to-color":Ze,"to-number":J,"to-string":Ee};class md{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[0];if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");const d=p1[i],h=[];for(let p=1;p<e.length;p++){const _=r.parse(e[p],p,bt);if(!_)return null;h.push(_)}return new md(d,h)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,i;for(const d of this.args){if(r=d.evaluate(e),i=null,r instanceof Fr)return r;if(typeof r=="string"){const h=e.parseColor(r);if(h)return h}else if(Array.isArray(r)&&(i=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:ru(r[0],r[1],r[2],r[3]),!i))return new Fr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new cn(i||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const i of this.args){if(r=i.evaluate(e),r===null)return 0;const d=Number(r);if(!isNaN(d))return d}throw new cn(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Dn.fromString(Qs(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ti.fromString(Qs(this.args[0].evaluate(e))):Qs(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new go([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ha(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var as=md;const Ci=["Unknown","Point","LineString","Polygon"];var gd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ci[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-t[0])+this.featureDistanceData.bearing[1]*(i*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Fr.parse(t)),e}};class Oo{constructor(e,r,i,d){this.name=e,this.type=r,this._evaluate=i,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const i=e[0],d=Oo.definitions[i];if(!d)return r.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const h=Array.isArray(d)?d[0]:d.type,p=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,_=p.filter(([b])=>!Array.isArray(b)||b.length===e.length-1);let x=null;for(const[b,T]of _){x=new $d(r.registry,r.path,null,r.scope);const A=[];let M=!1;for(let D=1;D<e.length;D++){const O=e[D],F=Array.isArray(b)?b[D-1]:b.type,q=x.parse(O,1+A.length,F);if(!q){M=!0;break}A.push(q)}if(!M)if(Array.isArray(b)&&b.length!==A.length)x.error(`Expected ${b.length} arguments, but found ${A.length} instead.`);else{for(let D=0;D<A.length;D++){const O=Array.isArray(b)?b[D]:b.type,F=A[D];x.concat(D+1).checkSubtype(O,F.type)}if(x.errors.length===0)return new Oo(i,h,T,A)}}if(_.length===1)r.errors.push(...x.errors);else{const b=(_.length?_:p).map(([A])=>{return M=A,Array.isArray(M)?`(${M.map(Ir).join(", ")})`:`(${Ir(M.type)}...)`;var M}).join(" | "),T=[];for(let A=1;A<e.length;A++){const M=r.parse(e[A],1+T.length);if(!M)return null;T.push(Ir(M.type))}r.error(`Expected arguments of type ${b}, but found (${T.join(", ")}) instead.`)}return null}static register(e,r){Oo.definitions=r;for(const i in r)e[i]=Oo}}var Hi=Oo;class ea{constructor(e,r,i){this.type=ar,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");const d=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,Ce);if(!d)return null;const h=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,Ce);if(!h)return null;let p=null;return i.locale&&(p=r.parse(i.locale,1,Ee),!p)?null:new ea(d,h,p)}evaluate(e){return new cd(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Wi=8192;function Wa(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ls(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ta(t,e){const r=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(r*d*Wi),Math.round(i*d*Wi)]}function nu(t,e,r){const i=t[0]-e[0],d=t[1]-e[1],h=t[0]-r[0],p=t[1]-r[1];return i*p-h*d==0&&i*h<=0&&d*p<=0}function Ka(t,e){let r=!1;for(let p=0,_=e.length;p<_;p++){const x=e[p];for(let b=0,T=x.length;b<T-1;b++){if(nu(t,x[b],x[b+1]))return!1;(d=x[b])[1]>(i=t)[1]!=(h=x[b+1])[1]>i[1]&&i[0]<(h[0]-d[0])*(i[1]-d[1])/(h[1]-d[1])+d[0]&&(r=!r)}}var i,d,h;return r}function _d(t,e){for(let r=0;r<e.length;r++)if(Ka(t,e[r]))return!0;return!1}function yd(t,e,r,i){const d=i[0]-r[0],h=i[1]-r[1],p=(t[0]-r[0])*h-d*(t[1]-r[1]),_=(e[0]-r[0])*h-d*(e[1]-r[1]);return p>0&&_<0||p<0&&_>0}function ds(t,e,r){for(const b of r)for(let T=0;T<b.length-1;++T)if((_=[(p=b[T+1])[0]-(h=b[T])[0],p[1]-h[1]])[0]*(x=[(d=e)[0]-(i=t)[0],d[1]-i[1]])[1]-_[1]*x[0]!=0&&yd(i,d,h,p)&&yd(h,p,i,d))return!0;var i,d,h,p,_,x;return!1}function sr(t,e){for(let r=0;r<t.length;++r)if(!Ka(t[r],e))return!1;for(let r=0;r<t.length-1;++r)if(ds(t[r],t[r+1],e))return!1;return!0}function m1(t,e){for(let r=0;r<e.length;r++)if(sr(t,e[r]))return!0;return!1}function vd(t,e,r){const i=[];for(let d=0;d<t.length;d++){const h=[];for(let p=0;p<t[d].length;p++){const _=ta(t[d][p],r);Wa(e,_),h.push(_)}i.push(h)}return i}function iu(t,e,r){const i=[];for(let d=0;d<t.length;d++){const h=vd(t[d],e,r);i.push(h)}return i}function xd(t,e,r,i){if(t[0]<r[0]||t[0]>r[2]){const d=.5*i;let h=t[0]-r[0]>d?-i:r[0]-t[0]>d?i:0;h===0&&(h=t[0]-r[2]>d?-i:r[2]-t[0]>d?i:0),t[0]+=h}Wa(e,t)}function ou(t,e,r,i){const d=Math.pow(2,i.z)*Wi,h=[i.x*Wi,i.y*Wi],p=[];if(!t)return p;for(const _ of t)for(const x of _){const b=[x.x+h[0],x.y+h[1]];xd(b,e,r,d),p.push(b)}return p}function bd(t,e,r,i){const d=Math.pow(2,i.z)*Wi,h=[i.x*Wi,i.y*Wi],p=[];if(!t)return p;for(const x of t){const b=[];for(const T of x){const A=[T.x+h[0],T.y+h[1]];Wa(e,A),b.push(A)}p.push(b)}if(e[2]-e[0]<=d/2){(_=e)[0]=_[1]=1/0,_[2]=_[3]=-1/0;for(const x of p)for(const b of x)xd(b,e,r,d)}var _;return p}class cs{constructor(e,r){this.type=Ce,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Js(e[1])){const i=e[1];if(i.type==="FeatureCollection")for(let d=0;d<i.features.length;++d){const h=i.features[d].geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new cs(i,i.features[d].geometry)}else if(i.type==="Feature"){const d=i.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new cs(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new cs(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){const d=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],p=r.canonicalID();if(!p)return!1;if(i.type==="Polygon"){const _=vd(i.coordinates,h,p),x=ou(r.geometry(),d,h,p);if(!ls(d,h))return!1;for(const b of x)if(!Ka(b,_))return!1}if(i.type==="MultiPolygon"){const _=iu(i.coordinates,h,p),x=ou(r.geometry(),d,h,p);if(!ls(d,h))return!1;for(const b of x)if(!_d(b,_))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){const d=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],p=r.canonicalID();if(!p)return!1;if(i.type==="Polygon"){const _=vd(i.coordinates,h,p),x=bd(r.geometry(),d,h,p);if(!ls(d,h))return!1;for(const b of x)if(!sr(b,_))return!1}if(i.type==="MultiPolygon"){const _=iu(i.coordinates,h,p),x=bd(r.geometry(),d,h,p);if(!ls(d,h))return!1;for(const b of x)if(!m1(b,_))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Xa=cs;function us(t){if(t instanceof Hi&&(t.name==="get"&&t.args.length===1||t.name==="feature-state"||t.name==="has"&&t.args.length===1||t.name==="properties"||t.name==="geometry-type"||t.name==="id"||/^filter-/.test(t.name))||t instanceof Xa)return!1;let e=!0;return t.eachChild(r=>{e&&!us(r)&&(e=!1)}),e}function Ki(t){if(t instanceof Hi&&t.name==="feature-state")return!1;let e=!0;return t.eachChild(r=>{e&&!Ki(r)&&(e=!1)}),e}function zo(t,e){if(t instanceof Hi&&e.indexOf(t.name)>=0)return!1;let r=!0;return t.eachChild(i=>{r&&!zo(i,e)&&(r=!1)}),r}class Ya{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const i=e[1];return r.scope.has(i)?new Ya(i,r.scope.get(i)):r.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var su=Ya;class ra{constructor(e,r=[],i,d=new k,h=[]){this.registry=e,this.path=r,this.key=r.map(p=>`[${p}]`).join(""),this.scope=d,this.errors=h,this.expectedType=i}parse(e,r,i,d,h={}){return r?this.concat(r,i,d)._parse(e,h):this._parse(e,h)}_parse(e,r){function i(d,h,p){return p==="assert"?new qi(h,[d]):p==="coerce"?new as(h,[d]):d}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const h=this.registry[d];if(h){let p=h.parse(e,this);if(!p)return null;if(this.expectedType){const _=this.expectedType,x=p.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||x.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||x.kind!=="value"&&x.kind!=="string"){if(this.checkSubtype(_,x))return null}else p=i(p,_,r.typeAnnotation||"coerce");else p=i(p,_,r.typeAnnotation||"assert")}if(!(p instanceof Do)&&p.type.kind!=="resolvedImage"&&wd(p)){const _=new gd;try{p=new Do(p.type,p.evaluate(_))}catch(x){return this.error(x.message),null}}return p}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,i){const d=typeof e=="number"?this.path.concat(e):this.path,h=i?this.scope.concat(i):this.scope;return new ra(this.registry,d,r||null,h,this.errors)}error(e,...r){const i=`${this.key}${r.map(d=>`[${d}]`).join("")}`;this.errors.push(new qn(i,e))}checkSubtype(e,r){const i=Zi(e,r);return i&&this.error(i),i}}var $d=ra;function wd(t){if(t instanceof su)return wd(t.boundExpression);if(t instanceof Hi&&t.name==="error"||t instanceof ea||t instanceof Xa)return!1;const e=t instanceof as||t instanceof qi;let r=!0;return t.eachChild(i=>{r=e?r&&wd(i):r&&i instanceof Do}),!!r&&us(t)&&zo(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ja(t,e){const r=t.length-1;let i,d,h=0,p=r,_=0;for(;h<=p;)if(_=Math.floor((h+p)/2),i=t[_],d=t[_+1],i<=e){if(_===r||e<d)return _;h=_+1}else{if(!(i>e))throw new cn("Input is not a number.");p=_-1}return 0}class Qa{constructor(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[d,h]of i)this.labels.push(d),this.outputs.push(h)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const i=r.parse(e[1],1,J);if(!i)return null;const d=[];let h=null;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);for(let p=1;p<e.length;p+=2){const _=p===1?-1/0:e[p],x=e[p+1],b=p,T=p+1;if(typeof _!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',b);if(d.length&&d[d.length-1][0]>=_)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',b);const A=r.parse(x,T,h);if(!A)return null;h=h||A.type,d.push([_,A])}return new Qa(h,i,d)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const d=this.input.evaluate(e);if(d<=r[0])return i[0].evaluate(e);const h=r.length;return d>=r[h-1]?i[h-1].evaluate(e):i[Ja(r,d)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var Ed=Qa;function tr(t,e,r){return t*(1-r)+e*r}var na=Object.freeze({__proto__:null,array:function(t,e,r){return t.map((i,d)=>tr(i,e[d],r))},color:function(t,e,r){return new Fr(tr(t.r,e.r,r),tr(t.g,e.g,r),tr(t.b,e.b,r),tr(t.a,e.a,r))},number:tr});const au=.95047,Td=1.08883,lu=4/29,Bo=6/29,Sd=3*Bo*Bo,g1=Bo*Bo*Bo,_1=Math.PI/180,y1=180/Math.PI;function Cd(t){return t>g1?Math.pow(t,1/3):t/Sd+lu}function Ad(t){return t>Bo?t*t*t:Sd*(t-lu)}function Id(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function el(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function du(t){const e=el(t.r),r=el(t.g),i=el(t.b),d=Cd((.4124564*e+.3575761*r+.1804375*i)/au),h=Cd((.2126729*e+.7151522*r+.072175*i)/1);return{l:116*h-16,a:500*(d-h),b:200*(h-Cd((.0193339*e+.119192*r+.9503041*i)/Td)),alpha:t.a}}function cu(t){let e=(t.l+16)/116,r=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Ad(e),r=au*Ad(r),i=Td*Ad(i),new Fr(Id(3.2404542*r-1.5371385*e-.4985314*i),Id(-.969266*r+1.8760108*e+.041556*i),Id(.0556434*r-.2040259*e+1.0572252*i),t.alpha)}function v1(t,e,r){const i=e-t;return t+r*(i>180||i<-180?i-360*Math.round(i/360):i)}const ia={forward:du,reverse:cu,interpolate:function(t,e,r){return{l:tr(t.l,e.l,r),a:tr(t.a,e.a,r),b:tr(t.b,e.b,r),alpha:tr(t.alpha,e.alpha,r)}}},hs={forward:function(t){const{l:e,a:r,b:i}=du(t),d=Math.atan2(i,r)*y1;return{h:d<0?d+360:d,c:Math.sqrt(r*r+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*_1,r=t.c;return cu({l:t.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:t.alpha})},interpolate:function(t,e,r){return{h:v1(t.h,e.h,r),c:tr(t.c,e.c,r),l:tr(t.l,e.l,r),alpha:tr(t.alpha,e.alpha,r)}}};var Md=Object.freeze({__proto__:null,hcl:hs,lab:ia});class oa{constructor(e,r,i,d,h){this.type=e,this.operator=r,this.interpolation=i,this.input=d,this.labels=[],this.outputs=[];for(const[p,_]of h)this.labels.push(p),this.outputs.push(_)}static interpolationFactor(e,r,i,d){let h=0;if(e.name==="exponential")h=Pd(r,e.base,i,d);else if(e.name==="linear")h=Pd(r,1,i,d);else if(e.name==="cubic-bezier"){const p=e.controlPoints;h=new Ye(p[0],p[1],p[2],p[3]).solve(Pd(r,1,i,d))}return h}static parse(e,r){let[i,d,h,...p]=e;if(!Array.isArray(d)||d.length===0)return r.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const b=d[1];if(typeof b!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:b}}else{if(d[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const b=d.slice(1);if(b.length!==4||b.some(T=>typeof T!="number"||T<0||T>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:b}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(h=r.parse(h,2,J),!h)return null;const _=[];let x=null;i==="interpolate-hcl"||i==="interpolate-lab"?x=Ze:r.expectedType&&r.expectedType.kind!=="value"&&(x=r.expectedType);for(let b=0;b<p.length;b+=2){const T=p[b],A=p[b+1],M=b+3,D=b+4;if(typeof T!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(_.length&&_[_.length-1][0]>=T)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const O=r.parse(A,D,x);if(!O)return null;x=x||O.type,_.push([T,O])}return x.kind==="number"||x.kind==="color"||x.kind==="array"&&x.itemType.kind==="number"&&typeof x.N=="number"?new oa(x,i,d,h,_):r.error(`Type ${Ir(x)} is not interpolatable.`)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const d=this.input.evaluate(e);if(d<=r[0])return i[0].evaluate(e);const h=r.length;if(d>=r[h-1])return i[h-1].evaluate(e);const p=Ja(r,d),_=oa.interpolationFactor(this.interpolation,d,r[p],r[p+1]),x=i[p].evaluate(e),b=i[p+1].evaluate(e);return this.operator==="interpolate"?na[this.type.kind.toLowerCase()](x,b,_):this.operator==="interpolate-hcl"?hs.reverse(hs.interpolate(hs.forward(x),hs.forward(b),_)):ia.reverse(ia.interpolate(ia.forward(x),ia.forward(b),_))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r}}function Pd(t,e,r,i){const d=i-r,h=t-r;return d===0?0:e===1?h/d:(Math.pow(e,h)-1)/(Math.pow(e,d)-1)}var Ai=oa;class tl{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let i=null;const d=r.expectedType;d&&d.kind!=="value"&&(i=d);const h=[];for(const _ of e.slice(1)){const x=r.parse(_,1+h.length,i,void 0,{typeAnnotation:"omit"});if(!x)return null;i=i||x.type,h.push(x)}const p=d&&h.some(_=>Zi(d,_.type));return new tl(p?bt:i,h)}evaluate(e){let r,i=null,d=0;for(const h of this.args){if(d++,i=h.evaluate(e),i&&i instanceof ti&&!i.available&&(r||(r=i),i=null,d===this.args.length))return r;if(i!==null)break}return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Ld=tl;class rl{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let h=1;h<e.length-1;h+=2){const p=e[h];if(typeof p!="string")return r.error(`Expected string, but found ${typeof p} instead.`,h);if(/[^a-zA-Z0-9_]/.test(p))return r.error("Variable names must contain only alphanumeric characters or '_'.",h);const _=r.parse(e[h+1],h+1);if(!_)return null;i.push([p,_])}const d=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return d?new rl(i,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,i]of this.bindings)e.push(r,i.serialize());return e.push(this.result.serialize()),e}}var uu=rl;class Rd{constructor(e,r,i){this.type=e,this.index=r,this.input=i}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,J),d=r.parse(e[2],2,ei(r.expectedType||bt));return i&&d?new Rd(d.type.itemType,i,d):null}evaluate(e){const r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new cn(`Array index out of bounds: ${r} < 0.`);if(r>=i.length)throw new cn(`Array index out of bounds: ${r} > ${i.length-1}.`);if(r!==Math.floor(r))throw new cn(`Array index must be an integer, but found ${r} instead.`);return i[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var x1=Rd;class kd{constructor(e,r){this.type=Ce,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,bt),d=r.parse(e[2],2,bt);return i&&d?Ws(i.type,[Ce,Ee,J,V,bt])?new kd(i,d):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(i.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(i==null)return!1;if(!Ks(r,["boolean","string","number","null"]))throw new cn(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(Or(r))} instead.`);if(!Ks(i,["string","array"]))throw new cn(`Expected second argument to be of type array or string, but found ${Ir(Or(i))} instead.`);return i.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var nl=kd;class sa{constructor(e,r,i){this.type=J,this.needle=e,this.haystack=r,this.fromIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,bt),d=r.parse(e[2],2,bt);if(!i||!d)return null;if(!Ws(i.type,[Ce,Ee,J,V,bt]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(i.type)} instead`);if(e.length===4){const h=r.parse(e[3],3,J);return h?new sa(i,d,h):null}return new sa(i,d)}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Ks(r,["boolean","string","number","null"]))throw new cn(`Expected first argument to be of type boolean, string, number or null, but found ${Ir(Or(r))} instead.`);if(!Ks(i,["string","array"]))throw new cn(`Expected second argument to be of type array or string, but found ${Ir(Or(i))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(e);return i.indexOf(r,d)}return i.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var hu=sa;class Dd{constructor(e,r,i,d,h,p){this.inputType=e,this.type=r,this.input=i,this.cases=d,this.outputs=h,this.otherwise=p}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let i,d;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);const h={},p=[];for(let b=2;b<e.length-1;b+=2){let T=e[b];const A=e[b+1];Array.isArray(T)||(T=[T]);const M=r.concat(b);if(T.length===0)return M.error("Expected at least one branch label.");for(const O of T){if(typeof O!="number"&&typeof O!="string")return M.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof O=="number"&&Math.floor(O)!==O)return M.error("Numeric branch labels must be integer values.");if(i){if(M.checkSubtype(i,Or(O)))return null}else i=Or(O);if(h[String(O)]!==void 0)return M.error("Branch labels must be unique.");h[String(O)]=p.length}const D=r.parse(A,b,d);if(!D)return null;d=d||D.type,p.push(D)}const _=r.parse(e[1],1,bt);if(!_)return null;const x=r.parse(e[e.length-1],e.length-1,d);return x?_.type.kind!=="value"&&r.concat(1).checkSubtype(i,_.type)?null:new Dd(i,d,_,h,p,x):null}evaluate(e){const r=this.input.evaluate(e);return(Or(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],d={};for(const p of r){const _=d[this.cases[p]];_===void 0?(d[this.cases[p]]=i.length,i.push([this.cases[p],[p]])):i[_][1].push(p)}const h=p=>this.inputType.kind==="number"?Number(p):p;for(const[p,_]of i)e.push(_.length===1?h(_[0]):_.map(h)),e.push(this.outputs[p].serialize());return e.push(this.otherwise.serialize()),e}}var b1=Dd;class Od{constructor(e,r,i){this.type=e,this.branches=r,this.otherwise=i}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const d=[];for(let p=1;p<e.length-1;p+=2){const _=r.parse(e[p],p,Ce);if(!_)return null;const x=r.parse(e[p+1],p+1,i);if(!x)return null;d.push([_,x]),i=i||x.type}const h=r.parse(e[e.length-1],e.length-1,i);return h?new Od(i,d,h):null}evaluate(e){for(const[r,i]of this.branches)if(r.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,i]of this.branches)e(r),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var fu=Od;class aa{constructor(e,r,i,d){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=d}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,bt),d=r.parse(e[2],2,J);if(!i||!d)return null;if(!Ws(i.type,[ei(bt),Ee,bt]))return r.error(`Expected first argument to be of type array or string, but found ${Ir(i.type)} instead`);if(e.length===4){const h=r.parse(e[3],3,J);return h?new aa(i.type,i,d,h):null}return new aa(i.type,i,d)}evaluate(e){const r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Ks(r,["string","array"]))throw new cn(`Expected first argument to be of type array or string, but found ${Ir(Or(r))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(e);return r.slice(i,d)}return r.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var pu=aa;function il(t,e){return t==="=="||t==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function mu(t,e,r,i){return i.compare(e,r)===0}function fs(t,e,r){const i=t!=="=="&&t!=="!=";return class y2{constructor(h,p,_){this.type=Ce,this.lhs=h,this.rhs=p,this.collator=_,this.hasUntypedArgument=h.type.kind==="value"||p.type.kind==="value"}static parse(h,p){if(h.length!==3&&h.length!==4)return p.error("Expected two or three arguments.");const _=h[0];let x=p.parse(h[1],1,bt);if(!x)return null;if(!il(_,x.type))return p.concat(1).error(`"${_}" comparisons are not supported for type '${Ir(x.type)}'.`);let b=p.parse(h[2],2,bt);if(!b)return null;if(!il(_,b.type))return p.concat(2).error(`"${_}" comparisons are not supported for type '${Ir(b.type)}'.`);if(x.type.kind!==b.type.kind&&x.type.kind!=="value"&&b.type.kind!=="value")return p.error(`Cannot compare types '${Ir(x.type)}' and '${Ir(b.type)}'.`);i&&(x.type.kind==="value"&&b.type.kind!=="value"?x=new qi(b.type,[x]):x.type.kind!=="value"&&b.type.kind==="value"&&(b=new qi(x.type,[b])));let T=null;if(h.length===4){if(x.type.kind!=="string"&&b.type.kind!=="string"&&x.type.kind!=="value"&&b.type.kind!=="value")return p.error("Cannot use collator to compare non-string types.");if(T=p.parse(h[3],3,ar),!T)return null}return new y2(x,b,T)}evaluate(h){const p=this.lhs.evaluate(h),_=this.rhs.evaluate(h);if(i&&this.hasUntypedArgument){const x=Or(p),b=Or(_);if(x.kind!==b.kind||x.kind!=="string"&&x.kind!=="number")throw new cn(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${x.kind}, ${b.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const x=Or(p),b=Or(_);if(x.kind!=="string"||b.kind!=="string")return e(h,p,_)}return this.collator?r(h,p,_,this.collator.evaluate(h)):e(h,p,_)}eachChild(h){h(this.lhs),h(this.rhs),this.collator&&h(this.collator)}outputDefined(){return!0}serialize(){const h=[t];return this.eachChild(p=>{h.push(p.serialize())}),h}}}const $1=fs("==",function(t,e,r){return e===r},mu),w1=fs("!=",function(t,e,r){return e!==r},function(t,e,r,i){return!mu(0,e,r,i)}),E1=fs("<",function(t,e,r){return e<r},function(t,e,r,i){return i.compare(e,r)<0}),T1=fs(">",function(t,e,r){return e>r},function(t,e,r,i){return i.compare(e,r)>0}),S1=fs("<=",function(t,e,r){return e<=r},function(t,e,r,i){return i.compare(e,r)<=0}),gu=fs(">=",function(t,e,r){return e>=r},function(t,e,r,i){return i.compare(e,r)>=0});class ol{constructor(e,r,i,d,h,p){this.type=Ee,this.number=e,this.locale=r,this.currency=i,this.unit=d,this.minFractionDigits=h,this.maxFractionDigits=p}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const i=r.parse(e[1],1,J);if(!i)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return r.error("NumberFormat options argument must be an object.");let h=null;if(d.locale&&(h=r.parse(d.locale,1,Ee),!h))return null;let p=null;if(d.currency&&(p=r.parse(d.currency,1,Ee),!p))return null;let _=null;if(d.unit&&(_=r.parse(d.unit,1,Ee),!_))return null;let x=null;if(d["min-fraction-digits"]&&(x=r.parse(d["min-fraction-digits"],1,J),!x))return null;let b=null;return d["max-fraction-digits"]&&(b=r.parse(d["max-fraction-digits"],1,J),!b)?null:new ol(i,h,p,_,x,b)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ps{constructor(e){this.type=J,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Ir(i.type)} instead.`):new ps(i):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new cn(`Expected value to be of type string or array, but found ${Ir(Or(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const _u={"==":$1,"!=":w1,">":T1,"<":E1,">=":gu,"<=":S1,array:qi,at:x1,boolean:qi,case:fu,coalesce:Ld,collator:ea,format:go,image:Ha,in:nl,"index-of":hu,interpolate:Ai,"interpolate-hcl":Ai,"interpolate-lab":Ai,length:ps,let:uu,literal:Do,match:b1,number:qi,"number-format":ol,object:qi,slice:pu,step:Ed,string:qi,"to-boolean":as,"to-color":as,"to-number":as,"to-string":as,var:su,within:Xa};function yu(t,[e,r,i,d]){e=e.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);const h=d?d.evaluate(t):1,p=ru(e,r,i,h);if(p)throw new cn(p);return new Fr(e/255*h,r/255*h,i/255*h,h)}function Xi(t,e){return t in e}function sl(t,e){const r=e[t];return r===void 0?null:r}function ri(t){return{type:t}}Hi.register(_u,{error:[{kind:"error"},[Ee],(t,[e])=>{throw new cn(e.evaluate(t))}],typeof:[Ee,[bt],(t,[e])=>Ir(Or(e.evaluate(t)))],"to-rgba":[ei(J,4),[Ze],(t,[e])=>e.evaluate(t).toArray()],rgb:[Ze,[J,J,J],yu],rgba:[Ze,[J,J,J,J],yu],has:{type:Ce,overloads:[[[Ee],(t,[e])=>Xi(e.evaluate(t),t.properties())],[[Ee,_t],(t,[e,r])=>Xi(e.evaluate(t),r.evaluate(t))]]},get:{type:bt,overloads:[[[Ee],(t,[e])=>sl(e.evaluate(t),t.properties())],[[Ee,_t],(t,[e,r])=>sl(e.evaluate(t),r.evaluate(t))]]},"feature-state":[bt,[Ee],(t,[e])=>sl(e.evaluate(t),t.featureState||{})],properties:[_t,[],t=>t.properties()],"geometry-type":[Ee,[],t=>t.geometryType()],id:[bt,[],t=>t.id()],zoom:[J,[],t=>t.globals.zoom],pitch:[J,[],t=>t.globals.pitch||0],"distance-from-center":[J,[],t=>t.distanceFromCenter()],"heatmap-density":[J,[],t=>t.globals.heatmapDensity||0],"line-progress":[J,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[J,[],t=>t.globals.skyRadialProgress||0],accumulated:[bt,[],t=>t.globals.accumulated===void 0?null:t.globals.accumulated],"+":[J,ri(J),(t,e)=>{let r=0;for(const i of e)r+=i.evaluate(t);return r}],"*":[J,ri(J),(t,e)=>{let r=1;for(const i of e)r*=i.evaluate(t);return r}],"-":{type:J,overloads:[[[J,J],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[J],(t,[e])=>-e.evaluate(t)]]},"/":[J,[J,J],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[J,[J,J],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[J,[],()=>Math.LN2],pi:[J,[],()=>Math.PI],e:[J,[],()=>Math.E],"^":[J,[J,J],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[J,[J],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[J,[J],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[J,[J],(t,[e])=>Math.log(e.evaluate(t))],log2:[J,[J],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[J,[J],(t,[e])=>Math.sin(e.evaluate(t))],cos:[J,[J],(t,[e])=>Math.cos(e.evaluate(t))],tan:[J,[J],(t,[e])=>Math.tan(e.evaluate(t))],asin:[J,[J],(t,[e])=>Math.asin(e.evaluate(t))],acos:[J,[J],(t,[e])=>Math.acos(e.evaluate(t))],atan:[J,[J],(t,[e])=>Math.atan(e.evaluate(t))],min:[J,ri(J),(t,e)=>Math.min(...e.map(r=>r.evaluate(t)))],max:[J,ri(J),(t,e)=>Math.max(...e.map(r=>r.evaluate(t)))],abs:[J,[J],(t,[e])=>Math.abs(e.evaluate(t))],round:[J,[J],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[J,[J],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[J,[J],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Ce,[Ee,bt],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[Ce,[bt],(t,[e])=>t.id()===e.value],"filter-type-==":[Ce,[Ee],(t,[e])=>t.geometryType()===e.value],"filter-<":[Ce,[Ee,bt],(t,[e,r])=>{const i=t.properties()[e.value],d=r.value;return typeof i==typeof d&&i<d}],"filter-id-<":[Ce,[bt],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r<i}],"filter->":[Ce,[Ee,bt],(t,[e,r])=>{const i=t.properties()[e.value],d=r.value;return typeof i==typeof d&&i>d}],"filter-id->":[Ce,[bt],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r>i}],"filter-<=":[Ce,[Ee,bt],(t,[e,r])=>{const i=t.properties()[e.value],d=r.value;return typeof i==typeof d&&i<=d}],"filter-id-<=":[Ce,[bt],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r<=i}],"filter->=":[Ce,[Ee,bt],(t,[e,r])=>{const i=t.properties()[e.value],d=r.value;return typeof i==typeof d&&i>=d}],"filter-id->=":[Ce,[bt],(t,[e])=>{const r=t.id(),i=e.value;return typeof r==typeof i&&r>=i}],"filter-has":[Ce,[bt],(t,[e])=>e.value in t.properties()],"filter-has-id":[Ce,[],t=>t.id()!==null&&t.id()!==void 0],"filter-type-in":[Ce,[ei(Ee)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Ce,[ei(bt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Ce,[Ee,ei(bt)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Ce,[Ee,ei(bt)],(t,[e,r])=>function(i,d,h,p){for(;h<=p;){const _=h+p>>1;if(d[_]===i)return!0;d[_]>i?p=_-1:h=_+1}return!1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:Ce,overloads:[[[Ce,Ce],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[ri(Ce),(t,e)=>{for(const r of e)if(!r.evaluate(t))return!1;return!0}]]},any:{type:Ce,overloads:[[[Ce,Ce],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[ri(Ce),(t,e)=>{for(const r of e)if(r.evaluate(t))return!0;return!1}]]},"!":[Ce,[Ce],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Ce,[Ee],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return!r||r(e.evaluate(t))}],upcase:[Ee,[Ee],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Ee,[Ee],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Ee,ri(bt),(t,e)=>e.map(r=>Qs(r.evaluate(t))).join("")],"resolved-locale":[Ee,[ar],(t,[e])=>e.evaluate(t).resolvedLocale()]});var la=_u;function vu(t){return{result:"success",value:t}}function Fo(t){return{result:"error",value:t}}function ms(t){return t["property-type"]==="data-driven"}function al(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function ll(t){return!!t.expression&&t.expression.interpolated}function rr(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":t===null?"null":typeof t}function da(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}function xu(t){return t}function dl(t,e){const r=e.type==="color",i=t.stops&&typeof t.stops[0][0]=="object",d=i||!(i||t.property!==void 0),h=t.type||(ll(e)?"exponential":"interval");if(r&&((t=Tn({},t)).stops&&(t.stops=t.stops.map(b=>[b[0],Fr.parse(b[1])])),t.default=Fr.parse(t.default?t.default:e.default)),t.colorSpace&&t.colorSpace!=="rgb"&&!Md[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let p,_,x;if(h==="exponential")p=Yi;else if(h==="interval")p=cl;else if(h==="categorical"){p=bu,_=Object.create(null);for(const b of t.stops)_[b[0]]=b[1];x=typeof t.stops[0][0]}else{if(h!=="identity")throw new Error(`Unknown function type "${h}"`);p=$u}if(i){const b={},T=[];for(let D=0;D<t.stops.length;D++){const O=t.stops[D],F=O[0].zoom;b[F]===void 0&&(b[F]={zoom:F,type:t.type,property:t.property,default:t.default,stops:[]},T.push(F)),b[F].stops.push([O[0].value,O[1]])}const A=[];for(const D of T)A.push([b[D].zoom,dl(b[D],e)]);const M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:Ai.interpolationFactor.bind(void 0,M),zoomStops:A.map(D=>D[0]),evaluate:({zoom:D},O)=>Yi({stops:A,base:t.base},e,D).evaluate(D,O)}}if(d){const b=h==="exponential"?{name:"exponential",base:t.base!==void 0?t.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:Ai.interpolationFactor.bind(void 0,b),zoomStops:t.stops.map(T=>T[0]),evaluate:({zoom:T})=>p(t,e,T,_,x)}}return{kind:"source",evaluate(b,T){const A=T&&T.properties?T.properties[t.property]:void 0;return A===void 0?gs(t.default,e.default):p(t,e,A,_,x)}}}function gs(t,e,r){return t!==void 0?t:e!==void 0?e:r!==void 0?r:void 0}function bu(t,e,r,i,d){return gs(typeof r===d?i[r]:void 0,t.default,e.default)}function cl(t,e,r){if(rr(r)!=="number")return gs(t.default,e.default);const i=t.stops.length;if(i===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const d=Ja(t.stops.map(h=>h[0]),r);return t.stops[d][1]}function Yi(t,e,r){const i=t.base!==void 0?t.base:1;if(rr(r)!=="number")return gs(t.default,e.default);const d=t.stops.length;if(d===1||r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[d-1][0])return t.stops[d-1][1];const h=Ja(t.stops.map(T=>T[0]),r),p=function(T,A,M,D){const O=D-M,F=T-M;return O===0?0:A===1?F/O:(Math.pow(A,F)-1)/(Math.pow(A,O)-1)}(r,i,t.stops[h][0],t.stops[h+1][0]),_=t.stops[h][1],x=t.stops[h+1][1];let b=na[e.type]||xu;if(t.colorSpace&&t.colorSpace!=="rgb"){const T=Md[t.colorSpace];b=(A,M)=>T.reverse(T.interpolate(T.forward(A),T.forward(M),p))}return typeof _.evaluate=="function"?{evaluate(...T){const A=_.evaluate.apply(void 0,T),M=x.evaluate.apply(void 0,T);if(A!==void 0&&M!==void 0)return b(A,M,p)}}:b(_,x,p)}function $u(t,e,r){return e.type==="color"?r=Fr.parse(r):e.type==="formatted"?r=Dn.fromString(r.toString()):e.type==="resolvedImage"?r=ti.fromString(r.toString()):rr(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),gs(r,t.default,e.default)}class ul{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new gd,this._defaultValue=r?function(i){return i.type==="color"&&(da(i.default)||Array.isArray(i.default))?new Fr(0,0,0,0):i.type==="color"?Fr.parse(i.default)||null:i.default===void 0?null:i.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,i,d,h,p,_,x){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=d||null,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=p,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=x||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,i,d,h,p,_,x){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=p||null,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new cn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function _s(t){return Array.isArray(t)&&t.length>0&&typeof t[0]=="string"&&t[0]in la}function ys(t,e){const r=new $d(la,[],e?function(d){const h={color:Ze,string:Ee,number:J,enum:Ee,boolean:Ce,formatted:Qn,resolvedImage:ko};return d.type==="array"?ei(h[d.value]||bt,d.length):h[d.type]}(e):void 0),i=r.parse(t,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?vu(new ul(i,e)):Fo(r.errors)}class zd{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!Ki(r.expression)}evaluateWithoutErrorHandling(e,r,i,d,h,p){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,d,h,p)}evaluate(e,r,i,d,h,p){return this._styleExpression.evaluate(e,r,i,d,h,p)}}class ca{constructor(e,r,i,d){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Ki(r.expression),this.interpolationType=d}evaluateWithoutErrorHandling(e,r,i,d,h,p){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,d,h,p)}evaluate(e,r,i,d,h,p){return this._styleExpression.evaluate(e,r,i,d,h,p)}interpolationFactor(e,r,i){return this.interpolationType?Ai.interpolationFactor(this.interpolationType,e,r,i):0}}function ua(t,e){if((t=ys(t,e)).result==="error")return t;const r=t.value.expression,i=us(r);if(!i&&!ms(e))return Fo([new qn("","data expressions not supported")]);const d=zo(r,["zoom","pitch","distance-from-center"]);if(!d&&!al(e))return Fo([new qn("","zoom expressions not supported")]);const h=fl(r);return h||d?h instanceof qn?Fo([h]):h instanceof Ai&&!ll(e)?Fo([new qn("",'"interpolate" expressions cannot be used with this property')]):vu(h?new ca(i?"camera":"composite",t.value,h.labels,h instanceof Ai?h.interpolation:void 0):new zd(i?"constant":"source",t.value)):Fo([new qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class hl{constructor(e,r){this._parameters=e,this._specification=r,Tn(this,dl(this._parameters,this._specification))}static deserialize(e){return new hl(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function fl(t){let e=null;if(t instanceof uu)e=fl(t.result);else if(t instanceof Ld){for(const r of t.args)if(e=fl(r),e)break}else(t instanceof Ed||t instanceof Ai)&&t.input instanceof Hi&&t.input.name==="zoom"&&(e=t);return e instanceof qn||t.eachChild(r=>{const i=fl(r);i instanceof qn?e=i:!e&&i?e=new qn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new qn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class xt{constructor(e,r,i,d){this.message=(e?`${e}: `:"")+i,d&&(this.identifier=d),r!=null&&r.__line__&&(this.line=r.__line__)}}function pi(t){const e=t.key,r=t.value,i=t.valueSpec||{},d=t.objectElementValidators||{},h=t.style,p=t.styleSpec;let _=[];const x=rr(r);if(x!=="object")return[new xt(e,r,`object expected, ${x} found`)];for(const b in r){const T=b.split(".")[0];let A;d[T]?A=d[T]:i[T]?A=mn:d["*"]?A=d["*"]:i["*"]&&(A=mn),A?_=_.concat(A({key:(e&&`${e}.`)+b,value:r[b],valueSpec:i[T]||i["*"],style:h,styleSpec:p,object:r,objectKey:b},r)):_.push(new xt(e,r[b],`unknown property "${b}"`))}for(const b in i)d[b]||i[b].required&&i[b].default===void 0&&r[b]===void 0&&_.push(new xt(e,r,`missing required property "${b}"`));return _}function wu(t){const e=t.value,r=t.valueSpec,i=t.style,d=t.styleSpec,h=t.key,p=t.arrayElementValidator||mn;if(rr(e)!=="array")return[new xt(h,e,`array expected, ${rr(e)} found`)];if(r.length&&e.length!==r.length)return[new xt(h,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new xt(h,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let _={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};d.$version<7&&(_.function=r.function),rr(r.value)==="object"&&(_=r.value);let x=[];for(let b=0;b<e.length;b++)x=x.concat(p({array:e,arrayIndex:b,value:e[b],valueSpec:_,style:i,styleSpec:d,key:`${h}[${b}]`}));return x}function ha(t){const e=t.key,r=t.value,i=t.valueSpec;let d=rr(r);if(d==="number"&&r!=r&&(d="NaN"),d!=="number")return[new xt(e,r,`number expected, ${d} found`)];if("minimum"in i){let h=i.minimum;if(rr(i.minimum)==="array"&&(h=i.minimum[t.arrayIndex]),r<h)return[new xt(e,r,`${r} is less than the minimum value ${h}`)]}if("maximum"in i){let h=i.maximum;if(rr(i.maximum)==="array"&&(h=i.maximum[t.arrayIndex]),r>h)return[new xt(e,r,`${r} is greater than the maximum value ${h}`)]}return[]}function fa(t){const e=t.valueSpec,r=dr(t.value.type);let i,d,h,p={};const _=r!=="categorical"&&t.value.property===void 0,x=!_,b=rr(t.value.stops)==="array"&&rr(t.value.stops[0])==="array"&&rr(t.value.stops[0][0])==="object",T=pi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(D){if(r==="identity")return[new xt(D.key,D.value,'identity function may not have a "stops" property')];let O=[];const F=D.value;return O=O.concat(wu({key:D.key,value:F,valueSpec:D.valueSpec,style:D.style,styleSpec:D.styleSpec,arrayElementValidator:A})),rr(F)==="array"&&F.length===0&&O.push(new xt(D.key,F,"array must have at least one stop")),O},default:function(D){return mn({key:D.key,value:D.value,valueSpec:e,style:D.style,styleSpec:D.styleSpec})}}});return r==="identity"&&_&&T.push(new xt(t.key,t.value,'missing required property "property"')),r==="identity"||t.value.stops||T.push(new xt(t.key,t.value,'missing required property "stops"')),r==="exponential"&&t.valueSpec.expression&&!ll(t.valueSpec)&&T.push(new xt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(x&&!ms(t.valueSpec)?T.push(new xt(t.key,t.value,"property functions not supported")):_&&!al(t.valueSpec)&&T.push(new xt(t.key,t.value,"zoom functions not supported"))),r!=="categorical"&&!b||t.value.property!==void 0||T.push(new xt(t.key,t.value,'"property" property is required')),T;function A(D){let O=[];const F=D.value,q=D.key;if(rr(F)!=="array")return[new xt(q,F,`array expected, ${rr(F)} found`)];if(F.length!==2)return[new xt(q,F,`array length 2 expected, length ${F.length} found`)];if(b){if(rr(F[0])!=="object")return[new xt(q,F,`object expected, ${rr(F[0])} found`)];if(F[0].zoom===void 0)return[new xt(q,F,"object stop key must have zoom")];if(F[0].value===void 0)return[new xt(q,F,"object stop key must have value")];const ee=dr(F[0].zoom);if(typeof ee!="number")return[new xt(q,F[0].zoom,"stop zoom values must be numbers")];if(h&&h>ee)return[new xt(q,F[0].zoom,"stop zoom values must appear in ascending order")];ee!==h&&(h=ee,d=void 0,p={}),O=O.concat(pi({key:`${q}[0]`,value:F[0],valueSpec:{zoom:{}},style:D.style,styleSpec:D.styleSpec,objectElementValidators:{zoom:ha,value:M}}))}else O=O.concat(M({key:`${q}[0]`,value:F[0],valueSpec:{},style:D.style,styleSpec:D.styleSpec},F));return _s(Ar(F[1]))?O.concat([new xt(`${q}[1]`,F[1],"expressions are not allowed in function stops.")]):O.concat(mn({key:`${q}[1]`,value:F[1],valueSpec:e,style:D.style,styleSpec:D.styleSpec}))}function M(D,O){const F=rr(D.value),q=dr(D.value),ee=D.value!==null?D.value:O;if(i){if(F!==i)return[new xt(D.key,ee,`${F} stop domain type must match previous stop domain type ${i}`)]}else i=F;if(F!=="number"&&F!=="string"&&F!=="boolean"&&typeof q!="number"&&typeof q!="string"&&typeof q!="boolean")return[new xt(D.key,ee,"stop domain value must be a number, string, or boolean")];if(F!=="number"&&r!=="categorical"){let de=`number expected, ${F} found`;return ms(e)&&r===void 0&&(de+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(D.key,ee,de)]}return r!=="categorical"||F!=="number"||typeof q=="number"&&isFinite(q)&&Math.floor(q)===q?r!=="categorical"&&F==="number"&&typeof q=="number"&&typeof d=="number"&&d!==void 0&&q<d?[new xt(D.key,ee,"stop domain values must appear in ascending order")]:(d=q,r==="categorical"&&q in p?[new xt(D.key,ee,"stop domain values must be unique")]:(p[q]=!0,[])):[new xt(D.key,ee,`integer expected, found ${String(q)}`)]}}function on(t){const e=(t.expressionContext==="property"?ua:ys)(Ar(t.value),t.valueSpec);if(e.result==="error")return e.value.map(i=>new xt(`${t.key}${i.key}`,t.value,i.message));const r=e.value.expression||e.value._styleExpression.expression;if(t.expressionContext==="property"&&t.propertyKey==="text-font"&&!r.outputDefined())return[new xt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if(t.expressionContext==="property"&&t.propertyType==="layout"&&!Ki(r))return[new xt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if(t.expressionContext==="filter")return pa(r,t);if(t.expressionContext&&t.expressionContext.indexOf("cluster")===0){if(!zo(r,["zoom","feature-state"]))return[new xt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(t.expressionContext==="cluster-initial"&&!us(r))return[new xt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pa(t,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const d of e.valueSpec.expression.parameters)r.delete(d);if(r.size===0)return[];const i=[];return t instanceof Hi&&r.has(t.name)?[new xt(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild(d=>{i.push(...pa(d,e))}),i)}function pl(t){const e=t.key,r=t.value,i=t.valueSpec,d=[];return Array.isArray(i.values)?i.values.indexOf(dr(r))===-1&&d.push(new xt(e,r,`expected one of [${i.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(i.values).indexOf(dr(r))===-1&&d.push(new xt(e,r,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(r)} found`)),d}function Bd(t){if(t===!0||t===!1)return!0;if(!Array.isArray(t)||t.length===0)return!1;switch(t[0]){case"has":return t.length>=2&&t[1]!=="$id"&&t[1]!=="$type";case"in":return t.length>=3&&(typeof t[1]!="string"||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return t.length!==3||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Bd(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function ml(t,e="fill"){if(t==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Bd(t)||(t=xs(t));const r=t;let i=!0;try{i=function(b){if(!vs(b))return b;let T=Ar(b);return gl(T),T=Eu(T),T}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const d=Te[`filter_${e}`],h=ys(i,d);let p=null;if(h.result==="error")throw new Error(h.value.map(b=>`${b.key}: ${b.message}`).join(", "));p=(b,T,A)=>h.value.evaluate(b,T,{},A);let _=null,x=null;if(i!==r){const b=ys(r,d);if(b.result==="error")throw new Error(b.value.map(T=>`${T.key}: ${T.message}`).join(", "));_=(T,A,M,D,O)=>b.value.evaluate(T,A,{},M,void 0,void 0,D,O),x=!us(b.value.expression)}return{filter:p,dynamicFilter:_||void 0,needGeometry:Tu(i),needFeature:!!x}}function Eu(t){if(!Array.isArray(t))return t;const e=function(r){if(Fd.has(r[0])){for(let i=1;i<r.length;i++)if(vs(r[i]))return!0}return r}(t);return e===!0?e:e.map(r=>Eu(r))}function gl(t){let e=!1;const r=[];if(t[0]==="case"){for(let i=1;i<t.length-1;i+=2)e=e||vs(t[i]),r.push(t[i+1]);r.push(t[t.length-1])}else if(t[0]==="match"){e=e||vs(t[1]);for(let i=2;i<t.length-1;i+=2)r.push(t[i+1]);r.push(t[t.length-1])}else if(t[0]==="step"){e=e||vs(t[1]);for(let i=1;i<t.length-1;i+=2)r.push(t[i+1])}e&&(t.length=0,t.push("any",...r));for(let i=1;i<t.length;i++)gl(t[i])}function vs(t){if(!Array.isArray(t))return!1;if((e=t[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<t.length;r++)if(vs(t[r]))return!0;return!1}const Fd=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function C1(t,e){return t<e?-1:t>e?1:0}function Tu(t){if(!Array.isArray(t))return!1;if(t[0]==="within")return!0;for(let e=1;e<t.length;e++)if(Tu(t[e]))return!0;return!1}function xs(t){if(!t)return!0;const e=t[0];return t.length<=1?e!=="any":e==="=="?Nd(t[1],t[2],"=="):e==="!="?_l(Nd(t[1],t[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Nd(t[1],t[2],e):e==="any"?(r=t.slice(1),["any"].concat(r.map(xs))):e==="all"?["all"].concat(t.slice(1).map(xs)):e==="none"?["all"].concat(t.slice(1).map(xs).map(_l)):e==="in"?jd(t[1],t.slice(2)):e==="!in"?_l(jd(t[1],t.slice(2))):e==="has"?Ud(t[1]):e==="!has"?_l(Ud(t[1])):e!=="within"||t;var r}function Nd(t,e,r){switch(t){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,t,e]}}function jd(t,e){if(e.length===0)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",t,["literal",e.sort(C1)]]:["filter-in-small",t,["literal",e]]}}function Ud(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function _l(t){return["!",t]}function ma(t){return Bd(Ar(t.value))?on(Tn({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${t.layerType||"fill"}`]})):ga(t)}function ga(t){const e=t.value,r=t.key;if(rr(e)!=="array")return[new xt(r,e,`array expected, ${rr(e)} found`)];const i=t.styleSpec;let d,h=[];if(e.length<1)return[new xt(r,e,"filter array must have at least 1 element")];switch(h=h.concat(pl({key:`${r}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),dr(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&dr(e[1])==="$type"&&h.push(new xt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&h.push(new xt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=rr(e[1]),d!=="string"&&h.push(new xt(`${r}[1]`,e[1],`string expected, ${d} found`)));for(let p=2;p<e.length;p++)d=rr(e[p]),dr(e[1])==="$type"?h=h.concat(pl({key:`${r}[${p}]`,value:e[p],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&h.push(new xt(`${r}[${p}]`,e[p],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let p=1;p<e.length;p++)h=h.concat(ga({key:`${r}[${p}]`,value:e[p],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":d=rr(e[1]),e.length!==2?h.push(new xt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="string"&&h.push(new xt(`${r}[1]`,e[1],`string expected, ${d} found`));break;case"within":d=rr(e[1]),e.length!==2?h.push(new xt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="object"&&h.push(new xt(`${r}[1]`,e[1],`object expected, ${d} found`))}return h}function Vd(t,e){const r=t.key,i=t.style,d=t.styleSpec,h=t.value,p=t.objectKey,_=d[`${e}_${t.layerType}`];if(!_)return[];const x=p.match(/^(.*)-transition$/);if(e==="paint"&&x&&_[x[1]]&&_[x[1]].transition)return mn({key:r,value:h,valueSpec:d.transition,style:i,styleSpec:d});const b=t.valueSpec||_[p];if(!b)return[new xt(r,h,`unknown property "${p}"`)];let T;if(rr(h)==="string"&&ms(b)&&!b.tokens&&(T=/^{([^}]+)}$/.exec(h))){const M=`\`{ "type": "identity", "property": ${T?JSON.stringify(T[1]):'"_"'} }\``;return[new xt(r,h,`"${p}" does not support interpolation syntax
Use an identity property function instead: ${M}.`)]}const A=[];return t.layerType==="symbol"&&(p==="text-field"&&i&&!i.glyphs&&A.push(new xt(r,h,'use of "text-field" requires a style "glyphs" property')),p==="text-font"&&da(Ar(h))&&dr(h.type)==="identity"&&A.push(new xt(r,h,'"text-font" does not support identity functions'))),A.concat(mn({key:t.key,value:h,valueSpec:b,style:i,styleSpec:d,expressionContext:"property",propertyType:e,propertyKey:p}))}function Su(t){return Vd(t,"paint")}function Gd(t){return Vd(t,"layout")}function Cu(t){let e=[];const r=t.value,i=t.key,d=t.style,h=t.styleSpec;r.type||r.ref||e.push(new xt(i,r,'either "type" or "ref" is required'));let p=dr(r.type);const _=dr(r.ref);if(r.id){const x=dr(r.id);for(let b=0;b<t.arrayIndex;b++){const T=d.layers[b];dr(T.id)===x&&e.push(new xt(i,r.id,`duplicate layer id "${r.id}", previously used at line ${T.id.__line__}`))}}if("ref"in r){let x;["type","source","source-layer","filter","layout"].forEach(b=>{b in r&&e.push(new xt(i,r[b],`"${b}" is prohibited for ref layers`))}),d.layers.forEach(b=>{dr(b.id)===_&&(x=b)}),x?x.ref?e.push(new xt(i,r.ref,"ref cannot reference another ref layer")):p=dr(x.type):typeof _=="string"&&e.push(new xt(i,r.ref,`ref layer "${_}" not found`))}else if(p!=="background"&&p!=="sky")if(r.source){const x=d.sources&&d.sources[r.source],b=x&&dr(x.type);x?b==="vector"&&p==="raster"?e.push(new xt(i,r.source,`layer "${r.id}" requires a raster source`)):b==="raster"&&p!=="raster"?e.push(new xt(i,r.source,`layer "${r.id}" requires a vector source`)):b!=="vector"||r["source-layer"]?b==="raster-dem"&&p!=="hillshade"?e.push(new xt(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):p!=="line"||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||b==="geojson"&&x.lineMetrics||e.push(new xt(i,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new xt(i,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new xt(i,r.source,`source "${r.source}" not found`))}else e.push(new xt(i,r,'missing required property "source"'));return e=e.concat(pi({key:i,value:r,valueSpec:h.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mn({key:`${i}.type`,value:r.type,valueSpec:h.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"}),filter:x=>ma(Tn({layerType:p},x)),layout:x=>pi({layer:r,key:x.key,value:x.value,valueSpec:{},style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":b=>Gd(Tn({layerType:p},b))}}),paint:x=>pi({layer:r,key:x.key,value:x.value,valueSpec:{},style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":b=>Su(Tn({layerType:p},b))}})}})),e}function _o(t){const e=t.value,r=t.key,i=rr(e);return i!=="string"?[new xt(r,e,`string expected, ${i} found`)]:[]}const Au={promoteId:function({key:t,value:e}){if(rr(e)==="string")return _o({key:t,value:e});{const r=[];for(const i in e)r.push(..._o({key:`${t}.${i}`,value:e[i]}));return r}}};function Iu(t){const e=t.value,r=t.key,i=t.styleSpec,d=t.style;if(!e.type)return[new xt(r,e,'"type" is required')];const h=dr(e.type);let p;switch(h){case"vector":case"raster":case"raster-dem":return p=pi({key:r,value:e,valueSpec:i[`source_${h.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:Au}),p;case"geojson":if(p=pi({key:r,value:e,valueSpec:i.source_geojson,style:d,styleSpec:i,objectElementValidators:Au}),e.cluster)for(const _ in e.clusterProperties){const[x,b]=e.clusterProperties[_],T=typeof x=="string"?[x,["accumulated"],["get",_]]:x;p.push(...on({key:`${r}.${_}.map`,value:b,expressionContext:"cluster-map"})),p.push(...on({key:`${r}.${_}.reduce`,value:T,expressionContext:"cluster-reduce"}))}return p;case"video":return pi({key:r,value:e,valueSpec:i.source_video,style:d,styleSpec:i});case"image":return pi({key:r,value:e,valueSpec:i.source_image,style:d,styleSpec:i});case"canvas":return[new xt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pl({key:`${r}.type`,value:e.type,valueSpec:{values:A1(i)},style:d,styleSpec:i})}}function A1(t){return t.source.reduce((e,r)=>{const i=t[r];return i.type.type==="enum"&&(e=e.concat(Object.keys(i.type.values))),e},[])}function Mu(t){const e=t.value,r=t.styleSpec,i=r.light,d=t.style;let h=[];const p=rr(e);if(e===void 0)return h;if(p!=="object")return h=h.concat([new xt("light",e,`object expected, ${p} found`)]),h;for(const _ in e){const x=_.match(/^(.*)-transition$/);h=h.concat(x&&i[x[1]]&&i[x[1]].transition?mn({key:_,value:e[_],valueSpec:r.transition,style:d,styleSpec:r}):i[_]?mn({key:_,value:e[_],valueSpec:i[_],style:d,styleSpec:r}):[new xt(_,e[_],`unknown property "${_}"`)])}return h}function Zd(t){const e=t.value,r=t.key,i=t.style,d=t.styleSpec,h=d.terrain;let p=[];const _=rr(e);if(e===void 0)return p;if(_!=="object")return p=p.concat([new xt("terrain",e,`object expected, ${_} found`)]),p;for(const x in e){const b=x.match(/^(.*)-transition$/);p=p.concat(b&&h[b[1]]&&h[b[1]].transition?mn({key:x,value:e[x],valueSpec:d.transition,style:i,styleSpec:d}):h[x]?mn({key:x,value:e[x],valueSpec:h[x],style:i,styleSpec:d}):[new xt(x,e[x],`unknown property "${x}"`)])}if(e.source){const x=i.sources&&i.sources[e.source],b=x&&dr(x.type);x?b!=="raster-dem"&&p.push(new xt(r,e.source,`terrain cannot be used with a source of type ${String(b)}, it only be used with a "raster-dem" source type`)):p.push(new xt(r,e.source,`source "${e.source}" not found`))}else p.push(new xt(r,e,'terrain is missing required property "source"'));return p}function Pu(t){const e=t.value,r=t.style,i=t.styleSpec,d=i.fog;let h=[];const p=rr(e);if(e===void 0)return h;if(p!=="object")return h=h.concat([new xt("fog",e,`object expected, ${p} found`)]),h;for(const _ in e){const x=_.match(/^(.*)-transition$/);h=h.concat(x&&d[x[1]]&&d[x[1]].transition?mn({key:_,value:e[_],valueSpec:i.transition,style:r,styleSpec:i}):d[_]?mn({key:_,value:e[_],valueSpec:d[_],style:r,styleSpec:i}):[new xt(_,e[_],`unknown property "${_}"`)])}return h}const Lu={"*":()=>[],array:wu,boolean:function(t){const e=t.value,r=t.key,i=rr(e);return i!=="boolean"?[new xt(r,e,`boolean expected, ${i} found`)]:[]},number:ha,color:function(t){const e=t.key,r=t.value,i=rr(r);return i!=="string"?[new xt(e,r,`color expected, ${i} found`)]:dd(r)===null?[new xt(e,r,`color expected, "${r}" found`)]:[]},enum:pl,filter:ma,function:fa,layer:Cu,object:pi,source:Iu,light:Mu,terrain:Zd,fog:Pu,string:_o,formatted:function(t){return _o(t).length===0?[]:on(t)},resolvedImage:function(t){return _o(t).length===0?[]:on(t)},projection:function(t){const e=t.value,r=t.styleSpec,i=r.projection,d=t.style;let h=[];const p=rr(e);if(p==="object")for(const _ in e)h=h.concat(mn({key:_,value:e[_],valueSpec:i[_],style:d,styleSpec:r}));else p!=="string"&&(h=h.concat([new xt("projection",e,`object or string expected, ${p} found`)]));return h}};function mn(t){const e=t.value,r=t.valueSpec,i=t.styleSpec;return r.expression&&da(dr(e))?fa(t):r.expression&&_s(Ar(e))?on(t):r.type&&Lu[r.type]?Lu[r.type](t):pi(Tn({},t,{valueSpec:r.type?i[r.type]:r}))}function I1(t){const e=t.value,r=t.key,i=_o(t);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new xt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new xt(r,e,'"glyphs" url must include a "{range}" token'))),i}function Ru(t,e=Te){return ni(mn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:I1,"*":()=>[]}}))}const M1=t=>ni(Su(t)),P1=t=>ni(Gd(t));function ni(t){return t.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function ku(t,e){let r=!1;if(e&&e.length)for(const i of e)t.fire(new Jn(new Error(i.message))),r=!0;return r}var L1=Ii,mi=3;function Ii(t,e,r){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var d=new Int32Array(this.arrayBuffer);t=d[0],this.d=(e=d[1])+2*(r=d[2]);for(var h=0;h<this.d*this.d;h++){var p=d[mi+h],_=d[mi+h+1];i.push(p===_?null:d.subarray(p,_))}var x=d[mi+i.length+1];this.keys=d.subarray(d[mi+i.length],x),this.bboxes=d.subarray(x),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var b=0;b<this.d*this.d;b++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;var T=r/e*t;this.min=-T,this.max=t+T}Ii.prototype.insert=function(t,e,r,i,d){this._forEachCell(e,r,i,d,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(d)},Ii.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ii.prototype._insertCell=function(t,e,r,i,d,h){this.cells[d].push(h)},Ii.prototype.query=function(t,e,r,i,d){var h=this.min,p=this.max;if(t<=h&&e<=h&&p<=r&&p<=i&&!d)return Array.prototype.slice.call(this.keys);var _=[];return this._forEachCell(t,e,r,i,this._queryCell,_,{},d),_},Ii.prototype._queryCell=function(t,e,r,i,d,h,p,_){var x=this.cells[d];if(x!==null)for(var b=this.keys,T=this.bboxes,A=0;A<x.length;A++){var M=x[A];if(p[M]===void 0){var D=4*M;(_?_(T[D+0],T[D+1],T[D+2],T[D+3]):t<=T[D+2]&&e<=T[D+3]&&r>=T[D+0]&&i>=T[D+1])?(p[M]=!0,h.push(b[M])):p[M]=!1}}},Ii.prototype._forEachCell=function(t,e,r,i,d,h,p,_){for(var x=this._convertToCellCoord(t),b=this._convertToCellCoord(e),T=this._convertToCellCoord(r),A=this._convertToCellCoord(i),M=x;M<=T;M++)for(var D=b;D<=A;D++){var O=this.d*D+M;if((!_||_(this._convertFromCellCoord(M),this._convertFromCellCoord(D),this._convertFromCellCoord(M+1),this._convertFromCellCoord(D+1)))&&d.call(this,t,e,r,i,O,h,p,_))return}},Ii.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Ii.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Ii.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=mi+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var d=new Int32Array(e+r+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var h=e,p=0;p<t.length;p++){var _=t[p];d[mi+p]=h,d.set(_,h),h+=_.length}return d[mi+t.length]=h,d.set(this.keys,h),d[mi+t.length+1]=h+=this.keys.length,d.set(this.bboxes,h),h+=this.bboxes.length,d.buffer};var No=We(L1);const yl={};function $t(t,e,r={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),yl[e]={klass:t,omit:r.omit||[]}}$t(Object,"Object"),No.serialize=function(t,e){const r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}},No.deserialize=function(t){return new No(t.buffer)},Object.defineProperty(No,"name",{value:"Grid"}),$t(No,"Grid"),$t(Fr,"Color"),$t(Error,"Error"),$t(En,"AJAXError"),$t(ti,"ResolvedImage"),$t(hl,"StylePropertyFunction"),$t(ul,"StyleExpression",{omit:["_evaluator"]}),$t(ca,"ZoomDependentExpression"),$t(zd,"ZoomConstantExpression"),$t(Hi,"CompoundExpression",{omit:["_evaluate"]});for(const t in la)yl[la[t]._classRegistryKey]||$t(la[t],`Expression${t}`);function qd(t){return t&&typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||t.constructor&&t.constructor.name==="ArrayBuffer")}function Hd(t){return I.ImageBitmap&&t instanceof I.ImageBitmap}function bs(t,e){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(qd(t)||Hd(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const r=t;return e&&e.push(r.buffer),r}if(t instanceof I.ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const r=[];for(const i of t)r.push(bs(i,e));return r}if(typeof t=="object"){const r=t.constructor,i=r._classRegistryKey;if(!i)throw new Error(`can't serialize object of unregistered class ${i}`);const d=r.serialize?r.serialize(t,e):{};if(!r.serialize){for(const h in t)t.hasOwnProperty(h)&&(yl[i].omit.indexOf(h)>=0||(d[h]=bs(t[h],e)));t instanceof Error&&(d.message=t.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(d.$name=i),d}throw new Error("can't serialize object of type "+typeof t)}function jo(t){if(t==null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||qd(t)||Hd(t)||ArrayBuffer.isView(t)||t instanceof I.ImageData)return t;if(Array.isArray(t))return t.map(jo);if(typeof t=="object"){const e=t.$name||"Object",{klass:r}=yl[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);const i=Object.create(r.prototype);for(const d of Object.keys(t))d!=="$name"&&(i[d]=jo(t[d]));return i}throw new Error("can't deserialize object of type "+typeof t)}const vt={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Wd(t){for(const e of t)if(Kd(e.charCodeAt(0)))return!0;return!1}function R1(t){for(const e of t)if(!Du(e.charCodeAt(0)))return!1;return!0}function Du(t){return!(vt.Arabic(t)||vt["Arabic Supplement"](t)||vt["Arabic Extended-A"](t)||vt["Arabic Presentation Forms-A"](t)||vt["Arabic Presentation Forms-B"](t))}function Kd(t){return!(t!==746&&t!==747&&(t<4352||!(vt["Bopomofo Extended"](t)||vt.Bopomofo(t)||vt["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||vt["CJK Compatibility Ideographs"](t)||vt["CJK Compatibility"](t)||vt["CJK Radicals Supplement"](t)||vt["CJK Strokes"](t)||!(!vt["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||t===12336)||vt["CJK Unified Ideographs Extension A"](t)||vt["CJK Unified Ideographs"](t)||vt["Enclosed CJK Letters and Months"](t)||vt["Hangul Compatibility Jamo"](t)||vt["Hangul Jamo Extended-A"](t)||vt["Hangul Jamo Extended-B"](t)||vt["Hangul Jamo"](t)||vt["Hangul Syllables"](t)||vt.Hiragana(t)||vt["Ideographic Description Characters"](t)||vt.Kanbun(t)||vt["Kangxi Radicals"](t)||vt["Katakana Phonetic Extensions"](t)||vt.Katakana(t)&&t!==12540||!(!vt["Halfwidth and Fullwidth Forms"](t)||t===65288||t===65289||t===65293||t>=65306&&t<=65310||t===65339||t===65341||t===65343||t>=65371&&t<=65503||t===65507||t>=65512&&t<=65519)||!(!vt["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||vt["Unified Canadian Aboriginal Syllabics"](t)||vt["Unified Canadian Aboriginal Syllabics Extended"](t)||vt["Vertical Forms"](t)||vt["Yijing Hexagram Symbols"](t)||vt["Yi Syllables"](t)||vt["Yi Radicals"](t))))}function Ou(t){return!(Kd(t)||function(e){return!!(vt["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||vt["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||vt["Letterlike Symbols"](e)||vt["Number Forms"](e)||vt["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||vt["Control Pictures"](e)&&e!==9251||vt["Optical Character Recognition"](e)||vt["Enclosed Alphanumerics"](e)||vt["Geometric Shapes"](e)||vt["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||vt["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||vt["CJK Symbols and Punctuation"](e)||vt.Katakana(e)||vt["Private Use Area"](e)||vt["CJK Compatibility Forms"](e)||vt["Small Form Variants"](e)||vt["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(t))}function zu(t){return t>=1424&&t<=2303||vt["Arabic Presentation Forms-A"](t)||vt["Arabic Presentation Forms-B"](t)}function k1(t,e){return!(!e&&zu(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||vt.Khmer(t))}function D1(t){for(const e of t)if(zu(e.charCodeAt(0)))return!0;return!1}const Xd="deferred",Yd="loading",Jd="loaded";let $s=null,u="unavailable",n=null;const l=function(t){t&&typeof t=="string"&&t.indexOf("NetworkError")>-1&&(u="error"),$s&&$s(t)};function f(){g.fire(new Gi("pluginStateChange",{pluginStatus:u,pluginURL:n}))}const g=new Ro,y=function(){return u},w=function(){if(u!==Xd||!n)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");u=Yd,f(),n&&Si({url:n},t=>{t?l(t):(u=Jd,f())})},E={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>u===Jd||E.applyArabicShaping!=null,isLoading:()=>u===Yd,setState(t){u=t.pluginStatus,n=t.pluginURL},isParsed:()=>E.applyArabicShaping!=null&&E.processBidirectionalText!=null&&E.processStyledBidirectionalText!=null,getPluginURL:()=>n};class C{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,i){for(const d of r)if(!k1(d.charCodeAt(0),i))return!1;return!0}(e,E.isLoaded())}}class R{constructor(e,r){this.property=e,this.value=r,this.expression=function(i,d){if(da(i))return new hl(i,d);if(_s(i)){const h=ua(i,d);if(h.result==="error")throw new Error(h.value.map(p=>`${p.key}: ${p.message}`).join(", "));return h.value}{let h=i;return typeof i=="string"&&d.type==="color"&&(h=Fr.parse(i)),{kind:"constant",evaluate:()=>h}}}(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)}}class L{constructor(e){this.property=e,this.value=new R(e,void 0)}transitioned(e,r){return new Z(this.property,this.value,r,er({},e.transition,this.transition),e.now)}untransitioned(){return new Z(this.property,this.value,null,{},0)}}class z{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return dn(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new L(this._values[e].property)),this._values[e].value=new R(this._values[e].property,r===null?void 0:dn(r))}getTransition(e){return dn(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new L(this._values[e].property)),this._values[e].transition=dn(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const i=this.getValue(r);i!==void 0&&(e[r]=i);const d=this.getTransition(r);d!==void 0&&(e[`${r}-transition`]=d)}return e}transitioned(e,r){const i=new W(this._properties);for(const d of Object.keys(this._values))i._values[d]=this._values[d].transitioned(e,r._values[d]);return i}untransitioned(){const e=new W(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class Z{constructor(e,r,i,d,h){const p=d.delay||0,_=d.duration||0;h=h||0,this.property=e,this.value=r,this.begin=h+p,this.end=this.begin+_,e.specification.transition&&(d.delay||d.duration)&&(this.prior=i)}possiblyEvaluate(e,r,i){const d=e.now||0,h=this.value.possiblyEvaluate(e,r,i),p=this.prior;if(p){if(d>this.end)return this.prior=null,h;if(this.value.isDataDriven())return this.prior=null,h;if(d<this.begin)return p.possiblyEvaluate(e,r,i);{const _=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(p.possiblyEvaluate(e,r,i),h,It(_))}}return h}}class W{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,i){const d=new Q(this._properties);for(const h of Object.keys(this._values))d._values[h]=this._values[h].possiblyEvaluate(e,r,i);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class X{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return dn(this._values[e].value)}setValue(e,r){this._values[e]=new R(this._values[e].property,r===null?void 0:dn(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const i=this.getValue(r);i!==void 0&&(e[r]=i)}return e}possiblyEvaluate(e,r,i){const d=new Q(this._properties);for(const h of Object.keys(this._values))d._values[h]=this._values[h].possiblyEvaluate(e,r,i);return d}}class K{constructor(e,r,i){this.property=e,this.value=r,this.parameters=i}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,i,d){return this.property.evaluate(this.value,this.parameters,e,r,i,d)}}class Q{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class B{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,i){const d=na[this.specification.type];return d?d(e,r,i):e}}class H{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,i,d){return new K(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,d)}:e.expression,r)}interpolate(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new K(this,{kind:"constant",value:void 0},e.parameters);const d=na[this.specification.type];return d?new K(this,{kind:"constant",value:d(e.value.value,r.value.value,i)},e.parameters):e}evaluate(e,r,i,d,h,p){return e.kind==="constant"?e.value:e.evaluate(r,i,d,h,p)}}class re{constructor(e){this.specification=e}possiblyEvaluate(e,r,i,d){return!!e.expression.evaluate(r,null,{},i,d)}interpolate(){return!1}}class ne{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new C(0,{});for(const i in e){const d=e[i];d.specification.overridable&&this.overridableProperties.push(i);const h=this.defaultPropertyValues[i]=new R(d,void 0),p=this.defaultTransitionablePropertyValues[i]=new L(d);this.defaultTransitioningPropertyValues[i]=p.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate(r)}}}function fe(t,e){return 256*(t=ut(Math.floor(t),0,255))+ut(Math.floor(e),0,255)}$t(H,"DataDrivenProperty"),$t(B,"DataConstantProperty"),$t(re,"ColorRampProperty");const me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class pe{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class we{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function be(t,e=1){let r=0,i=0;return{members:t.map(d=>{const h=me[d.type].BYTES_PER_ELEMENT,p=r=Re(r,Math.max(e,h)),_=d.components||1;return i=Math.max(i,h),r+=h*_,{name:d.name,type:d.type,components:_,offset:p}}),size:Re(r,Math.max(i,e)),alignment:e}}function Re(t,e){return Math.ceil(t/e)*e}class rt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const d=2*e;return this.int16[d+0]=r,this.int16[d+1]=i,e}}rt.prototype.bytesPerElement=4,$t(rt,"StructArrayLayout2i4");class Me extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,i)}emplace(e,r,i,d){const h=3*e;return this.int16[h+0]=r,this.int16[h+1]=i,this.int16[h+2]=d,e}}Me.prototype.bytesPerElement=6,$t(Me,"StructArrayLayout3i6");class Ve extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,d)}emplace(e,r,i,d,h){const p=4*e;return this.int16[p+0]=r,this.int16[p+1]=i,this.int16[p+2]=d,this.int16[p+3]=h,e}}Ve.prototype.bytesPerElement=8,$t(Ve,"StructArrayLayout4i8");class Oe extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,i,d,h,p,_)}emplace(e,r,i,d,h,p,_,x){const b=6*e,T=12*e,A=3*e;return this.int16[b+0]=r,this.int16[b+1]=i,this.uint8[T+4]=d,this.uint8[T+5]=h,this.uint8[T+6]=p,this.uint8[T+7]=_,this.float32[A+2]=x,e}}Oe.prototype.bytesPerElement=12,$t(Oe,"StructArrayLayout2i4ub1f12");class et extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,d)}emplace(e,r,i,d,h){const p=4*e;return this.float32[p+0]=r,this.float32[p+1]=i,this.float32[p+2]=d,this.float32[p+3]=h,e}}et.prototype.bytesPerElement=16,$t(et,"StructArrayLayout4f16");class Le extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,d,h)}emplace(e,r,i,d,h,p){const _=6*e,x=3*e;return this.uint16[_+0]=r,this.uint16[_+1]=i,this.uint16[_+2]=d,this.uint16[_+3]=h,this.float32[x+2]=p,e}}Le.prototype.bytesPerElement=12,$t(Le,"StructArrayLayout4ui1f12");class Ue extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,d)}emplace(e,r,i,d,h){const p=4*e;return this.uint16[p+0]=r,this.uint16[p+1]=i,this.uint16[p+2]=d,this.uint16[p+3]=h,e}}Ue.prototype.bytesPerElement=8,$t(Ue,"StructArrayLayout4ui8");class ot extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,i,d,h,p)}emplace(e,r,i,d,h,p,_){const x=6*e;return this.int16[x+0]=r,this.int16[x+1]=i,this.int16[x+2]=d,this.int16[x+3]=h,this.int16[x+4]=p,this.int16[x+5]=_,e}}ot.prototype.bytesPerElement=12,$t(ot,"StructArrayLayout6i12");class Xe extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_,x,b,T,A,M){const D=this.length;return this.resize(D+1),this.emplace(D,e,r,i,d,h,p,_,x,b,T,A,M)}emplace(e,r,i,d,h,p,_,x,b,T,A,M,D){const O=12*e;return this.int16[O+0]=r,this.int16[O+1]=i,this.int16[O+2]=d,this.int16[O+3]=h,this.uint16[O+4]=p,this.uint16[O+5]=_,this.uint16[O+6]=x,this.uint16[O+7]=b,this.int16[O+8]=T,this.int16[O+9]=A,this.int16[O+10]=M,this.int16[O+11]=D,e}}Xe.prototype.bytesPerElement=24,$t(Xe,"StructArrayLayout4i4ui4i24");class st extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,i,d,h,p)}emplace(e,r,i,d,h,p,_){const x=10*e,b=5*e;return this.int16[x+0]=r,this.int16[x+1]=i,this.int16[x+2]=d,this.float32[b+2]=h,this.float32[b+3]=p,this.float32[b+4]=_,e}}st.prototype.bytesPerElement=20,$t(st,"StructArrayLayout3i3f20");class Mt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}Mt.prototype.bytesPerElement=4,$t(Mt,"StructArrayLayout1ul4");class Ot extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_,x,b,T,A,M,D){const O=this.length;return this.resize(O+1),this.emplace(O,e,r,i,d,h,p,_,x,b,T,A,M,D)}emplace(e,r,i,d,h,p,_,x,b,T,A,M,D,O){const F=20*e,q=10*e;return this.int16[F+0]=r,this.int16[F+1]=i,this.int16[F+2]=d,this.int16[F+3]=h,this.int16[F+4]=p,this.float32[q+3]=_,this.float32[q+4]=x,this.float32[q+5]=b,this.float32[q+6]=T,this.int16[F+14]=A,this.uint32[q+8]=M,this.uint16[F+18]=D,this.uint16[F+19]=O,e}}Ot.prototype.bytesPerElement=40,$t(Ot,"StructArrayLayout5i4f1i1ul2ui40");class wt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,i,d,h,p,_)}emplace(e,r,i,d,h,p,_,x){const b=8*e;return this.int16[b+0]=r,this.int16[b+1]=i,this.int16[b+2]=d,this.int16[b+4]=h,this.int16[b+5]=p,this.int16[b+6]=_,this.int16[b+7]=x,e}}wt.prototype.bytesPerElement=16,$t(wt,"StructArrayLayout3i2i2i16");class kt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,d,h)}emplace(e,r,i,d,h,p){const _=4*e,x=8*e;return this.float32[_+0]=r,this.float32[_+1]=i,this.float32[_+2]=d,this.int16[x+6]=h,this.int16[x+7]=p,e}}kt.prototype.bytesPerElement=16,$t(kt,"StructArrayLayout2f1f2i16");class Yt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,d)}emplace(e,r,i,d,h){const p=12*e,_=3*e;return this.uint8[p+0]=r,this.uint8[p+1]=i,this.float32[_+1]=d,this.float32[_+2]=h,e}}Yt.prototype.bytesPerElement=12,$t(Yt,"StructArrayLayout2ub2f12");class Xt extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,i)}emplace(e,r,i,d){const h=3*e;return this.float32[h+0]=r,this.float32[h+1]=i,this.float32[h+2]=d,e}}Xt.prototype.bytesPerElement=12,$t(Xt,"StructArrayLayout3f12");class At extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,i)}emplace(e,r,i,d){const h=3*e;return this.uint16[h+0]=r,this.uint16[h+1]=i,this.uint16[h+2]=d,e}}At.prototype.bytesPerElement=6,$t(At,"StructArrayLayout3ui6");class lr extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he){const ue=this.length;return this.resize(ue+1),this.emplace(ue,e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he)}emplace(e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he,ue){const ke=30*e,Pe=15*e,Ne=60*e;return this.int16[ke+0]=r,this.int16[ke+1]=i,this.int16[ke+2]=d,this.float32[Pe+2]=h,this.float32[Pe+3]=p,this.uint16[ke+8]=_,this.uint16[ke+9]=x,this.uint32[Pe+5]=b,this.uint32[Pe+6]=T,this.uint32[Pe+7]=A,this.uint16[ke+16]=M,this.uint16[ke+17]=D,this.uint16[ke+18]=O,this.float32[Pe+10]=F,this.float32[Pe+11]=q,this.uint8[Ne+48]=ee,this.uint8[Ne+49]=de,this.uint8[Ne+50]=te,this.uint32[Pe+13]=se,this.int16[ke+28]=he,this.uint8[Ne+58]=ue,e}}lr.prototype.bytesPerElement=60,$t(lr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class cr extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he,ue,ke,Pe,Ne,nt,ze,qe,He,Qe){const lt=this.length;return this.resize(lt+1),this.emplace(lt,e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he,ue,ke,Pe,Ne,nt,ze,qe,He,Qe)}emplace(e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q,ee,de,te,se,he,ue,ke,Pe,Ne,nt,ze,qe,He,Qe,lt){const Fe=38*e,mt=19*e;return this.int16[Fe+0]=r,this.int16[Fe+1]=i,this.int16[Fe+2]=d,this.float32[mt+2]=h,this.float32[mt+3]=p,this.int16[Fe+8]=_,this.int16[Fe+9]=x,this.int16[Fe+10]=b,this.int16[Fe+11]=T,this.int16[Fe+12]=A,this.int16[Fe+13]=M,this.uint16[Fe+14]=D,this.uint16[Fe+15]=O,this.uint16[Fe+16]=F,this.uint16[Fe+17]=q,this.uint16[Fe+18]=ee,this.uint16[Fe+19]=de,this.uint16[Fe+20]=te,this.uint16[Fe+21]=se,this.uint16[Fe+22]=he,this.uint16[Fe+23]=ue,this.uint16[Fe+24]=ke,this.uint16[Fe+25]=Pe,this.uint16[Fe+26]=Ne,this.uint16[Fe+27]=nt,this.uint16[Fe+28]=ze,this.uint32[mt+15]=qe,this.float32[mt+16]=He,this.float32[mt+17]=Qe,this.float32[mt+18]=lt,e}}cr.prototype.bytesPerElement=76,$t(cr,"StructArrayLayout3i2f6i15ui1ul3f76");class ur extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}ur.prototype.bytesPerElement=4,$t(ur,"StructArrayLayout1f4");class hr extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,d,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,d,h)}emplace(e,r,i,d,h,p){const _=5*e;return this.float32[_+0]=r,this.float32[_+1]=i,this.float32[_+2]=d,this.float32[_+3]=h,this.float32[_+4]=p,e}}hr.prototype.bytesPerElement=20,$t(hr,"StructArrayLayout5f20");class gn extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,d)}emplace(e,r,i,d,h){const p=6*e;return this.uint32[3*e+0]=r,this.uint16[p+2]=i,this.uint16[p+3]=d,this.uint16[p+4]=h,e}}gn.prototype.bytesPerElement=12,$t(gn,"StructArrayLayout1ul3ui12");class sn extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const d=2*e;return this.uint16[d+0]=r,this.uint16[d+1]=i,e}}sn.prototype.bytesPerElement=4,$t(sn,"StructArrayLayout2ui4");class ii extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}ii.prototype.bytesPerElement=2,$t(ii,"StructArrayLayout1ui2");class Mi extends we{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const d=2*e;return this.float32[d+0]=r,this.float32[d+1]=i,e}}Mi.prototype.bytesPerElement=8,$t(Mi,"StructArrayLayout2f8");class Mr extends pe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Mr.prototype.size=40;class fr extends Ot{get(e){return new Mr(this,e)}}$t(fr,"CollisionBoxArray");class ir extends pe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}ir.prototype.size=60;class Zr extends lr{get(e){return new ir(this,e)}}$t(Zr,"PlacedSymbolArray");class Sn extends pe{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Sn.prototype.size=76;class Cr extends cr{get(e){return new Sn(this,e)}}$t(Cr,"SymbolInstanceArray");class On extends ur{getoffsetX(e){return this.float32[1*e+0]}}$t(On,"GlyphOffsetArray");class vl extends rt{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}$t(vl,"SymbolLineVertexArray");class Uo extends pe{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Uo.prototype.size=12;class _a extends gn{get(e){return new Uo(this,e)}}$t(_a,"FeatureIndexArray");class Ji extends sn{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}$t(Ji,"FillExtrusionCentroidArray");const yo=be([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Vo=be([{name:"a_dash",components:4,type:"Uint16"}]);var xl={exports:{}},ya={exports:{}};ya.exports=function(t,e){var r,i,d,h,p,_,x,b;for(i=t.length-(r=3&t.length),d=e,p=3432918353,_=461845907,b=0;b<i;)x=255&t.charCodeAt(b)|(255&t.charCodeAt(++b))<<8|(255&t.charCodeAt(++b))<<16|(255&t.charCodeAt(++b))<<24,++b,d=27492+(65535&(h=5*(65535&(d=(d^=x=(65535&(x=(x=(65535&x)*p+(((x>>>16)*p&65535)<<16)&4294967295)<<15|x>>>17))*_+(((x>>>16)*_&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(x=0,r){case 3:x^=(255&t.charCodeAt(b+2))<<16;case 2:x^=(255&t.charCodeAt(b+1))<<8;case 1:d^=x=(65535&(x=(x=(65535&(x^=255&t.charCodeAt(b)))*p+(((x>>>16)*p&65535)<<16)&4294967295)<<15|x>>>17))*_+(((x>>>16)*_&65535)<<16)&4294967295}return d^=t.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var Qd=ya.exports,$0={exports:{}};$0.exports=function(t,e){for(var r,i=t.length,d=e^i,h=0;i>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(h)|(255&t.charCodeAt(++h))<<8|(255&t.charCodeAt(++h))<<16|(255&t.charCodeAt(++h))<<24))+((1540483477*(r>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++h;switch(i){case 3:d^=(255&t.charCodeAt(h+2))<<16;case 2:d^=(255&t.charCodeAt(h+1))<<8;case 1:d=1540483477*(65535&(d^=255&t.charCodeAt(h)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var w0=Qd,O2=$0.exports;xl.exports=w0,xl.exports.murmur3=w0,xl.exports.murmur2=O2;var O1=We(xl.exports);class Bu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,i,d){this.ids.push(E0(e)),this.positions.push(r,i,d)}getPositions(e){const r=E0(e);let i=0,d=this.ids.length-1;for(;i<d;){const p=i+d>>1;this.ids[p]>=r?d=p:i=p+1}const h=[];for(;this.ids[i]===r;)h.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return h}static serialize(e,r){const i=new Float64Array(e.ids),d=new Uint32Array(e.positions);return z1(i,d,0,i.length-1),r&&r.push(i.buffer,d.buffer),{ids:i,positions:d}}static deserialize(e){const r=new Bu;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function E0(t){const e=+t;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:O1(String(t))}function z1(t,e,r,i){for(;r<i;){const d=t[r+i>>1];let h=r-1,p=i+1;for(;;){do h++;while(t[h]<d);do p--;while(t[p]>d);if(h>=p)break;Fu(t,h,p),Fu(e,3*h,3*p),Fu(e,3*h+1,3*p+1),Fu(e,3*h+2,3*p+2)}p-r<i-p?(z1(t,e,r,p),r=p+1):(z1(t,e,p+1,i),i=p)}}function Fu(t,e,r){const i=t[e];t[e]=t[r],t[r]=i}$t(Bu,"FeaturePositionMap");class Go{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Nu extends Go{constructor(e){super(e),this.current=0}set(e,r,i){this.fetchUniformLocation(e,r)&&this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class T0 extends Go{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,i){this.fetchUniformLocation(e,r)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3])))}}class S0 extends Go{constructor(e){super(e),this.current=Fr.transparent}set(e,r,i){this.fetchUniformLocation(e,r)&&(i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a)))}}const z2=new Float32Array(16),B2=new Float32Array(9),F2=new Float32Array(4);function B1(t){return[fe(255*t.r,255*t.g),fe(255*t.b,255*t.a)]}class ec{constructor(e,r,i){this.value=e,this.uniformNames=r.map(d=>`u_${d}`),this.type=i}setUniform(e,r,i,d,h){r.set(e,h,d.constantOr(this.value))}getBinding(e,r){return this.type==="color"?new S0(e):new Nu(e)}}class bl{constructor(e,r){this.uniformNames=r.map(i=>`u_${i}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,i,d,h){const p=h==="u_pattern"||h==="u_dash"?this.pattern:h==="u_pixel_ratio"?this.pixelRatio:null;p&&r.set(e,h,p)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new T0(e):new Nu(e)}}class Zo{constructor(e,r,i,d){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(h=>({name:`a_${h}`,type:"Float32",components:i==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(e,r,i,d,h,p){const _=this.paintVertexArray.length,x=this.expression.evaluate(new C(0),r,{},h,d,p);this.paintVertexArray.resize(e),this._setPaintValue(_,e,x)}updatePaintArray(e,r,i,d,h){const p=this.expression.evaluate({zoom:0},i,d,void 0,h);this._setPaintValue(e,r,p)}_setPaintValue(e,r,i){if(this.type==="color"){const d=B1(i);for(let h=e;h<r;h++)this.paintVertexArray.emplace(h,d[0],d[1])}else{for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qi{constructor(e,r,i,d,h,p){this.expression=e,this.uniformNames=r.map(_=>`u_${_}_t`),this.type=i,this.useIntegerZoom=d,this.zoom=h,this.maxValue=0,this.paintVertexAttributes=r.map(_=>({name:`a_${_}`,type:"Float32",components:i==="color"?4:2,offset:0})),this.paintVertexArray=new p}populatePaintArray(e,r,i,d,h,p){const _=this.expression.evaluate(new C(this.zoom),r,{},h,d,p),x=this.expression.evaluate(new C(this.zoom+1),r,{},h,d,p),b=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(b,e,_,x)}updatePaintArray(e,r,i,d,h){const p=this.expression.evaluate({zoom:this.zoom},i,d,void 0,h),_=this.expression.evaluate({zoom:this.zoom+1},i,d,void 0,h);this._setPaintValue(e,r,p,_)}_setPaintValue(e,r,i,d){if(this.type==="color"){const h=B1(i),p=B1(d);for(let _=e;_<r;_++)this.paintVertexArray.emplace(_,h[0],h[1],p[0],p[1])}else{for(let h=e;h<r;h++)this.paintVertexArray.emplace(h,i,d);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,i,d,h){const p=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,_=ut(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);r.set(e,h,_)}getBinding(e,r){return new Nu(e)}}class ws{constructor(e,r,i,d,h){this.expression=e,this.layerId=h,this.paintVertexAttributes=(i==="array"?Vo:yo).members;for(let p=0;p<r.length;++p);this.paintVertexArray=new d}populatePaintArray(e,r,i){const d=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(d,e,r.patterns&&r.patterns[this.layerId],i)}updatePaintArray(e,r,i,d,h,p){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],p)}_setPaintValues(e,r,i,d){if(!d||!i)return;const h=d[i];if(!h)return;const{tl:p,br:_,pixelRatio:x}=h;for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,p[0],p[1],_[0],_[1],x)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Es{constructor(e,r,i=()=>!0){this.binders={},this._buffers=[];const d=[];for(const h in e.paint._values){if(!i(h))continue;const p=e.paint.get(h);if(!(p instanceof K&&ms(p.property.specification)))continue;const _=j2(h,e.type),x=p.value,b=p.property.specification.type,T=!!p.property.useIntegerZoom,A=h==="line-dasharray"||h.endsWith("pattern"),M=h==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(x.kind!=="constant"||M)if(x.kind==="source"||M||A){const D=C0(h,b,"source");this.binders[h]=A?new ws(x,_,b,D,e.id):new Zo(x,_,b,D),d.push(`/a_${h}`)}else{const D=C0(h,b,"composite");this.binders[h]=new Qi(x,_,b,T,r,D),d.push(`/z_${h}`)}else this.binders[h]=A?new bl(x.value,_):new ec(x.value,_,b),d.push(`/u_${h}`)}this.cacheKey=d.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof Zo||r instanceof Qi?r.maxValue:0}populatePaintArrays(e,r,i,d,h,p){for(const _ in this.binders){const x=this.binders[_];(x instanceof Zo||x instanceof Qi||x instanceof ws)&&x.populatePaintArray(e,r,i,d,h,p)}}setConstantPatternPositions(e){for(const r in this.binders){const i=this.binders[r];i instanceof bl&&i.setConstantPatternPositions(e)}}updatePaintArrays(e,r,i,d,h,p){let _=!1;for(const x in e){const b=r.getPositions(x);for(const T of b){const A=i.feature(T.index);for(const M in this.binders){const D=this.binders[M];if((D instanceof Zo||D instanceof Qi||D instanceof ws)&&D.expression.isStateDependent===!0){const O=d.paint.get(M);D.expression=O.value,D.updatePaintArray(T.start,T.end,A,e[x],h,p),_=!0}}}}return _}defines(){const e=[];for(const r in this.binders){const i=this.binders[r];(i instanceof ec||i instanceof bl)&&e.push(...i.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Zo||i instanceof Qi||i instanceof ws)for(let d=0;d<i.paintVertexAttributes.length;d++)e.push(i.paintVertexAttributes[d].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof ec||i instanceof bl||i instanceof Qi)for(const d of i.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const i in this.binders){const d=this.binders[i];if(d instanceof ec||d instanceof bl||d instanceof Qi)for(const h of d.uniformNames)r.push({name:h,property:i,binding:d.getBinding(e,h)})}return r}setUniforms(e,r,i,d,h){for(const{name:p,property:_,binding:x}of i)this.binders[_].setUniform(e,x,h,d.get(_),p)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof Zo||r instanceof Qi||r instanceof ws)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const i=this.binders[r];(i instanceof Zo||i instanceof Qi||i instanceof ws)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof Zo||r instanceof Qi||r instanceof ws)&&r.destroy()}}}class va{constructor(e,r,i=()=>!0){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new Es(d,r,i);this.needsUpload=!1,this._featureMap=new Bu,this._bufferOffset=0}populatePaintArrays(e,r,i,d,h,p,_){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,r,d,h,p,_);r.id!==void 0&&this._featureMap.add(r.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,i,d,h){for(const p of i)this.needsUpload=this.programConfigurations[p.id].updatePaintArrays(e,this._featureMap,r,p,d,h)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const N2={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function j2(t,e){return N2[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const U2={"line-pattern":{source:Le,composite:Le},"fill-pattern":{source:Le,composite:Le},"fill-extrusion-pattern":{source:Le,composite:Le},"line-dasharray":{source:Ue,composite:Ue}},V2={color:{source:Mi,composite:et},number:{source:ur,composite:Mi}};function C0(t,e,r){const i=U2[t];return i&&i[r]||V2[e][r]}$t(ec,"ConstantBinder"),$t(bl,"PatternConstantBinder"),$t(Zo,"SourceExpressionBinder"),$t(ws,"PatternCompositeBinder"),$t(Qi,"CompositeExpressionBinder"),$t(Es,"ProgramConfiguration",{omit:["_buffers"]}),$t(va,"ProgramConfigurationSet");const A0="-transition";class eo extends Ro{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new X(r.layout)),r.paint)){this._transitionablePaint=new z(r.paint);for(const i in e.paint)this.setPaintProperty(i,e.paint[i],{validate:!1});for(const i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Q(r.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,i={}){r!=null&&this._validate(P1,`layers.${this.id}.layout.${e}`,e,r,i)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return wi(e,A0)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,i={}){if(r!=null&&this._validate(M1,`layers.${this.id}.paint.${e}`,e,r,i))return!1;if(wi(e,A0))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const d=this._transitionablePaint._values[e],h=d.value.isDataDriven(),p=d.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const _=this._transitionablePaint._values[e].value,x=_.isDataDriven(),b=wi(e,"pattern")||e==="line-dasharray";return x||h||b||this._handleOverridablePaintPropertyUpdate(e,p,_)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),ui(e,(r,i)=>!(r===void 0||i==="layout"&&!Object.keys(r).length||i==="paint"&&!Object.keys(r).length))}_validate(e,r,i,d,h={}){return(!h||h.validate!==!1)&&ku(this,e.call(Ru,{key:r,layerType:this.type,objectKey:i,value:d,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof K&&ms(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ml(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const G2=be([{name:"a_pos",components:2,type:"Int16"}],4),Z2=be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class qr{constructor(e=[]){this.segments=e}prepareSegment(e,r,i,d){let h=this.segments[this.segments.length-1];return e>qr.MAX_VERTEX_ARRAY_LENGTH&&yr(`Max vertices per segment is ${qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!h||h.vertexLength+e>qr.MAX_VERTEX_ARRAY_LENGTH||h.sortKey!==d)&&(h={vertexOffset:r.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},d!==void 0&&(h.sortKey=d),this.segments.push(h)),h}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,i,d){return new qr([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:d,vaos:{},sortKey:0}])}}qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t(qr,"SegmentVector");var Rt=8192;class Ts{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof pr?new pr(e.lng,e.lat):pr.convert(e),this}setSouthWest(e){return this._sw=e instanceof pr?new pr(e.lng,e.lat):pr.convert(e),this}extend(e){const r=this._sw,i=this._ne;let d,h;if(e instanceof pr)d=e,h=e;else{if(!(e instanceof Ts))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ts.convert(e)):this.extend(pr.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(pr.convert(e)):this;if(d=e._sw,h=e._ne,!d||!h)return this}return r||i?(r.lng=Math.min(d.lng,r.lng),r.lat=Math.min(d.lat,r.lat),i.lng=Math.max(h.lng,i.lng),i.lat=Math.max(h.lat,i.lat)):(this._sw=new pr(d.lng,d.lat),this._ne=new pr(h.lng,h.lat)),this}getCenter(){return new pr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new pr(this.getWest(),this.getNorth())}getSouthEast(){return new pr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:i}=pr.convert(e);let d=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&d}static convert(e){return!e||e instanceof Ts?e:new Ts(e)}}var ju=1e-6,oi=typeof Float32Array<"u"?Float32Array:Array;function I0(){var t=new oi(9);return oi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function M0(t,e,r){var i=e[0],d=e[1],h=e[2],p=e[3],_=e[4],x=e[5],b=e[6],T=e[7],A=e[8],M=r[0],D=r[1],O=r[2],F=r[3],q=r[4],ee=r[5],de=r[6],te=r[7],se=r[8];return t[0]=M*i+D*p+O*b,t[1]=M*d+D*_+O*T,t[2]=M*h+D*x+O*A,t[3]=F*i+q*p+ee*b,t[4]=F*d+q*_+ee*T,t[5]=F*h+q*x+ee*A,t[6]=de*i+te*p+se*b,t[7]=de*d+te*_+se*T,t[8]=de*h+te*x+se*A,t}function to(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F1(t,e){var r=e[0],i=e[1],d=e[2],h=e[3],p=e[4],_=e[5],x=e[6],b=e[7],T=e[8],A=e[9],M=e[10],D=e[11],O=e[12],F=e[13],q=e[14],ee=e[15],de=r*_-i*p,te=r*x-d*p,se=r*b-h*p,he=i*x-d*_,ue=i*b-h*_,ke=d*b-h*x,Pe=T*F-A*O,Ne=T*q-M*O,nt=T*ee-D*O,ze=A*q-M*F,qe=A*ee-D*F,He=M*ee-D*q,Qe=de*He-te*qe+se*ze+he*nt-ue*Ne+ke*Pe;return Qe?(t[0]=(_*He-x*qe+b*ze)*(Qe=1/Qe),t[1]=(d*qe-i*He-h*ze)*Qe,t[2]=(F*ke-q*ue+ee*he)*Qe,t[3]=(M*ue-A*ke-D*he)*Qe,t[4]=(x*nt-p*He-b*Ne)*Qe,t[5]=(r*He-d*nt+h*Ne)*Qe,t[6]=(q*se-O*ke-ee*te)*Qe,t[7]=(T*ke-M*se+D*te)*Qe,t[8]=(p*qe-_*nt+b*Pe)*Qe,t[9]=(i*nt-r*qe-h*Pe)*Qe,t[10]=(O*ue-F*se+ee*de)*Qe,t[11]=(A*se-T*ue-D*de)*Qe,t[12]=(_*Ne-p*ze-x*Pe)*Qe,t[13]=(r*ze-i*Ne+d*Pe)*Qe,t[14]=(F*te-O*he-q*de)*Qe,t[15]=(T*he-A*te+M*de)*Qe,t):null}function xa(t,e,r){var i=e[0],d=e[1],h=e[2],p=e[3],_=e[4],x=e[5],b=e[6],T=e[7],A=e[8],M=e[9],D=e[10],O=e[11],F=e[12],q=e[13],ee=e[14],de=e[15],te=r[0],se=r[1],he=r[2],ue=r[3];return t[0]=te*i+se*_+he*A+ue*F,t[1]=te*d+se*x+he*M+ue*q,t[2]=te*h+se*b+he*D+ue*ee,t[3]=te*p+se*T+he*O+ue*de,t[4]=(te=r[4])*i+(se=r[5])*_+(he=r[6])*A+(ue=r[7])*F,t[5]=te*d+se*x+he*M+ue*q,t[6]=te*h+se*b+he*D+ue*ee,t[7]=te*p+se*T+he*O+ue*de,t[8]=(te=r[8])*i+(se=r[9])*_+(he=r[10])*A+(ue=r[11])*F,t[9]=te*d+se*x+he*M+ue*q,t[10]=te*h+se*b+he*D+ue*ee,t[11]=te*p+se*T+he*O+ue*de,t[12]=(te=r[12])*i+(se=r[13])*_+(he=r[14])*A+(ue=r[15])*F,t[13]=te*d+se*x+he*M+ue*q,t[14]=te*h+se*b+he*D+ue*ee,t[15]=te*p+se*T+he*O+ue*de,t}function tc(t,e,r){var i,d,h,p,_,x,b,T,A,M,D,O,F=r[0],q=r[1],ee=r[2];return e===t?(t[12]=e[0]*F+e[4]*q+e[8]*ee+e[12],t[13]=e[1]*F+e[5]*q+e[9]*ee+e[13],t[14]=e[2]*F+e[6]*q+e[10]*ee+e[14],t[15]=e[3]*F+e[7]*q+e[11]*ee+e[15]):(d=e[1],h=e[2],p=e[3],_=e[4],x=e[5],b=e[6],T=e[7],A=e[8],M=e[9],D=e[10],O=e[11],t[0]=i=e[0],t[1]=d,t[2]=h,t[3]=p,t[4]=_,t[5]=x,t[6]=b,t[7]=T,t[8]=A,t[9]=M,t[10]=D,t[11]=O,t[12]=i*F+_*q+A*ee+e[12],t[13]=d*F+x*q+M*ee+e[13],t[14]=h*F+b*q+D*ee+e[14],t[15]=p*F+T*q+O*ee+e[15]),t}function ba(t,e,r){var i=r[0],d=r[1],h=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*d,t[5]=e[5]*d,t[6]=e[6]*d,t[7]=e[7]*d,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function N1(t,e,r){var i=Math.sin(r),d=Math.cos(r),h=e[4],p=e[5],_=e[6],x=e[7],b=e[8],T=e[9],A=e[10],M=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=h*d+b*i,t[5]=p*d+T*i,t[6]=_*d+A*i,t[7]=x*d+M*i,t[8]=b*d-h*i,t[9]=T*d-p*i,t[10]=A*d-_*i,t[11]=M*d-x*i,t}function Uu(t,e,r){var i=Math.sin(r),d=Math.cos(r),h=e[0],p=e[1],_=e[2],x=e[3],b=e[8],T=e[9],A=e[10],M=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*d-b*i,t[1]=p*d-T*i,t[2]=_*d-A*i,t[3]=x*d-M*i,t[8]=h*i+b*d,t[9]=p*i+T*d,t[10]=_*i+A*d,t[11]=x*i+M*d,t}function P0(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L0(t,e,r){var i,d,h,p=r[0],_=r[1],x=r[2],b=Math.hypot(p,_,x);return b<ju?null:(p*=b=1/b,_*=b,x*=b,i=Math.sin(e),d=Math.cos(e),t[0]=p*p*(h=1-d)+d,t[1]=_*p*h+x*i,t[2]=x*p*h-_*i,t[3]=0,t[4]=p*_*h-x*i,t[5]=_*_*h+d,t[6]=x*_*h+p*i,t[7]=0,t[8]=p*x*h+_*i,t[9]=_*x*h-p*i,t[10]=x*x*h+d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var q2=xa;function j1(){var t=new oi(3);return oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function R0(t){var e=new oi(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rc(t){return Math.hypot(t[0],t[1],t[2])}function $l(t,e,r){var i=new oi(3);return i[0]=t,i[1]=e,i[2]=r,i}function qo(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function U1(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function k0(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function nc(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function ic(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function gi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function oc(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}function zn(t,e){var r=e[0],i=e[1],d=e[2],h=r*r+i*i+d*d;return h>0&&(h=1/Math.sqrt(h)),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h,t}function Pi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function V1(t,e,r){var i=e[0],d=e[1],h=e[2],p=r[0],_=r[1],x=r[2];return t[0]=d*x-h*_,t[1]=h*p-i*x,t[2]=i*_-d*p,t}function Nr(t,e,r){var i=e[0],d=e[1],h=e[2],p=r[3]*i+r[7]*d+r[11]*h+r[15];return t[0]=(r[0]*i+r[4]*d+r[8]*h+r[12])/(p=p||1),t[1]=(r[1]*i+r[5]*d+r[9]*h+r[13])/p,t[2]=(r[2]*i+r[6]*d+r[10]*h+r[14])/p,t}function D0(t,e,r){var i=r[0],d=r[1],h=r[2],p=e[0],_=e[1],x=e[2],b=d*x-h*_,T=h*p-i*x,A=i*_-d*p,M=d*A-h*T,D=h*b-i*A,O=i*T-d*b,F=2*r[3];return T*=F,A*=F,D*=2,O*=2,t[0]=p+(b*=F)+(M*=2),t[1]=_+T+D,t[2]=x+A+O,t}var sc,ro=U1,H2=k0,W2=rc;function O0(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function z0(t,e){var r=e[0],i=e[1],d=e[2],h=e[3],p=r*r+i*i+d*d+h*h;return p>0&&(p=1/Math.sqrt(p)),t[0]=r*p,t[1]=i*p,t[2]=d*p,t[3]=h*p,t}function $a(t,e,r){var i=e[0],d=e[1],h=e[2],p=e[3];return t[0]=r[0]*i+r[4]*d+r[8]*h+r[12]*p,t[1]=r[1]*i+r[5]*d+r[9]*h+r[13]*p,t[2]=r[2]*i+r[6]*d+r[10]*h+r[14]*p,t[3]=r[3]*i+r[7]*d+r[11]*h+r[15]*p,t}function B0(){var t=new oi(4);return oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function F0(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function N0(t,e,r){r*=.5;var i=e[0],d=e[1],h=e[2],p=e[3],_=Math.sin(r),x=Math.cos(r);return t[0]=i*x+p*_,t[1]=d*x+h*_,t[2]=h*x-d*_,t[3]=p*x-i*_,t}function j0(t,e,r){r*=.5;var i=e[0],d=e[1],h=e[2],p=e[3],_=Math.sin(r),x=Math.cos(r);return t[0]=i*x-h*_,t[1]=d*x+p*_,t[2]=h*x+i*_,t[3]=p*x-d*_,t}j1(),sc=new oi(4),oi!=Float32Array&&(sc[0]=0,sc[1]=0,sc[2]=0,sc[3]=0);var K2=z0;j1(),$l(1,0,0),$l(0,1,0),B0(),B0(),I0();const X2=be([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:U0}=X2,V0=be([{name:"a_pos_3",components:3,type:"Int16"}]);var ac=be([{name:"a_pos",type:"Int16",components:2}]);class G1{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,i){const d=Pi(r,this.dir);if(Math.abs(d)<1e-6)return!1;const h=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/d;return i[0]=this.pos[0]+this.dir[0]*h,i[1]=this.pos[1]+this.dir[1]*h,i[2]=this.pos[2]+this.dir[2]*h,!0}closestPointOnSphere(e,r,i){if(function(D,O){var F=D[0],q=D[1],ee=D[2],de=O[0],te=O[1],se=O[2];return Math.abs(F-de)<=ju*Math.max(1,Math.abs(F),Math.abs(de))&&Math.abs(q-te)<=ju*Math.max(1,Math.abs(q),Math.abs(te))&&Math.abs(ee-se)<=ju*Math.max(1,Math.abs(ee),Math.abs(se))}(this.pos,e)||r===0)return i[0]=i[1]=i[2]=0,!1;const[d,h,p]=this.dir,_=this.pos[0]-e[0],x=this.pos[1]-e[1],b=this.pos[2]-e[2],T=d*d+h*h+p*p,A=2*(_*d+x*h+b*p),M=A*A-4*T*(_*_+x*x+b*b-r*r);if(M<0){const D=Math.max(-A/2,0),O=_+d*D,F=x+h*D,q=b+p*D,ee=Math.hypot(O,F,q);return i[0]=O*r/ee,i[1]=F*r/ee,i[2]=q*r/ee,!1}{const D=(-A-Math.sqrt(M))/(2*T);if(D<0){const O=Math.hypot(_,x,b);return i[0]=_*r/O,i[1]=x*r/O,i[2]=b*r/O,!1}return i[0]=_+d*D,i[1]=x+h*D,i[2]=b+p*D,!0}}}class Z1{constructor(e,r,i,d,h){this.TL=e,this.TR=r,this.BR=i,this.BL=d,this.horizon=h}static fromInvProjectionMatrix(e,r,i){const d=[-1,1,1],h=[1,1,1],p=[1,-1,1],_=[-1,-1,1],x=Nr(d,d,e),b=Nr(h,h,e),T=Nr(p,p,e),A=Nr(_,_,e);return new Z1(x,b,T,A,r/i)}}class q1{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,i,d){const h=Math.pow(2,i),p=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(x=>{const b=$a([],x,e),T=1/b[3]/r*h;return function(A,M,D){return A[0]=M[0]*D[0],A[1]=M[1]*D[1],A[2]=M[2]*D[2],A[3]=M[3]*D[3],A}(b,b,[T,T,d?1/b[3]:T,T])}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(x=>{const b=zn([],V1([],ro([],p[x[0]],p[x[1]]),ro([],p[x[2]],p[x[1]]))),T=-Pi(b,p[x[1]]);return b.concat(T)});return new q1(p,_)}}class Bn{static fromPoints(e){const r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0];for(const d of e)nc(r,r,d),ic(i,i,d);return new Bn(r,i)}static applyTransform(e,r){const i=e.getCorners();for(let d=0;d<i.length;++d)Nr(i[d],i[d],r);return Bn.fromPoints(i)}constructor(e,r){this.min=e,this.max=r,this.center=gi([],qo([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],i=R0(this.min),d=R0(this.max);for(let h=0;h<r.length;h++)i[h]=r[h]?this.min[h]:this.center[h],d[h]=r[h]?this.center[h]:this.max[h];return d[2]=this.max[2],new Bn(i,d)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let i=!0;for(let d=0;d<e.planes.length;d++){const h=e.planes[d];let p=0;for(let _=0;_<r.length;_++)p+=Pi(h,r[_])+h[3]>=0;if(p===0)return 0;p!==r.length&&(i=!1)}if(i)return 2;for(let d=0;d<3;d++){let h=Number.MAX_VALUE,p=-Number.MAX_VALUE;for(let _=0;_<e.points.length;_++){const x=e.points[_][d]-this.min[d];h=Math.min(h,x),p=Math.max(p,x)}if(p<0||h>this.max[d]-this.min[d])return 0}return 1}}const H1=5,G0=6,vo=Rt/Math.PI/2,Y2=16383,wa=64,lc=[wa,32,16],Li=-vo,Ri=vo,J2=[new Bn([Li,Li,Li],[Ri,Ri,Ri]),new Bn([Li,Li,Li],[0,0,Ri]),new Bn([0,Li,Li],[Ri,0,Ri]),new Bn([Li,0,Li],[0,Ri,Ri]),new Bn([0,0,Li],[Ri,Ri,Ri])];function Vu(t){return t*vo/uc}function Z0(t,e,r,i=!0){const d=gi([],t._camera.position,t.worldSize),h=[e,r,1,1];$a(h,h,t.pixelMatrixInverse),O0(h,h,1/h[3]);const p=zn([],ro([],h,d)),_=t.globeMatrix,x=[_[12],_[13],_[14]],b=ro([],x,d),T=rc(b),A=zn([],b),M=t.worldSize/(2*Math.PI),D=Pi(A,p),O=Math.asin(M/T);if(O<Math.acos(D)){if(!i)return null;const nt=[],ze=[];gi(nt,p,T/D),zn(ze,ro(ze,nt,b)),zn(p,qo(p,b,gi(p,ze,Math.tan(O)*T)))}const F=[];new G1(d,p).closestPointOnSphere(x,M,F);const q=zn([],hi(_,0)),ee=zn([],hi(_,1)),de=zn([],hi(_,2)),te=Pi(q,F),se=Pi(ee,F),he=Pi(de,F),ue=_e(Math.asin(-se/M));let ke=_e(Math.atan2(te,he));ke=t.center.lng+function(nt,ze){const qe=(ze-nt+180)%360-180;return qe<-180?qe+360:qe}(t.center.lng,ke);const Pe=bo(ke),Ne=ut($o(ue),0,1);return new Sl(Pe,Ne)}class Q2{constructor(e,r,i){this.a=ro([],e,i),this.b=ro([],r,i),this.center=i;const d=zn([],this.a),h=zn([],this.b);this.angle=Math.acos(Pi(d,h))}}function W1(t,e){if(t.angle===0)return null;let r;return r=t.a[e]===0?1/t.angle*.5*Math.PI:1/t.angle*Math.atan(t.b[e]/t.a[e]/Math.sin(t.angle)-1/Math.tan(t.angle)),r<0||r>1?null:function(i,d,h,p){const _=Math.sin(h);return i*(Math.sin((1-p)*h)/_)+d*(Math.sin(p*h)/_)}(t.a[e],t.b[e],t.angle,ut(r,0,1))+t.center[e]}function xo(t){if(t.z<=1)return J2[t.z+2*t.y+t.x];const e=K1(Gu(t));return Bn.fromPoints(e)}function Ea(t,e,r){return gi(t,t,1-r),oc(t,t,e,r)}function q0(t,e){const r=Tl(e.zoom);if(r===0)return xo(t);const i=Gu(t),d=K1(i),h=bo(i.getWest())*e.worldSize,p=bo(i.getEast())*e.worldSize,_=$o(i.getNorth())*e.worldSize,x=$o(i.getSouth())*e.worldSize,b=[h,_,0],T=[p,_,0],A=[h,x,0],M=[p,x,0],D=F1([],e.globeMatrix);return Nr(b,b,D),Nr(T,T,D),Nr(A,A,D),Nr(M,M,D),d[0]=Ea(d[0],A,r),d[1]=Ea(d[1],M,r),d[2]=Ea(d[2],T,r),d[3]=Ea(d[3],b,r),Bn.fromPoints(d)}function H0(t,e,r){for(const i of t)Nr(i,i,e),gi(i,i,r)}function e4(t,e,r){const i=e/t.worldSize,d=t.globeMatrix;if(r.z<=1){const Pe=xo(r).getCorners();return H0(Pe,d,i),Bn.fromPoints(Pe)}const h=Gu(r),p=K1(h);H0(p,d,i);const _=Number.MAX_VALUE,x=[-_,-_,-_],b=[_,_,_];if(h.contains(t.center)){for(const nt of p)nc(b,b,nt),ic(x,x,nt);x[2]=0;const Pe=t.point,Ne=[Pe.x*i,Pe.y*i,0];return nc(b,b,Ne),ic(x,x,Ne),new Bn(b,x)}const T=[d[12]*i,d[13]*i,d[14]*i],A=h.getCenter(),M=ut(t.center.lat,-yn,yn),D=ut(A.lat,-yn,yn),O=bo(t.center.lng),F=$o(M);let q=O-bo(A.lng);const ee=F-$o(D);q>.5?q-=1:q<-.5&&(q+=1);let de=0;Math.abs(q)>Math.abs(ee)?de=q>=0?1:3:(de=ee>=0?0:2,oc(T,T,[d[4]*i,d[5]*i,d[6]*i],-Math.sin(tt(ee>=0?h.getSouth():h.getNorth()))*vo));const te=p[de],se=p[(de+1)%4],he=new Q2(te,se,T),ue=[W1(he,0)||te[0],W1(he,1)||te[1],W1(he,2)||te[2]],ke=Tl(t.zoom);if(ke>0){const Pe=function({x:nt,y:ze,z:qe},He,Qe,lt,Fe){const mt=1/(1<<qe);let Et=nt*mt,yt=Et+mt,Nt=ze*mt,dt=Nt+mt,Pt=0;const jt=(Et+yt)/2-lt;return jt>.5?Pt=-1:jt<-.5&&(Pt=1),Et=((Et+Pt)*He-(lt*=He))*Qe+lt,yt=((yt+Pt)*He-lt)*Qe+lt,Nt=(Nt*He-(Fe*=He))*Qe+Fe,dt=(dt*He-Fe)*Qe+Fe,[[Et,dt,0],[yt,dt,0],[yt,Nt,0],[Et,Nt,0]]}(r,e,t._pixelsPerMercatorPixel,O,F);for(let nt=0;nt<p.length;nt++)Ea(p[nt],Pe[nt],ke);const Ne=qo([],Pe[de],Pe[(de+1)%4]);gi(Ne,Ne,.5),Ea(ue,Ne,ke)}for(const Pe of p)nc(b,b,Pe),ic(x,x,Pe);return b[2]=Math.min(te[2],se[2]),nc(b,b,ue),ic(x,x,ue),new Bn(b,x)}function Gu({x:t,y:e,z:r}){const i=1/(1<<r),d=new pr(_i(t*i),_n((e+1)*i)),h=new pr(_i((t+1)*i),_n(e*i));return new Ts(d,h)}function K1(t){const e=tt(t.getNorth()),r=tt(t.getSouth()),i=Math.cos(e),d=Math.cos(r),h=Math.sin(e),p=Math.sin(r),_=t.getWest(),x=t.getEast();return[wl(d,p,_),wl(d,p,x),wl(i,h,x),wl(i,h,_)]}function wl(t,e,r,i=vo){return r=tt(r),[t*Math.sin(r)*i,-e*i,t*Math.cos(r)*i]}function El(t,e,r){return wl(Math.cos(tt(t)),Math.sin(tt(t)),e,r)}function dc(t,e,r,i){const d=1<<r.z,h=(t/Rt+r.x)/d;return El(_n((e/Rt+r.y)/d),_i(h),i)}function Zu({min:t,max:e}){return Y2/Math.max(e[0]-t[0],e[1]-t[1],e[2]-t[2])}const W0=new Float64Array(16);function cc(t){const e=Zu(t),r=P0(W0,[e,e,e]);return tc(r,r,((i=[])[0]=-(d=t.min)[0],i[1]=-d[1],i[2]=-d[2],i));var i,d}function X1(t){const e=(i=t.min,(r=W0)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=i[0],r[13]=i[1],r[14]=i[2],r[15]=1,r);var r,i;const d=1/Zu(t);return ba(e,e,[d,d,d])}function K0(t,e,r,i,d){const h=function(x){const b=Rt/(2*Math.PI);return x/(2*Math.PI)/b}(r),p=[t,e,-r/(2*Math.PI)],_=to(new Float64Array(16));return tc(_,_,p),ba(_,_,[h,h,h]),N1(_,_,tt(-d)),Uu(_,_,tt(-i)),_}function Tl(t){return Br(H1,G0,t)}function X0(t,e){const r=El(e.lat,e.lng),i=function(O){const F=El(O._center.lat,O._center.lng);let q=V1([],$l(0,1,0),F);const ee=L0([],-O.angle,F);q=Nr(q,q,ee),L0(ee,-O._pitch,q);const de=zn([],F);return gi(de,de,Vu(O.cameraToCenterDistance/O.pixelsPerMeter)),Nr(de,de,ee),qo([],F,de)}(t);return p=(d=U1([],i,r))[0],_=d[1],x=d[2],b=(h=r)[0],T=h[1],A=h[2],D=(M=Math.sqrt(p*p+_*_+x*x)*Math.sqrt(b*b+T*T+A*A))&&Pi(d,h)/M,Math.acos(Math.min(Math.max(D,-1),1));var d,h,p,_,x,b,T,A,M,D}function Y1(t,e){return X0(t,e)>Math.PI/2*1.01}const Y0=tt(85),t4=Math.cos(Y0),r4=Math.sin(Y0),uc=63710088e-1,J0=2*Math.PI*uc;class Ss{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ss(Qt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,i=this.lat*r,d=e.lat*r,h=Math.sin(i)*Math.sin(d)+Math.cos(i)*Math.cos(d)*Math.cos((e.lng-this.lng)*r);return uc*Math.acos(Math.min(h,1))}toBounds(e=0){const r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new Ts(new Ss(this.lng-i,this.lat-r),new Ss(this.lng+i,this.lat+r))}toEcef(e){const r=Vu(e);return El(this.lat,this.lng,vo+r)}static convert(e){if(e instanceof Ss)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ss(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ss(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var pr=Ss;function J1(t){return J0*Math.cos(t*Math.PI/180)}function bo(t){return(180+t)/360}function $o(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function no(t,e){return t/J1(e)}function _i(t){return 360*t-180}function _n(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Q0(t,e){return t*J1(_n(e))}const yn=85.051129;function em(t){return 1/Math.cos(t*Math.PI/180)}class Sl{constructor(e,r,i=0){this.x=+e,this.y=+r,this.z=+i}static fromLngLat(e,r=0){const i=pr.convert(e);return new Sl(bo(i.lng),$o(i.lat),no(r,i.lat))}toLngLat(){return new pr(_i(this.x),_n(this.y))}toAltitude(){return Q0(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/J0*em(_n(this.y))}}function Q1(t,e,r,i,d,h,p,_,x){const b=(e+i)/2,T=(r+d)/2,A=new ve(b,T);_(A),function(M,D,O,F,q,ee){const de=O-q,te=F-ee;return Math.abs((F-D)*de-(O-M)*te)/Math.hypot(de,te)}(A.x,A.y,h.x,h.y,p.x,p.y)>=x?(Q1(t,e,r,b,T,h,A,_,x),Q1(t,b,T,i,d,A,p,_,x)):t.push(p)}function tm(t,e,r){let i=t[0],d=i.x,h=i.y;e(i);const p=[i];for(let _=1;_<t.length;_++){const x=t[_],{x:b,y:T}=x;e(x),Q1(p,d,h,b,T,i,x,e,r),d=b,h=T,i=x}return p}function ef(t,e,r,i){if(i(e,r)){const d=e.add(r)._mult(.5);ef(t,e,d,i),ef(t,d,r,i)}else t.push(r)}function n4(t,e){let r=t[0];const i=[r];for(let d=1;d<t.length;d++){const h=t[d];ef(i,r,h,e),r=h}return i}const tf=Math.pow(2,14)-1,rm=-tf-1;function i4(t,e){const r=Math.round(t.x*e),i=Math.round(t.y*e);return t.x=ut(r,rm,tf),t.y=ut(i,rm,tf),(r<t.x||r>t.x+1||i<t.y||i>t.y+1)&&yr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function Ho(t,e,r){const i=t.loadGeometry(),d=t.extent,h=Rt/d;if(e&&r&&r.projection.isReprojectedInTileSpace){const p=1<<e.z,{scale:_,x,y:b,projection:T}=r,A=M=>{const D=_i((e.x+M.x/d)/p),O=_n((e.y+M.y/d)/p),F=T.project(D,O);M.x=(F.x*_-x)*d,M.y=(F.y*_-b)*d};for(let M=0;M<i.length;M++)if(t.type!==1)i[M]=tm(i[M],A,1);else{const D=[];for(const O of i[M])O.x<0||O.x>=d||O.y<0||O.y>=d||(A(O),D.push(O));i[M]=D}}for(const p of i)for(const _ of p)i4(_,h);return i}function Ta(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ho(t):[]}}function qu(t,e,r,i,d){t.emplaceBack(2*e+(i+1)/2,2*r+(d+1)/2)}function Hu(t,e,r){t.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class rf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new rt,this.indexArray=new At,this.segments=new qr,this.programConfigurations=new va(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,i,d){const h=this.layers[0],p=[];let _=null;h.type==="circle"&&(_=h.layout.get("circle-sort-key"));for(const{feature:b,id:T,index:A,sourceLayerIndex:M}of e){const D=this.layers[0]._featureFilter.needGeometry,O=Ta(b,D);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),O,i))continue;const F=_?_.evaluate(O,{},i):void 0,q={id:T,properties:b.properties,type:b.type,sourceLayerIndex:M,index:A,geometry:D?O.geometry:Ho(b,i,d),patterns:{},sortKey:F};p.push(q)}_&&p.sort((b,T)=>b.sortKey-T.sortKey);let x=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new ot,x=d.projection);for(const b of p){const{geometry:T,index:A,sourceLayerIndex:M}=b,D=e[A].feature;this.addFeature(b,T,A,r.availableImages,i,x),r.featureIndex.insert(D,T,A,M,this.index)}}update(e,r,i,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,G2.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Z2.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,i,d,h,p){for(const _ of r)for(const x of _){const b=x.x,T=x.y;if(b<0||b>=Rt||T<0||T>=Rt)continue;if(p){const D=p.projectTilePoint(b,T,h),O=p.upVector(h,b,T),F=this.globeExtVertexArray;Hu(F,D,O),Hu(F,D,O),Hu(F,D,O),Hu(F,D,O)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),M=A.vertexLength;qu(this.layoutVertexArray,b,T,-1,-1),qu(this.layoutVertexArray,b,T,1,-1),qu(this.layoutVertexArray,b,T,1,1),qu(this.layoutVertexArray,b,T,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+2,M+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},d,h)}}function nm(t,e){for(let r=0;r<t.length;r++)if(Sa(e,t[r]))return!0;for(let r=0;r<e.length;r++)if(Sa(t,e[r]))return!0;return!!nf(t,e)}function o4(t,e,r){return!!Sa(t,e)||!!of(e,t,r)}function im(t,e){if(t.length===1)return sm(e,t[0]);for(let r=0;r<e.length;r++){const i=e[r];for(let d=0;d<i.length;d++)if(Sa(t,i[d]))return!0}for(let r=0;r<t.length;r++)if(sm(e,t[r]))return!0;for(let r=0;r<e.length;r++)if(nf(t,e[r]))return!0;return!1}function s4(t,e,r){if(t.length>1){if(nf(t,e))return!0;for(let i=0;i<e.length;i++)if(of(e[i],t,r))return!0}for(let i=0;i<t.length;i++)if(of(t[i],e,r))return!0;return!1}function nf(t,e){if(t.length===0||e.length===0)return!1;for(let r=0;r<t.length-1;r++){const i=t[r],d=t[r+1];for(let h=0;h<e.length-1;h++)if(a4(i,d,e[h],e[h+1]))return!0}return!1}function a4(t,e,r,i){return fn(t,r,i)!==fn(e,r,i)&&fn(t,e,r)!==fn(t,e,i)}function of(t,e,r){const i=r*r;if(e.length===1)return t.distSqr(e[0])<i;for(let d=1;d<e.length;d++)if(om(t,e[d-1],e[d])<i)return!0;return!1}function om(t,e,r){const i=e.distSqr(r);if(i===0)return t.distSqr(e);const d=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/i;return t.distSqr(d<0?e:d>1?r:r.sub(e)._mult(d)._add(e))}function sm(t,e){let r,i,d,h=!1;for(let p=0;p<t.length;p++){r=t[p];for(let _=0,x=r.length-1;_<r.length;x=_++)i=r[_],d=r[x],i.y>e.y!=d.y>e.y&&e.x<(d.x-i.x)*(e.y-i.y)/(d.y-i.y)+i.x&&(h=!h)}return h}function Sa(t,e){let r=!1;for(let i=0,d=t.length-1;i<t.length;d=i++){const h=t[i],p=t[d];h.y>e.y!=p.y>e.y&&e.x<(p.x-h.x)*(e.y-h.y)/(p.y-h.y)+h.x&&(r=!r)}return r}function am(t,e,r,i,d){for(const p of t)if(e<=p.x&&r<=p.y&&i>=p.x&&d>=p.y)return!0;const h=[new ve(e,r),new ve(e,d),new ve(i,d),new ve(i,r)];if(t.length>2){for(const p of h)if(Sa(t,p))return!0}for(let p=0;p<t.length-1;p++)if(l4(t[p],t[p+1],h))return!0;return!1}function l4(t,e,r){const i=r[0],d=r[2];if(t.x<i.x&&e.x<i.x||t.x>d.x&&e.x>d.x||t.y<i.y&&e.y<i.y||t.y>d.y&&e.y>d.y)return!1;const h=fn(t,e,r[0]);return h!==fn(t,e,r[1])||h!==fn(t,e,r[2])||h!==fn(t,e,r[3])}function Cl(t,e,r){const i=e.paint.get(t).value;return i.kind==="constant"?i.value:r.programConfigurations.get(e.id).getMaxValue(t)}function Wu(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function lm(t,e,r,i,d){if(!e[0]&&!e[1])return t;const h=ve.convert(e)._mult(d);r==="viewport"&&h._rotate(-i);const p=[];for(let _=0;_<t.length;_++)p.push(t[_].sub(h));return p}function dm(t,e,r,i){const d=ve.convert(t)._mult(i);return e==="viewport"&&d._rotate(-r),d}$t(rf,"CircleBucket",{omit:["layers"]});const d4=new ne({"circle-sort-key":new H(Te.layout_circle["circle-sort-key"])});var c4={paint:new ne({"circle-radius":new H(Te.paint_circle["circle-radius"]),"circle-color":new H(Te.paint_circle["circle-color"]),"circle-blur":new H(Te.paint_circle["circle-blur"]),"circle-opacity":new H(Te.paint_circle["circle-opacity"]),"circle-translate":new B(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new B(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new B(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new B(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new H(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new H(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new H(Te.paint_circle["circle-stroke-opacity"])}),layout:d4};function cm(t,e,r,i,d,h,p,_,x){if(h&&t.queryGeometry.isAboveHorizon)return!1;h&&(x*=t.pixelToTileUnitsFactor);const b=t.tileID.canonical,T=r.projection.upVectorScale(b,r.center.lat,r.worldSize).metersToTile;for(const A of e)for(const M of A){const D=M.add(_),O=d&&r.elevation?r.elevation.exaggeration()*d.getElevationAt(D.x,D.y,!0):0,F=r.projection.projectTilePoint(D.x,D.y,b);if(O>0){const te=r.projection.upVector(b,D.x,D.y);F.x+=te[0]*T*O,F.y+=te[1]*T*O,F.z+=te[2]*T*O}const q=h?D:u4(F.x,F.y,F.z,i),ee=h?t.tilespaceRays.map(te=>f4(te,O)):t.queryGeometry.screenGeometry,de=$a([],[F.x,F.y,F.z,1],i);if(!p&&h?x*=de[3]/r.cameraToCenterDistance:p&&!h&&(x*=r.cameraToCenterDistance/de[3]),h){const te=_n((M.y/Rt+b.y)/(1<<b.z));x/=r.projection.pixelsPerMeter(te,1)/no(1,te)}if(o4(ee,q,x))return!0}return!1}function u4(t,e,r,i){const d=$a([],[t,e,r,1],i);return new ve(d[0]/d[3],d[1]/d[3])}const um=$l(0,0,0),h4=$l(0,0,1);function f4(t,e){const r=j1();return um[2]=e,t.intersectsPlane(um,h4,r),new ve(r[0],r[1])}class hm extends rf{}function fm(t,{width:e,height:r},i,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*r*i)throw new RangeError("mismatched image size")}else d=new Uint8Array(e*r*i);return t.width=e,t.height=r,t.data=d,t}function pm(t,e,r){const{width:i,height:d}=e;i===t.width&&d===t.height||(sf(t,e,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,i),height:Math.min(t.height,d)},r),t.width=i,t.height=d,t.data=e.data)}function sf(t,e,r,i,d,h){if(d.width===0||d.height===0)return e;if(d.width>t.width||d.height>t.height||r.x>t.width-d.width||r.y>t.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||i.x>e.width-d.width||i.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const p=t.data,_=e.data;for(let x=0;x<d.height;x++){const b=((r.y+x)*t.width+r.x)*h,T=((i.y+x)*e.width+i.x)*h;for(let A=0;A<d.width*h;A++)_[T+A]=p[b+A]}return e}$t(hm,"HeatmapBucket",{omit:["layers"]});class Wo{constructor(e,r){fm(this,e,1,r)}resize(e){pm(this,new Wo(e),1)}clone(){return new Wo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,i,d,h){sf(e,r,i,d,h,1)}}class si{constructor(e,r){fm(this,e,4,r)}resize(e){pm(this,new si(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new si({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,i,d,h){sf(e,r,i,d,h,4)}}$t(Wo,"AlphaImage"),$t(si,"RGBAImage");var p4={paint:new ne({"heatmap-radius":new H(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new H(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new B(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new re(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new B(Te.paint_heatmap["heatmap-opacity"])})};function af(t){const e={},r=t.resolution||256,i=t.clips?t.clips.length:1,d=t.image||new si({width:r,height:i}),h=(p,_,x)=>{e[t.evaluationKey]=x;const b=t.expression.evaluate(e);d.data[p+_+0]=Math.floor(255*b.r/b.a),d.data[p+_+1]=Math.floor(255*b.g/b.a),d.data[p+_+2]=Math.floor(255*b.b/b.a),d.data[p+_+3]=Math.floor(255*b.a)};if(t.clips)for(let p=0,_=0;p<i;++p,_+=4*r)for(let x=0,b=0;x<r;x++,b+=4){const T=x/(r-1),{start:A,end:M}=t.clips[p];h(_,b,A*(1-T)+M*T)}else for(let p=0,_=0;p<r;p++,_+=4)h(0,_,p/(r-1));return d}var m4={paint:new ne({"hillshade-illumination-direction":new B(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new B(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new B(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new B(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new B(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new B(Te.paint_hillshade["hillshade-accent-color"])})};const g4=be([{name:"a_pos",components:2,type:"Int16"}],4),{members:_4}=g4;var lf={exports:{}};function Ku(t,e,r){r=r||2;var i,d,h,p,_,x,b,T=e&&e.length,A=T?e[0]*r:t.length,M=mm(t,0,A,r,!0),D=[];if(!M||M.next===M.prev)return D;if(T&&(M=function(F,q,ee,de){var te,se,he,ue=[];for(te=0,se=q.length;te<se;te++)(he=mm(F,q[te]*de,te<se-1?q[te+1]*de:F.length,de,!1))===he.next&&(he.steiner=!0),ue.push(T4(he));for(ue.sort($4),te=0;te<ue.length;te++)ee=w4(ue[te],ee);return ee}(t,e,M,r)),t.length>80*r){i=h=t[0],d=p=t[1];for(var O=r;O<A;O+=r)(_=t[O])<i&&(i=_),(x=t[O+1])<d&&(d=x),_>h&&(h=_),x>p&&(p=x);b=(b=Math.max(h-i,p-d))!==0?32767/b:0}return hc(M,D,r,i,d,b,0),D}function mm(t,e,r,i,d){var h,p;if(d===uf(t,e,r,i)>0)for(h=e;h<r;h+=i)p=ym(h,t[h],t[h+1],p);else for(h=r-i;h>=e;h-=i)p=ym(h,t[h],t[h+1],p);return p&&Xu(p,p.next)&&(pc(p),p=p.next),p}function Ca(t,e){if(!t)return t;e||(e=t);var r,i=t;do if(r=!1,i.steiner||!Xu(i,i.next)&&Hr(i.prev,i,i.next)!==0)i=i.next;else{if(pc(i),(i=e=i.prev)===i.next)break;r=!0}while(r||i!==e);return e}function hc(t,e,r,i,d,h,p){if(t){!p&&h&&function(T,A,M,D){var O=T;do O.z===0&&(O.z=df(O.x,O.y,A,M,D)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==T);O.prevZ.nextZ=null,O.prevZ=null,function(F){var q,ee,de,te,se,he,ue,ke,Pe=1;do{for(ee=F,F=null,se=null,he=0;ee;){for(he++,de=ee,ue=0,q=0;q<Pe&&(ue++,de=de.nextZ);q++);for(ke=Pe;ue>0||ke>0&&de;)ue!==0&&(ke===0||!de||ee.z<=de.z)?(te=ee,ee=ee.nextZ,ue--):(te=de,de=de.nextZ,ke--),se?se.nextZ=te:F=te,te.prevZ=se,se=te;ee=de}se.nextZ=null,Pe*=2}while(he>1)}(O)}(t,i,d,h);for(var _,x,b=t;t.prev!==t.next;)if(_=t.prev,x=t.next,h?v4(t,i,d,h):y4(t))e.push(_.i/r|0),e.push(t.i/r|0),e.push(x.i/r|0),pc(t),t=x.next,b=x.next;else if((t=x)===b){p?p===1?hc(t=x4(Ca(t),e,r),e,r,i,d,h,2):p===2&&b4(t,e,r,i,d,h):hc(Ca(t),e,r,i,d,h,1);break}}}function y4(t){var e=t.prev,r=t,i=t.next;if(Hr(e,r,i)>=0)return!1;for(var d=e.x,h=r.x,p=i.x,_=e.y,x=r.y,b=i.y,T=d<h?d<p?d:p:h<p?h:p,A=_<x?_<b?_:b:x<b?x:b,M=d>h?d>p?d:p:h>p?h:p,D=_>x?_>b?_:b:x>b?x:b,O=i.next;O!==e;){if(O.x>=T&&O.x<=M&&O.y>=A&&O.y<=D&&Al(d,_,h,x,p,b,O.x,O.y)&&Hr(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function v4(t,e,r,i){var d=t.prev,h=t,p=t.next;if(Hr(d,h,p)>=0)return!1;for(var _=d.x,x=h.x,b=p.x,T=d.y,A=h.y,M=p.y,D=_<x?_<b?_:b:x<b?x:b,O=T<A?T<M?T:M:A<M?A:M,F=_>x?_>b?_:b:x>b?x:b,q=T>A?T>M?T:M:A>M?A:M,ee=df(D,O,e,r,i),de=df(F,q,e,r,i),te=t.prevZ,se=t.nextZ;te&&te.z>=ee&&se&&se.z<=de;){if(te.x>=D&&te.x<=F&&te.y>=O&&te.y<=q&&te!==d&&te!==p&&Al(_,T,x,A,b,M,te.x,te.y)&&Hr(te.prev,te,te.next)>=0||(te=te.prevZ,se.x>=D&&se.x<=F&&se.y>=O&&se.y<=q&&se!==d&&se!==p&&Al(_,T,x,A,b,M,se.x,se.y)&&Hr(se.prev,se,se.next)>=0))return!1;se=se.nextZ}for(;te&&te.z>=ee;){if(te.x>=D&&te.x<=F&&te.y>=O&&te.y<=q&&te!==d&&te!==p&&Al(_,T,x,A,b,M,te.x,te.y)&&Hr(te.prev,te,te.next)>=0)return!1;te=te.prevZ}for(;se&&se.z<=de;){if(se.x>=D&&se.x<=F&&se.y>=O&&se.y<=q&&se!==d&&se!==p&&Al(_,T,x,A,b,M,se.x,se.y)&&Hr(se.prev,se,se.next)>=0)return!1;se=se.nextZ}return!0}function x4(t,e,r){var i=t;do{var d=i.prev,h=i.next.next;!Xu(d,h)&&gm(d,i,i.next,h)&&fc(d,h)&&fc(h,d)&&(e.push(d.i/r|0),e.push(i.i/r|0),e.push(h.i/r|0),pc(i),pc(i.next),i=t=h),i=i.next}while(i!==t);return Ca(i)}function b4(t,e,r,i,d,h){var p=t;do{for(var _=p.next.next;_!==p.prev;){if(p.i!==_.i&&S4(p,_)){var x=_m(p,_);return p=Ca(p,p.next),x=Ca(x,x.next),hc(p,e,r,i,d,h,0),void hc(x,e,r,i,d,h,0)}_=_.next}p=p.next}while(p!==t)}function $4(t,e){return t.x-e.x}function w4(t,e){var r=function(d,h){var p,_=h,x=d.x,b=d.y,T=-1/0;do{if(b<=_.y&&b>=_.next.y&&_.next.y!==_.y){var A=_.x+(b-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(A<=x&&A>T&&(T=A,p=_.x<_.next.x?_:_.next,A===x))return p}_=_.next}while(_!==h);if(!p)return null;var M,D=p,O=p.x,F=p.y,q=1/0;_=p;do x>=_.x&&_.x>=O&&x!==_.x&&Al(b<F?x:T,b,O,F,b<F?T:x,b,_.x,_.y)&&(M=Math.abs(b-_.y)/(x-_.x),fc(_,d)&&(M<q||M===q&&(_.x>p.x||_.x===p.x&&E4(p,_)))&&(p=_,q=M)),_=_.next;while(_!==D);return p}(t,e);if(!r)return e;var i=_m(r,t);return Ca(i,i.next),Ca(r,r.next)}function E4(t,e){return Hr(t.prev,t,e.prev)<0&&Hr(e.next,t,t.next)<0}function df(t,e,r,i,d){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*d|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*d|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function T4(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Al(t,e,r,i,d,h,p,_){return(d-p)*(e-_)>=(t-p)*(h-_)&&(t-p)*(i-_)>=(r-p)*(e-_)&&(r-p)*(h-_)>=(d-p)*(i-_)}function S4(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(r,i){var d=r;do{if(d.i!==r.i&&d.next.i!==r.i&&d.i!==i.i&&d.next.i!==i.i&&gm(d,d.next,r,i))return!0;d=d.next}while(d!==r);return!1}(t,e)&&(fc(t,e)&&fc(e,t)&&function(r,i){var d=r,h=!1,p=(r.x+i.x)/2,_=(r.y+i.y)/2;do d.y>_!=d.next.y>_&&d.next.y!==d.y&&p<(d.next.x-d.x)*(_-d.y)/(d.next.y-d.y)+d.x&&(h=!h),d=d.next;while(d!==r);return h}(t,e)&&(Hr(t.prev,t,e.prev)||Hr(t,e.prev,e))||Xu(t,e)&&Hr(t.prev,t,t.next)>0&&Hr(e.prev,e,e.next)>0)}function Hr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Xu(t,e){return t.x===e.x&&t.y===e.y}function gm(t,e,r,i){var d=Ju(Hr(t,e,r)),h=Ju(Hr(t,e,i)),p=Ju(Hr(r,i,t)),_=Ju(Hr(r,i,e));return d!==h&&p!==_||!(d!==0||!Yu(t,r,e))||!(h!==0||!Yu(t,i,e))||!(p!==0||!Yu(r,t,i))||!(_!==0||!Yu(r,e,i))}function Yu(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ju(t){return t>0?1:t<0?-1:0}function fc(t,e){return Hr(t.prev,t,t.next)<0?Hr(t,e,t.next)>=0&&Hr(t,t.prev,e)>=0:Hr(t,e,t.prev)<0||Hr(t,t.next,e)<0}function _m(t,e){var r=new cf(t.i,t.x,t.y),i=new cf(e.i,e.x,e.y),d=t.next,h=e.prev;return t.next=e,e.prev=t,r.next=d,d.prev=r,i.next=r,r.prev=i,h.next=i,i.prev=h,i}function ym(t,e,r,i){var d=new cf(t,e,r);return i?(d.next=i.next,d.prev=i,i.next.prev=d,i.next=d):(d.prev=d,d.next=d),d}function pc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function cf(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uf(t,e,r,i){for(var d=0,h=e,p=r-i;h<r;h+=i)d+=(t[p]-t[h])*(t[h+1]+t[p+1]),p=h;return d}lf.exports=Ku,lf.exports.default=Ku,Ku.deviation=function(t,e,r,i){var d=e&&e.length,h=Math.abs(uf(t,0,d?e[0]*r:t.length,r));if(d)for(var p=0,_=e.length;p<_;p++)h-=Math.abs(uf(t,e[p]*r,p<_-1?e[p+1]*r:t.length,r));var x=0;for(p=0;p<i.length;p+=3){var b=i[p]*r,T=i[p+1]*r,A=i[p+2]*r;x+=Math.abs((t[b]-t[A])*(t[T+1]-t[b+1])-(t[b]-t[T])*(t[A+1]-t[b+1]))}return h===0&&x===0?0:Math.abs((x-h)/h)},Ku.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,d=0;d<t.length;d++){for(var h=0;h<t[d].length;h++)for(var p=0;p<e;p++)r.vertices.push(t[d][h][p]);d>0&&r.holes.push(i+=t[d-1].length)}return r};var hf=We(lf.exports);function C4(t,e,r,i,d){vm(t,e,r||0,i||t.length-1,d||A4)}function vm(t,e,r,i,d){for(;i>r;){if(i-r>600){var h=i-r+1,p=e-r+1,_=Math.log(h),x=.5*Math.exp(2*_/3),b=.5*Math.sqrt(_*x*(h-x)/h)*(p-h/2<0?-1:1);vm(t,e,Math.max(r,Math.floor(e-p*x/h+b)),Math.min(i,Math.floor(e+(h-p)*x/h+b)),d)}var T=t[e],A=r,M=i;for(mc(t,r,e),d(t[i],T)>0&&mc(t,r,i);A<M;){for(mc(t,A,M),A++,M--;d(t[A],T)<0;)A++;for(;d(t[M],T)>0;)M--}d(t[r],T)===0?mc(t,r,M):mc(t,++M,i),M<=e&&(r=M+1),e<=M&&(i=M-1)}}function mc(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function A4(t,e){return t<e?-1:t>e?1:0}function ff(t,e){const r=t.length;if(r<=1)return[t];const i=[];let d,h;for(let p=0;p<r;p++){const _=Gn(t[p]);_!==0&&(t[p].area=Math.abs(_),h===void 0&&(h=_<0),h===_<0?(d&&i.push(d),d=[t[p]]):d.push(t[p]))}if(d&&i.push(d),e>1)for(let p=0;p<i.length;p++)i[p].length<=e||(C4(i[p],e,1,i[p].length-1,I4),i[p]=i[p].slice(0,e));return i}function I4(t,e){return e.area-t.area}function pf(t,e,r){const i=r.patternDependencies;let d=!1;for(const h of e){const p=h.paint.get(`${t}-pattern`);p.isConstant()||(d=!0);const _=p.constantOr(null);_&&(d=!0,i[_]=!0)}return d}function mf(t,e,r,i,d){const h=d.patternDependencies;for(const p of e){const _=p.paint.get(`${t}-pattern`).value;if(_.kind!=="constant"){let x=_.evaluate({zoom:i},r,{},d.availableImages);x=x&&x.name?x.name:x,h[x]=!0,r.patterns[p.id]=x}}return r}class Qu{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rt,this.indexArray=new At,this.indexArray2=new sn,this.programConfigurations=new va(e.layers,e.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,i,d){this.hasPattern=pf("fill",this.layers,r);const h=this.layers[0].layout.get("fill-sort-key"),p=[];for(const{feature:_,id:x,index:b,sourceLayerIndex:T}of e){const A=this.layers[0]._featureFilter.needGeometry,M=Ta(_,A);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),M,i))continue;const D=h?h.evaluate(M,{},i,r.availableImages):void 0,O={id:x,properties:_.properties,type:_.type,sourceLayerIndex:T,index:b,geometry:A?M.geometry:Ho(_,i,d),patterns:{},sortKey:D};p.push(O)}h&&p.sort((_,x)=>_.sortKey-x.sortKey);for(const _ of p){const{geometry:x,index:b,sourceLayerIndex:T}=_;if(this.hasPattern){const A=mf("fill",this.layers,_,this.zoom,r);this.patternFeatures.push(A)}else this.addFeature(_,x,b,i,{},r.availableImages);r.featureIndex.insert(e[b].feature,x,b,T,this.index)}}update(e,r,i,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i,d)}addFeatures(e,r,i,d,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,r,i,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_4),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,i,d,h,p=[]){for(const _ of ff(r,500)){let x=0;for(const O of _)x+=O.length;const b=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),T=b.vertexLength,A=[],M=[];for(const O of _){if(O.length===0)continue;O!==_[0]&&M.push(A.length/2);const F=this.segments2.prepareSegment(O.length,this.layoutVertexArray,this.indexArray2),q=F.vertexLength;this.layoutVertexArray.emplaceBack(O[0].x,O[0].y),this.indexArray2.emplaceBack(q+O.length-1,q),A.push(O[0].x),A.push(O[0].y);for(let ee=1;ee<O.length;ee++)this.layoutVertexArray.emplaceBack(O[ee].x,O[ee].y),this.indexArray2.emplaceBack(q+ee-1,q+ee),A.push(O[ee].x),A.push(O[ee].y);F.vertexLength+=O.length,F.primitiveLength+=O.length}const D=hf(A,M);for(let O=0;O<D.length;O+=3)this.indexArray.emplaceBack(T+D[O],T+D[O+1],T+D[O+2]);b.vertexLength+=x,b.primitiveLength+=D.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,p,d)}}$t(Qu,"FillBucket",{omit:["layers","patternFeatures"]});const M4=new ne({"fill-sort-key":new H(Te.layout_fill["fill-sort-key"])});var P4={paint:new ne({"fill-antialias":new B(Te.paint_fill["fill-antialias"]),"fill-opacity":new H(Te.paint_fill["fill-opacity"]),"fill-color":new H(Te.paint_fill["fill-color"]),"fill-outline-color":new H(Te.paint_fill["fill-outline-color"]),"fill-translate":new B(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new B(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new H(Te.paint_fill["fill-pattern"])}),layout:M4};const L4=be([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),R4=be([{name:"a_centroid_pos",components:2,type:"Uint16"}]),k4=be([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:D4}=L4;var eh={},O4=ft,xm=Il;function Il(t,e,r,i,d){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=d,t.readFields(z4,this,e)}function z4(t,e,r){t==1?e.id=r.readVarint():t==2?function(i,d){for(var h=i.readVarint()+i.pos;i.pos<h;){var p=d._keys[i.readVarint()],_=d._values[i.readVarint()];d.properties[p]=_}}(r,e):t==3?e.type=r.readVarint():t==4&&(e._geometry=r.pos)}function B4(t){for(var e,r,i=0,d=0,h=t.length,p=h-1;d<h;p=d++)i+=((r=t[p]).x-(e=t[d]).x)*(e.y+r.y);return i}Il.types=["Unknown","Point","LineString","Polygon"],Il.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,d=0,h=0,p=0,_=[];t.pos<r;){if(d<=0){var x=t.readVarint();i=7&x,d=x>>3}if(d--,i===1||i===2)h+=t.readSVarint(),p+=t.readSVarint(),i===1&&(e&&_.push(e),e=[]),e.push(new O4(h,p));else{if(i!==7)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&_.push(e),_},Il.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,i=0,d=0,h=0,p=1/0,_=-1/0,x=1/0,b=-1/0;t.pos<e;){if(i<=0){var T=t.readVarint();r=7&T,i=T>>3}if(i--,r===1||r===2)(d+=t.readSVarint())<p&&(p=d),d>_&&(_=d),(h+=t.readSVarint())<x&&(x=h),h>b&&(b=h);else if(r!==7)throw new Error("unknown command "+r)}return[p,x,_,b]},Il.prototype.toGeoJSON=function(t,e,r){var i,d,h=this.extent*Math.pow(2,r),p=this.extent*t,_=this.extent*e,x=this.loadGeometry(),b=Il.types[this.type];function T(D){for(var O=0;O<D.length;O++){var F=D[O];D[O]=[360*(F.x+p)/h-180,360/Math.PI*Math.atan(Math.exp((180-360*(F.y+_)/h)*Math.PI/180))-90]}}switch(this.type){case 1:var A=[];for(i=0;i<x.length;i++)A[i]=x[i][0];T(x=A);break;case 2:for(i=0;i<x.length;i++)T(x[i]);break;case 3:for(x=function(D){var O=D.length;if(O<=1)return[D];for(var F,q,ee=[],de=0;de<O;de++){var te=B4(D[de]);te!==0&&(q===void 0&&(q=te<0),q===te<0?(F&&ee.push(F),F=[D[de]]):F.push(D[de]))}return F&&ee.push(F),ee}(x),i=0;i<x.length;i++)for(d=0;d<x[i].length;d++)T(x[i][d])}x.length===1?x=x[0]:b="Multi"+b;var M={type:"Feature",geometry:{type:b,coordinates:x},properties:this.properties};return"id"in this&&(M.id=this.id),M};var F4=xm,bm=$m;function $m(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(N4,this,e),this.length=this._features.length}function N4(t,e,r){t===15?e.version=r.readVarint():t===1?e.name=r.readString():t===5?e.extent=r.readVarint():t===2?e._features.push(r.pos):t===3?e._keys.push(r.readString()):t===4&&e._values.push(function(i){for(var d=null,h=i.readVarint()+i.pos;i.pos<h;){var p=i.readVarint()>>3;d=p===1?i.readString():p===2?i.readFloat():p===3?i.readDouble():p===4?i.readVarint64():p===5?i.readVarint():p===6?i.readSVarint():p===7?i.readBoolean():null}return d}(r))}$m.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new F4(this._pbf,e,this.extent,this._keys,this._values)};var j4=bm;function U4(t,e,r){if(t===3){var i=new j4(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}var gf=eh.VectorTile=function(t,e){this.layers=t.readFields(U4,{},e)},th=eh.VectorTileFeature=xm;function rh(t,e,r,i){const d=[],h=i===0?(p,_,x,b,T,A)=>{p.push(new ve(A,x+(A-_)/(b-_)*(T-x)))}:(p,_,x,b,T,A)=>{p.push(new ve(_+(A-x)/(T-x)*(b-_),A))};for(const p of t){const _=[];for(const x of p){if(x.length<=2)continue;const b=[];for(let M=0;M<x.length-1;M++){const D=x[M].x,O=x[M].y,F=x[M+1].x,q=x[M+1].y,ee=i===0?D:O,de=i===0?F:q;ee<e?de>e&&h(b,D,O,F,q,e):ee>r?de<r&&h(b,D,O,F,q,r):b.push(x[M]),de<e&&ee>=e&&h(b,D,O,F,q,e),de>r&&ee<=r&&h(b,D,O,F,q,r)}let T=x[x.length-1];const A=i===0?T.x:T.y;A>=e&&A<=r&&b.push(T),b.length&&(T=b[b.length-1],b[0].x===T.x&&b[0].y===T.y||b.push(b[0]),_.push(b))}_.length&&d.push(_)}return d}eh.VectorTileLayer=bm;const V4=th.types,G4=Math.pow(2,13);function gc(t,e,r,i,d,h,p,_){t.emplaceBack((e<<1)+p,(r<<1)+h,(Math.floor(i*G4)<<1)+d,Math.round(_))}function _c(t,e,r){t.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class wm{constructor(){this.acc=new ve(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ve(e.x,e.y),this.max=new ve(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const i=this.min,d=this.max;e.x<i.x?i.x=e.x:e.x>d.x&&(d.x=e.x),e.y<i.y?i.y=e.y:e.y>d.y&&(d.y=e.y),((e.x===0||e.x===Rt)&&e.x===r.x)!=((e.y===0||e.y===Rt)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,tr(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>Rt!=e.x>Rt&&this.addBorderIntersection(1,tr(r.y,e.y,(Rt-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,tr(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>Rt!=e.y>Rt&&this.addBorderIntersection(3,tr(r.x,e.x,(Rt-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[e];r<i[0]&&(i[0]=r),r>i[1]&&(i[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const i=e.x===0?0:1;this.addBorderIntersection(i,r.y),this.addBorderIntersection(i,e.y)}else{const i=e.y===0?2:3;this.addBorderIntersection(i,r.x),this.addBorderIntersection(i,e.x)}}centroid(){const e=this.polyCount.reduce((r,i)=>r+i.edges,0);return e!==0?this.acc.div(e)._round():new ve(0,0)}span(){return new ve(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class yc{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Ve,this.centroidVertexArray=new Ji,this.indexArray=new At,this.programConfigurations=new va(e.layers,e.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,i,d){this.features=[],this.hasPattern=pf("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(h){const p=Math.exp(Math.PI*(1-h.y/(1<<h.z)*2));return 80150034*p/(p*p+1)/Rt/(1<<h.z)}(i),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:h,id:p,index:_,sourceLayerIndex:x}of e){const b=this.layers[0]._featureFilter.needGeometry,T=Ta(h,b);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),T,i))continue;const A={id:p,sourceLayerIndex:x,index:_,geometry:b?T.geometry:Ho(h,i,d),properties:h.properties,type:h.type,patterns:{}},M=this.layoutVertexArray.length;this.hasPattern?this.features.push(mf("fill-extrusion",this.layers,A,this.zoom,r)):this.addFeature(A,A.geometry,_,i,{},r.availableImages,d),r.featureIndex.insert(h,A.geometry,_,x,this.index,M)}this.sortBorders()}addFeatures(e,r,i,d,h){for(const p of this.features){const{geometry:_}=p;this.addFeature(p,_,p.index,r,i,d,h)}this.sortBorders()}update(e,r,i,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,D4),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,k4.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,R4.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,i,d,h,p,_){const x=[new ve(0,0),new ve(Rt,Rt)],b=_.projection,T=b.name==="globe",A=this.enableTerrain&&!T?new wm:null,M=V4[e.type]==="Polygon";T&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ot);const D=ff(r,500);for(let ee=D.length-1;ee>=0;ee--){const de=D[ee];(de.length===0||(O=de[0]).every(te=>te.x<=0)||O.every(te=>te.x>=Rt)||O.every(te=>te.y<=0)||O.every(te=>te.y>=Rt))&&D.splice(ee,1)}var O;let F;if(T)F=Mm(D,x,d);else{F=[];for(const ee of D)F.push({polygon:ee,bounds:x})}const q=M?this.edgeRadius:0;for(const{polygon:ee,bounds:de}of F){let te=0,se=0;for(const ue of ee)M&&!ue[0].equals(ue[ue.length-1])&&ue.push(ue[0]),se+=M?ue.length-1:ue.length;const he=this.segments.prepareSegment((M?5:4)*se,this.layoutVertexArray,this.indexArray);if(M){const ue=[],ke=[];te=he.vertexLength;for(const Ne of ee){let nt,ze;Ne.length&&Ne!==ee[0]&&ke.push(ue.length/2),nt=Ne[1].sub(Ne[0])._perp()._unit();for(let qe=1;qe<Ne.length;qe++){const He=Ne[qe],Qe=Ne[qe===Ne.length-1?1:qe+1];let{x:lt,y:Fe}=He;if(q){ze=Qe.sub(He)._perp()._unit();const mt=nt.add(ze)._unit(),Et=q*Math.min(4,1/(nt.x*mt.x+nt.y*mt.y));lt+=Et*mt.x,Fe+=Et*mt.y,nt=ze}gc(this.layoutVertexArray,lt,Fe,0,0,1,1,0),he.vertexLength++,ue.push(He.x,He.y),T&&_c(this.layoutVertexExtArray,b.projectTilePoint(lt,Fe,d),b.upVector(d,lt,Fe))}}const Pe=hf(ue,ke);for(let Ne=0;Ne<Pe.length;Ne+=3)this.indexArray.emplaceBack(te+Pe[Ne],te+Pe[Ne+2],te+Pe[Ne+1]),he.primitiveLength++}for(const ue of ee){A&&ue.length&&A.startRing(ue[0]);let ke,Pe,Ne,nt=ue.length>4&&Cm(ue[ue.length-2],ue[0],ue[1]),ze=q?Z4(ue[ue.length-2],ue[0],ue[1],q):0;Pe=ue[1].sub(ue[0])._perp()._unit();let qe=!0;for(let He=1,Qe=0;He<ue.length;He++){let lt=ue[He-1],Fe=ue[He];const mt=ue[He===ue.length-1?1:He+1];if(A&&M&&A.currentPolyCount.top++,Sm(Fe,lt,de)){q&&(Pe=mt.sub(Fe)._perp()._unit(),qe=!qe);continue}A&&A.append(Fe,lt);const Et=Fe.sub(lt)._perp(),yt=Et.x/(Math.abs(Et.x)+Math.abs(Et.y)),Nt=Et.y>0?1:0,dt=lt.dist(Fe);if(Qe+dt>32768&&(Qe=0),q){Ne=mt.sub(Fe)._perp()._unit();let Ut=Tm(lt,Fe,mt,Em(Pe,Ne),q);isNaN(Ut)&&(Ut=0);const Dt=Fe.sub(lt)._unit();lt=lt.add(Dt.mult(ze))._round(),Fe=Fe.add(Dt.mult(-Ut))._round(),ze=Ut,Pe=Ne}const Pt=he.vertexLength,jt=ue.length>4&&Cm(lt,Fe,mt);let nr=Am(Qe,nt,qe);if(gc(this.layoutVertexArray,lt.x,lt.y,yt,Nt,0,0,nr),gc(this.layoutVertexArray,lt.x,lt.y,yt,Nt,0,1,nr),Qe+=dt,nr=Am(Qe,jt,!qe),nt=jt,gc(this.layoutVertexArray,Fe.x,Fe.y,yt,Nt,0,0,nr),gc(this.layoutVertexArray,Fe.x,Fe.y,yt,Nt,0,1,nr),he.vertexLength+=4,this.indexArray.emplaceBack(Pt+0,Pt+1,Pt+2),this.indexArray.emplaceBack(Pt+1,Pt+3,Pt+2),he.primitiveLength+=2,q){const Ut=te+(He===1?ue.length-2:He-2),Dt=He===1?te:Ut+1;if(this.indexArray.emplaceBack(Pt+1,Ut,Pt+3),this.indexArray.emplaceBack(Ut,Dt,Pt+3),he.primitiveLength+=2,ke===void 0&&(ke=Pt),!Sm(mt,ue[He],de)){const Er=He===ue.length-1?ke:he.vertexLength;this.indexArray.emplaceBack(Pt+2,Pt+3,Er),this.indexArray.emplaceBack(Pt+3,Er+1,Er),this.indexArray.emplaceBack(Pt+3,Dt,Er+1),he.primitiveLength+=3}qe=!qe}if(T){const Ut=this.layoutVertexExtArray,Dt=b.projectTilePoint(lt.x,lt.y,d),Er=b.projectTilePoint(Fe.x,Fe.y,d),qt=b.upVector(d,lt.x,lt.y),Ht=b.upVector(d,Fe.x,Fe.y);_c(Ut,Dt,qt),_c(Ut,Dt,qt),_c(Ut,Er,Ht),_c(Ut,Er,Ht)}}M&&(te+=ue.length-1)}}if(A&&A.polyCount.length>0){if(A.borders){A.vertexArrayOffset=this.centroidVertexArray.length;const ee=A.borders,de=this.featuresOnBorder.push(A)-1;for(let te=0;te<4;te++)ee[te][0]!==Number.MAX_VALUE&&this.borders[te].push(de)}this.encodeCentroid(A.borders?void 0:A.centroid(),A)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,p,d)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,i)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[i].borders[e][0])}encodeCentroid(e,r,i=!0){let d,h;if(e)if(e.y!==0){const _=r.span()._mult(this.tileToMeter);d=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(_.x/10)),h=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(_.y/10))}else d=Math.ceil(7*(e.x+450)),h=0;else d=0,h=+i;let p=i?this.centroidVertexArray.length:r.vertexArrayOffset;for(const _ of r.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*_.edges+_.top);for(let x=0;x<_.top;x++)this.centroidVertexArray.emplace(p++,d,h);for(let x=0;x<2*_.edges;x++)this.centroidVertexArray.emplace(p++,0,h),this.centroidVertexArray.emplace(p++,d,h)}}}function Em(t,e){const r=t.add(e)._unit();return t.x*r.x+t.y*r.y}function Z4(t,e,r,i){const d=e.sub(t)._perp()._unit(),h=r.sub(e)._perp()._unit();return Tm(t,e,r,Em(d,h),i)}function Tm(t,e,r,i,d){const h=Math.sqrt(1-i*i);return Math.min(t.dist(e)/3,e.dist(r)/3,d*h/i)}function Sm(t,e,r){return t.x<r[0].x&&e.x<r[0].x||t.x>r[1].x&&e.x>r[1].x||t.y<r[0].y&&e.y<r[0].y||t.y>r[1].y&&e.y>r[1].y}function Cm(t,e,r){if(t.x<0||t.x>=Rt||e.x<0||e.x>=Rt||r.x<0||r.x>=Rt)return!1;const i=r.sub(e),d=i.perp(),h=t.sub(e);return(i.x*h.x+i.y*h.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(h.x*h.x+h.y*h.y))>-.866&&d.x*h.x+d.y*h.y<0}function Am(t,e,r){const i=e?2|t:-3&t;return r?1|i:-2&i}function Im(){const t=Math.PI/32,e=Math.tan(t),r=uc;return r*Math.sqrt(1+2*e*e)-r}function Mm(t,e,r){const i=1<<r.z,d=_i(r.x/i),h=_i((r.x+1)/i),p=_n(r.y/i),_=_n((r.y+1)/i);return function(x,b,T,A,M=0,D){const O=[];if(!x.length||!T||!A)return O;const F=(ue,ke)=>{for(const Pe of ue)O.push({polygon:Pe,bounds:ke})},q=Math.ceil(Math.log2(T)),ee=Math.ceil(Math.log2(A)),de=q-ee,te=[];for(let ue=0;ue<Math.abs(de);ue++)te.push(de>0?0:1);for(let ue=0;ue<Math.min(q,ee);ue++)te.push(0),te.push(1);let se=x;if(se=rh(se,b[0].y-M,b[1].y+M,1),se=rh(se,b[0].x-M,b[1].x+M,0),!se.length)return O;const he=[];for(te.length?he.push({polygons:se,bounds:b,depth:0}):F(se,b);he.length;){const ue=he.pop(),ke=ue.depth,Pe=te[ke],Ne=ue.bounds[0],nt=ue.bounds[1],ze=Pe===0?Ne.x:Ne.y,qe=Pe===0?nt.x:nt.y,He=D?D(Pe,ze,qe):.5*(ze+qe),Qe=rh(ue.polygons,ze-M,He+M,Pe),lt=rh(ue.polygons,He-M,qe+M,Pe);if(Qe.length){const Fe=[Ne,new ve(Pe===0?He:nt.x,Pe===1?He:nt.y)];te.length>ke+1?he.push({polygons:Qe,bounds:Fe,depth:ke+1}):F(Qe,Fe)}if(lt.length){const Fe=[new ve(Pe===0?He:Ne.x,Pe===1?He:Ne.y),nt];te.length>ke+1?he.push({polygons:lt,bounds:Fe,depth:ke+1}):F(lt,Fe)}}return O}(t,e,Math.ceil((h-d)/11.25),Math.ceil((p-_)/11.25),1,(x,b,T)=>{if(x===0)return .5*(b+T);{const A=_n((r.y+b/Rt)/i);return($o(.5*(_n((r.y+T/Rt)/i)+A))*i-r.y)*Rt}})}$t(yc,"FillExtrusionBucket",{omit:["layers","features"]}),$t(wm,"PartMetadata");const q4=new ne({"fill-extrusion-edge-radius":new B(Te["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var H4={paint:new ne({"fill-extrusion-opacity":new B(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new H(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new B(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new B(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new H(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new H(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new H(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new B(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new B(Te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new B(Te["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new B(Te["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:q4};function Pm(t,e,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class nh{constructor(e,r,i){this.z=e,this.x=r,this.y=i,this.key=vc(0,e,e,r,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const i=function(h,p,_){var x=Pm(256*h,256*(p=Math.pow(2,_)-p-1),_),b=Pm(256*(h+1),256*(p+1),_);return x[0]+","+x[1]+","+b[0]+","+b[1]}(this.x,this.y,this.z),d=function(h,p,_){let x,b="";for(let T=h;T>0;T--)x=1<<T-1,b+=(p&x?1:0)+(_&x?2:0);return b}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Lm{constructor(e,r){this.wrap=e,this.canonical=r,this.key=vc(e,r.z,r.z,r.x,r.y)}}class Fn{constructor(e,r,i,d,h){this.overscaledZ=e,this.wrap=r,this.canonical=new nh(i,+d,+h),this.key=r===0&&e===i?this.canonical.key:vc(r,e,i,d,h)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new Fn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fn(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return vc(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-e;return vc(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Fn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,i=2*this.canonical.x,d=2*this.canonical.y;return[new Fn(r,this.wrap,r,i,d),new Fn(r,this.wrap,r,i+1,d),new Fn(r,this.wrap,r,i,d+1),new Fn(r,this.wrap,r,i+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Fn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Fn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Lm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function vc(t,e,r,i,d){const h=1<<Math.min(r,22);let p=h*(d%h)+i%h;return t&&r<22&&(p+=h*h*((t<0?-2*t-1:2*t)%(1<<2*(22-r)))),16*(32*p+r)+(e-r)}$t(nh,"CanonicalTileID"),$t(Fn,"OverscaledTileID",{omit:["projMatrix"]});class Ml extends ve{constructor(e,r,i){super(e,r),this.z=i}}function xc(t,e){return t.x*e.x+t.y*e.y}function Rm(t,e){if(t.length===1){let r=0;const i=e[r++];let d;for(;!d||i.equals(d);)if(d=e[r++],!d)return 1/0;for(;r<e.length;r++){const h=e[r],p=t[0],_=d.sub(i),x=h.sub(i),b=p.sub(i),T=xc(_,_),A=xc(_,x),M=xc(x,x),D=xc(b,_),O=xc(b,x),F=T*M-A*A,q=(M*D-A*O)/F,ee=(T*O-A*D)/F,de=i.z*(1-q-ee)+d.z*q+h.z*ee;if(isFinite(de))return de}return 1/0}{let r=1/0;for(const i of e)r=Math.min(r,i.z);return r}}function km(t,e,r,i,d,h,p,_){const x=p*d.getElevationAt(t,e,!0,!0),b=h[0]!==0,T=b?h[1]===0?p*(h[0]/7-450):p*function(A,M,D){const O=Math.floor(M[0]/8),F=Math.floor(M[1]/8),q=10*(M[0]-8*O),ee=10*(M[1]-8*F),de=A.getElevationAt(O,F,!0,!0),te=A.getMeterToDEM(D),se=Math.floor(.5*(q*te-1)),he=Math.floor(.5*(ee*te-1)),ue=A.tileCoordToPixel(O,F),ke=2*se+1,Pe=2*he+1,Ne=function(lt,Fe,mt,Et,yt){return[lt.getElevationAtPixel(Fe,mt,!0),lt.getElevationAtPixel(Fe+yt,mt,!0),lt.getElevationAtPixel(Fe,mt+yt,!0),lt.getElevationAtPixel(Fe+Et,mt+yt,!0)]}(A,ue.x-se,ue.y-he,ke,Pe),nt=Math.abs(Ne[0]-Ne[1]),ze=Math.abs(Ne[2]-Ne[3]),qe=Math.abs(Ne[0]-Ne[2])+Math.abs(Ne[1]-Ne[3]),He=Math.min(.25,.5*te*(nt+ze)/ke),Qe=Math.min(.25,.5*te*qe/Pe);return de+Math.max(He*q,Qe*ee)}(d,h,_):x;return{base:x+(r===0)?-1:r,top:b?Math.max(T+i,x+r+2):x+i}}const W4=be([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:K4}=W4,X4=be([{name:"a_packed",components:4,type:"Float32"}]),{members:Y4}=X4,J4=th.types,Q4=Math.cos(Math.PI/180*37.5);class ih{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Oe,this.layoutVertexArray2=new et,this.indexArray=new At,this.programConfigurations=new va(e.layers,e.zoom),this.segments=new qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,i,d){this.hasPattern=pf("line",this.layers,r);const h=this.layers[0].layout.get("line-sort-key"),p=[];for(const{feature:T,id:A,index:M,sourceLayerIndex:D}of e){const O=this.layers[0]._featureFilter.needGeometry,F=Ta(T,O);if(!this.layers[0]._featureFilter.filter(new C(this.zoom),F,i))continue;const q=h?h.evaluate(F,{},i):void 0,ee={id:A,properties:T.properties,type:T.type,sourceLayerIndex:D,index:M,geometry:O?F.geometry:Ho(T,i,d),patterns:{},sortKey:q};p.push(ee)}h&&p.sort((T,A)=>T.sortKey-A.sortKey);const{lineAtlas:_,featureIndex:x}=r,b=this.addConstantDashes(_);for(const T of p){const{geometry:A,index:M,sourceLayerIndex:D}=T;if(b&&this.addFeatureDashes(T,_),this.hasPattern){const O=mf("line",this.layers,T,this.zoom,r);this.patternFeatures.push(O)}else this.addFeature(T,A,M,i,_.positions,r.availableImages);x.insert(e[M].feature,A,M,D,this.index)}}addConstantDashes(e){let r=!1;for(const i of this.layers){const d=i.paint.get("line-dasharray").value,h=i.layout.get("line-cap").value;if(d.kind!=="constant"||h.kind!=="constant")r=!0;else{const p=h.value,_=d.value;if(!_)continue;e.addDash(_,p)}}return r}addFeatureDashes(e,r){const i=this.zoom;for(const d of this.layers){const h=d.paint.get("line-dasharray").value,p=d.layout.get("line-cap").value;if(h.kind==="constant"&&p.kind==="constant")continue;let _,x;if(h.kind==="constant"){if(_=h.value,!_)continue}else _=h.evaluate({zoom:i},e);x=p.kind==="constant"?p.value:p.evaluate({zoom:i},e),r.addDash(_,x),e.patterns[d.id]=r.getKey(_,x)}}update(e,r,i,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,i,d)}addFeatures(e,r,i,d,h){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,r,i,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Y4)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,K4),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,i,d,h,p){const _=this.layers[0].layout,x=_.get("line-join").evaluate(e,{}),b=_.get("line-cap").evaluate(e,{}),T=_.get("line-miter-limit"),A=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const M of r)this.addLine(M,e,x,b,T,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,h,p,d)}addLine(e,r,i,d,h,p){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ee=0;ee<e.length-1;ee++)this.totalDistance+=e[ee].dist(e[ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const _=J4[r.type]==="Polygon";let x=e.length;for(;x>=2&&e[x-1].equals(e[x-2]);)x--;let b=0;for(;b<x-1&&e[b].equals(e[b+1]);)b++;if(x<(_?3:2))return;i==="bevel"&&(h=1.05);const T=this.overscaling<=16?15*Rt/(512*this.overscaling):0,A=this.segments.prepareSegment(10*x,this.layoutVertexArray,this.indexArray);let M,D,O,F,q;this.e1=this.e2=-1,_&&(M=e[x-2],q=e[b].sub(M)._unit()._perp());for(let ee=b;ee<x;ee++){if(O=ee===x-1?_?e[b+1]:void 0:e[ee+1],O&&e[ee].equals(O))continue;q&&(F=q),M&&(D=M),M=e[ee],q=O?O.sub(M)._unit()._perp():F,F=F||q;let de=F.add(q);de.x===0&&de.y===0||de._unit();const te=F.x*q.x+F.y*q.y,se=de.x*q.x+de.y*q.y,he=se!==0?1/se:1/0,ue=2*Math.sqrt(2-2*se),ke=se<Q4&&D&&O,Pe=F.x*q.y-F.y*q.x>0;if(ke&&ee>b){const ze=M.dist(D);if(ze>2*T){const qe=M.sub(M.sub(D)._mult(T/ze)._round());this.updateDistance(D,qe),this.addCurrentVertex(qe,F,0,0,A),D=qe}}const Ne=D&&O;let nt=Ne?i:_?"butt":d;if(Ne&&nt==="round"&&(he<p?nt="miter":he<=2&&(nt="fakeround")),nt==="miter"&&he>h&&(nt="bevel"),nt==="bevel"&&(he>2&&(nt="flipbevel"),he<h&&(nt="miter")),D&&this.updateDistance(D,M),nt==="miter")de._mult(he),this.addCurrentVertex(M,de,0,0,A);else if(nt==="flipbevel"){if(he>100)de=q.mult(-1);else{const ze=he*F.add(q).mag()/F.sub(q).mag();de._perp()._mult(ze*(Pe?-1:1))}this.addCurrentVertex(M,de,0,0,A),this.addCurrentVertex(M,de.mult(-1),0,0,A)}else if(nt==="bevel"||nt==="fakeround"){const ze=-Math.sqrt(he*he-1),qe=Pe?ze:0,He=Pe?0:ze;if(D&&this.addCurrentVertex(M,F,qe,He,A),nt==="fakeround"){const Qe=Math.round(180*ue/Math.PI/20);for(let lt=1;lt<Qe;lt++){let Fe=lt/Qe;if(Fe!==.5){const Et=Fe-.5;Fe+=Fe*Et*(Fe-1)*((1.0904+te*(te*(3.55645-1.43519*te)-3.2452))*Et*Et+(.848013+te*(.215638*te-1.06021)))}const mt=q.sub(F)._mult(Fe)._add(F)._unit()._mult(Pe?-1:1);this.addHalfVertex(M,mt.x,mt.y,!1,Pe,0,A)}}O&&this.addCurrentVertex(M,q,-qe,-He,A)}else if(nt==="butt")this.addCurrentVertex(M,de,0,0,A);else if(nt==="square"){const ze=D?1:-1;D||this.addCurrentVertex(M,de,ze,ze,A),this.addCurrentVertex(M,de,0,0,A),D&&this.addCurrentVertex(M,de,ze,ze,A)}else nt==="round"&&(D&&(this.addCurrentVertex(M,F,0,0,A),this.addCurrentVertex(M,F,1,1,A,!0)),O&&(this.addCurrentVertex(M,q,-1,-1,A,!0),this.addCurrentVertex(M,q,0,0,A)));if(ke&&ee<x-1){const ze=M.dist(O);if(ze>2*T){const qe=M.add(O.sub(M)._mult(T/ze)._round());this.updateDistance(M,qe),this.addCurrentVertex(qe,q,0,0,A),M=qe}}}}addCurrentVertex(e,r,i,d,h,p=!1){const _=r.y*d-r.x,x=-r.y-r.x*d;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,p,!1,i,h),this.addHalfVertex(e,_,x,p,!0,-d,h)}addHalfVertex({x:e,y:r},i,d,h,p,_,x){this.layoutVertexArray.emplaceBack((e<<1)+(h?1:0),(r<<1)+(p?1:0),Math.round(63*i)+128,Math.round(63*d)+128,1+(_===0?0:_<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=x.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),x.primitiveLength++),p?this.e2=b:this.e1=b}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}$t(ih,"LineBucket",{omit:["layers","patternFeatures"]});const ev=new ne({"line-cap":new H(Te.layout_line["line-cap"]),"line-join":new H(Te.layout_line["line-join"]),"line-miter-limit":new B(Te.layout_line["line-miter-limit"]),"line-round-limit":new B(Te.layout_line["line-round-limit"]),"line-sort-key":new H(Te.layout_line["line-sort-key"])});var Dm={paint:new ne({"line-opacity":new H(Te.paint_line["line-opacity"]),"line-color":new H(Te.paint_line["line-color"]),"line-translate":new B(Te.paint_line["line-translate"]),"line-translate-anchor":new B(Te.paint_line["line-translate-anchor"]),"line-width":new H(Te.paint_line["line-width"]),"line-gap-width":new H(Te.paint_line["line-gap-width"]),"line-offset":new H(Te.paint_line["line-offset"]),"line-blur":new H(Te.paint_line["line-blur"]),"line-dasharray":new H(Te.paint_line["line-dasharray"]),"line-pattern":new H(Te.paint_line["line-pattern"]),"line-gradient":new re(Te.paint_line["line-gradient"]),"line-trim-offset":new B(Te.paint_line["line-trim-offset"])}),layout:ev};const Om=new class extends H{possiblyEvaluate(t,e){return e=new C(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,r,i){return e=er({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,r,i)}}(Dm.paint.properties["line-width"].specification);function zm(t,e){return e>0?e+2*t:t}Om.useIntegerZoom=!0;const tv=be([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rv=be([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),nv=be([{name:"a_projected_pos",components:4,type:"Float32"}],4);be([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const iv=be([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),ov=be([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bm=be([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),sv=be([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);be([{name:"triangle",components:3,type:"Uint16"}]),be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),be([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),be([{type:"Float32",name:"offsetX"}]),be([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var un=24;const io=128;function _f(t,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new C(t+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:i,interpolationType:d}=r;let h=0;for(;h<i.length&&i[h]<=t;)h++;h=Math.max(0,h-1);let p=h;for(;p<i.length&&i[p]<t+1;)p++;p=Math.min(i.length-1,p);const _=i[h],x=i[p];return r.kind==="composite"?{kind:"composite",minZoom:_,maxZoom:x,interpolationType:d}:{kind:"camera",minZoom:_,maxZoom:x,minSize:r.evaluate(new C(_)),maxSize:r.evaluate(new C(x)),interpolationType:d}}}function oh(t,{uSize:e,uSizeT:r},{lowerSize:i,upperSize:d}){return t.kind==="source"?i/io:t.kind==="composite"?tr(i/io,d/io,r):e}function Pl(t,e){let r=0,i=0;if(t.kind==="constant")i=t.layoutSize;else if(t.kind!=="source"){const{interpolationType:d,minZoom:h,maxZoom:p}=t,_=d?ut(Ai.interpolationFactor(d,e,h,p),0,1):0;t.kind==="camera"?i=tr(t.minSize,t.maxSize,_):r=_}return{uSizeT:r,uSize:i}}var av=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:io,evaluateSizeForFeature:oh,evaluateSizeForZoom:Pl,getSizeData:_f});function lv(t,e,r){return t.sections.forEach(i=>{i.text=function(d,h,p){const _=h.layout.get("text-transform").evaluate(p,{});return _==="uppercase"?d=d.toLocaleUpperCase():_==="lowercase"&&(d=d.toLocaleLowerCase()),E.applyArabicShaping&&(d=E.applyArabicShaping(d)),d}(i.text,e,r)}),t}const bc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function dv(t){return t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""}function cv(t){return t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""||t===""}var Fm=xr,Nm=function(t,e,r,i,d){var h,p,_=8*d-i-1,x=(1<<_)-1,b=x>>1,T=-7,A=r?d-1:0,M=r?-1:1,D=t[e+A];for(A+=M,h=D&(1<<-T)-1,D>>=-T,T+=_;T>0;h=256*h+t[e+A],A+=M,T-=8);for(p=h&(1<<-T)-1,h>>=-T,T+=i;T>0;p=256*p+t[e+A],A+=M,T-=8);if(h===0)h=1-b;else{if(h===x)return p?NaN:1/0*(D?-1:1);p+=Math.pow(2,i),h-=b}return(D?-1:1)*p*Math.pow(2,h-i)},jm=function(t,e,r,i,d,h){var p,_,x,b=8*h-d-1,T=(1<<b)-1,A=T>>1,M=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=i?0:h-1,O=i?1:-1,F=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_=isNaN(e)?1:0,p=T):(p=Math.floor(Math.log(e)/Math.LN2),e*(x=Math.pow(2,-p))<1&&(p--,x*=2),(e+=p+A>=1?M/x:M*Math.pow(2,1-A))*x>=2&&(p++,x/=2),p+A>=T?(_=0,p=T):p+A>=1?(_=(e*x-1)*Math.pow(2,d),p+=A):(_=e*Math.pow(2,A-1)*Math.pow(2,d),p=0));d>=8;t[r+D]=255&_,D+=O,_/=256,d-=8);for(p=p<<d|_,b+=d;b>0;t[r+D]=255&p,D+=O,p/=256,b-=8);t[r+D-O]|=128*F};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function xr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}xr.Varint=0,xr.Fixed64=1,xr.Bytes=2,xr.Fixed32=5;var yf=4294967296,Um=1/yf,Vm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ko(t){return t.type===xr.Bytes?t.readVarint()+t.pos:t.pos+1}function Ll(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Gm(t,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var d=r.pos-1;d>=t;d--)r.buf[d+i]=r.buf[d]}function uv(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function hv(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function fv(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function pv(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function mv(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function gv(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function _v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function yv(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function vv(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function sh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Rl(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function Zm(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}xr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),d=i>>3,h=this.pos;this.type=7&i,t(d,e,this),this.pos===h&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=sh(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Zm(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=sh(this.buf,this.pos)+sh(this.buf,this.pos+4)*yf;return this.pos+=8,t},readSFixed64:function(){var t=sh(this.buf,this.pos)+Zm(this.buf,this.pos+4)*yf;return this.pos+=8,t},readFloat:function(){var t=Nm(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Nm(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(d,h,p){var _,x,b=p.buf;if(_=(112&(x=b[p.pos++]))>>4,x<128||(_|=(127&(x=b[p.pos++]))<<3,x<128)||(_|=(127&(x=b[p.pos++]))<<10,x<128)||(_|=(127&(x=b[p.pos++]))<<17,x<128)||(_|=(127&(x=b[p.pos++]))<<24,x<128)||(_|=(1&(x=b[p.pos++]))<<31,x<128))return Ll(d,_,h);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Vm?function(r,i,d){return Vm.decode(r.subarray(i,d))}(this.buf,e,t):function(r,i,d){for(var h="",p=i;p<d;){var _,x,b,T=r[p],A=null,M=T>239?4:T>223?3:T>191?2:1;if(p+M>d)break;M===1?T<128&&(A=T):M===2?(192&(_=r[p+1]))==128&&(A=(31&T)<<6|63&_)<=127&&(A=null):M===3?(x=r[p+2],(192&(_=r[p+1]))==128&&(192&x)==128&&((A=(15&T)<<12|(63&_)<<6|63&x)<=2047||A>=55296&&A<=57343)&&(A=null)):M===4&&(x=r[p+2],b=r[p+3],(192&(_=r[p+1]))==128&&(192&x)==128&&(192&b)==128&&((A=(15&T)<<18|(63&_)<<12|(63&x)<<6|63&b)<=65535||A>=1114112)&&(A=null)),A===null?(A=65533,M=1):A>65535&&(A-=65536,h+=String.fromCharCode(A>>>10&1023|55296),A=56320|1023&A),h+=String.fromCharCode(A),p+=M}return h}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==xr.Bytes)return t.push(this.readVarint(e));var r=Ko(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==xr.Bytes)return t.push(this.readSVarint());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==xr.Bytes)return t.push(this.readBoolean());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==xr.Bytes)return t.push(this.readFloat());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==xr.Bytes)return t.push(this.readDouble());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==xr.Bytes)return t.push(this.readFixed32());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==xr.Bytes)return t.push(this.readSFixed32());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==xr.Bytes)return t.push(this.readFixed64());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==xr.Bytes)return t.push(this.readSFixed64());var e=Ko(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===xr.Varint)for(;this.buf[this.pos++]>127;);else if(e===xr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===xr.Fixed32)this.pos+=4;else{if(e!==xr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Rl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Rl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Rl(this.buf,-1&t,this.pos),Rl(this.buf,Math.floor(t*Um),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Rl(this.buf,-1&t,this.pos),Rl(this.buf,Math.floor(t*Um),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(e,r){var i,d;if(e>=0?(i=e%4294967296|0,d=e/4294967296|0):(d=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,d=d+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(h,p,_){_.buf[_.pos++]=127&h|128,h>>>=7,_.buf[_.pos++]=127&h|128,h>>>=7,_.buf[_.pos++]=127&h|128,h>>>=7,_.buf[_.pos++]=127&h|128,_.buf[_.pos]=127&(h>>>=7)}(i,0,r),function(h,p){var _=(7&h)<<4;p.buf[p.pos++]|=_|((h>>>=3)?128:0),h&&(p.buf[p.pos++]=127&h|((h>>>=7)?128:0),h&&(p.buf[p.pos++]=127&h|((h>>>=7)?128:0),h&&(p.buf[p.pos++]=127&h|((h>>>=7)?128:0),h&&(p.buf[p.pos++]=127&h|((h>>>=7)?128:0),h&&(p.buf[p.pos++]=127&h)))))}(d,r)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(i,d,h){for(var p,_,x=0;x<d.length;x++){if((p=d.charCodeAt(x))>55295&&p<57344){if(!_){p>56319||x+1===d.length?(i[h++]=239,i[h++]=191,i[h++]=189):_=p;continue}if(p<56320){i[h++]=239,i[h++]=191,i[h++]=189,_=p;continue}p=_-55296<<10|p-56320|65536,_=null}else _&&(i[h++]=239,i[h++]=191,i[h++]=189,_=null);p<128?i[h++]=p:(p<2048?i[h++]=p>>6|192:(p<65536?i[h++]=p>>12|224:(i[h++]=p>>18|240,i[h++]=p>>12&63|128),i[h++]=p>>6&63|128),i[h++]=63&p|128)}return h}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&Gm(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),jm(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),jm(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var i=this.pos-r;i>=128&&Gm(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,r){this.writeTag(t,xr.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,uv,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,hv,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,mv,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,fv,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,pv,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,gv,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,_v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,yv,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,vv,e)},writeBytesField:function(t,e){this.writeTag(t,xr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,xr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,xr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,xr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,xr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,xr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,xr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,xr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,xr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,xr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}};var ah=We(Fm);const vf=3;function xv(t,e,r){e.glyphs=[],t===1&&r.readMessage(bv,e)}function bv(t,e,r){if(t===3){const{id:i,bitmap:d,width:h,height:p,left:_,top:x,advance:b}=r.readMessage($v,{});e.glyphs.push({id:i,bitmap:new Wo({width:h+2*vf,height:p+2*vf},d),metrics:{width:h,height:p,left:_,top:x,advance:b}})}else t===4?e.ascender=r.readSVarint():t===5&&(e.descender=r.readSVarint())}function $v(t,e,r){t===1?e.id=r.readVarint():t===2?e.bitmap=r.readBytes():t===3?e.width=r.readVarint():t===4?e.height=r.readVarint():t===5?e.left=r.readSVarint():t===6?e.top=r.readSVarint():t===7&&(e.advance=r.readVarint())}const qm=vf;function xf(t){let e=0,r=0;for(const p of t)e+=p.w*p.h,r=Math.max(r,p.w);t.sort((p,_)=>_.h-p.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let d=0,h=0;for(const p of t)for(let _=i.length-1;_>=0;_--){const x=i[_];if(!(p.w>x.w||p.h>x.h)){if(p.x=x.x,p.y=x.y,h=Math.max(h,p.y+p.h),d=Math.max(d,p.x+p.w),p.w===x.w&&p.h===x.h){const b=i.pop();_<i.length&&(i[_]=b)}else p.h===x.h?(x.x+=p.w,x.w-=p.w):p.w===x.w?(x.y+=p.h,x.h-=p.h):(i.push({x:x.x+p.w,y:x.y,w:x.w-p.w,h:p.h}),x.y+=p.h,x.h-=p.h);break}}return{w:d,h,fill:e/(d*h)||0}}const Hn=1;class bf{constructor(e,{pixelRatio:r,version:i,stretchX:d,stretchY:h,content:p}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=d,this.stretchY=h,this.content=p,this.version=i}get tl(){return[this.paddedRect.x+Hn,this.paddedRect.y+Hn]}get br(){return[this.paddedRect.x+this.paddedRect.w-Hn,this.paddedRect.y+this.paddedRect.h-Hn]}get displaySize(){return[(this.paddedRect.w-2*Hn)/this.pixelRatio,(this.paddedRect.h-2*Hn)/this.pixelRatio]}}class Hm{constructor(e,r){const i={},d={};this.haveRenderCallbacks=[];const h=[];this.addImages(e,i,h),this.addImages(r,d,h);const{w:p,h:_}=xf(h),x=new si({width:p||1,height:_||1});for(const b in e){const T=e[b],A=i[b].paddedRect;si.copy(T.data,x,{x:0,y:0},{x:A.x+Hn,y:A.y+Hn},T.data)}for(const b in r){const T=r[b],A=d[b].paddedRect,M=A.x+Hn,D=A.y+Hn,O=T.data.width,F=T.data.height;si.copy(T.data,x,{x:0,y:0},{x:M,y:D},T.data),si.copy(T.data,x,{x:0,y:F-1},{x:M,y:D-1},{width:O,height:1}),si.copy(T.data,x,{x:0,y:0},{x:M,y:D+F},{width:O,height:1}),si.copy(T.data,x,{x:O-1,y:0},{x:M-1,y:D},{width:1,height:F}),si.copy(T.data,x,{x:0,y:0},{x:M+O,y:D},{width:1,height:F})}this.image=x,this.iconPositions=i,this.patternPositions=d}addImages(e,r,i){for(const d in e){const h=e[d],p={x:0,y:0,w:h.data.width+2*Hn,h:h.data.height+2*Hn};i.push(p),r[d]=new bf(p,h),h.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(i=>e.hasImage(i)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),r),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),r)}patchUpdatedImage(e,r,i){if(!e||!r||e.version===r.version)return;e.version=r.version;const[d,h]=e.tl;i.update(r.data,void 0,{x:d,y:h})}}$t(bf,"ImagePosition"),$t(Hm,"ImageAtlas");const yi={horizontal:1,vertical:2,horizontalOnly:3},Wm=-17;class $c{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const i=new $c;return i.scale=e||1,i.fontStack=r,i}static forImage(e){const r=new $c;return r.imageName=e,r}}class kl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const i=new kl;for(let d=0;d<e.sections.length;d++){const h=e.sections[d];h.image?i.addImageSection(h):i.addTextSection(h,r)}return i}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,i){let d="";for(let h=0;h<r.length;h++){const p=r.charCodeAt(h+1)||null,_=r.charCodeAt(h-1)||null;d+=!i&&(p&&Ou(p)&&!bc[r[h+1]]||_&&Ou(_)&&!bc[r[h-1]])||!bc[r[h]]?r[h]:bc[r[h]]}return d}(this.text,e)}trim(){let e=0;for(let i=0;i<this.text.length&&lh[this.text.charCodeAt(i)];i++)e++;let r=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&lh[this.text.charCodeAt(i)];i--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const i=new kl;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push($c.forText(e.scale,e.fontStack||r));const i=this.sections.length-1;for(let d=0;d<e.text.length;++d)this.sectionIndex.push(i)}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void yr("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push($c.forImage(r)),this.sectionIndex.push(this.sections.length-1)):yr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function $f(t,e,r,i,d,h,p,_,x,b,T,A,M,D,O){const F=kl.fromFeature(t,d);A===yi.vertical&&F.verticalizePunctuation(M);let q=[];const ee=function(ue,ke,Pe,Ne,nt,ze){if(!ue)return[];const qe=[],He=function(mt,Et,yt,Nt,dt,Pt){let jt=0;for(let nr=0;nr<mt.length();nr++){const Ut=mt.getSection(nr);jt+=Km(mt.getCharCode(nr),Ut,Nt,dt,Et,Pt)}return jt/Math.max(1,Math.ceil(jt/yt))}(ue,ke,Pe,Ne,nt,ze),Qe=ue.text.indexOf("")>=0;let lt=0;for(let mt=0;mt<ue.length();mt++){const Et=ue.getSection(mt),yt=ue.getCharCode(mt);if(lh[yt]||(lt+=Km(yt,Et,Ne,nt,ke,ze)),mt<ue.length()-1){const Nt=!((Fe=yt)<11904||!(vt["Bopomofo Extended"](Fe)||vt.Bopomofo(Fe)||vt["CJK Compatibility Forms"](Fe)||vt["CJK Compatibility Ideographs"](Fe)||vt["CJK Compatibility"](Fe)||vt["CJK Radicals Supplement"](Fe)||vt["CJK Strokes"](Fe)||vt["CJK Symbols and Punctuation"](Fe)||vt["CJK Unified Ideographs Extension A"](Fe)||vt["CJK Unified Ideographs"](Fe)||vt["Enclosed CJK Letters and Months"](Fe)||vt["Halfwidth and Fullwidth Forms"](Fe)||vt.Hiragana(Fe)||vt["Ideographic Description Characters"](Fe)||vt["Kangxi Radicals"](Fe)||vt["Katakana Phonetic Extensions"](Fe)||vt.Katakana(Fe)||vt["Vertical Forms"](Fe)||vt["Yi Radicals"](Fe)||vt["Yi Syllables"](Fe)));(wv[yt]||Nt||Et.imageName)&&qe.push(Ym(mt+1,lt,He,qe,Ev(yt,ue.getCharCode(mt+1),Nt&&Qe),!1))}}var Fe;return Jm(Ym(ue.length(),lt,He,qe,0,!0))}(F,b,h,e,i,D),{processBidirectionalText:de,processStyledBidirectionalText:te}=E;if(de&&F.sections.length===1){const ue=de(F.toString(),ee);for(const ke of ue){const Pe=new kl;Pe.text=ke,Pe.sections=F.sections;for(let Ne=0;Ne<ke.length;Ne++)Pe.sectionIndex.push(0);q.push(Pe)}}else if(te){const ue=te(F.text,F.sectionIndex,ee);for(const ke of ue){const Pe=new kl;Pe.text=ke[0],Pe.sectionIndex=ke[1],Pe.sections=F.sections,q.push(Pe)}}else q=function(ue,ke){const Pe=[],Ne=ue.text;let nt=0;for(const ze of ke)Pe.push(ue.substring(nt,ze)),nt=ze;return nt<Ne.length&&Pe.push(ue.substring(nt,Ne.length)),Pe}(F,ee);const se=[],he={positionedLines:se,text:F.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:A,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,ke,Pe,Ne,nt,ze,qe,He,Qe,lt,Fe,mt){let Et=0,yt=0,Nt=0;const dt=He==="right"?1:He==="left"?0:.5;let Pt=!1;for(const qt of nt){const Ht=qt.getSections();for(const mr of Ht){if(mr.imageName)continue;const br=ke[mr.fontStack];if(br&&(Pt=br.ascender!==void 0&&br.descender!==void 0,!Pt))break}if(!Pt)break}let jt=0;for(const qt of nt){qt.trim();const Ht=qt.getMaxScale(),mr=(Ht-1)*un,br={positionedGlyphs:[],lineOffset:0};ue.positionedLines[jt]=br;const $r=br.positionedGlyphs;let gr=0;if(!qt.length()){yt+=ze,++jt;continue}let Lr=0,zr=0;for(let _r=0;_r<qt.length();_r++){const Qr=qt.getSection(_r),Kr=qt.getSectionIndex(_r),kr=qt.getCharCode(_r);let or=Qr.scale,Xr=null,wr=null,Nn=null,Yr=un,hn=0;const an=!(Qe===yi.horizontal||!Fe&&!Kd(kr)||Fe&&(lh[kr]||(nr=kr,vt.Arabic(nr)||vt["Arabic Supplement"](nr)||vt["Arabic Extended-A"](nr)||vt["Arabic Presentation Forms-A"](nr)||vt["Arabic Presentation Forms-B"](nr))));if(Qr.imageName){const jn=Ne[Qr.imageName];if(!jn)continue;Nn=Qr.imageName,ue.iconsInText=ue.iconsInText||!0,wr=jn.paddedRect;const ln=jn.displaySize;or=or*un/mt,Xr={width:ln[0],height:ln[1],left:Hn,top:-qm,advance:an?ln[1]:ln[0],localGlyph:!1},hn=Pt?-Xr.height*or:Wm+Ht*un-ln[1]*or,Yr=Xr.advance;const ao=(an?ln[0]:ln[1])*or-un*Ht;ao>0&&ao>gr&&(gr=ao)}else{const jn=Pe[Qr.fontStack];if(!jn)continue;jn[kr]&&(wr=jn[kr]);const ln=ke[Qr.fontStack];if(!ln)continue;const ao=ln.glyphs[kr];if(!ao)continue;if(Xr=ao.metrics,Yr=kr!==8203?un:0,Pt){const jl=ln.ascender!==void 0?Math.abs(ln.ascender):0,Lc=ln.descender!==void 0?Math.abs(ln.descender):0,Rc=(jl+Lc)*or;Lr<Rc&&(Lr=Rc,zr=(jl-Lc)/2*or),hn=-jl*or}else hn=Wm+(Ht-or)*un}an?(ue.verticalizable=!0,$r.push({glyph:kr,imageName:Nn,x:Et,y:yt+hn,vertical:an,scale:or,localGlyph:Xr.localGlyph,fontStack:Qr.fontStack,sectionIndex:Kr,metrics:Xr,rect:wr}),Et+=Yr*or+lt):($r.push({glyph:kr,imageName:Nn,x:Et,y:yt+hn,vertical:an,scale:or,localGlyph:Xr.localGlyph,fontStack:Qr.fontStack,sectionIndex:Kr,metrics:Xr,rect:wr}),Et+=Xr.advance*or+lt)}$r.length!==0&&(Nt=Math.max(Et-lt,Nt),Pt?Qm($r,dt,gr,zr,ze*Ht/2):Qm($r,dt,gr,0,ze/2)),Et=0;const Wr=ze*Ht+gr;br.lineOffset=Math.max(gr,mr),yt+=Wr,++jt}var nr;const Ut=yt,{horizontalAlign:Dt,verticalAlign:Er}=wf(qe);(function(qt,Ht,mr,br,$r,gr){const Lr=(Ht-mr)*$r,zr=-gr*br;for(const Wr of qt)for(const _r of Wr.positionedGlyphs)_r.x+=Lr,_r.y+=zr})(ue.positionedLines,dt,Dt,Er,Nt,Ut),ue.top+=-Er*Ut,ue.bottom=ue.top+Ut,ue.left+=-Dt*Nt,ue.right=ue.left+Nt,ue.hasBaseline=Pt}(he,e,r,i,q,p,_,x,A,b,M,O),!function(ue){for(const ke of ue)if(ke.positionedGlyphs.length!==0)return!1;return!0}(se)&&he}const lh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wv={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Km(t,e,r,i,d,h){if(e.imageName){const p=i[e.imageName];return p?p.displaySize[0]*e.scale*un/h+d:0}{const p=r[e.fontStack],_=p&&p.glyphs[t];return _?_.metrics.advance*e.scale+d:0}}function Xm(t,e,r,i){const d=Math.pow(t-e,2);return i?t<e?d/2:2*d:d+Math.abs(r)*r}function Ev(t,e,r){let i=0;return t===10&&(i-=1e4),r&&(i+=150),t!==40&&t!==65288||(i+=50),e!==41&&e!==65289||(i+=50),i}function Ym(t,e,r,i,d,h){let p=null,_=Xm(e,r,d,h);for(const x of i){const b=Xm(e-x.x,r,d,h)+x.badness;b<=_&&(p=x,_=b)}return{index:t,x:e,priorBreak:p,badness:_}}function Jm(t){return t?Jm(t.priorBreak).concat(t.index):[]}function wf(t){let e=.5,r=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Qm(t,e,r,i,d){if(!(e||r||i||d))return;const h=t.length-1,p=t[h],_=(p.x+p.metrics.advance*p.scale)*e;for(let x=0;x<=h;x++)t[x].x-=_,t[x].y+=r+i+d}function Tv(t,e,r){const{horizontalAlign:i,verticalAlign:d}=wf(r),h=e[0]-t.displaySize[0]*i,p=e[1]-t.displaySize[1]*d;return{image:t,top:p,bottom:p+t.displaySize[1],left:h,right:h+t.displaySize[0]}}function eg(t,e,r,i,d,h){const p=t.image;let _;if(p.content){const q=p.content,ee=p.pixelRatio||1;_=[q[0]/ee,q[1]/ee,p.displaySize[0]-q[2]/ee,p.displaySize[1]-q[3]/ee]}const x=e.left*h,b=e.right*h;let T,A,M,D;r==="width"||r==="both"?(D=d[0]+x-i[3],A=d[0]+b+i[1]):(D=d[0]+(x+b-p.displaySize[0])/2,A=D+p.displaySize[0]);const O=e.top*h,F=e.bottom*h;return r==="height"||r==="both"?(T=d[1]+O-i[0],M=d[1]+F+i[2]):(T=d[1]+(O+F-p.displaySize[1])/2,M=T+p.displaySize[1]),{image:p,top:T,right:A,bottom:M,left:D,collisionPadding:_}}class Xo extends ve{constructor(e,r,i,d,h){super(e,r),this.angle=d,this.z=i,h!==void 0&&(this.segment=h)}clone(){return new Xo(this.x,this.y,this.z,this.angle,this.segment)}}function tg(t,e,r,i,d){if(e.segment===void 0)return!0;let h=e,p=e.segment+1,_=0;for(;_>-r/2;){if(p--,p<0)return!1;_-=t[p].dist(h),h=t[p]}_+=t[p].dist(t[p+1]),p++;const x=[];let b=0;for(;_<r/2;){const T=t[p],A=t[p+1];if(!A)return!1;let M=t[p-1].angleTo(T)-T.angleTo(A);for(M=Math.abs((M+3*Math.PI)%(2*Math.PI)-Math.PI),x.push({distance:_,angleDelta:M}),b+=M;_-x[0].distance>i;)b-=x.shift().angleDelta;if(b>d)return!1;p++,_+=T.dist(A)}return!0}function rg(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function ng(t,e,r){return t?.6*e*r:0}function ig(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Sv(t,e,r,i,d,h){const p=ng(r,d,h),_=ig(r,i)*h;let x=0;const b=rg(t)/2;for(let T=0;T<t.length-1;T++){const A=t[T],M=t[T+1],D=A.dist(M);if(x+D>b){const O=(b-x)/D,F=tr(A.x,M.x,O),q=tr(A.y,M.y,O),ee=new Xo(F,q,0,M.angleTo(A),T);return!p||tg(t,ee,_,p,e)?ee:void 0}x+=D}}function Cv(t,e,r,i,d,h,p,_,x){const b=ng(i,h,p),T=ig(i,d),A=T*p,M=t[0].x===0||t[0].x===x||t[0].y===0||t[0].y===x;return e-A<e/4&&(e=A+e/4),og(t,M?e/2*_%e:(T/2+2*h)*p*_%e,e,b,r,A,M,!1,x)}function og(t,e,r,i,d,h,p,_,x){const b=h/2,T=rg(t);let A=0,M=e-r,D=[];for(let O=0;O<t.length-1;O++){const F=t[O],q=t[O+1],ee=F.dist(q),de=q.angleTo(F);for(;M+r<A+ee;){M+=r;const te=(M-A)/ee,se=tr(F.x,q.x,te),he=tr(F.y,q.y,te);if(se>=0&&se<x&&he>=0&&he<x&&M-b>=0&&M+b<=T){const ue=new Xo(se,he,0,de,O);ue._round(),i&&!tg(t,ue,h,i,d)||D.push(ue)}}A+=ee}return _||D.length||p||(D=og(t,A/2,r,i,d,h,p,!0,x)),D}function sg(t,e,r,i,d){const h=[];for(let p=0;p<t.length;p++){const _=t[p];let x;for(let b=0;b<_.length-1;b++){let T=_[b],A=_[b+1];T.x<e&&A.x<e||(T.x<e?T=new ve(e,T.y+(e-T.x)/(A.x-T.x)*(A.y-T.y))._round():A.x<e&&(A=new ve(e,T.y+(e-T.x)/(A.x-T.x)*(A.y-T.y))._round()),T.y<r&&A.y<r||(T.y<r?T=new ve(T.x+(r-T.y)/(A.y-T.y)*(A.x-T.x),r)._round():A.y<r&&(A=new ve(T.x+(r-T.y)/(A.y-T.y)*(A.x-T.x),r)._round()),T.x>=i&&A.x>=i||(T.x>=i?T=new ve(i,T.y+(i-T.x)/(A.x-T.x)*(A.y-T.y))._round():A.x>=i&&(A=new ve(i,T.y+(i-T.x)/(A.x-T.x)*(A.y-T.y))._round()),T.y>=d&&A.y>=d||(T.y>=d?T=new ve(T.x+(d-T.y)/(A.y-T.y)*(A.x-T.x),d)._round():A.y>=d&&(A=new ve(T.x+(d-T.y)/(A.y-T.y)*(A.x-T.x),d)._round()),x&&T.equals(x[x.length-1])||(x=[T],h.push(x)),x.push(A)))))}}return h}$t(Xo,"Anchor");const wc=1e20;function ag(t,e,r,i,d,h,p,_,x){for(let b=e;b<e+i;b++)lg(t,r*h+b,h,d,p,_,x);for(let b=r;b<r+d;b++)lg(t,b*h+e,1,i,p,_,x)}function lg(t,e,r,i,d,h,p){h[0]=0,p[0]=-wc,p[1]=wc,d[0]=t[e];for(let _=1,x=0,b=0;_<i;_++){d[_]=t[e+_*r];const T=_*_;do{const A=h[x];b=(d[_]-d[A]+T-A*A)/(_-A)/2}while(b<=p[x]&&--x>-1);x++,h[x]=_,p[x]=b,p[x+1]=wc}for(let _=0,x=0;_<i;_++){for(;p[x+1]<_;)x++;const b=h[x],T=_-b;t[e+_*r]=d[b]+T*T}}const oo=2,Ef={none:0,ideographs:1,all:2};class Dl{constructor(e,r,i){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=i,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const i=[];for(const d in e)for(const h of e[d])i.push({stack:d,id:h});Tr(i,({stack:d,id:h},p)=>{let _=this.entries[d];_||(_=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let x=_.glyphs[h];if(x!==void 0)return void p(null,{stack:d,id:h,glyph:x});if(x=this._tinySDF(_,d,h),x)return _.glyphs[h]=x,void p(null,{stack:d,id:h,glyph:x});const b=Math.floor(h/256);if(256*b>65535)return void p(new Error("glyphs > 65535 not supported"));if(_.ranges[b])return void p(null,{stack:d,id:h,glyph:x});let T=_.requests[b];T||(T=_.requests[b]=[],Dl.loadGlyphRange(d,b,this.url,this.requestManager,(A,M)=>{if(M){_.ascender=M.ascender,_.descender=M.descender;for(const D in M.glyphs)this._doesCharSupportLocalGlyph(+D)||(_.glyphs[+D]=M.glyphs[+D]);_.ranges[b]=!0}for(const D of T)D(A,M);delete _.requests[b]})),T.push((A,M)=>{A?p(A):M&&p(null,{stack:d,id:h,glyph:M.glyphs[h]||null})})},(d,h)=>{if(d)r(d);else if(h){const p={};for(const{stack:_,id:x,glyph:b}of h)p[_]===void 0&&(p[_]={}),p[_].glyphs===void 0&&(p[_].glyphs={}),p[_].glyphs[x]=b&&{id:b.id,bitmap:b.bitmap.clone(),metrics:b.metrics},p[_].ascender=this.entries[_].ascender,p[_].descender=this.entries[_].descender;r(null,p)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==Ef.none&&(this.localGlyphMode===Ef.all?!!this.localFontFamily:!!this.localFontFamily&&(vt["CJK Unified Ideographs"](e)||vt["Hangul Syllables"](e)||vt.Hiragana(e)||vt.Katakana(e)||vt["CJK Symbols and Punctuation"](e)))}_tinySDF(e,r,i){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(i))return;let h=e.tinySDF;if(!h){let F="400";/bold/i.test(r)?F="900":/medium/i.test(r)?F="500":/light/i.test(r)&&(F="200"),h=e.tinySDF=new Dl.TinySDF({fontFamily:d,fontWeight:F,fontSize:24*oo,buffer:3*oo,radius:8*oo}),h.fontWeight=F}if(this.localGlyphs[h.fontWeight][i])return this.localGlyphs[h.fontWeight][i];const p=String.fromCharCode(i),{data:_,width:x,height:b,glyphWidth:T,glyphHeight:A,glyphLeft:M,glyphTop:D,glyphAdvance:O}=h.draw(p);return this.localGlyphs[h.fontWeight][i]={id:i,bitmap:new Wo({width:x,height:b},_),metrics:{width:T/oo,height:A/oo,left:M/oo,top:D/oo-27,advance:O/oo,localGlyph:!0}}}}Dl.loadGlyphRange=function(t,e,r,i,d){const h=256*e,p=h+255,_=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",`${h}-${p}`),wn.Glyphs);Si(_,(x,b)=>{if(x)d(x);else if(b){const T={},A=function(M){return new ah(M).readFields(xv,{})}(b);for(const M of A.glyphs)T[M.id]=M;d(null,{glyphs:T,ascender:A.ascender,descender:A.descender})}})},Dl.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:r=8,cutoff:i=.25,fontFamily:d="sans-serif",fontWeight:h="normal",fontStyle:p="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=r;const _=this.size=t+4*e,x=this._createCanvas(_),b=this.ctx=x.getContext("2d",{willReadFrequently:!0});b.font=`${p} ${h} ${t}px ${d}`,b.textBaseline="alphabetic",b.textAlign="left",b.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:d,actualBoundingBoxRight:h}=this.ctx.measureText(t),p=Math.ceil(r),_=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(h-d))),x=Math.min(this.size-this.buffer,p+Math.ceil(i)),b=_+2*this.buffer,T=x+2*this.buffer,A=Math.max(b*T,0),M=new Uint8ClampedArray(A),D={data:M,width:b,height:T,glyphWidth:_,glyphHeight:x,glyphTop:p,glyphLeft:0,glyphAdvance:e};if(_===0||x===0)return D;const{ctx:O,buffer:F,gridInner:q,gridOuter:ee}=this;O.clearRect(F,F,_,x),O.fillText(t,F,F+p);const de=O.getImageData(F,F,_,x);ee.fill(wc,0,A),q.fill(0,0,A);for(let te=0;te<x;te++)for(let se=0;se<_;se++){const he=de.data[4*(te*_+se)+3]/255;if(he===0)continue;const ue=(te+F)*b+se+F;if(he===1)ee[ue]=0,q[ue]=wc;else{const ke=.5-he;ee[ue]=ke>0?ke*ke:0,q[ue]=ke<0?ke*ke:0}}ag(ee,0,0,b,T,b,this.f,this.v,this.z),ag(q,F,F,_,x,b,this.f,this.v,this.z);for(let te=0;te<A;te++){const se=Math.sqrt(ee[te])-Math.sqrt(q[te]);M[te]=Math.round(255-255*(se/this.radius+this.cutoff))}return D}};const Ol=Hn;function dg(t,e,r,i){const d=[],h=t.image,p=h.pixelRatio,_=h.paddedRect.w-2*Ol,x=h.paddedRect.h-2*Ol,b=t.right-t.left,T=t.bottom-t.top,A=h.stretchX||[[0,_]],M=h.stretchY||[[0,x]],D=(ze,qe)=>ze+qe[1]-qe[0],O=A.reduce(D,0),F=M.reduce(D,0),q=_-O,ee=x-F;let de=0,te=O,se=0,he=F,ue=0,ke=q,Pe=0,Ne=ee;if(h.content&&i){const ze=h.content;de=dh(A,0,ze[0]),se=dh(M,0,ze[1]),te=dh(A,ze[0],ze[2]),he=dh(M,ze[1],ze[3]),ue=ze[0]-de,Pe=ze[1]-se,ke=ze[2]-ze[0]-te,Ne=ze[3]-ze[1]-he}const nt=(ze,qe,He,Qe)=>{const lt=ch(ze.stretch-de,te,b,t.left),Fe=uh(ze.fixed-ue,ke,ze.stretch,O),mt=ch(qe.stretch-se,he,T,t.top),Et=uh(qe.fixed-Pe,Ne,qe.stretch,F),yt=ch(He.stretch-de,te,b,t.left),Nt=uh(He.fixed-ue,ke,He.stretch,O),dt=ch(Qe.stretch-se,he,T,t.top),Pt=uh(Qe.fixed-Pe,Ne,Qe.stretch,F),jt=new ve(lt,mt),nr=new ve(yt,mt),Ut=new ve(yt,dt),Dt=new ve(lt,dt),Er=new ve(Fe/p,Et/p),qt=new ve(Nt/p,Pt/p),Ht=e*Math.PI/180;if(Ht){const $r=Math.sin(Ht),gr=Math.cos(Ht),Lr=[gr,-$r,$r,gr];jt._matMult(Lr),nr._matMult(Lr),Dt._matMult(Lr),Ut._matMult(Lr)}const mr=ze.stretch+ze.fixed,br=qe.stretch+qe.fixed;return{tl:jt,tr:nr,bl:Dt,br:Ut,tex:{x:h.paddedRect.x+Ol+mr,y:h.paddedRect.y+Ol+br,w:He.stretch+He.fixed-mr,h:Qe.stretch+Qe.fixed-br},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Er,pixelOffsetBR:qt,minFontScaleX:ke/p/b,minFontScaleY:Ne/p/T,isSDF:r}};if(i&&(h.stretchX||h.stretchY)){const ze=cg(A,q,O),qe=cg(M,ee,F);for(let He=0;He<ze.length-1;He++){const Qe=ze[He],lt=ze[He+1];for(let Fe=0;Fe<qe.length-1;Fe++)d.push(nt(Qe,qe[Fe],lt,qe[Fe+1]))}}else d.push(nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:_+1},{fixed:0,stretch:x+1}));return d}function dh(t,e,r){let i=0;for(const d of t)i+=Math.max(e,Math.min(r,d[1]))-Math.max(e,Math.min(r,d[0]));return i}function cg(t,e,r){const i=[{fixed:-Ol,stretch:0}];for(const[d,h]of t){const p=i[i.length-1];i.push({fixed:d-p.stretch,stretch:p.stretch}),i.push({fixed:d-p.stretch,stretch:p.stretch+(h-d)})}return i.push({fixed:e+Ol,stretch:r}),i}function ch(t,e,r,i){return t/e*r+i}function uh(t,e,r,i){return t-e*r/i}function Av(t,e,r,i){const d=e+t.positionedLines[i].lineOffset;return i===0?r+d/2:r+(d+(e+t.positionedLines[i-1].lineOffset))/2}class Iv{constructor(e=[],r=Mv){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:i}=this,d=r[e];for(;e>0;){const h=e-1>>1,p=r[h];if(i(d,p)>=0)break;r[e]=p,e=h}r[e]=d}_down(e){const{data:r,compare:i}=this,d=this.length>>1,h=r[e];for(;e<d;){let p=1+(e<<1),_=r[p];const x=p+1;if(x<this.length&&i(r[x],_)<0&&(p=x,_=r[x]),i(_,h)>=0)break;r[e]=_,e=p}r[e]=h}}function Mv(t,e){return t<e?-1:t>e?1:0}function Pv(t,e=1,r=!1){let i=1/0,d=1/0,h=-1/0,p=-1/0;const _=t[0];for(let D=0;D<_.length;D++){const O=_[D];(!D||O.x<i)&&(i=O.x),(!D||O.y<d)&&(d=O.y),(!D||O.x>h)&&(h=O.x),(!D||O.y>p)&&(p=O.y)}const x=Math.min(h-i,p-d);let b=x/2;const T=new Iv([],Lv);if(x===0)return new ve(i,d);for(let D=i;D<h;D+=x)for(let O=d;O<p;O+=x)T.push(new zl(D+b,O+b,b,t));let A=function(D){let O=0,F=0,q=0;const ee=D[0];for(let de=0,te=ee.length,se=te-1;de<te;se=de++){const he=ee[de],ue=ee[se],ke=he.x*ue.y-ue.x*he.y;F+=(he.x+ue.x)*ke,q+=(he.y+ue.y)*ke,O+=3*ke}return new zl(F/O,q/O,0,D)}(t),M=T.length;for(;T.length;){const D=T.pop();(D.d>A.d||!A.d)&&(A=D,r&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,M)),D.max-A.d<=e||(b=D.h/2,T.push(new zl(D.p.x-b,D.p.y-b,b,t)),T.push(new zl(D.p.x+b,D.p.y-b,b,t)),T.push(new zl(D.p.x-b,D.p.y+b,b,t)),T.push(new zl(D.p.x+b,D.p.y+b,b,t)),M+=4)}return r&&(console.log(`num probes: ${M}`),console.log(`best distance: ${A.d}`)),A.p}function Lv(t,e){return e.max-t.max}class zl{constructor(e,r,i,d){this.p=new ve(e,r),this.h=i,this.d=function(h,p){let _=!1,x=1/0;for(let b=0;b<p.length;b++){const T=p[b];for(let A=0,M=T.length,D=M-1;A<M;D=A++){const O=T[A],F=T[D];O.y>h.y!=F.y>h.y&&h.x<(F.x-O.x)*(h.y-O.y)/(F.y-O.y)+O.x&&(_=!_),x=Math.min(x,om(h,O,F))}}return(_?1:-1)*Math.sqrt(x)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const Bl=7,Tf=Number.POSITIVE_INFINITY,Rv=Math.sqrt(2);function ug(t,[e,r]){let i=0,d=0;if(r===Tf){e<0&&(e=0);const h=e/Rv;switch(t){case"top-right":case"top-left":d=h-Bl;break;case"bottom-right":case"bottom-left":d=-h+Bl;break;case"bottom":d=-e+Bl;break;case"top":d=e-Bl}switch(t){case"top-right":case"bottom-right":i=-h;break;case"top-left":case"bottom-left":i=h;break;case"left":i=e;break;case"right":i=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),t){case"top-right":case"top-left":case"top":d=r-Bl;break;case"bottom-right":case"bottom-left":case"bottom":d=-r+Bl}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}}return[i,d]}function kv(t,e,r,i,d,h,p,_,x,b){t.createArrays(),t.tilePixelRatio=Rt/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const T=t.layers[0].layout,A=t.layers[0]._unevaluatedLayout._values,M={};if(t.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:q}=t.textSizeData;M.compositeTextSizes=[A["text-size"].possiblyEvaluate(new C(F),_),A["text-size"].possiblyEvaluate(new C(q),_)]}if(t.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:q}=t.iconSizeData;M.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new C(F),_),A["icon-size"].possiblyEvaluate(new C(q),_)]}M.layoutTextSize=A["text-size"].possiblyEvaluate(new C(x+1),_),M.layoutIconSize=A["icon-size"].possiblyEvaluate(new C(x+1),_),M.textMaxSize=A["text-size"].possiblyEvaluate(new C(18),_);const D=T.get("text-rotation-alignment")==="map"&&T.get("symbol-placement")!=="point",O=T.get("text-size");for(const F of t.features){const q=T.get("text-font").evaluate(F,{},_).join(","),ee=O.evaluate(F,{},_),de=M.layoutTextSize.evaluate(F,{},_),te=(M.layoutIconSize.evaluate(F,{},_),{horizontal:{},vertical:void 0}),se=F.text;let he,ue=[0,0];if(se){const Ne=se.toString(),nt=T.get("text-letter-spacing").evaluate(F,{},_)*un,ze=T.get("text-line-height").evaluate(F,{},_)*un,qe=R1(Ne)?nt:0,He=T.get("text-anchor").evaluate(F,{},_),Qe=T.get("text-variable-anchor");if(!Qe){const yt=T.get("text-radial-offset").evaluate(F,{},_);ue=yt?ug(He,[yt*un,Tf]):T.get("text-offset").evaluate(F,{},_).map(Nt=>Nt*un)}let lt=D?"center":T.get("text-justify").evaluate(F,{},_);const Fe=T.get("symbol-placement")==="point",mt=Fe?T.get("text-max-width").evaluate(F,{},_)*un:1/0,Et=yt=>{t.allowVerticalPlacement&&Wd(Ne)&&(te.vertical=$f(se,e,r,d,q,mt,ze,He,yt,qe,ue,yi.vertical,!0,de,ee))};if(!D&&Qe){const yt=lt==="auto"?Qe.map(dt=>Sf(dt)):[lt];let Nt=!1;for(let dt=0;dt<yt.length;dt++){const Pt=yt[dt];if(!te.horizontal[Pt])if(Nt)te.horizontal[Pt]=te.horizontal[0];else{const jt=$f(se,e,r,d,q,mt,ze,"center",Pt,qe,ue,yi.horizontal,!1,de,ee);jt&&(te.horizontal[Pt]=jt,Nt=jt.positionedLines.length===1)}}Et("left")}else{if(lt==="auto"&&(lt=Sf(He)),Fe||T.get("text-writing-mode").indexOf("horizontal")>=0||!Wd(Ne)){const yt=$f(se,e,r,d,q,mt,ze,He,lt,qe,ue,yi.horizontal,!1,de,ee);yt&&(te.horizontal[lt]=yt)}Et(Fe?"left":lt)}}let ke=!1;if(F.icon&&F.icon.name){const Ne=i[F.icon.name];Ne&&(he=Tv(d[F.icon.name],T.get("icon-offset").evaluate(F,{},_),T.get("icon-anchor").evaluate(F,{},_)),ke=Ne.sdf,t.sdfIcons===void 0?t.sdfIcons=Ne.sdf:t.sdfIcons!==Ne.sdf&&yr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==t.pixelRatio||T.get("icon-rotate").constantOr(1)!==0)&&(t.iconsNeedLinear=!0))}const Pe=fg(te.horizontal)||te.vertical;t.iconsInText||(t.iconsInText=!!Pe&&Pe.iconsInText),(Pe||he)&&Dv(t,F,te,he,i,M,de,0,ue,ke,p,_,b)}h&&t.generateCollisionDebugBuffers(x,t.collisionBoxArray)}function Sf(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Dv(t,e,r,i,d,h,p,_,x,b,T,A,M){let D=h.textMaxSize.evaluate(e,{},A);D===void 0&&(D=p);const O=t.layers[0].layout,F=O.get("icon-offset").evaluate(e,{},A),q=fg(r.horizontal)||r.vertical,ee=M.name==="globe",de=un,te=p/de,se=t.tilePixelRatio*D/de,he=(He=t.overscaling,t.zoom>18&&He>2&&(He>>=1),Math.max(Rt/(512*He),1)*O.get("symbol-spacing")),ue=O.get("text-padding")*t.tilePixelRatio,ke=O.get("icon-padding")*t.tilePixelRatio,Pe=tt(O.get("text-max-angle")),Ne=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",nt=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",ze=O.get("symbol-placement"),qe=he/2;var He;const Qe=O.get("icon-text-fit");let lt;i&&Qe!=="none"&&(t.allowVerticalPlacement&&r.vertical&&(lt=eg(i,r.vertical,Qe,O.get("icon-text-fit-padding"),F,te)),q&&(i=eg(i,q,Qe,O.get("icon-text-fit-padding"),F,te)));const Fe=(mt,Et,yt)=>{if(Et.x<0||Et.x>=Rt||Et.y<0||Et.y>=Rt)return;let Nt=null;if(ee){const{x:dt,y:Pt,z:jt}=M.projectTilePoint(Et.x,Et.y,yt);Nt={anchor:new Xo(dt,Pt,jt,0,void 0),up:M.upVector(yt,Et.x,Et.y)}}(function(dt,Pt,jt,nr,Ut,Dt,Er,qt,Ht,mr,br,$r,gr,Lr,zr,Wr,_r,Qr,Kr,kr,or,Xr,wr,Nn,Yr){const hn=dt.addToLineVertexArray(Pt,nr);let an,jn,ln,ao,jl,Lc,Rc,qg=0,Hg=0,Wg=0,Kg=0,jf=-1,Uf=-1;const So={};let Xg=O1("");const Ma=jt?jt.anchor:Pt;let Vf=0,Gf=0;if(Ht._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Vf,Gf]=Ht.layout.get("text-offset").evaluate(or,{},Yr).map(ai=>ai*un):(Vf=Ht.layout.get("text-radial-offset").evaluate(or,{},Yr)*un,Gf=Tf),dt.allowVerticalPlacement&&Ut.vertical){const ai=Ut.vertical;if(zr)Lc=Cf(ai),qt&&(Rc=Cf(qt));else{const li=Ht.layout.get("text-rotate").evaluate(or,{},Yr)+90;ln=hh(mr,Ma,Pt,br,$r,gr,ai,Lr,li,Wr),qt&&(ao=hh(mr,Ma,Pt,br,$r,gr,qt,Qr,li))}}if(Dt){const ai=Ht.layout.get("icon-rotate").evaluate(or,{},Yr),li=Ht.layout.get("icon-text-fit")!=="none",kc=dg(Dt,ai,wr,li),qf=qt?dg(qt,ai,wr,li):void 0;jn=hh(mr,Ma,Pt,br,$r,gr,Dt,Qr,ai),qg=4*kc.length;const Yg=dt.iconSizeData;let Pa=null;Yg.kind==="source"?(Pa=[io*Ht.layout.get("icon-size").evaluate(or,{},Yr)],Pa[0]>Cs&&yr(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Ec}. Reduce your "icon-size".`)):Yg.kind==="composite"&&(Pa=[io*Xr.compositeIconSizes[0].evaluate(or,{},Yr),io*Xr.compositeIconSizes[1].evaluate(or,{},Yr)],(Pa[0]>Cs||Pa[1]>Cs)&&yr(`${dt.layerIds[0]}: Value for "icon-size" is >= ${Ec}. Reduce your "icon-size".`)),dt.addSymbols(dt.icon,kc,Pa,kr,Kr,or,!1,jt,Pt,hn.lineStartIndex,hn.lineLength,-1,Nn,Yr),jf=dt.icon.placedSymbolArray.length-1,qf&&(Hg=4*qf.length,dt.addSymbols(dt.icon,qf,Pa,kr,Kr,or,yi.vertical,jt,Pt,hn.lineStartIndex,hn.lineLength,-1,Nn,Yr),Uf=dt.icon.placedSymbolArray.length-1)}for(const ai in Ut.horizontal){const li=Ut.horizontal[ai];an||(Xg=O1(li.text),zr?jl=Cf(li):an=hh(mr,Ma,Pt,br,$r,gr,li,Lr,Ht.layout.get("text-rotate").evaluate(or,{},Yr),Wr));const kc=li.positionedLines.length===1;if(Wg+=hg(dt,jt,Pt,li,Er,Ht,zr,or,Wr,hn,Ut.vertical?yi.horizontal:yi.horizontalOnly,kc?Object.keys(Ut.horizontal):[ai],So,jf,Xr,Nn,Yr),kc)break}Ut.vertical&&(Kg+=hg(dt,jt,Pt,Ut.vertical,Er,Ht,zr,or,Wr,hn,yi.vertical,["vertical"],So,Uf,Xr,Nn,Yr));let Rs=-1;const Zf=(ai,li)=>ai?Math.max(ai,li):li;Rs=Zf(jl,Rs),Rs=Zf(Lc,Rs),Rs=Zf(Rc,Rs);const d5=Rs>-1?1:0;dt.glyphOffsetArray.length>=Is.MAX_GLYPHS&&yr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),or.sortKey!==void 0&&dt.addToSortKeyRanges(dt.symbolInstances.length,or.sortKey),dt.symbolInstances.emplaceBack(Ma.x,Ma.y,Ma.z,Pt.x,Pt.y,So.right>=0?So.right:-1,So.center>=0?So.center:-1,So.left>=0?So.left:-1,So.vertical>=0?So.vertical:-1,jf,Uf,Xg,an!==void 0?an:dt.collisionBoxArray.length,an!==void 0?an+1:dt.collisionBoxArray.length,ln!==void 0?ln:dt.collisionBoxArray.length,ln!==void 0?ln+1:dt.collisionBoxArray.length,jn!==void 0?jn:dt.collisionBoxArray.length,jn!==void 0?jn+1:dt.collisionBoxArray.length,ao||dt.collisionBoxArray.length,ao?ao+1:dt.collisionBoxArray.length,br,Wg,Kg,qg,Hg,d5,0,Vf,Gf,Rs)})(t,Et,Nt,mt,r,i,d,lt,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,ue,Ne,x,0,ke,nt,F,e,h,b,T,A)};if(ze==="line")for(const mt of sg(e.geometry,0,0,Rt,Rt)){const Et=Cv(mt,he,Pe,r.vertical||q,i,de,se,t.overscaling,Rt);for(const yt of Et)q&&Ov(t,q.text,qe,yt)||Fe(mt,yt,A)}else if(ze==="line-center"){for(const mt of e.geometry)if(mt.length>1){const Et=Sv(mt,Pe,r.vertical||q,i,de,se);Et&&Fe(mt,Et,A)}}else if(e.type==="Polygon")for(const mt of ff(e.geometry,0)){const Et=Pv(mt,16);Fe(mt[0],new Xo(Et.x,Et.y,0,0,void 0),A)}else if(e.type==="LineString")for(const mt of e.geometry)Fe(mt,new Xo(mt[0].x,mt[0].y,0,0,void 0),A);else if(e.type==="Point")for(const mt of e.geometry)for(const Et of mt)Fe([Et],new Xo(Et.x,Et.y,0,0,void 0),A)}const Ec=255,Cs=Ec*io;function hg(t,e,r,i,d,h,p,_,x,b,T,A,M,D,O,F,q){const ee=function(se,he,ue,ke,Pe,Ne,nt,ze){const qe=[];if(he.positionedLines.length===0)return qe;const He=ke.layout.get("text-rotate").evaluate(Ne,{})*Math.PI/180,Qe=function(yt){const Nt=yt[0],dt=yt[1],Pt=Nt*dt;return Pt>0?[Nt,-dt]:Pt<0?[-Nt,dt]:Nt===0?[dt,Nt]:[dt,-Nt]}(ue);let lt=Math.abs(he.top-he.bottom);for(const yt of he.positionedLines)lt-=yt.lineOffset;const Fe=he.positionedLines.length,mt=lt/Fe;let Et=he.top-ue[1];for(let yt=0;yt<Fe;++yt){const Nt=he.positionedLines[yt];Et=Av(he,mt,Et,yt);for(const dt of Nt.positionedGlyphs){if(!dt.rect)continue;const Pt=dt.rect||{};let jt=qm+1,nr=!0,Ut=1,Dt=0;if(dt.imageName){const wr=nt[dt.imageName];if(!wr)continue;if(wr.sdf){yr("SDF images are not supported in formatted text and will be ignored.");continue}nr=!1,Ut=wr.pixelRatio,jt=Hn/Ut}const Er=(Pe||ze)&&dt.vertical,qt=dt.metrics.advance*dt.scale/2,Ht=dt.metrics,mr=dt.rect;if(mr===null)continue;ze&&he.verticalizable&&(Dt=dt.imageName?qt-dt.metrics.width*dt.scale/2:0);const br=Pe?[dt.x+qt,dt.y]:[0,0];let $r=[0,0],gr=[0,0],Lr=!1;Pe||(Er?(gr=[dt.x+qt+Qe[0],dt.y+Qe[1]-Dt],Lr=!0):$r=[dt.x+qt+ue[0],dt.y+ue[1]-Dt]);const zr=mr.w*dt.scale/(Ut*(dt.localGlyph?oo:1)),Wr=mr.h*dt.scale/(Ut*(dt.localGlyph?oo:1));let _r,Qr,Kr,kr;if(Er){const wr=dt.y-Et,Nn=new ve(-qt,qt-wr),Yr=-Math.PI/2,hn=new ve(...gr);_r=new ve(-qt+$r[0],$r[1]),_r._rotateAround(Yr,Nn)._add(hn),_r.x+=-wr+qt,_r.y-=(Ht.left-jt)*dt.scale;const an=dt.imageName?Ht.advance*dt.scale:un*dt.scale,jn=String.fromCharCode(dt.glyph);dv(jn)?_r.x+=(1-jt)*dt.scale:cv(jn)?_r.x+=an-Ht.height*dt.scale+(-jt-1)*dt.scale:_r.x+=dt.imageName||Ht.width+2*jt===mr.w&&Ht.height+2*jt===mr.h?(an-Wr)/2:(an-(Ht.height+2*jt)*dt.scale)/2,Qr=new ve(_r.x,_r.y-zr),Kr=new ve(_r.x+Wr,_r.y),kr=new ve(_r.x+Wr,_r.y-zr)}else{const wr=(Ht.left-jt)*dt.scale-qt+$r[0],Nn=(-Ht.top-jt)*dt.scale+$r[1],Yr=wr+zr,hn=Nn+Wr;_r=new ve(wr,Nn),Qr=new ve(Yr,Nn),Kr=new ve(wr,hn),kr=new ve(Yr,hn)}if(He){let wr;wr=Pe?new ve(0,0):Lr?new ve(Qe[0],Qe[1]):new ve(ue[0],ue[1]),_r._rotateAround(He,wr),Qr._rotateAround(He,wr),Kr._rotateAround(He,wr),kr._rotateAround(He,wr)}const or=new ve(0,0),Xr=new ve(0,0);qe.push({tl:_r,tr:Qr,bl:Kr,br:kr,tex:Pt,writingMode:he.writingMode,glyphOffset:br,sectionIndex:dt.sectionIndex,isSDF:nr,pixelOffsetTL:or,pixelOffsetBR:Xr,minFontScaleX:0,minFontScaleY:0})}}return qe}(0,i,x,h,p,_,d,t.allowVerticalPlacement),de=t.textSizeData;let te=null;de.kind==="source"?(te=[io*h.layout.get("text-size").evaluate(_,{},q)],te[0]>Cs&&yr(`${t.layerIds[0]}: Value for "text-size" is >= ${Ec}. Reduce your "text-size".`)):de.kind==="composite"&&(te=[io*O.compositeTextSizes[0].evaluate(_,{},q),io*O.compositeTextSizes[1].evaluate(_,{},q)],(te[0]>Cs||te[1]>Cs)&&yr(`${t.layerIds[0]}: Value for "text-size" is >= ${Ec}. Reduce your "text-size".`)),t.addSymbols(t.text,ee,te,x,p,_,T,e,r,b.lineStartIndex,b.lineLength,D,F,q);for(const se of A)M[se]=t.text.placedSymbolArray.length-1;return 4*ee.length}function fg(t){for(const e in t)return t[e];return null}function hh(t,e,r,i,d,h,p,_,x,b){let T=p.top,A=p.bottom,M=p.left,D=p.right;const O=p.collisionPadding;if(O&&(M-=O[0],T-=O[1],D+=O[2],A+=O[3]),x){const F=new ve(M,T),q=new ve(D,T),ee=new ve(M,A),de=new ve(D,A),te=tt(x);let se=new ve(0,0);b&&(se=new ve(b[0],b[1])),F._rotateAround(te,se),q._rotateAround(te,se),ee._rotateAround(te,se),de._rotateAround(te,se),M=Math.min(F.x,q.x,ee.x,de.x),D=Math.max(F.x,q.x,ee.x,de.x),T=Math.min(F.y,q.y,ee.y,de.y),A=Math.max(F.y,q.y,ee.y,de.y)}return t.emplaceBack(e.x,e.y,e.z,r.x,r.y,M,T,D,A,_,i,d,h),t.length-1}function Cf(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function Ov(t,e,r,i){const d=t.compareText;if(e in d){const h=d[e];for(let p=h.length-1;p>=0;p--)if(i.dist(h[p])<r)return!0}else d[e]=[];return d[e].push(i),!1}function pg(t,e){const r=t.fovAboveCenter,i=t.elevation?t.elevation.getMinElevationBelowMSL()*e:0,d=(t._camera.position[2]*t.worldSize-i)/Math.cos(t._pitch),h=Math.sin(r)*d/Math.sin(Math.max(Math.PI/2-t._pitch-r,.01)),p=Math.sin(t._pitch)*h+d;return Math.min(1.01*p,d*(1/t._horizonShift))}function Aa(t,e){if(!e.isReprojectedInTileSpace)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const r=Math.pow(2,-t.z),i=t.x*r,d=(t.x+1)*r,h=t.y*r,p=(t.y+1)*r,_=_i(i),x=_i(d),b=_n(h),T=_n(p),A=e.project(_,b),M=e.project(x,b),D=e.project(x,T),O=e.project(_,T);let F=Math.min(A.x,M.x,D.x,O.x),q=Math.min(A.y,M.y,D.y,O.y),ee=Math.max(A.x,M.x,D.x,O.x),de=Math.max(A.y,M.y,D.y,O.y);const te=r/16;function se(ue,ke,Pe,Ne,nt,ze){const qe=(Pe+nt)/2,He=(Ne+ze)/2,Qe=e.project(_i(qe),_n(He)),lt=Math.max(0,F-Qe.x,q-Qe.y,Qe.x-ee,Qe.y-de);F=Math.min(F,Qe.x),ee=Math.max(ee,Qe.x),q=Math.min(q,Qe.y),de=Math.max(de,Qe.y),lt>te&&(se(ue,Qe,Pe,Ne,qe,He),se(Qe,ke,qe,He,nt,ze))}se(A,M,i,h,d,h),se(M,D,d,h,d,p),se(D,O,d,p,i,p),se(O,A,i,p,i,h),F-=te,q-=te,ee+=te,de+=te;const he=1/Math.max(ee-F,de-q);return{scale:he,x:F*he,y:q*he,x2:ee*he,y2:de*he,projection:e}}const zv=to(new Float32Array(16));class As{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new pr(0,0)}projectTilePoint(e,r,i){return{x:e,y:r,z:0}}locationPoint(e,r,i=!0){return e._coordinatePoint(e.locationCoordinate(r),i)}pixelsPerMeter(e,r){return no(1,e)*r}pixelSpaceConversion(e,r,i){return 1}farthestPixelDistance(e){return pg(e,e.pixelsPerMeter)}pointCoordinate(e,r,i,d){const h=e.horizonLineFromTop(!1),p=new ve(r,Math.max(h,i));return e.rayIntersectionCoordinate(e.pointRayIntersection(p,d))}pointCoordinate3D(e,r,i){const d=new ve(r,i);if(e.elevation)return e.elevation.pointCoordinate(d);{const h=this.pointCoordinate(e,d.x,d.y,0);return[h.x,h.y,h.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const i=e.horizonLineFromTop();return r.y<i}createInversionMatrix(e,r){return zv}createTileMatrix(e,r,i){let d,h,p;const _=i.canonical,x=to(new Float64Array(16));if(this.isReprojectedInTileSpace){const b=Aa(_,this);d=1,h=b.x+i.wrap*b.scale,p=b.y,ba(x,x,[d/b.scale,d/b.scale,e.pixelsPerMeter/r])}else d=r/e.zoomScale(_.z),h=(_.x+Math.pow(2,_.z)*i.wrap)*d,p=_.y*d;return tc(x,x,[h,p,0]),ba(x,x,[d/Rt,d/Rt,1]),x}upVector(e,r,i){return[0,0,1]}upVectorScale(e,r,i){return{metersToTile:1}}}class Bv extends As{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,i]=this.parallels=e.parallels||[29.5,45.5],d=Math.sin(tt(r));this.n=(d+Math.sin(tt(i)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:i,c:d,r0:h}=this,p=tt(e-this.center[0]),_=tt(r),x=Math.sqrt(d-2*i*Math.sin(_))/i;return{x:x*Math.sin(p*i),y:x*Math.cos(p*i)-h,z:0}}unproject(e,r){const{n:i,c:d,r0:h}=this,p=h+r;let _=Math.atan2(e,Math.abs(p))*Math.sign(p);p*i<0&&(_-=Math.PI*Math.sign(e)*Math.sign(p));const x=tt(this.center[0])*i;_=Qt(_,-Math.PI-x,Math.PI-x);const b=ut(_e(_/i)+this.center[0],-180,180),T=Math.asin(ut((d-(e*e+p*p)*i*i)/(2*i),-1,1)),A=ut(_e(T),-yn,yn);return new pr(b,A)}}const Tc=1.340264,Sc=-.081106,Cc=893e-6,Ac=.003796,fh=Math.sqrt(3)/2;class Fv extends As{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const i=Math.asin(fh*Math.sin(r)),d=i*i,h=d*d*d;return{x:.5*(e*Math.cos(i)/(fh*(Tc+3*Sc*d+h*(7*Cc+9*Ac*d)))/Math.PI+.5),y:1-.5*(i*(Tc+Sc*d+h*(Cc+Ac*d))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let i=r=(2*(1-r)-1)*Math.PI,d=i*i,h=d*d*d;for(let T,A,M,D=0;D<12&&(A=i*(Tc+Sc*d+h*(Cc+Ac*d))-r,M=Tc+3*Sc*d+h*(7*Cc+9*Ac*d),T=A/M,i=ut(i-T,-Math.PI/3,Math.PI/3),d=i*i,h=d*d*d,!(Math.abs(T)<1e-12));++D);const p=fh*e*(Tc+3*Sc*d+h*(7*Cc+9*Ac*d))/Math.cos(i),_=Math.asin(Math.sin(i)/fh),x=ut(180*p/Math.PI,-180,180),b=ut(180*_/Math.PI,-yn,yn);return new pr(x,b)}}class Nv extends As{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const i=360*(e-.5),d=ut(360*(.5-r),-yn,yn);return new pr(i,d)}}const Fl=Math.PI/2;function ph(t){return Math.tan((Fl+t)/2)}class jv extends As{constructor(e){super(e),this.center=e.center||[0,30];const[r,i]=this.parallels=e.parallels||[30,30];let d=tt(r),h=tt(i);this.southernCenter=d+h<0,this.southernCenter&&(d=-d,h=-h);const p=Math.cos(d),_=ph(d);this.n=d===h?Math.sin(d):Math.log(p/Math.cos(h))/Math.log(ph(h)/_),this.f=p*Math.pow(ph(d),this.n)/this.n}project(e,r){r=tt(r),this.southernCenter&&(r=-r),e=tt(e-this.center[0]);const i=1e-6,{n:d,f:h}=this;h>0?r<-Fl+i&&(r=-Fl+i):r>Fl-i&&(r=Fl-i);const p=h/Math.pow(ph(r),d);let _=p*Math.sin(d*e),x=h-p*Math.cos(d*e);return _=.5*(_/Math.PI+.5),x=.5*(x/Math.PI+.5),{x:_,y:this.southernCenter?x:1-x,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:i,f:d}=this,h=d-r,p=Math.sign(h),_=Math.sign(i)*Math.sqrt(e*e+h*h);let x=Math.atan2(e,Math.abs(h))*p;h*i<0&&(x-=Math.PI*Math.sign(e)*p);const b=ut(_e(x/i)+this.center[0],-180,180),T=ut(_e(2*Math.atan(Math.pow(d/_,1/i))-Fl),-yn,yn);return new pr(b,this.southernCenter?-T:T)}}class mg extends As{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:bo(e),y:$o(r),z:0}}unproject(e,r){const i=_i(e),d=_n(r);return new pr(i,d)}}const gg=tt(yn);class Uv extends As{project(e,r){const i=(r=tt(r))*r,d=i*i;return{x:.5*((e=tt(e))*(.8707-.131979*i+d*(d*(.003971*i-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+i*(.015085+d*(.028874*i-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let i=r=(2*(1-r)-1)*Math.PI,d=25,h=0,p=i*i;do{p=i*i;const b=p*p;h=(i*(1.007226+p*(.015085+b*(.028874*p-.044475-.005916*b)))-r)/(1.007226+p*(.045255+b*(.259866*p-.311325-.005916*11*b))),i=ut(i-h,-gg,gg)}while(Math.abs(h)>1e-6&&--d>0);p=i*i;const _=ut(_e(e/(.8707+p*(p*(p*p*p*(.003971-.001529*p)-.013791)-.131979))),-180,180),x=_e(i);return new pr(_,x)}}const _g=tt(yn);class Vv extends As{project(e,r){r=tt(r),e=tt(e);const i=Math.cos(r),d=2/Math.PI,h=Math.acos(i*Math.cos(e/2)),p=Math.sin(h)/h,_=.5*(e*d+2*i*Math.sin(e/2)/p)||0,x=.5*(r+Math.sin(r)/p)||0;return{x:.5*(_/Math.PI+.5),y:1-.5*(x/Math.PI+1),z:0}}unproject(e,r){let i=e=(2*e-.5)*Math.PI,d=r=(2*(1-r)-1)*Math.PI,h=25;const p=1e-6;let _=0,x=0;do{const b=Math.cos(d),T=Math.sin(d),A=2*T*b,M=T*T,D=b*b,O=Math.cos(i/2),F=Math.sin(i/2),q=2*O*F,ee=F*F,de=1-D*O*O,te=de?1/de:0,se=de?Math.acos(b*O)*Math.sqrt(1/de):0,he=.5*(2*se*b*F+2*i/Math.PI)-e,ue=.5*(se*T+d)-r,ke=.5*te*(D*ee+se*b*O*M)+1/Math.PI,Pe=te*(q*A/4-se*T*F),Ne=.125*te*(A*F-se*T*D*q),nt=.5*te*(M*O+se*ee*b)+.5,ze=Pe*Ne-nt*ke;_=(ue*Pe-he*nt)/ze,x=(he*Ne-ue*ke)/ze,i=ut(i-_,-Math.PI,Math.PI),d=ut(d-x,-_g,_g)}while((Math.abs(_)>p||Math.abs(x)>p)&&--h>0);return new pr(_e(i),_e(d))}}class yg extends As{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(tt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:i,cosPhi:d}=this;return{x:tt(e)*d*i+.5,y:-Math.sin(tt(r))/d*i+.5,z:0}}unproject(e,r){const{scale:i,cosPhi:d}=this,h=-(r-.5)/i,p=ut(_e((e-.5)/i)/d,-180,180),_=Math.asin(ut(h*d,-1,1)),x=ut(_e(_),-yn,yn);return new pr(p,x)}}class Gv extends mg{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,i){const d=dc(e,r,i);return Nr(d,d,cc(xo(i))),{x:d[0],y:d[1],z:d[2]}}locationPoint(e,r){const i=El(r.lat,r.lng),d=zn([],i),h=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;oc(i,i,d,no(1,0)*Rt*h);const p=to(new Float64Array(16));return xa(p,e.pixelMatrix,e.globeMatrix),Nr(i,i,p),new ve(i[0],i[1])}pixelsPerMeter(e,r){return no(1,0)*r}pixelSpaceConversion(e,r,i){const d=no(1,e)*r,h=tr(no(1,45)*r,d,i);return this.pixelsPerMeter(e,r)/h}createTileMatrix(e,r,i){const d=X1(xo(i.canonical));return xa(new Float64Array(16),e.globeMatrix,d)}createInversionMatrix(e,r){const{center:i}=e,d=cc(xo(r));return Uu(d,d,tt(i.lng)),N1(d,d,tt(i.lat)),ba(d,d,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(e,r,i,d){return Z0(e,r,i,!0)||new Sl(0,0)}pointCoordinate3D(e,r,i){const d=this.pointCoordinate(e,r,i,0);return[d.x,d.y,d.z]}isPointAboveHorizon(e,r){return!Z0(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(d,h){const p=d.cameraToCenterDistance,_=d._centerAltitude*h,x=d._camera,b=d._camera.forward(),T=qo([],gi([],b,-p),[0,0,_]),A=d.worldSize/(2*Math.PI),M=[0,0,-A],D=d.width/d.height,O=Math.tan(d.fovAboveCenter),F=gi([],x.up(),O),q=gi([],x.right(),O*D),ee=zn([],qo([],qo([],b,F),q)),de=[];let te;if(new G1(T,ee).closestPointOnSphere(M,A,de)){const se=qo([],de,M),he=ro([],se,T);te=Math.cos(d.fovAboveCenter)*rc(he)}else{const se=ro([],T,M),he=ro([],M,T);zn(he,he);const ue=rc(se)-A;te=Math.sqrt(ue*(ue+2*A));const ke=Math.acos(te/(A+ue))-Math.acos(Pi(b,he));te*=Math.cos(ke)}return 1.01*te}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),i=Tl(e.zoom);if(i>0){const d=pg(e,no(1,e.center.lat)*e.worldSize),h=e.worldSize/(2*Math.PI),p=Math.max(e.width,e.height)/e.worldSize*Math.PI;return tr(r,d+h*(1-Math.cos(p)),Math.pow(i,10))}return r}upVector(e,r,i){return dc(r,i,e,1)}upVectorScale(e){return{metersToTile:Vu(Zu(xo(e)))}}}function vg(t){const e=t.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(t.name){case"mercator":return new mg(t);case"equirectangular":return new Nv(t);case"naturalEarth":return new Uv(t);case"equalEarth":return new Fv(t);case"winkelTripel":return new Vv(t);case"albers":return r?new yg(t):new Bv(t);case"lambertConformalConic":return r?new yg(t):new jv(t);case"globe":return new Gv(t)}throw new Error(`Invalid projection name: ${t.name}`)}const Zv=th.types,qv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mh(t,e,r,i,d,h,p,_,x,b,T,A,M){const D=_?Math.min(Cs,Math.round(_[0])):0,O=_?Math.min(Cs,Math.round(_[1])):0;t.emplaceBack(e,r,Math.round(32*i),Math.round(32*d),h,p,(D<<1)+(x?1:0),O,16*b,16*T,256*A,256*M)}function gh(t,e,r,i,d,h,p){t.emplaceBack(e,r,i,d,h,p)}function _h(t,e,r,i,d){t.emplaceBack(e,r,i,d),t.emplaceBack(e,r,i,d),t.emplaceBack(e,r,i,d),t.emplaceBack(e,r,i,d)}function Hv(t){for(const e of t.sections)if(D1(e.text))return!0;return!1}class Af{constructor(e){this.layoutVertexArray=new Xe,this.indexArray=new At,this.programConfigurations=e,this.segments=new qr,this.dynamicLayoutVertexArray=new et,this.opacityVertexArray=new Mt,this.placedSymbolArray=new Zr,this.globeExtVertexArray=new st}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,i,d){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,tv.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,nv.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,qv,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,rv.members,!0)),this.opacityVertexBuffer.itemSize=1),(i||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}$t(Af,"SymbolBuffers");class If{constructor(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new qr,this.collisionVertexArray=new Yt,this.collisionVertexArrayExt=new Xt}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,iv.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,ov.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}$t(If,"CollisionBuffers");class Is{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(p=>p.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=to([]),this.placementViewportMatrix=to([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_f(this.zoom,r["text-size"]),this.iconSizeData=_f(this.zoom,r["icon-size"]);const i=this.layers[0].layout,d=i.get("symbol-sort-key"),h=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=h!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(h==="viewport-y"||h==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map(p=>yi[p]),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Af(new va(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Af(new va(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new On,this.lineVertexArray=new vl,this.symbolInstances=new Cr}calculateGlyphDependencies(e,r,i,d,h){for(let p=0;p<e.length;p++)if(r[e.charCodeAt(p)]=!0,d&&h){const _=bc[e.charAt(p)];_&&(r[_.charCodeAt(0)]=!0)}}populate(e,r,i,d){const h=this.layers[0],p=h.layout,_=this.projection.name==="globe",x=p.get("text-font"),b=p.get("text-field"),T=p.get("icon-image"),A=(b.value.kind!=="constant"||b.value.value instanceof Dn&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,D=p.get("symbol-sort-key");if(this.features=[],!A&&!M)return;const O=r.iconDependencies,F=r.glyphDependencies,q=r.availableImages,ee=new C(this.zoom);for(const{feature:de,id:te,index:se,sourceLayerIndex:he}of e){const ue=h._featureFilter.needGeometry,ke=Ta(de,ue);if(!h._featureFilter.filter(ee,ke,i))continue;if(ue||(ke.geometry=Ho(de,i,d)),_&&de.type!==1&&i.z<=5){const ze=ke.geometry,qe=.98078528056,He=(Qe,lt)=>Pi(dc(Qe.x,Qe.y,i,1),dc(lt.x,lt.y,i,1))<qe;for(let Qe=0;Qe<ze.length;Qe++)ze[Qe]=n4(ze[Qe],He)}let Pe,Ne;if(A){const ze=h.getValueAndResolveTokens("text-field",ke,i,q),qe=Dn.factory(ze);Hv(qe)&&(this.hasRTLText=!0),(!this.hasRTLText||y()==="unavailable"||this.hasRTLText&&E.isParsed())&&(Pe=lv(qe,h,ke))}if(M){const ze=h.getValueAndResolveTokens("icon-image",ke,i,q);Ne=ze instanceof ti?ze:ti.fromString(ze)}if(!Pe&&!Ne)continue;const nt=this.sortFeaturesByKey?D.evaluate(ke,{},i):void 0;if(this.features.push({id:te,text:Pe,icon:Ne,index:se,sourceLayerIndex:he,geometry:ke.geometry,properties:de.properties,type:Zv[de.type],sortKey:nt}),Ne&&(O[Ne.name]=!0),Pe){const ze=x.evaluate(ke,{},i).join(","),qe=p.get("text-rotation-alignment")==="map"&&p.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(yi.vertical)>=0;for(const He of Pe.sections)if(He.image)O[He.image.name]=!0;else{const Qe=Wd(Pe.toString()),lt=He.fontStack||ze,Fe=F[lt]=F[lt]||{};this.calculateGlyphDependencies(He.text,Fe,qe,this.allowVerticalPlacement,Qe)}}}p.get("symbol-placement")==="line"&&(this.features=function(de){const te={},se={},he=[];let ue=0;function ke(ze){he.push(de[ze]),ue++}function Pe(ze,qe,He){const Qe=se[ze];return delete se[ze],se[qe]=Qe,he[Qe].geometry[0].pop(),he[Qe].geometry[0]=he[Qe].geometry[0].concat(He[0]),Qe}function Ne(ze,qe,He){const Qe=te[qe];return delete te[qe],te[ze]=Qe,he[Qe].geometry[0].shift(),he[Qe].geometry[0]=He[0].concat(he[Qe].geometry[0]),Qe}function nt(ze,qe,He){const Qe=He?qe[0][qe[0].length-1]:qe[0][0];return`${ze}:${Qe.x}:${Qe.y}`}for(let ze=0;ze<de.length;ze++){const qe=de[ze],He=qe.geometry,Qe=qe.text?qe.text.toString():null;if(!Qe){ke(ze);continue}const lt=nt(Qe,He),Fe=nt(Qe,He,!0);if(lt in se&&Fe in te&&se[lt]!==te[Fe]){const mt=Ne(lt,Fe,He),Et=Pe(lt,Fe,he[mt].geometry);delete te[lt],delete se[Fe],se[nt(Qe,he[Et].geometry,!0)]=Et,he[mt].geometry=null}else lt in se?Pe(lt,Fe,He):Fe in te?Ne(lt,Fe,He):(ke(ze),te[lt]=ue-1,se[Fe]=ue-1)}return he.filter(ze=>ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,te)=>de.sortKey-te.sortKey)}update(e,r,i,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,i,d),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,i,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=vg(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const i=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:d,y:h}of r)this.lineVertexArray.emplaceBack(d,h);return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,r,i,d,h,p,_,x,b,T,A,M,D,O){const F=e.indexArray,q=e.layoutVertexArray,ee=e.globeExtVertexArray,de=e.segments.prepareSegment(4*r.length,q,F,this.canOverlap?p.sortKey:void 0),te=this.glyphOffsetArray.length,se=de.vertexLength,he=this.allowVerticalPlacement&&_===yi.vertical?Math.PI/2:0,ue=p.text&&p.text.sections;for(let Pe=0;Pe<r.length;Pe++){const{tl:Ne,tr:nt,bl:ze,br:qe,tex:He,pixelOffsetTL:Qe,pixelOffsetBR:lt,minFontScaleX:Fe,minFontScaleY:mt,glyphOffset:Et,isSDF:yt,sectionIndex:Nt}=r[Pe],dt=de.vertexLength,Pt=Et[1];if(mh(q,b.x,b.y,Ne.x,Pt+Ne.y,He.x,He.y,i,yt,Qe.x,Qe.y,Fe,mt),mh(q,b.x,b.y,nt.x,Pt+nt.y,He.x+He.w,He.y,i,yt,lt.x,Qe.y,Fe,mt),mh(q,b.x,b.y,ze.x,Pt+ze.y,He.x,He.y+He.h,i,yt,Qe.x,lt.y,Fe,mt),mh(q,b.x,b.y,qe.x,Pt+qe.y,He.x+He.w,He.y+He.h,i,yt,lt.x,lt.y,Fe,mt),x){const{x:jt,y:nr,z:Ut}=x.anchor,[Dt,Er,qt]=x.up;gh(ee,jt,nr,Ut,Dt,Er,qt),gh(ee,jt,nr,Ut,Dt,Er,qt),gh(ee,jt,nr,Ut,Dt,Er,qt),gh(ee,jt,nr,Ut,Dt,Er,qt),_h(e.dynamicLayoutVertexArray,jt,nr,Ut,he)}else _h(e.dynamicLayoutVertexArray,b.x,b.y,b.z,he);F.emplaceBack(dt,dt+1,dt+2),F.emplaceBack(dt+1,dt+2,dt+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),Pe!==r.length-1&&Nt===r[Pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(q.length,p,p.index,{},D,O,ue&&ue[Nt])}const ke=x?x.anchor:b;e.placedSymbolArray.emplaceBack(ke.x,ke.y,ke.z,b.x,b.y,te,this.glyphOffsetArray.length-te,se,T,A,b.segment,i?i[0]:0,i?i[1]:0,d[0],d[1],_,0,!1,0,M,0)}_commitLayoutVertex(e,r,i,d,h,p,_){e.emplaceBack(r,i,d,h,p,Math.round(_.x),Math.round(_.y))}_addCollisionDebugVertices(e,r,i,d,h,p,_){const x=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),b=x.vertexLength,T=_.tileAnchorX,A=_.tileAnchorY;for(let D=0;D<4;D++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),i.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(i.layoutVertexArray,d,h,p,T,A,new ve(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,d,h,p,T,A,new ve(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,d,h,p,T,A,new ve(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,d,h,p,T,A,new ve(e.x1,e.y2)),x.vertexLength+=4;const M=i.indexArray;M.emplaceBack(b,b+1),M.emplaceBack(b+1,b+2),M.emplaceBack(b+2,b+3),M.emplaceBack(b+3,b),x.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,i,d,h,p){for(let _=d;_<h;_++){const x=i.get(_),b=this.getSymbolInstanceTextSize(e,p,r,_);this._addCollisionDebugVertices(x,b,this.textCollisionBox,x.projectedAnchorX,x.projectedAnchorY,x.projectedAnchorZ,p)}}_addIconDebugCollisionBoxes(e,r,i,d,h,p){for(let _=d;_<h;_++){const x=i.get(_),b=this.getSymbolInstanceIconSize(e,r,p.placedIconSymbolIndex);this._addCollisionDebugVertices(x,b,this.iconCollisionBox,x.projectedAnchorX,x.projectedAnchorY,x.projectedAnchorZ,p)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new If(wt,Bm.members,sn),this.iconCollisionBox=new If(wt,Bm.members,sn);const i=Pl(this.iconSizeData,e),d=Pl(this.textSizeData,e);for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this._addTextDebugCollisionBoxes(d,e,r,p.textBoxStartIndex,p.textBoxEndIndex,p),this._addTextDebugCollisionBoxes(d,e,r,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p),this._addIconDebugCollisionBoxes(i,e,r,p.iconBoxStartIndex,p.iconBoxEndIndex,p),this._addIconDebugCollisionBoxes(i,e,r,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p)}}getSymbolInstanceTextSize(e,r,i,d){const h=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:d),p=oh(this.textSizeData,e,h)/un;return this.tilePixelRatio*p}getSymbolInstanceIconSize(e,r,i){const d=this.icon.placedSymbolArray.get(i),h=oh(this.iconSizeData,e,d);return this.tilePixelRatio*h}_commitDebugCollisionVertexUpdate(e,r,i){e.emplaceBack(r,-i,-i),e.emplaceBack(r,i,-i),e.emplaceBack(r,i,i),e.emplaceBack(r,-i,i)}_updateTextDebugCollisionBoxes(e,r,i,d,h,p){for(let _=d;_<h;_++){const x=i.get(_),b=this.getSymbolInstanceTextSize(e,p,r,_);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,b,x.padding)}}_updateIconDebugCollisionBoxes(e,r,i,d,h,p){for(let _=d;_<h;_++){const x=i.get(_),b=this.getSymbolInstanceIconSize(e,r,p);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,b,x.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=Pl(this.iconSizeData,e),d=Pl(this.textSizeData,e);for(let h=0;h<this.symbolInstances.length;h++){const p=this.symbolInstances.get(h);this._updateTextDebugCollisionBoxes(d,e,r,p.textBoxStartIndex,p.textBoxEndIndex,p),this._updateTextDebugCollisionBoxes(d,e,r,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p),this._updateIconDebugCollisionBoxes(i,e,r,p.iconBoxStartIndex,p.iconBoxEndIndex,p.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(i,e,r,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,i,d,h,p,_,x,b){const T={};if(r<i){const{x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se,featureIndex:he}=e.get(r);T.textBox={x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se},T.textFeatureIndex=he}if(d<h){const{x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se,featureIndex:he}=e.get(d);T.verticalTextBox={x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se},T.verticalTextFeatureIndex=he}if(p<_){const{x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se,featureIndex:he}=e.get(p);T.iconBox={x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se},T.iconFeatureIndex=he}if(x<b){const{x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se,featureIndex:he}=e.get(x);T.verticalIconBox={x1:A,y1:M,x2:D,y2:O,padding:F,projectedAnchorX:q,projectedAnchorY:ee,projectedAnchorZ:de,tileAnchorX:te,tileAnchorY:se},T.verticalIconFeatureIndex=he}return T}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const i=e.placedSymbolArray.get(r),d=i.vertexStartIndex+4*i.numGlyphs;for(let h=i.vertexStartIndex;h<d;h+=4)e.indexArray.emplaceBack(h,h+1,h+2),e.indexArray.emplaceBack(h+1,h+2,h+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),i=Math.cos(e),d=[],h=[],p=[];for(let _=0;_<this.symbolInstances.length;++_){p.push(_);const x=this.symbolInstances.get(_);d.push(0|Math.round(r*x.tileAnchorX+i*x.tileAnchorY)),h.push(x.featureIndex)}return p.sort((_,x)=>d[_]-d[x]||h[x]-h[_]),p}addToSortKeyRanges(e,r){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:h,leftJustifiedTextSymbolIndex:p,verticalPlacedTextSymbolIndex:_,placedIconSymbolIndex:x,verticalPlacedIconSymbolIndex:b}=i;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),h>=0&&h!==d&&this.addIndicesForPlacedSymbol(this.text,h),p>=0&&p!==h&&p!==d&&this.addIndicesForPlacedSymbol(this.text,p),_>=0&&this.addIndicesForPlacedSymbol(this.text,_),x>=0&&this.addIndicesForPlacedSymbol(this.icon,x),b>=0&&this.addIndicesForPlacedSymbol(this.icon,b)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}$t(Is,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Is.MAX_GLYPHS=65535,Is.addDynamicAttributes=_h;const Wv=new ne({"symbol-placement":new B(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new B(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new B(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new H(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new B(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new B(Te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new B(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new B(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new B(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new H(Te.layout_symbol["icon-size"]),"icon-text-fit":new B(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new B(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new H(Te.layout_symbol["icon-image"]),"icon-rotate":new H(Te.layout_symbol["icon-rotate"]),"icon-padding":new B(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new B(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new H(Te.layout_symbol["icon-offset"]),"icon-anchor":new H(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new B(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new B(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new B(Te.layout_symbol["text-rotation-alignment"]),"text-field":new H(Te.layout_symbol["text-field"]),"text-font":new H(Te.layout_symbol["text-font"]),"text-size":new H(Te.layout_symbol["text-size"]),"text-max-width":new H(Te.layout_symbol["text-max-width"]),"text-line-height":new H(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new H(Te.layout_symbol["text-letter-spacing"]),"text-justify":new H(Te.layout_symbol["text-justify"]),"text-radial-offset":new H(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new B(Te.layout_symbol["text-variable-anchor"]),"text-anchor":new H(Te.layout_symbol["text-anchor"]),"text-max-angle":new B(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new B(Te.layout_symbol["text-writing-mode"]),"text-rotate":new H(Te.layout_symbol["text-rotate"]),"text-padding":new B(Te.layout_symbol["text-padding"]),"text-keep-upright":new B(Te.layout_symbol["text-keep-upright"]),"text-transform":new H(Te.layout_symbol["text-transform"]),"text-offset":new H(Te.layout_symbol["text-offset"]),"text-allow-overlap":new B(Te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new B(Te.layout_symbol["text-ignore-placement"]),"text-optional":new B(Te.layout_symbol["text-optional"])});var Mf={paint:new ne({"icon-opacity":new H(Te.paint_symbol["icon-opacity"]),"icon-color":new H(Te.paint_symbol["icon-color"]),"icon-halo-color":new H(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new H(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new H(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new B(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new B(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new H(Te.paint_symbol["text-opacity"]),"text-color":new H(Te.paint_symbol["text-color"],{runtimeType:Ze,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new H(Te.paint_symbol["text-halo-color"]),"text-halo-width":new H(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new H(Te.paint_symbol["text-halo-blur"]),"text-translate":new B(Te.paint_symbol["text-translate"]),"text-translate-anchor":new B(Te.paint_symbol["text-translate-anchor"])}),layout:Wv};class xg{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:V,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t(xg,"FormatSectionOverride",{omit:["defaultValue"]});class yh extends eo{constructor(e){super(e,Mf)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const i=this.layout.get("text-writing-mode");if(i){const d=[];for(const h of i)d.indexOf(h)<0&&d.push(h);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,i,d){const h=this.layout.get(e).evaluate(r,{},i,d),p=this._unevaluatedLayout._values[e];return p.isDataDriven()||_s(p.value)||!h?h:function(_,x){return x.replace(/{([^{}]+)}/g,(b,T)=>T in _?String(_[T]):"")}(r.properties,h)}createBucket(e){return new Is(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Mf.paint.overridableProperties){if(!yh.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),i=new xg(r),d=new ul(i,r.property.specification);let h=null;h=r.value.kind==="constant"||r.value.kind==="source"?new zd("source",d):new ca("composite",d,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new K(r.property,h,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,i){return!(!this.layout||r.isDataDriven()||i.isDataDriven())&&yh.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const i=e.get("text-field"),d=Mf.paint.properties[r];let h=!1;const p=_=>{for(const x of _)if(d.overrides&&d.overrides.hasOverride(x))return void(h=!0)};if(i.value.kind==="constant"&&i.value.value instanceof Dn)p(i.value.value.sections);else if(i.value.kind==="source"){const _=b=>{h||(b instanceof Do&&Or(b.value)===Qn?p(b.value.sections):b instanceof go?p(b.sections):b.eachChild(_))},x=i.value;x._styleExpression&&_(x._styleExpression.expression)}return h}getProgramConfiguration(e){return new Es(this,e)}}var Kv={paint:new ne({"background-color":new B(Te.paint_background["background-color"]),"background-pattern":new B(Te.paint_background["background-pattern"]),"background-opacity":new B(Te.paint_background["background-opacity"])})},Xv={paint:new ne({"raster-opacity":new B(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new B(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new B(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new B(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new B(Te.paint_raster["raster-saturation"]),"raster-contrast":new B(Te.paint_raster["raster-contrast"]),"raster-resampling":new B(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new B(Te.paint_raster["raster-fade-duration"])})};class Yv extends eo{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Jv={paint:new ne({"sky-type":new B(Te.paint_sky["sky-type"]),"sky-atmosphere-sun":new B(Te.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new B(Te.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new B(Te.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new B(Te.paint_sky["sky-gradient-radius"]),"sky-gradient":new re(Te.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new B(Te.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new B(Te.paint_sky["sky-atmosphere-color"]),"sky-opacity":new B(Te.paint_sky["sky-opacity"])})};function Pf(t,e,r){const i=[0,0,1],d=F0([]);return j0(d,d,r?-tt(t)+Math.PI:tt(t)),N0(d,d,-tt(e)),D0(i,i,d),zn(i,i)}const Qv={circle:class extends eo{constructor(t){super(t,c4)}createBucket(t){return new rf(t)}queryRadius(t){const e=t;return Cl("circle-radius",this,e)+Cl("circle-stroke-width",this,e)+Wu(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,r,i,d,h,p,_){const x=dm(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),h.angle,t.pixelToTileUnitsFactor),b=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return cm(t,i,h,p,_,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",x,b)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Es(this,t)}},heatmap:class extends eo{createBucket(t){return new hm(t)}constructor(t){super(t,p4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=af({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return Cl("heatmap-radius",this,t)}queryIntersectsFeature(t,e,r,i,d,h,p,_){const x=this.paint.get("heatmap-radius").evaluate(e,r);return cm(t,i,h,p,_,!0,!0,new ve(0,0),x)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Es(this,t)}},hillshade:class extends eo{constructor(t){super(t,m4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends eo{constructor(t){super(t,P4)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(t){return new Es(this,t)}recalculate(t,e){super.recalculate(t,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Qu(t)}queryRadius(){return Wu(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,r,i,d,h){return!t.queryGeometry.isAboveHorizon&&im(lm(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),h.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends eo{constructor(t){super(t,H4)}createBucket(t){return new yc(t)}queryRadius(){return Wu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Es(this,t)}queryIntersectsFeature(t,e,r,i,d,h,p,_,x){const b=dm(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),h.angle,t.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(e,r),A=this.paint.get("fill-extrusion-base").evaluate(e,r),M=[0,0],D=_&&h.elevation,O=h.elevation?h.elevation.exaggeration():1,F=t.tile.getBucket(this);if(D&&F instanceof yc){const se=F.centroidVertexArray,he=x+1;he<se.length&&(M[0]=se.geta_centroid_pos0(he),M[1]=se.geta_centroid_pos1(he))}if(M[0]===0&&M[1]===1)return!1;h.projection.name==="globe"&&(i=Mm([i],[new ve(0,0),new ve(Rt,Rt)],t.tileID.canonical).map(se=>se.polygon).flat());const q=D?_:null,[ee,de]=function(se,he,ue,ke,Pe,Ne,nt,ze,qe,He,Qe){return se.projection.name==="globe"?function(lt,Fe,mt,Et,yt,Nt,dt,Pt,jt,nr,Ut){const Dt=[],Er=[],qt=lt.projection.upVectorScale(Ut,lt.center.lat,lt.worldSize).metersToTile,Ht=[0,0,0,1],mr=[0,0,0,1],br=(gr,Lr,zr,Wr)=>{gr[0]=Lr,gr[1]=zr,gr[2]=Wr,gr[3]=1},$r=Im();mt>0&&(mt+=$r),Et+=$r;for(const gr of Fe){const Lr=[],zr=[];for(const Wr of gr){const _r=Wr.x+yt.x,Qr=Wr.y+yt.y,Kr=lt.projection.projectTilePoint(_r,Qr,Ut),kr=lt.projection.upVector(Ut,Wr.x,Wr.y);let or=mt,Xr=Et;if(dt){const wr=km(_r,Qr,mt,Et,dt,Pt,jt,nr);or+=wr.base,Xr+=wr.top}mt!==0?br(Ht,Kr.x+kr[0]*qt*or,Kr.y+kr[1]*qt*or,Kr.z+kr[2]*qt*or):br(Ht,Kr.x,Kr.y,Kr.z),br(mr,Kr.x+kr[0]*qt*Xr,Kr.y+kr[1]*qt*Xr,Kr.z+kr[2]*qt*Xr),Nr(Ht,Ht,Nt),Nr(mr,mr,Nt),Lr.push(new Ml(Ht[0],Ht[1],Ht[2])),zr.push(new Ml(mr[0],mr[1],mr[2]))}Dt.push(Lr),Er.push(zr)}return[Dt,Er]}(se,he,ue,ke,Pe,Ne,nt,ze,qe,He,Qe):nt?function(lt,Fe,mt,Et,yt,Nt,dt,Pt,jt){const nr=[],Ut=[],Dt=[0,0,0,1];for(const Er of lt){const qt=[],Ht=[];for(const mr of Er){const br=mr.x+Et.x,$r=mr.y+Et.y,gr=km(br,$r,Fe,mt,Nt,dt,Pt,jt);Dt[0]=br,Dt[1]=$r,Dt[2]=gr.base,Dt[3]=1,$a(Dt,Dt,yt),Dt[3]=Math.max(Dt[3],1e-5);const Lr=new Ml(Dt[0]/Dt[3],Dt[1]/Dt[3],Dt[2]/Dt[3]);Dt[0]=br,Dt[1]=$r,Dt[2]=gr.top,Dt[3]=1,$a(Dt,Dt,yt),Dt[3]=Math.max(Dt[3],1e-5);const zr=new Ml(Dt[0]/Dt[3],Dt[1]/Dt[3],Dt[2]/Dt[3]);qt.push(Lr),Ht.push(zr)}nr.push(qt),Ut.push(Ht)}return[nr,Ut]}(he,ue,ke,Pe,Ne,nt,ze,qe,He):function(lt,Fe,mt,Et,yt){const Nt=[],dt=[],Pt=yt[8]*Fe,jt=yt[9]*Fe,nr=yt[10]*Fe,Ut=yt[11]*Fe,Dt=yt[8]*mt,Er=yt[9]*mt,qt=yt[10]*mt,Ht=yt[11]*mt;for(const mr of lt){const br=[],$r=[];for(const gr of mr){const Lr=gr.x+Et.x,zr=gr.y+Et.y,Wr=yt[0]*Lr+yt[4]*zr+yt[12],_r=yt[1]*Lr+yt[5]*zr+yt[13],Qr=yt[2]*Lr+yt[6]*zr+yt[14],Kr=yt[3]*Lr+yt[7]*zr+yt[15],kr=Wr+Pt,or=_r+jt,Xr=Qr+nr,wr=Math.max(Kr+Ut,1e-5),Nn=Wr+Dt,Yr=_r+Er,hn=Qr+qt,an=Math.max(Kr+Ht,1e-5);br.push(new Ml(kr/wr,or/wr,Xr/wr)),$r.push(new Ml(Nn/an,Yr/an,hn/an))}Nt.push(br),dt.push($r)}return[Nt,dt]}(he,ue,ke,Pe,Ne)}(h,i,A,T,b,p,q,M,O,h.center.lat,t.tileID.canonical),te=t.queryGeometry;return function(se,he,ue){let ke=1/0;im(ue,he)&&(ke=Rm(ue,he[0]));for(let Pe=0;Pe<he.length;Pe++){const Ne=he[Pe],nt=se[Pe];for(let ze=0;ze<Ne.length-1;ze++){const qe=Ne[ze],He=[qe,Ne[ze+1],nt[ze+1],nt[ze],qe];nm(ue,He)&&(ke=Math.min(ke,Rm(ue,He)))}}return ke!==1/0&&ke}(ee,de,te.isPointQuery()?te.screenBounds:te.screenGeometry)}},line:class extends eo{constructor(t){super(t,Dm),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Ed,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Om.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new ih(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Es(this,t)}queryRadius(t){const e=t,r=zm(Cl("line-width",this,e),Cl("line-gap-width",this,e)),i=Cl("line-offset",this,e);return r/2+Math.abs(i)+Wu(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,r,i,d,h){if(t.queryGeometry.isAboveHorizon)return!1;const p=lm(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),h.angle,t.pixelToTileUnitsFactor),_=t.pixelToTileUnitsFactor/2*zm(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),x=this.paint.get("line-offset").evaluate(e,r);return x&&(i=function(b,T){const A=[],M=new ve(0,0);for(let D=0;D<b.length;D++){const O=b[D],F=[];for(let q=0;q<O.length;q++){const ee=O[q],de=O[q+1],te=q===0?M:ee.sub(O[q-1])._unit()._perp(),se=q===O.length-1?M:de.sub(ee)._unit()._perp(),he=te._add(se)._unit();he._mult(1/(he.x*se.x+he.y*se.y)),F.push(he._mult(T)._add(ee))}A.push(F)}return A}(i,x*t.pixelToTileUnitsFactor)),function(b,T,A){for(let M=0;M<T.length;M++){const D=T[M];if(b.length>=3){for(let O=0;O<D.length;O++)if(Sa(b,D[O]))return!0}if(s4(b,D,A))return!0}return!1}(p,i,_)}isTileClipped(){return!0}},symbol:yh,background:class extends eo{constructor(t){super(t,Kv)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends eo{constructor(t){super(t,Xv)}getProgramIds(){return["raster"]}},sky:class extends eo{constructor(t){super(t,Jv),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="sky-gradient"?this._updateColorRamp():t!=="sky-atmosphere-sun"&&t!=="sky-atmosphere-halo-color"&&t!=="sky-atmosphere-color"&&t!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=af({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(t,e){if(this.paint.get("sky-type")==="atmosphere"){const i=this.paint.get("sky-atmosphere-sun"),d=!i,h=t.style.light,p=h.properties.get("position");return d&&h.properties.get("anchor")==="viewport"&&yr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?Pf(p.azimuthal,90-p.polar,e):Pf(i[0],90-i[1],e)}const r=this.paint.get("sky-gradient-center");return Pf(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return t==="atmosphere"?["skyboxCapture","skybox"]:t==="gradient"?["skyboxGradient"]:null}}};class Ic{constructor(e,r,i,d){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,d)}update(e,r,i){const{width:d,height:h}=e,{context:p}=this,{gl:_}=p,{HTMLImageElement:x,HTMLCanvasElement:b,HTMLVideoElement:T,ImageData:A,ImageBitmap:M}=I;if(_.bindTexture(_.TEXTURE_2D,this.texture),p.pixelStoreUnpackFlipY.set(!1),p.pixelStoreUnpack.set(1),p.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA&&(!r||r.premultiply!==!1)),i||this.size&&this.size[0]===d&&this.size[1]===h){const{x:D,y:O}=i||{x:0,y:0};e instanceof x||e instanceof b||e instanceof T||e instanceof A||M&&e instanceof M?_.texSubImage2D(_.TEXTURE_2D,0,D,O,_.RGBA,_.UNSIGNED_BYTE,e):_.texSubImage2D(_.TEXTURE_2D,0,D,O,d,h,_.RGBA,_.UNSIGNED_BYTE,e.data)}else this.size=[d,h],e instanceof x||e instanceof b||e instanceof T||e instanceof A||M&&e instanceof M?_.texImage2D(_.TEXTURE_2D,0,this.format,this.format,_.UNSIGNED_BYTE,e):_.texImage2D(_.TEXTURE_2D,0,this.format,d,h,0,this.format,_.UNSIGNED_BYTE,e.data);this.useMipmap=!!(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(e,r){const{context:i}=this,{gl:d}=i;d.bindTexture(d.TEXTURE_2D,this.texture),e!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?e===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class e5{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class t5{constructor(){this.tasks={},this.taskQueue=[],ci(["process"],this),this.invoker=new e5(this.process),this.nextId=0}add(e,r){const i=this.nextId++,d=function({type:h,isSymbolTile:p,zoom:_}){return _=_||0,h==="message"?0:h!=="maybePrepare"||p?h!=="parseTile"||p?h==="parseTile"&&p?300-_:h==="maybePrepare"&&p?400-_:500:200-_:100-_}(r);if(d===0){Gt();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[i]={fn:e,metadata:r,priority:d,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){Gt();try{if(this.taskQueue=this.taskQueue.filter(i=>!!this.tasks[i]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let d=0;d<this.taskQueue.length;d++){const h=this.tasks[this.taskQueue[d]];h.priority<r&&(r=h.priority,e=d)}if(e===null)return null;const i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}remove(){this.invoker.remove()}}class bg{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const r5=["tile","layer","source","sourceLayer","state"];class $g{constructor(e,r,i,d,h){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=i,this._y=d,this.properties=e.properties,this.id=h}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of r5)this[r]!==void 0&&(e[r]=this[r]);return e}}const ki=32,wo=33,Ms=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,r=0,i=0,d=0,h=0,p=0,_=0;for(1&e?d=h=p=ki:r=i=_=ki;(e>>=1)>1;){const b=r+d>>1,T=i+h>>1;1&e?(d=r,h=i,r=p,i=_):(r=d,i=h,d=p,h=_),p=b,_=T}const x=4*t;Ms[x+0]=r,Ms[x+1]=i,Ms[x+2]=d,Ms[x+3]=h}const Eo=new Uint16Array(2178),Ps=new Uint8Array(1089),vh=new Uint16Array(1089);function wg(t){return t===0?-.03125:t===32?.03125:0}var Eg=be([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Tg={type:2,extent:Rt,loadGeometry:()=>[[new ve(0,0),new ve(Rt+1,0),new ve(Rt+1,Rt+1),new ve(0,Rt+1),new ve(0,0)]]};class Lf{constructor(e,r,i,d,h){this.tileID=e,this.uid=en(),this.uses=0,this.tileSize=r,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=h,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<Yn.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Aa(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,i){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(d,h){const p={};if(!h)return p;for(const _ of d){const x=_.layerIds.map(b=>h.getLayer(b)).filter(Boolean);if(x.length!==0){_.layers=x,_.stateDependentLayerIds&&(_.stateDependentLayers=_.stateDependentLayerIds.map(b=>x.filter(T=>T.id===b)[0]));for(const b of x)p[b.id]=_}}return p}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const h=this.buckets[d];if(h instanceof Is){if(this.hasSymbolBuckets=!0,!i)break;h.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const h=this.buckets[d];if(h instanceof Is&&h.hasRTLText){this.hasRTLText=!0,E.isLoading()||E.isLoaded()||y()!=="deferred"||w();break}}this.queryPadding=0;for(const d in this.buckets){const h=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(d).queryRadius(h))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new fr}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const i in this.buckets){const d=this.buckets[i];d.uploadPending()&&d.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ic(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ic(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ic(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,i,d,h,p,_,x){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:_,transform:p,params:h,tileTransform:this.tileTransform},e,r,i):{}}querySourceFeatures(e,r){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const d=i.loadVTLayers(),h=r?r.sourceLayer:"",p=d._geojsonTileLayer||d[h];if(!p)return;const _=ml(r&&r.filter),{z:x,x:b,y:T}=this.tileID.canonical,A={z:x,x:b,y:T};for(let M=0;M<p.length;M++){const D=p.feature(M);if(_.needGeometry){const q=Ta(D,!0);if(!_.filter(new C(this.tileID.overscaledZ),q,this.tileID.canonical))continue}else if(!_.filter(new C(this.tileID.overscaledZ),D))continue;const O=i.getId(D,h),F=new $g(D,x,b,T,O);F.tile=A,e.push(F)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const i=vr(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const i=Date.now();let d=!1;if(this.expirationTime>i)d=!1;else if(r)if(this.expirationTime<r)d=!0;else{const h=this.expirationTime-r;h?this.expirationTime=i+Math.max(h,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!r)return;const i=this.latestFeatureIndex.loadVTLayers(),d=r.style.listImages();for(const h in this.buckets){if(!r.style.hasLayer(h))continue;const p=this.buckets[h],_=p.layers[0].sourceLayer||"_geojsonTileLayer",x=i[_],b=e[_];if(!x||!b||Object.keys(b).length===0)continue;if(p.update(b,x,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),p instanceof ih||p instanceof Qu){const A=r.style._getSourceCache(p.layers[0].source);r._terrain&&r._terrain.enabled&&A&&p.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(A.id,this.tileID)}const T=r&&r.style&&r.style.getLayer(h);T&&(this.queryPadding=Math.max(this.queryPadding,T.queryRadius(p)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Yn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Yn.now()+e}setTexture(e,r){const i=r.context,d=i.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Ic(i,e,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(e,r){const i={};for(const d of r)i[d]=!0;this.dependencies[e]=i}hasDependency(e,r){for(const i of e){const d=this.dependencies[i];if(d){for(const h of r)if(d[h])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const i=Ho(Tg,this.tileID.canonical,this.tileTransform)[0],d=new rt,h=new ii;for(let p=0;p<i.length;p++){const{x:_,y:x}=i[p];d.emplaceBack(_,x),h.emplaceBack(p)}h.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(h),this._tileDebugBuffer=e.createVertexBuffer(d,ac.members),this._tileDebugSegments=qr.simpleSegment(0,0,d.length,h.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const i=Ho(Tg,this.tileID.canonical,this.tileTransform)[0];let d,h;if(this.isRaster){const p=function(_,x){const b=Aa(_,x),T=Math.pow(2,_.z);for(let q=0;q<wo;q++)for(let ee=0;ee<wo;ee++){const de=_i((_.x+(ee+wg(ee))/ki)/T),te=_n((_.y+(q+wg(q))/ki)/T),se=x.project(de,te),he=q*wo+ee;Eo[2*he+0]=Math.round((se.x*b.scale-b.x)*Rt),Eo[2*he+1]=Math.round((se.y*b.scale-b.y)*Rt)}Ps.fill(0),vh.fill(0);for(let q=2045;q>=0;q--){const ee=4*q,de=Ms[ee+0],te=Ms[ee+1],se=Ms[ee+2],he=Ms[ee+3],ue=de+se>>1,ke=te+he>>1,Pe=ue+ke-te,Ne=ke+de-ue,nt=te*wo+de,ze=he*wo+se,qe=ke*wo+ue,He=Math.hypot((Eo[2*nt+0]+Eo[2*ze+0])/2-Eo[2*qe+0],(Eo[2*nt+1]+Eo[2*ze+1])/2-Eo[2*qe+1])>=16;Ps[qe]=Ps[qe]||(He?1:0),q<1022&&(Ps[qe]=Ps[qe]||Ps[(te+Ne>>1)*wo+(de+Pe>>1)]||Ps[(he+Ne>>1)*wo+(se+Pe>>1)])}const A=new Ve,M=new At;let D=0;function O(q,ee){const de=ee*wo+q;return vh[de]===0&&(A.emplaceBack(Eo[2*de+0],Eo[2*de+1],q*Rt/ki,ee*Rt/ki),vh[de]=++D),vh[de]-1}function F(q,ee,de,te,se,he){const ue=q+de>>1,ke=ee+te>>1;if(Math.abs(q-se)+Math.abs(ee-he)>1&&Ps[ke*wo+ue])F(se,he,q,ee,ue,ke),F(de,te,se,he,ue,ke);else{const Pe=O(q,ee),Ne=O(de,te),nt=O(se,he);M.emplaceBack(Pe,Ne,nt)}}return F(0,0,ki,ki,ki,0),F(ki,ki,0,0,0,ki),{vertices:A,indices:M}}(this.tileID.canonical,r);d=p.vertices,h=p.indices}else{d=new Ve,h=new At;for(const{x:_,y:x}of i)d.emplaceBack(_,x,0,0);const p=hf(d.int16,void 0,4);for(let _=0;_<p.length;_+=3)h.emplaceBack(p[_],p[_+1],p[_+2])}this._tileBoundsBuffer=e.createVertexBuffer(d,Eg.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(h),this._tileBoundsSegments=qr.simpleSegment(0,0,d.length,h.length)}_makeGlobeTileDebugBuffers(e,r){const i=r.projection;if(!i||i.name!=="globe"||r.freezeTileCoverage)return;const d=this.tileID.canonical,h=cc(q0(d,r)),p=Tl(r.zoom);let _;p>0&&(_=F1(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,d,r,h,_,p),this._makeGlobeTileDebugTextBuffer(e,d,r,h,_,p)}_globePoint(e,r,i,d,h,p,_){let x=dc(e,r,i);if(p){const b=1<<i.z,T=bo(d.center.lng),A=$o(d.center.lat),M=(i.x+.5)/b-T;let D=0;M>.5?D=-1:M<-.5&&(D=1);let O=(e/Rt+i.x)/b+D,F=(r/Rt+i.y)/b;O=(O-T)*d._pixelsPerMercatorPixel+T,F=(F-A)*d._pixelsPerMercatorPixel+A;const q=[O*d.worldSize,F*d.worldSize,0];Nr(q,q,p),x=Ea(x,q,_)}return Nr(x,x,h)}_makeGlobeTileDebugBorderBuffer(e,r,i,d,h,p){const _=new rt,x=new ii,b=new Me,T=(M,D,O,F,q)=>{const ee=(O-M)/(q-1),de=(F-D)/(q-1),te=_.length;for(let se=0;se<q;se++){const he=M+se*ee,ue=D+se*de;_.emplaceBack(he,ue);const ke=this._globePoint(he,ue,r,i,d,h,p);b.emplaceBack(ke[0],ke[1],ke[2]),x.emplaceBack(te+se)}},A=Rt;T(0,0,A,0,16),T(A,0,A,A,16),T(A,A,0,A,16),T(0,A,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(x),this._tileDebugBuffer=e.createVertexBuffer(_,ac.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(b,V0.members),this._tileDebugSegments=qr.simpleSegment(0,0,_.length,x.length)}_makeGlobeTileDebugTextBuffer(e,r,i,d,h,p){const _=Rt/4,x=new rt,b=new At,T=new Me,A=25;b.reserve(32),x.reserve(A),T.reserve(A);const M=(D,O)=>A*D+O;for(let D=0;D<A;D++){const O=D*_;for(let F=0;F<A;F++){const q=F*_;x.emplaceBack(q,O);const ee=this._globePoint(q,O,r,i,d,h,p);T.emplaceBack(ee[0],ee[1],ee[2])}}for(let D=0;D<4;D++)for(let O=0;O<4;O++){const F=M(D,O),q=M(D,O+1),ee=M(D+1,O),de=M(D+1,O+1);b.emplaceBack(F,q,ee),b.emplaceBack(ee,q,de)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(b),this._tileDebugTextBuffer=e.createVertexBuffer(x,ac.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(T,V0.members),this._tileDebugTextSegments=qr.simpleSegment(0,0,A,32)}}class n5{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,i){const d=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][d]=this.stateChanges[e][d]||{},er(this.stateChanges[e][d],i),this.deletedStates[e]===null){this.deletedStates[e]={};for(const h in this.state[e])h!==d&&(this.deletedStates[e][h]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][d]===null){this.deletedStates[e][d]={};for(const h in this.state[e][d])i[h]||(this.deletedStates[e][d][h]=null)}else for(const h in i)this.deletedStates[e]&&this.deletedStates[e][d]&&this.deletedStates[e][d][h]===null&&delete this.deletedStates[e][d][h]}removeFeatureState(e,r,i){if(this.deletedStates[e]===null)return;const d=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][d]!==null&&(this.deletedStates[e][d]=this.deletedStates[e][d]||{},this.deletedStates[e][d][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][d])for(i in this.deletedStates[e][d]={},this.stateChanges[e][d])this.deletedStates[e][d][i]=null;else this.deletedStates[e][d]=null;else this.deletedStates[e]=null}getState(e,r){const i=String(r),d=er({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const h=this.deletedStates[e][r];if(h===null)return{};for(const p in h)delete d[p]}return d}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const i={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const h={};for(const p in this.stateChanges[d])this.state[d][p]||(this.state[d][p]={}),er(this.state[d][p],this.stateChanges[d][p]),h[p]=this.state[d][p];i[d]=h}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const h={};if(this.deletedStates[d]===null)for(const p in this.state[d])h[p]={},this.state[d][p]={};else for(const p in this.deletedStates[d]){if(this.deletedStates[d][p]===null)this.state[d][p]={};else if(this.state[d][p])for(const _ of Object.keys(this.deletedStates[d][p]))delete this.state[d][p][_];h[p]=this.state[d][p]}i[d]=i[d]||{},er(i[d],h)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(const d in e)e[d].setFeatureState(i,r)}}class Sg{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const i=this.toIdx(e,r);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function Cg(t,e,r,i){let d=0,h=Number.MAX_VALUE;for(let p=0;p<3;p++)if(Math.abs(i[p])<1e-15){if(r[p]<t[p]||r[p]>e[p])return null}else{const _=1/i[p];let x=(t[p]-r[p])*_,b=(e[p]-r[p])*_;if(x>b){const T=x;x=b,b=T}if(x>d&&(d=x),b<h&&(h=b),d>h)return null}return d}function Ag(t,e,r,i,d,h,p,_,x,b,T){const A=i-t,M=d-e,D=h-r,O=p-t,F=_-e,q=x-r,ee=T[1]*q-T[2]*F,de=T[2]*O-T[0]*q,te=T[0]*F-T[1]*O,se=A*ee+M*de+D*te;if(Math.abs(se)<1e-15)return null;const he=1/se,ue=b[0]-t,ke=b[1]-e,Pe=b[2]-r,Ne=(ue*ee+ke*de+Pe*te)*he;if(Ne<0||Ne>1)return null;const nt=ke*D-Pe*M,ze=Pe*A-ue*D,qe=ue*M-ke*A,He=(T[0]*nt+T[1]*ze+T[2]*qe)*he;return He<0||Ne+He>1?null:(O*nt+F*ze+q*qe)*he}function Ig(t,e,r){return(t-e)/(r-e)}function Mg(t,e,r,i,d,h,p,_,x){const b=1<<r,T=h-i,A=p-d,M=(t+1)/b*T+i,D=(e+0)/b*A+d,O=(e+1)/b*A+d;_[0]=(t+0)/b*T+i,_[1]=D,x[0]=M,x[1]=O}class Pg{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(h){const p=Math.ceil(Math.log2(h.dim/8)),_=[];let x=Math.ceil(Math.pow(2,p));const b=1/x,T=(D,O,F,q,ee)=>{const de=q?1:0,te=(D+1)*F-de,se=O*F,he=(O+1)*F-de;ee[0]=D*F,ee[1]=se,ee[2]=te,ee[3]=he};let A=new Sg(x);const M=[];for(let D=0;D<x*x;D++){T(D%x,Math.floor(D/x),b,!1,M);const O=Ls(M[0],M[1],h),F=Ls(M[2],M[1],h),q=Ls(M[2],M[3],h),ee=Ls(M[0],M[3],h);A.minimums.push(Math.min(O,F,q,ee)),A.maximums.push(Math.max(O,F,q,ee)),A.leaves.push(1)}for(_.push(A),x/=2;x>=1;x/=2){const D=_[_.length-1];A=new Sg(x);for(let O=0;O<x*x;O++){T(O%x,Math.floor(O/x),2,!0,M);const F=D.getElevation(M[0],M[1]),q=D.getElevation(M[2],M[1]),ee=D.getElevation(M[2],M[3]),de=D.getElevation(M[0],M[3]),te=D.isLeaf(M[0],M[1]),se=D.isLeaf(M[2],M[1]),he=D.isLeaf(M[2],M[3]),ue=D.isLeaf(M[0],M[3]),ke=Math.min(F.min,q.min,ee.min,de.min),Pe=Math.max(F.max,q.max,ee.max,de.max),Ne=te&&se&&he&&ue;A.maximums.push(Pe),A.minimums.push(ke),A.leaves.push(Pe-ke<=5&&Ne?1:0)}_.push(A)}return _}(this.dem),i=r.length-1,d=r[i];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(r,0,0,i,0)}raycastRoot(e,r,i,d,h,p,_=1){return Cg([e,r,-100],[i,d,this.maximums[0]*_],h,p)}raycast(e,r,i,d,h,p,_=1){if(!this.nodeCount)return null;const x=this.raycastRoot(e,r,i,d,h,p,_);if(x==null)return null;const b=[],T=[],A=[],M=[],D=[{idx:0,t:x,nodex:0,nodey:0,depth:0}];for(;D.length>0;){const{idx:O,t:F,nodex:q,nodey:ee,depth:de}=D.pop();if(this.leaves[O]){Mg(q,ee,de,e,r,i,d,A,M);const se=1<<de,he=(q+0)/se,ue=(q+1)/se,ke=(ee+0)/se,Pe=(ee+1)/se,Ne=Ls(he,ke,this.dem)*_,nt=Ls(ue,ke,this.dem)*_,ze=Ls(ue,Pe,this.dem)*_,qe=Ls(he,Pe,this.dem)*_,He=Ag(A[0],A[1],Ne,M[0],A[1],nt,M[0],M[1],ze,h,p),Qe=Ag(M[0],M[1],ze,A[0],M[1],qe,A[0],A[1],Ne,h,p),lt=Math.min(He!==null?He:Number.MAX_VALUE,Qe!==null?Qe:Number.MAX_VALUE);if(lt!==Number.MAX_VALUE)return lt;{const Fe=oc([],h,p,F);if(Lg(Ne,nt,qe,ze,Ig(Fe[0],A[0],M[0]),Ig(Fe[1],A[1],M[1]))>=Fe[2])return F}continue}let te=0;for(let se=0;se<this._siblingOffset.length;se++){Mg((q<<1)+this._siblingOffset[se][0],(ee<<1)+this._siblingOffset[se][1],de+1,e,r,i,d,A,M),A[2]=-100,M[2]=this.maximums[this.childOffsets[O]+se]*_;const he=Cg(A,M,h,p);if(he!=null){const ue=he;b[se]=ue;let ke=!1;for(let Pe=0;Pe<te&&!ke;Pe++)ue>=b[T[Pe]]&&(T.splice(Pe,0,se),ke=!0);ke||(T[te]=se),te++}}for(let se=0;se<te;se++){const he=T[se];D.push({idx:this.childOffsets[O]+he,t:b[he],nodex:(q<<1)+this._siblingOffset[he][0],nodey:(ee<<1)+this._siblingOffset[he][1],depth:de+1})}}return null}_addNode(e,r,i){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,i,d,h){if(e[d].isLeaf(r,i)===1)return;this.childOffsets[h]||(this.childOffsets[h]=this.nodeCount);const p=d-1,_=e[p];let x=0,b=0;for(let T=0;T<this._siblingOffset.length;T++){const A=2*r+this._siblingOffset[T][0],M=2*i+this._siblingOffset[T][1],D=_.getElevation(A,M),O=_.isLeaf(A,M),F=this._addNode(D.min,D.max,O);O&&(x|=1<<T),b||(b=F)}for(let T=0;T<this._siblingOffset.length;T++)x&1<<T||this._construct(e,2*r+this._siblingOffset[T][0],2*i+this._siblingOffset[T][1],p,b+T)}}function Lg(t,e,r,i,d,h){return tr(tr(t,r,h),tr(e,i,h),d)}function Ls(t,e,r){const i=r.dim,d=ut(t*i-.5,0,i-1),h=ut(e*i-.5,0,i-1),p=Math.floor(d),_=Math.floor(h),x=Math.min(p+1,i-1),b=Math.min(_+1,i-1);return Lg(r.get(p,_),r.get(x,_),r.get(p,b),r.get(x,b),d-p,h-_)}const Rg={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function i5(t,e,r){return(256*t*256+256*e+r)/10-1e4}function o5(t,e,r){return 256*t+e+r/256-32768}class xh{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,i,d=!1,h=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return yr(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const p=this.dim=r.height-2,_=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=i||"mapbox",this.borderReady=d,!d){for(let x=0;x<p;x++)_[this._idx(-1,x)]=_[this._idx(0,x)],_[this._idx(p,x)]=_[this._idx(p-1,x)],_[this._idx(x,-1)]=_[this._idx(x,0)],_[this._idx(x,p)]=_[this._idx(x,p-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(p,-1)]=_[this._idx(p-1,0)],_[this._idx(-1,p)]=_[this._idx(0,p-1)],_[this._idx(p,p)]=_[this._idx(p-1,p-1)],h&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Pg(this)}get(e,r,i=!1){i&&(e=ut(e,-1,this.dim),r=ut(r,-1,this.dim));const d=4*this._idx(e,r);return(this.encoding==="terrarium"?o5:i5)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(e){return Rg[e]}get unpackVector(){return Rg[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const i=[0,0,0,0],d=xh.getUnpackVector(r);let h=Math.floor((e+d[3])/d[2]);return i[2]=h%256,h=Math.floor(h/256),i[1]=h%256,h=Math.floor(h/256),i[0]=h,i}getPixels(){return new si({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=r*this.dim,h=r*this.dim+this.dim,p=i*this.dim,_=i*this.dim+this.dim;switch(r){case-1:d=h-1;break;case 1:h=d+1}switch(i){case-1:p=_-1;break;case 1:_=p+1}const x=-r*this.dim,b=-i*this.dim;for(let T=p;T<_;T++)for(let A=d;A<h;A++){const M=4*this._idx(A,T),D=4*this._idx(A+x,T+b);this.pixels[M+0]=e.pixels[D+0],this.pixels[M+1]=e.pixels[D+1],this.pixels[M+2]=e.pixels[D+2],this.pixels[M+3]=e.pixels[D+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}$t(xh,"DEMData"),$t(Pg,"DemMinMaxQuadTree",{omit:["dem"]});class s5{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,i){const d=e.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const h={value:r,timeout:void 0};if(i!==void 0&&(h.timeout=setTimeout(()=>{this.remove(e,h)},i)),this.data[d].push(h),this.order.push(d),this.order.length>this.max){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const i=e.wrapped().key,d=r===void 0?0:this.data[i].indexOf(r),h=this.data[i][d];return this.data[i].splice(d,1),h.timeout&&clearTimeout(h.timeout),this.data[i].length===0&&delete this.data[i],this.onRemove(h.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const i in this.data)for(const d of this.data[i])e(d.value)||r.push(d);for(const i of r)this.remove(i.value.tileID,i)}}class Nl{constructor(e,r,i){this.func=e,this.mask=r,this.range=i}}Nl.ReadOnly=!1,Nl.ReadWrite=!0,Nl.disabled=new Nl(519,Nl.ReadOnly,[0,1]);const Rf=7680;class kf{constructor(e,r,i,d,h,p){this.test=e,this.ref=r,this.mask=i,this.fail=d,this.depthFail=h,this.pass=p}}kf.disabled=new kf({func:519,mask:0},0,0,Rf,Rf,Rf);class To{constructor(e,r,i){this.blendFunction=e,this.blendColor=r,this.mask=i}}To.Replace=[1,0],To.disabled=new To(To.Replace,Fr.transparent,[!1,!1,!1,!1]),To.unblended=new To(To.Replace,Fr.transparent,[!0,!0,!0,!0]),To.alphaBlended=new To([1,771],Fr.transparent,[!0,!0,!0,!0]);const Df=1029,Of=2305;class so{constructor(e,r,i){this.enable=e,this.mode=r,this.frontFace=i}}so.disabled=new so(!1,Df,Of),so.backCCW=new so(!0,Df,Of),so.backCW=new so(!0,Df,2304),so.frontCW=new so(!0,1028,2304),so.frontCCW=new so(!0,1028,Of);class Ia extends Ro{constructor(e,r,i){super(),this.id=e,this._onlySymbols=i,r.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new s5(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new n5,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const i=this._tiles[r];i.upload(e),i.prepare(this.map.style.imageManager)}}getIds(){return bn(this._tiles).map(e=>e.tileID).sort(kg).map(e=>e.key)}getRenderableIds(e){const r=[];for(const i in this._tiles)this._isIdRenderable(+i,e)&&r.push(this._tiles[i]);return e?r.sort((i,d)=>{const h=i.tileID,p=d.tileID,_=new ve(h.canonical.x,h.canonical.y)._rotate(this.transform.angle),x=new ve(p.canonical.x,p.canonical.y)._rotate(this.transform.angle);return h.overscaledZ-p.overscaledZ||x.y-_.y||x.x-_.x}).map(i=>i.tileID.key):r.map(i=>i.tileID).sort(kg).map(i=>i.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const i=this._tiles[e];i&&(i.state!=="loading"&&(i.state=r),this._loadTile(i,this._tileLoaded.bind(this,i,e,r)))}_tileLoaded(e,r,i,d){if(d)if(e.state="errored",d.status!==404)this._source.fire(new Jn(d,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const h=this.map.painter.terrain;this.update(this.transform,h.getScaledDemTileSize(),!0),h.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Yn.now(),i==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Gi("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let d=0;d<r.length;d++){const h=r[d];if(e.neighboringTiles&&e.neighboringTiles[h]){const p=this.getTileByID(h);i(e,p),i(p,e)}}function i(d,h){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let p=h.tileID.canonical.x-d.tileID.canonical.x;const _=h.tileID.canonical.y-d.tileID.canonical.y,x=Math.pow(2,d.tileID.canonical.z),b=h.tileID.key;p===0&&_===0||Math.abs(_)>1||(Math.abs(p)>1&&(Math.abs(p+x)===1?p+=x:Math.abs(p-x)===1&&(p-=x)),h.dem&&d.dem&&(d.dem.backfillBorder(h.dem,p,_),d.neighboringTiles&&d.neighboringTiles[b]&&(d.neighboringTiles[b].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,i,d){for(const h in this._tiles){let p=this._tiles[h];if(d[h]||!p.hasData()||p.tileID.overscaledZ<=r||p.tileID.overscaledZ>i)continue;let _=p.tileID;for(;p&&p.tileID.overscaledZ>r+1;){const b=p.tileID.scaledTo(p.tileID.overscaledZ-1);p=this._tiles[b.key],p&&p.hasData()&&(_=b)}let x=_;for(;x.overscaledZ>r;)if(x=x.scaledTo(x.overscaledZ-1),e[x.key]){d[_.key]=_;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=r?i:null}for(let i=e.overscaledZ-1;i>=r;i--){const d=e.scaledTo(i),h=this._getLoadedTile(d);if(h)return h}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const i=Math.ceil(e.width/r)+1,d=Math.ceil(e.height/r)+1,h=Math.floor(i*d*5),p=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,h):h,_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(_)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const i={};for(const d in this._tiles){const h=this._tiles[d];h.tileID=h.tileID.unwrapTo(h.tileID.wrap+r),i[h.tileID.key]=h}this._tiles=i;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(e,r,i){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!i)return;let d;this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(_=>new Fn(_.canonical.z,_.wrap,_.canonical.z,_.canonical.x,_.canonical.y)):(d=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(_=>this._source.hasTile(_)))):d=[];const h=this._updateRetainedTiles(d);if(Dg(this._source.type)&&d.length!==0){const _={},x={},b=Object.keys(h);for(const A of b){const M=h[A],D=this._tiles[A];if(!D||D.fadeEndTime&&D.fadeEndTime<=Yn.now())continue;const O=this.findLoadedParent(M,Math.max(M.overscaledZ-Ia.maxOverzooming,this._source.minzoom));O&&(this._addTile(O.tileID),_[O.tileID.key]=O.tileID),x[A]=M}const T=d[d.length-1].overscaledZ;for(const A in this._tiles){const M=this._tiles[A];if(h[A]||!M.hasData())continue;let D=M.tileID;for(;D.overscaledZ>T;){D=D.scaledTo(D.overscaledZ-1);const O=this._tiles[D.key];if(O&&O.hasData()&&x[D.key]){h[A]=M.tileID;break}}}for(const A in _)h[A]||(this._coveredTiles[A]=!0,h[A]=_[A])}for(const _ in h)this._tiles[_].clearFadeHold();const p=function(_,x){const b=[];for(const T in _)T in x||b.push(T);return b}(this._tiles,h);for(const _ of p){const x=this._tiles[_];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(+_)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const i={},d=e.reduce((b,T)=>Math.min(b,T.overscaledZ),1/0),h=e[0].overscaledZ,p=Math.max(h-Ia.maxOverzooming,this._source.minzoom),_=Math.max(h+Ia.maxUnderzooming,this._source.minzoom),x={};for(const b of e){const T=this._addTile(b);r[b.key]=b,T.hasData()||d<this._source.maxzoom&&(x[b.key]=b)}this._retainLoadedChildren(x,d,_,r);for(const b of e){let T=this._tiles[b.key];if(T.hasData())continue;if(b.canonical.z>=this._source.maxzoom){const M=b.children(this._source.maxzoom)[0],D=this.getTile(M);if(D&&D.hasData()){r[M.key]=M;continue}}else{const M=b.children(this._source.maxzoom);if(r[M[0].key]&&r[M[1].key]&&r[M[2].key]&&r[M[3].key])continue}let A=T.wasRequested();for(let M=b.overscaledZ-1;M>=p;--M){const D=b.scaledTo(M);if(i[D.key]||(i[D.key]=!0,T=this.getTile(D),!T&&A&&(T=this._addTile(D)),T&&(r[D.key]=D,A=T.wasRequested(),T.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let i,d=this._tiles[e].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){i=this._loadedParentTiles[d.key];break}r.push(d.key);const h=d.scaledTo(d.overscaledZ-1);if(i=this._getLoadedTile(h),i)break;d=h}for(const h of r)this._loadedParentTiles[h]=i}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const i=!!r;if(!i){const d=this.map?this.map.painter:null;r=new Lf(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,i||this._source.fire(new Gi("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=r.getExpiryTimeout();i&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},i))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,i){const d=[],h=this.transform;if(!h)return d;const p=h.projection.name==="globe",_=bo(h.center.lng);for(const x in this._tiles){const b=this._tiles[x];if(i&&b.clearQueryDebugViz(),b.holdingForFade())continue;let T;if(p){const A=b.tileID.canonical;if(A.z===0){const M=[Math.abs(ut(_,...Mc(A,-1))-_),Math.abs(ut(_,...Mc(A,1))-_)];T=[0,2*M.indexOf(Math.min(...M))-1]}else{const M=[Math.abs(ut(_,...Mc(A,-1))-_),Math.abs(ut(_,...Mc(A,0))-_),Math.abs(ut(_,...Mc(A,1))-_)];T=[M.indexOf(Math.min(...M))-1]}}else T=[0];for(const A of T){const M=e.containsTile(b,h,r,A);M&&d.push(M)}}return d}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(i=>this._tiles[i].tileID);for(const i of r)i.projMatrix=this.transform.calculateProjMatrix(i.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(Dg(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=Yn.now())return!0}return!1}setFeatureState(e,r,i){this._state.updateState(e=e||"_geojsonTileLayer",r,i)}removeFeatureState(e,r,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,i)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,i){const d=this._tiles[e];d&&d.setDependencies(r,i)}reloadTilesForDependencies(e,r){for(const i in this._tiles)this._tiles[i].hasDependency(e,r)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const _=()=>{this._sourceLoaded&&(this._source.off("data",_),this._preloadTiles(e,r))};return void this._source.on("data",_)}const i=new Map,d=Array.isArray(e)?e:[e],h=this.map.painter.terrain,p=this.usedForTerrain&&h?h.getScaledDemTileSize():this._source.tileSize;for(const _ of d){const x=_.coveringTiles({tileSize:p,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const b of x)i.set(b.key,b);this.usedForTerrain&&_.updateElevation(!1)}Tr(Array.from(i.values()),(_,x)=>{const b=new Lf(_,this._source.tileSize*_.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(b,T=>{this._source.type==="raster-dem"&&b.dem&&this._backfillDEM(b),x(T,b)})},r)}}function kg(t,e){const r=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Dg(t){return t==="raster"||t==="image"||t==="video"||t==="custom"}function Mc(t,e){const r=1<<t.z;return[t.x/r+e,(t.x+1)/r+e]}Ia.maxOverzooming=10,Ia.maxUnderzooming=3;class bh{constructor(e,r,i){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=i}static create(e,r,i){const d=i||e.findDEMTileFor(r);if(!d||!d.dem)return;const h=d.dem,p=d.tileID,_=1<<r.canonical.z-p.canonical.z;return new bh(d,d.tileSize/Rt/_,[(r.canonical.x/_-p.canonical.x)*h.dim,(r.canonical.y/_-p.canonical.y)*h.dim])}tileCoordToPixel(e,r){const i=r*this._scale+this._offset[1],d=Math.floor(e*this._scale+this._offset[0]),h=Math.floor(i);return new ve(d,h)}getElevationAt(e,r,i,d){const h=e*this._scale+this._offset[0],p=r*this._scale+this._offset[1],_=Math.floor(h),x=Math.floor(p),b=this._dem;return d=!!d,i?tr(tr(b.get(_,x,d),b.get(_,x+1,d),p-x),tr(b.get(_+1,x,d),b.get(_+1,x+1,d),p-x),h-_):b.get(_,x,d)}getElevationAtPixel(e,r,i){return this._dem.get(e,r,!!i)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*no(1,e)*this._dem.stride}}class Og{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new No(Rt,16,0),this.featureIndexArray=new _a,this.promoteId=r}insert(e,r,i,d,h,p=0){const _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,d,h,p);const x=this.grid;for(let b=0;b<r.length;b++){const T=r[b],A=[1/0,1/0,-1/0,-1/0];for(let M=0;M<T.length;M++){const D=T[M];A[0]=Math.min(A[0],D.x),A[1]=Math.min(A[1],D.y),A[2]=Math.max(A[2],D.x),A[3]=Math.max(A[3],D.y)}A[0]<Rt&&A[1]<Rt&&A[2]>=0&&A[3]>=0&&x.insert(_,A[0],A[1],A[2],A[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new gf(new ah(this.rawTileData)).layers,this.sourceLayerCoder=new bg(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,i,d){this.loadVTLayers();const h=e.params||{},p=ml(h.filter),_=e.tileResult,x=e.transform,b=_.bufferedTilespaceBounds,T=this.grid.query(b.min.x,b.min.y,b.max.x,b.max.y,(O,F,q,ee)=>am(_.bufferedTilespaceGeometry,O,F,q,ee));T.sort(a5);let A=null;x.elevation&&T.length>0&&(A=bh.create(x.elevation,this.tileID));const M={};let D;for(let O=0;O<T.length;O++){const F=T[O];if(F===D)continue;D=F;const q=this.featureIndexArray.get(F);let ee=null;this.loadMatchingFeature(M,q,p,h.layers,h.availableImages,r,i,d,(de,te,se,he=0)=>(ee||(ee=Ho(de,this.tileID.canonical,e.tileTransform)),te.queryIntersectsFeature(_,de,se,ee,this.z,e.transform,e.pixelPosMatrix,A,he)))}return M}loadMatchingFeature(e,r,i,d,h,p,_,x,b){const{featureIndex:T,bucketIndex:A,sourceLayerIndex:M,layoutVertexArrayOffset:D}=r,O=this.bucketLayerIDs[A];if(d&&!function(de,te){for(let se=0;se<de.length;se++)if(te.indexOf(de[se])>=0)return!0;return!1}(d,O))return;const F=this.sourceLayerCoder.decode(M),q=this.vtLayers[F].feature(T);if(i.needGeometry){const de=Ta(q,!0);if(!i.filter(new C(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!i.filter(new C(this.tileID.overscaledZ),q))return;const ee=this.getId(q,F);for(let de=0;de<O.length;de++){const te=O[de];if(d&&d.indexOf(te)<0)continue;const se=p[te];if(!se)continue;let he={};ee!==void 0&&x&&(he=x.getState(se.sourceLayer||"_geojsonTileLayer",ee));const ue=er({},_[te]);ue.paint=zg(ue.paint,se.paint,q,he,h),ue.layout=zg(ue.layout,se.layout,q,he,h);const ke=!b||b(q,se,he,D);if(!ke)continue;const Pe=new $g(q,this.z,this.x,this.y,ee);Pe.layer=ue;let Ne=e[te];Ne===void 0&&(Ne=e[te]=[]),Ne.push({featureIndex:T,feature:Pe,intersectionZ:ke})}}lookupSymbolFeatures(e,r,i,d,h,p,_,x){const b={};this.loadVTLayers();const T=ml(h);for(const A of e)this.loadMatchingFeature(b,{bucketIndex:i,sourceLayerIndex:d,featureIndex:A,layoutVertexArrayOffset:0},T,p,_,x,r);return b}loadFeature(e){const{featureIndex:r,sourceLayerIndex:i}=e;this.loadVTLayers();const d=this.sourceLayerCoder.decode(i),h=this.vtFeatures[d];if(h[r])return h[r];const p=this.vtLayers[d].feature(r);return h[r]=p,p}hasLayer(e){for(const r of this.bucketLayerIDs)for(const i of r)if(e===i)return!0;return!1}getId(e,r){let i=e.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];d!=null&&(i=e.properties[d]),typeof i=="boolean"&&(i=Number(i))}return i}}function zg(t,e,r,i,d){return Vt(t,(h,p)=>{const _=e instanceof Q?e.get(p):null;return _&&_.evaluate?_.evaluate(r,i,d):_})}function a5(t,e){return e-t}$t(Og,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class Bg{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Wo({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const i=this.getKey(e,r);return this.positions[i]}trim(){const e=this.width,r=this.height=Vn(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,i){const d=[];let h=e.length%2==1?-e[e.length-1]*i:0,p=e[0]*i,_=!0;d.push({left:h,right:p,isDash:_,zeroLength:e[0]===0});let x=e[0];for(let b=1;b<e.length;b++){_=!_;const T=e[b];h=x*i,x+=T,p=x*i,d.push({left:h,right:p,isDash:_,zeroLength:T===0})}return d}addRoundDash(e,r,i){const d=r/2;for(let h=-i;h<=i;h++){const p=this.width*(this.nextRow+i+h);let _=0,x=e[_];for(let b=0;b<this.width;b++){b/x.right>1&&(x=e[++_]);const T=Math.abs(b-x.left),A=Math.abs(b-x.right),M=Math.min(T,A);let D;const O=h/i*(d+1);if(x.isDash){const F=d-Math.abs(O);D=Math.sqrt(M*M+F*F)}else D=d-Math.sqrt(M*M+O*O);this.image.data[p+b]=Math.max(0,Math.min(255,D+128))}}}addRegularDash(e,r){for(let x=e.length-1;x>=0;--x){const b=e[x],T=e[x+1];b.zeroLength?e.splice(x,1):T&&T.isDash===b.isDash&&(T.left=b.left,e.splice(x,1))}const i=e[0],d=e[e.length-1];i.isDash===d.isDash&&(i.left=d.left-this.width,d.right=i.right+this.width);const h=this.width*this.nextRow;let p=0,_=e[p];for(let x=0;x<this.width;x++){x/_.right>1&&(_=e[++p]);const b=Math.abs(x-_.left),T=Math.abs(x-_.right),A=Math.min(b,T);this.image.data[h+x]=Math.max(0,Math.min(255,(_.isDash?A:-A)+r+128))}}addDash(e,r){const i=this.getKey(e,r);if(this.positions[i])return this.positions[i];const d=r==="round",h=d?7:0,p=2*h+1;if(this.nextRow+p>this.height)return yr("LineAtlas out of space"),null;e.length===0&&e.push(1);let _=0;for(let T=0;T<e.length;T++)e[T]<0&&(yr("Negative value is found in line dasharray, replacing values with 0"),e[T]=0),_+=e[T];if(_!==0){const T=this.width/_,A=this.getDashRanges(e,this.width,T);d?this.addRoundDash(A,T,h):this.addRegularDash(A,r==="square"?.5*T:0)}const x=this.nextRow+h;this.nextRow+=p;const b={tl:[x,h],br:[_,0]};return this.positions[i]=b,b}}$t(Bg,"LineAtlas");const Fg=1*oo;class Ng{constructor(e){const r={},i=[];for(const _ in e){const x=e[_],b=r[_]={};for(const T in x.glyphs){const A=x.glyphs[+T];if(!A||A.bitmap.width===0||A.bitmap.height===0)continue;const M=A.metrics.localGlyph?Fg:1,D={x:0,y:0,w:A.bitmap.width+2*M,h:A.bitmap.height+2*M};i.push(D),b[T]=D}}const{w:d,h}=xf(i),p=new Wo({width:d||1,height:h||1});for(const _ in e){const x=e[_];for(const b in x.glyphs){const T=x.glyphs[+b];if(!T||T.bitmap.width===0||T.bitmap.height===0)continue;const A=r[_][b],M=T.metrics.localGlyph?Fg:1;Wo.copy(T.bitmap,p,{x:0,y:0},{x:A.x+M,y:A.y+M},T.bitmap)}}this.image=p,this.positions=r}}$t(Ng,"GlyphAtlas");class l5{constructor(e){this.tileID=new Fn(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Aa(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,i,d,h){this.status="parsing",this.data=e,this.collisionBoxArray=new fr;const p=new bg(Object.keys(e.layers).sort()),_=new Og(this.tileID,this.promoteId);_.bucketLayerIDs=[];const x={},b=new Bg(256,256),T={featureIndex:_,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:b,availableImages:i},A=r.familiesBySource[this.source];for(const he in A){const ue=e.layers[he];if(!ue)continue;let ke=!1,Pe=!1;for(const ze of A[he])ze[0].type==="symbol"?ke=!0:Pe=!0;if(this.isSymbolTile===!0&&!ke||this.isSymbolTile===!1&&!Pe)continue;ue.version===1&&yr(`Vector tile source "${this.source}" layer "${he}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ne=p.encode(he),nt=[];for(let ze=0;ze<ue.length;ze++){const qe=ue.feature(ze),He=_.getId(qe,he);nt.push({feature:qe,id:He,index:ze,sourceLayerIndex:Ne})}for(const ze of A[he]){const qe=ze[0];this.isSymbolTile!==void 0&&qe.type==="symbol"!==this.isSymbolTile||qe.minzoom&&this.zoom<Math.floor(qe.minzoom)||qe.maxzoom&&this.zoom>=qe.maxzoom||qe.visibility!=="none"&&(zf(ze,this.zoom,i),(x[qe.id]=qe.createBucket({index:_.bucketLayerIDs.length,layers:ze,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ne,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:i})).populate(nt,T,this.tileID.canonical,this.tileTransform),_.bucketLayerIDs.push(ze.map(He=>He.id)))}}let M,D,O,F;b.trim();const q={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ee=()=>{if(M)return h(M);if(D&&O&&F){const he=new Ng(D),ue=new Hm(O,F);for(const ke in x){const Pe=x[ke];Pe instanceof Is?(zf(Pe.layers,this.zoom,i),kv(Pe,D,he.positions,O,ue.iconPositions,this.showCollisionBoxes,i,this.tileID.canonical,this.tileZoom,this.projection)):Pe.hasPattern&&(Pe instanceof ih||Pe instanceof Qu||Pe instanceof yc)&&(zf(Pe.layers,this.zoom,i),Pe.addFeatures(T,this.tileID.canonical,ue.patternPositions,i,this.tileTransform))}this.status="done",h(null,{buckets:bn(x).filter(ke=>!ke.isEmpty()),featureIndex:_,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:he.image,lineAtlas:b,imageAtlas:ue,glyphMap:this.returnDependencies?D:null,iconMap:this.returnDependencies?O:null,glyphPositions:this.returnDependencies?he.positions:null})}},de=Vt(T.glyphDependencies,he=>Object.keys(he).map(Number));Object.keys(de).length?d.send("getGlyphs",{uid:this.uid,stacks:de},(he,ue)=>{M||(M=he,D=ue,ee())},void 0,!1,q):D={};const te=Object.keys(T.iconDependencies);te.length?d.send("getImages",{icons:te,source:this.source,tileID:this.tileID,type:"icons"},(he,ue)=>{M||(M=he,O=ue,ee())},void 0,!1,q):O={};const se=Object.keys(T.patternDependencies);se.length?d.send("getImages",{icons:se,source:this.source,tileID:this.tileID,type:"patterns"},(he,ue)=>{M||(M=he,F=ue,ee())},void 0,!1,q):F={},ee()}}function zf(t,e,r){const i=new C(e);for(const d of t)d.recalculate(i,r)}class jg{constructor(e){this.entries={},this.scheduler=e}request(e,r,i,d){const h=this.entries[e]=this.entries[e]||{callbacks:[]};if(h.result){const[p,_]=h.result;return this.scheduler?this.scheduler.add(()=>{d(p,_)},r):d(p,_),()=>{}}return h.callbacks.push(d),h.cancel||(h.cancel=i((p,_)=>{h.result=[p,_];for(const x of h.callbacks)this.scheduler?this.scheduler.add(()=>{x(p,_)},r):x(p,_);setTimeout(()=>delete this.entries[e],3e3)})),()=>{h.result||(h.callbacks=h.callbacks.filter(p=>p!==d),h.callbacks.length||(h.cancel(),delete this.entries[e]))}}}function Ug(t,e,r){const i=JSON.stringify(t.request);return t.data&&(this.deduped.entries[i]={result:[null,t.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},d=>{const h=Si(t.request,(p,_,x,b)=>{p?d(p):_&&d(null,{vectorTile:r?void 0:new gf(new ah(_)),rawData:_,cacheControl:x,expires:b})});return()=>{h.cancel(),d()}},e)}const Vg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Bf{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,i]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=i>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const h=Vg[15&i];if(!h)throw new Error("Unrecognized array type.");const[p]=new Uint16Array(e,2,1),[_]=new Uint32Array(e,4,1);return new Bf(_,p,h,e)}constructor(e,r=64,i=Float64Array,d){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const h=Vg.indexOf(this.ArrayType),p=2*e*this.ArrayType.BYTES_PER_ELEMENT,_=e*this.IndexArrayType.BYTES_PER_ELEMENT,x=(8-_%8)%8;if(h<0)throw new Error(`Unexpected typed array class: ${i}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+_+x,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+p+_+x),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+_+x,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+h]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=r,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ff(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,i,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:p,nodeSize:_}=this,x=[0,h.length-1,0],b=[];for(;x.length;){const T=x.pop()||0,A=x.pop()||0,M=x.pop()||0;if(A-M<=_){for(let q=M;q<=A;q++){const ee=p[2*q],de=p[2*q+1];ee>=e&&ee<=i&&de>=r&&de<=d&&b.push(h[q])}continue}const D=M+A>>1,O=p[2*D],F=p[2*D+1];O>=e&&O<=i&&F>=r&&F<=d&&b.push(h[D]),(T===0?e<=O:r<=F)&&(x.push(M),x.push(D-1),x.push(1-T)),(T===0?i>=O:d>=F)&&(x.push(D+1),x.push(A),x.push(1-T))}return b}within(e,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:h,nodeSize:p}=this,_=[0,d.length-1,0],x=[],b=i*i;for(;_.length;){const T=_.pop()||0,A=_.pop()||0,M=_.pop()||0;if(A-M<=p){for(let q=M;q<=A;q++)Zg(h[2*q],h[2*q+1],e,r)<=b&&x.push(d[q]);continue}const D=M+A>>1,O=h[2*D],F=h[2*D+1];Zg(O,F,e,r)<=b&&x.push(d[D]),(T===0?e-i<=O:r-i<=F)&&(_.push(M),_.push(D-1),_.push(1-T)),(T===0?e+i>=O:r+i>=F)&&(_.push(D+1),_.push(A),_.push(1-T))}return x}}function Ff(t,e,r,i,d,h){if(d-i<=r)return;const p=i+d>>1;Gg(t,e,p,i,d,h),Ff(t,e,r,i,p-1,1-h),Ff(t,e,r,p+1,d,1-h)}function Gg(t,e,r,i,d,h){for(;d>i;){if(d-i>600){const b=d-i+1,T=r-i+1,A=Math.log(b),M=.5*Math.exp(2*A/3),D=.5*Math.sqrt(A*M*(b-M)/b)*(T-b/2<0?-1:1);Gg(t,e,r,Math.max(i,Math.floor(r-T*M/b+D)),Math.min(d,Math.floor(r+(b-T)*M/b+D)),h)}const p=e[2*r+h];let _=i,x=d;for(Pc(t,e,i,r),e[2*d+h]>p&&Pc(t,e,i,d);_<x;){for(Pc(t,e,_,x),_++,x--;e[2*_+h]<p;)_++;for(;e[2*x+h]>p;)x--}e[2*i+h]===p?Pc(t,e,i,x):(x++,Pc(t,e,x,d)),x<=r&&(i=x+1),r<=x&&(d=x-1)}}function Pc(t,e,r,i){Nf(t,r,i),Nf(e,2*r,2*i),Nf(e,2*r+1,2*i+1)}function Nf(t,e,r){const i=t[e];t[e]=t[r],t[r]=i}function Zg(t,e,r,i){const d=t-r,h=e-i;return d*d+h*h}o.ARRAY_TYPE=oi,o.AUTH_ERR_MSG=ce,o.Aabb=Bn,o.Actor=class{constructor(t,e,r){this.target=t,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},ci(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Gt()?t:I,this.scheduler=new t5}send(t,e,r,i,d=!1,h){const p=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=h,this.callbacks[p]=r);const _=Pn(this.globalScope)?void 0:[];return this.target.postMessage({id:p,type:t,hasCallback:!!r,targetMapId:i,mustQueue:d,sourceMapId:this.mapId,data:bs(e,_)},_),{cancel:()=>{r&&delete this.callbacks[p],this.target.postMessage({id:p,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(e.mustQueue||Gt()){const i=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),i&&i.metadata||{type:"message"})}else this.processTask(r,e)}processTask(t,e){if(e.type==="<response>"){const r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(jo(e.error)):r(null,jo(e.data)))}else{const r=Pn(this.globalScope)?void 0:[],i=e.hasCallback?(h,p)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:h?bs(h):null,data:bs(p,r)},r)}:h=>{},d=jo(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,d,i);else if(this.parent.getWorkerSource){const h=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,h[0],d.source)[h[1]](d,i)}else i(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=nh,o.Color=Fr,o.ColorMode=To,o.CullFaceMode=so,o.DEMData=xh,o.DataConstantProperty=B,o.DedupedRequest=jg,o.DepthMode=Nl,o.EXTENT=Rt,o.Elevation=class{isDataAvailableAtPoint(t){const e=this._source();if(this.isUsingMockSource()||!e||t.y<0||t.y>1)return!1;const r=e.getSource().maxzoom,i=1<<r,d=Math.floor(t.x),h=Math.floor((t.x-d)*i),p=Math.floor(t.y*i),_=this.findDEMTileFor(new Fn(r,d,r,h,p));return!(!_||!_.dem)}getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const i=this._source();if(!i||t.y<0||t.y>1)return e;const d=i.getSource().maxzoom,h=1<<d,p=Math.floor(t.x),_=t.x-p,x=new Fn(d,p,d,Math.floor(_*h),Math.floor(t.y*h)),b=this.findDEMTileFor(x);if(!b||!b.dem)return e;const T=b.dem,A=1<<b.tileID.canonical.z,M=(_*A-b.tileID.canonical.x)*T.dim,D=(t.y*A-b.tileID.canonical.y)*T.dim,O=Math.floor(M),F=Math.floor(D);return(r?this.exaggeration():1)*tr(tr(T.get(O,F),T.get(O,F+1),D-F),tr(T.get(O+1,F),T.get(O+1,F+1),D-F),M-O)}getAtTileOffset(t,e,r){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Sl(t.wrap+(t.canonical.x+e/Rt)/i,(t.canonical.y+r/Rt)/i))}getAtTileOffsetFunc(t,e,r,i){return d=>{const h=this.getAtTileOffset(t,d.x,d.y),p=i.upVector(t.canonical,d.x,d.y);return gi(p,p,h*i.upVectorScale(t.canonical,e,r).metersToTile),p}}getForTilePoints(t,e,r,i){if(this.isUsingMockSource())return!1;const d=bh.create(this,t,i);return!!d&&(e.forEach(h=>{h[2]=this.exaggeration()*d.getElevationAt(h[0],h[1],r)}),!0)}getMinMaxForTile(t){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const r=e.dem.tree,i=e.tileID,d=1<<t.canonical.z-i.canonical.z;let h=t.canonical.x/d-i.canonical.x,p=t.canonical.y/d-i.canonical.y,_=0;for(let x=0;x<t.canonical.z-i.canonical.z&&!r.leaves[_];x++){h*=2,p*=2;const b=2*Math.floor(p)+Math.floor(h);_=r.childOffsets[_]+b,h%=1,p%=1}return{min:this.exaggeration()*r.minimums[_],max:this.exaggeration()*r.maximums[_]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Jn,o.EvaluationParameters=C,o.Event=Gi,o.Evented=Ro,o.FillExtrusionBucket=yc,o.Frustum=q1,o.FrustumCorners=Z1,o.GLOBE_RADIUS=vo,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=G0,o.GLOBE_ZOOM_THRESHOLD_MIN=H1,o.GlobeSharedBuffers=class{constructor(t){this._createGrid(t),this._createPoles(t)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const t of this._poleSegments)t.destroy();for(const t of this._gridSegments)t.withSkirts.destroy(),t.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const t of this._wireframeSegments)t.destroy()}}_fillGridMeshWithLods(t,e){const r=new rt,i=new At,d=[],h=t+1+2,p=e[0]+1,_=e[0]+1+(1+e.length),x=(b,T,A)=>{let M=b===h-1?b-2:b===0?b:b-1;return M+=A?24575:0,[M,T]};for(let b=0;b<h;++b)r.emplaceBack(...x(b,0,!0));for(let b=0;b<p;++b)for(let T=0;T<h;++T)r.emplaceBack(...x(T,b,(T===0||T===h-1)&&!0));for(let b=0;b<e.length;++b){const T=e[b];for(let A=0;A<h;++A)r.emplaceBack(...x(A,T,!0))}for(let b=0;b<e.length;++b){const T=i.length,A=e[b]+1+2,M=new At;for(let F=0;F<A-1;F++){const q=F===A-2,ee=q?h*(_-e.length+b-F):h;for(let de=0;de<h-1;de++){const te=F*h+de;F===0||q||de===0||de===h-2?(M.emplaceBack(te+1,te,te+ee),M.emplaceBack(te+ee,te+ee+1,te+1)):(i.emplaceBack(te+1,te,te+ee),i.emplaceBack(te+ee,te+ee+1,te+1))}}const D=qr.simpleSegment(0,T,r.length,i.length-T);for(let F=0;F<M.uint16.length;F+=3)i.emplaceBack(M.uint16[F],M.uint16[F+1],M.uint16[F+2]);const O=qr.simpleSegment(0,T,r.length,i.length-T);d.push({withoutSkirts:D,withSkirts:O})}return{vertices:r,indices:i,segments:d}}_createGrid(t){const e=this._fillGridMeshWithLods(wa,lc);this._gridSegments=e.segments,this._gridBuffer=t.createVertexBuffer(e.vertices,ac.members),this._gridIndexBuffer=t.createIndexBuffer(e.indices,!0)}_createPoles(t){const e=new At;for(let d=0;d<=wa;d++)e.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=t.createIndexBuffer(e,!0);const r=new hr,i=new hr;this._poleSegments=[];for(let d=0,h=0;d<H1;d++){const p=360/(1<<d);r.emplaceBack(0,-vo,0,.5,0),i.emplaceBack(0,-vo,0,.5,1);for(let _=0;_<=wa;_++){const x=_/wa,b=tr(0,p,x),[T,A,M]=wl(t4,r4,b,vo);r.emplaceBack(T,A,M,x,0),i.emplaceBack(T,A,M,x,1)}this._poleSegments.push(qr.simpleSegment(h,0,66,64)),h+=66}this._poleNorthVertexBuffer=t.createVertexBuffer(r,U0,!1),this._poleSouthVertexBuffer=t.createVertexBuffer(i,U0,!1)}getGridBuffers(t,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[t].withSkirts:this._gridSegments[t].withoutSkirts]}getPoleBuffers(t){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[t]]}getWirefameBuffers(t,e){if(!this._wireframeSegments){const r=new sn,i=wa,d=i+1+2,h=1;this._wireframeSegments=[];for(let p=0,_=0;p<lc.length;p++){const x=lc[p];for(let T=h;T<x+h;T++)for(let A=h;A<i+h;A++){const M=T*d+A;r.emplaceBack(M,M+1),r.emplaceBack(M,M+d),r.emplaceBack(M,M+d+1)}const b=x*i*3;this._wireframeSegments.push(qr.simpleSegment(0,_,(x+1)*d,b)),_+=b}this._wireframeIndexBuffer=t.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},o.GlyphManager=Dl,o.ImagePosition=bf,o.KDBush=Bf,o.LivePerformanceUtils=Za,o.LngLat=pr,o.LngLatBounds=Ts,o.LocalGlyphMode=Ef,o.MAX_MERCATOR_LATITUDE=yn,o.MercatorCoordinate=Sl,o.ONE_EM=un,o.OverscaledTileID=Fn,o.PerformanceMarkers=po,o.Point=ve,o.Properties=ne,o.RGBAImage=si,o.Ray=G1,o.RequestManager=class{constructor(t,e,r){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const t=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Je,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!ge(t))return t;const r=ct(t);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!ge(t))return t;const r=ct(t);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(t,e,r,i){if(!ge(t))return t;const d=ct(t);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),r&&d.params.push(`language=${r}`),i&&d.params.push(`worldview=${i}`),this._makeAPIURL(d,this._customAccessToken||e)}normalizeSpriteURL(t,e,r,i){const d=ct(t);return ge(t)?(d.path=`/styles/v1${d.path}/sprite${e}${r}`,this._makeAPIURL(d,this._customAccessToken||i)):(d.path+=`${e}${r}`,it(d))}normalizeTileURL(t,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ge(t))return t;const i=ct(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&i.authority!=="raster"&&r===512?"@2x":""}${oe.supported?".webp":"$1"}`),i.authority==="raster"?i.path=`/${U.RASTER_URL_PREFIX}${i.path}`:(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path=`/${U.TILE_URL_VERSION}${i.path}`);const d=this._customAccessToken||function(h){for(const p of h){const _=p.match(/^access_token=(.*)$/);if(_)return _[1]}return null}(i.params)||U.ACCESS_TOKEN;return U.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&i.params.push(`sku=${this._skuToken}`),this._makeAPIURL(i,d)}canonicalizeTileURL(t,e){const r=ct(t);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return t;let i="mapbox://";r.path.match(/^\/raster\/v1\//)?i+=`raster/${r.path.replace(`/${U.RASTER_URL_PREFIX}/`,"")}`:i+=`tiles/${r.path.replace(`/${U.TILE_URL_VERSION}/`,"")}`;let d=r.params;return e&&(d=d.filter(h=>!h.match(/^access_token=/))),d.length&&(i+=`?${d.join("&")}`),i}canonicalizeTileset(t,e){const r=!!e&&ge(e),i=[];for(const d of t.tiles||[])Ae(d)?i.push(this.canonicalizeTileURL(d,r)):i.push(d);return i}_makeAPIURL(t,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=ct(U.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,t.protocol==="http"){const d=t.params.indexOf("secure");d>=0&&t.params.splice(d,1)}if(i.path!=="/"&&(t.path=`${i.path}${t.path}`),!U.REQUIRE_ACCESS_TOKEN)return it(t);if(e=e||U.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return t.params=t.params.filter(d=>d.indexOf("access_token")===-1),t.params.push(`access_token=${e||""}`),it(t)}},o.ResourceType=wn,o.SegmentVector=qr,o.SourceCache=Ia,o.StencilMode=kf,o.StructArrayLayout1ui2=ii,o.StructArrayLayout2f1f2i16=kt,o.StructArrayLayout2i4=rt,o.StructArrayLayout2ui4=sn,o.StructArrayLayout3f12=Xt,o.StructArrayLayout3ui6=At,o.StructArrayLayout4i8=Ve,o.StructArrayLayout5f20=hr,o.Texture=Ic,o.Tile=Lf,o.Transitionable=z,o.Uniform1f=Nu,o.Uniform1i=class extends Go{constructor(t){super(t),this.current=0}set(t,e,r){this.fetchUniformLocation(t,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},o.Uniform2f=class extends Go{constructor(t){super(t),this.current=[0,0]}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},o.Uniform3f=class extends Go{constructor(t){super(t),this.current=[0,0,0]}set(t,e,r){this.fetchUniformLocation(t,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},o.Uniform4f=T0,o.UniformColor=S0,o.UniformMatrix2f=class extends Go{constructor(t){super(t),this.current=F2}set(t,e,r){if(this.fetchUniformLocation(t,e)){for(let i=0;i<4;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}},o.UniformMatrix3f=class extends Go{constructor(t){super(t),this.current=B2}set(t,e,r){if(this.fetchUniformLocation(t,e)){for(let i=0;i<9;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},o.UniformMatrix4f=class extends Go{constructor(t){super(t),this.current=z2}set(t,e,r){if(this.fetchUniformLocation(t,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let i=1;i<16;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},o.UnwrappedTileID=Lm,o.ValidationError=xt,o.VectorTileFeature=th,o.VectorTileWorkerSource=class extends Ro{constructor(t,e,r,i,d){super(),this.actor=t,this.layerIndex=e,this.availableImages=r,this.loadVectorData=d||Ug,this.loading={},this.loaded={},this.deduped=new jg(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const r=t.uid,i=t&&t.request,d=i&&i.collectResourceTiming,h=this.loading[r]=new l5(t);h.abort=this.loadVectorData(t,(p,_)=>{const x=!this.loading[r];if(delete this.loading[r],x||p||!_)return h.status="done",x||(this.loaded[r]=h),e(p);const b=_.rawData,T={};_.expires&&(T.expires=_.expires),_.cacheControl&&(T.cacheControl=_.cacheControl),h.vectorTile=_.vectorTile||new gf(new ah(b));const A=()=>{h.parse(h.vectorTile,this.layerIndex,this.availableImages,this.actor,(M,D)=>{if(M||!D)return e(M);const O={};if(d){const F=Po(i);F.length>0&&(O.resourceTiming=JSON.parse(JSON.stringify(F)))}e(null,er({rawTileData:b.slice(0)},D,T,O))})};this.isSpriteLoaded?A():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(A,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):A()}),this.loaded=this.loaded||{},this.loaded[r]=h})}reloadTile(t,e){const r=this.loaded,i=t.uid,d=this;if(r&&r[i]){const h=r[i];h.showCollisionBoxes=t.showCollisionBoxes,h.enableTerrain=!!t.enableTerrain,h.projection=t.projection,h.tileTransform=Aa(t.tileID.canonical,t.projection);const p=(_,x)=>{const b=h.reloadCallback;b&&(delete h.reloadCallback,h.parse(h.vectorTile,d.layerIndex,this.availableImages,d.actor,b)),e(_,x)};h.status==="parsing"?h.reloadCallback=p:h.status==="done"&&(h.vectorTile?h.parse(h.vectorTile,this.layerIndex,this.availableImages,this.actor,p):p())}}abortTile(t,e){const r=t.uid,i=this.loading[r];i&&(i.abort&&i.abort(),delete this.loading[r]),e()}removeTile(t,e){const r=this.loaded,i=t.uid;r&&r[i]&&delete r[i],e()}},o.WritingMode=yi,o.ZoomDependentExpression=ca,o.add=qo,o.addDynamicAttributes=_h,o.adjoint=function(t,e){var r=e[0],i=e[1],d=e[2],h=e[3],p=e[4],_=e[5],x=e[6],b=e[7],T=e[8];return t[0]=p*T-_*b,t[1]=d*b-i*T,t[2]=i*_-d*p,t[3]=_*x-h*T,t[4]=r*T-d*x,t[5]=d*h-r*_,t[6]=h*b-p*x,t[7]=i*x-r*b,t[8]=r*p-i*h,t},o.asyncAll=Tr,o.bezier=Tt,o.bindAll=ci,o.boundsAttributes=Eg,o.bufferConvexPolygon=function(t,e){const r=[];for(let i=0;i<t.length;i++){const d=Qt(i-1,-1,t.length-1),h=Qt(i+1,-1,t.length-1),p=t[i],_=t[h],x=t[d].sub(p).unit(),b=_.sub(p).unit(),T=b.angleWithSep(x.x,x.y),A=x.add(b).unit().mult(-1*e/Math.sin(T/2));r.push(p.add(A))}return r},o.cacheEntryPossiblyAdded=function(t){fi++,fi>ns&&(t.getActor().send("enforceCacheSizeLimit",Io),fi=0)},o.calculateGlobeLabelMatrix=function(t,e){const{x:r,y:i}=t.point,d=K0(r,i,t.worldSize/t._pixelsPerMercatorPixel,0,0);return xa(d,d,X1(xo(e)))},o.calculateGlobeMatrix=function(t){const{x:e,y:r}=t.point,{lng:i,lat:d}=t._center;return K0(e,r,t.worldSize,i,d)},o.calculateGlobeMercatorMatrix=function(t){const e=t.pixelsPerMeter,r=e/no(1,t.center.lat),i=to(new Float64Array(16));return tc(i,i,[t.point.x,t.point.y,0]),ba(i,i,[r,r,e]),Float32Array.from(i)},o.circumferenceAtLatitude=J1,o.clamp=ut,o.clearTileCache=function(t){if(!fo())return;const e=I.caches.delete(ji);t&&e.catch(t).then(()=>t())},o.clipLine=sg,o.clone=function(t){var e=new oi(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.clone$1=dn,o.collisionCircleLayout=sv,o.config=U,o.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},o.create=function(){var t=new oi(16);return oi!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},o.create$1=I0,o.createExpression=ys,o.createLayout=be,o.createStyleLayer=function(t){return t.type==="custom"?new Yv(t):new Qv[t.type](t)},o.cross=V1,o.degToRad=tt,o.distance=function(t,e){return Math.hypot(e[0]-t[0],e[1]-t[1],e[2]-t[2])},o.div=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},o.dot=Pi,o.earthRadius=uc,o.ease=Wt,o.easeCubicInOut=It,o.ecefToLatLng=function([t,e,r]){const i=Math.hypot(t,e,r),d=Math.atan2(t,r),h=.5*Math.PI-Math.acos(-e/i);return new pr(_e(d),_e(h))},o.emitValidationErrors=ku,o.endsWith=wi,o.enforceCacheSizeLimit=function(t){Xn(),Ln&&Ln.then(e=>{e.keys().then(r=>{for(let i=0;i<r.length-t;i++)e.delete(r[i])})})},o.evaluateSizeForFeature=oh,o.evaluateSizeForZoom=Pl,o.evaluateVariableOffset=ug,o.evented=g,o.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},o.exported=Yn,o.exported$1=oe,o.extend=er,o.extend$1=Tn,o.fillExtrusionHeightLift=Im,o.filterObject=ui,o.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},o.fromQuat=function(t,e){var r=e[0],i=e[1],d=e[2],h=e[3],p=r+r,_=i+i,x=d+d,b=r*p,T=i*p,A=i*_,M=d*p,D=d*_,O=d*x,F=h*p,q=h*_,ee=h*x;return t[0]=1-A-O,t[1]=T+ee,t[2]=M-q,t[3]=0,t[4]=T-ee,t[5]=1-b-O,t[6]=D+F,t[7]=0,t[8]=M+q,t[9]=D-F,t[10]=1-b-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},o.fromRotation=function(t,e){var r=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=r,t[2]=0,t[3]=-r,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},o.fromScaling=P0,o.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return je[e]},o.getAABBPointSquareDist=function(t,e,r){let i=0;for(let d=0;d<2;++d){const h=r?r[d]:0;t[d]>h&&(i+=(t[d]-h)*(t[d]-h)),e[d]<h&&(i+=(h-e[d])*(h-e[d]))}return i},o.getAnchorAlignment=wf,o.getAnchorJustification=Sf,o.getBounds=function(t){let e=1/0,r=1/0,i=-1/0,d=-1/0;for(const h of t)e=Math.min(e,h.x),r=Math.min(r,h.y),i=Math.max(i,h.x),d=Math.max(d,h.y);return{min:new ve(e,r),max:new ve(i,d)}},o.getColumn=hi,o.getDefaultExportFromCjs=We,o.getGridMatrix=function(t,e,r,i){const d=e.getNorth(),h=e.getSouth(),p=e.getWest(),_=e.getEast(),x=1<<t.z,b=_-p,T=d-h,A=b/wa,M=-T/lc[r],D=[0,A,0,M,0,0,d,p,0];if(t.z>0){const O=180/i;M0(D,D,[O/b+1,0,0,0,O/T+1,0,-.5*O/A,.5*O/M,1])}return D[2]=x,D[5]=t.x,D[8]=t.y,D},o.getImage=ie,o.getJSON=function(t,e){return pn(er(t,{type:"json"}),e)},o.getLatitudinalLod=function(t){const e=yn-5;t=ut(t,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(tt(t))),3);return Math.round(r*(lc.length-1))},o.getMapSessionAPI=Gr,o.getPerformanceMeasurement=Po,o.getProjection=vg,o.getRTLTextPluginStatus=y,o.getReferrer=Vi,o.getTilePoint=function(t,{x:e,y:r},i=0){return new ve(((e-i)*t.scale-t.x)*Rt,(r*t.scale-t.y)*Rt)},o.getTileVec3=function(t,e,r=0){return $l(((e.x-r)*t.scale-t.x)*Rt,(e.y*t.scale-t.y)*Rt,Q0(e.z,e.y))},o.getVideo=function(t,e){const r=I.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let i=0;i<t.length;i++){const d=I.document.createElement("source");Mo(t[i])||(r.crossOrigin="Anonymous"),d.src=t[i],r.appendChild(d)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(t){const e=[0,0,0],r=to(new Float64Array(16));return xa(r,t.pixelMatrix,t.globeMatrix),Nr(e,e,r),new ve(e[0],e[1])},o.globeDenormalizeECEF=X1,o.globeECEFOrigin=function(t,e){const r=[0,0,0];return Nr(r,r,cc(xo(e.canonical))),Nr(r,r,t),r},o.globeMetersToEcef=Vu,o.globeNormalizeECEF=cc,o.globePixelsToTileUnits=function(t,e){return Rt/(512*Math.pow(2,t))*Zu(xo(e))},o.globePoleMatrixForTile=function(t,e,r){const i=to(new Float64Array(16)),d=(e/(1<<t)-.5)*Math.PI*2;return Uu(i,r.globeMatrix,d),Float32Array.from(i)},o.globeTileBounds=xo,o.globeTiltAtLngLat=X0,o.globeToMercatorTransition=Tl,o.globeUseCustomAntiAliasing=function(t,e,r){const i=Tl(r.zoom),d=t.style.map._antialias,h=!!e.extStandardDerivatives,p=e.extStandardDerivativesForceOff||t.terrain&&t.terrain.exaggeration()>0;return i===0&&!d&&!p&&h},o.identity=to,o.identity$1=F0,o.invert=F1,o.isFullscreen=function(){return!!I.document.fullscreenElement||!!I.document.webkitFullscreenElement},o.isLngLatBehindGlobe=Y1,o.isMapAuthenticated=function(t){return rn.has(t)},o.isMapboxURL=ge,o.isSafariWithAntialiasingBug=function(t){const e=t.navigator?t.navigator.userAgent:null;return!!Pn(t)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=_n,o.latLngToECEF=El,o.len=W2,o.length=rc,o.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},o.lngFromMercatorX=_i,o.loadVectorTile=Ug,o.makeRequest=pn,o.mapValue=function(t,e,r,i,d){return ut((t-e)/(r-e)*(d-i)+i,i,d)},o.mercatorScale=em,o.mercatorXfromLng=bo,o.mercatorYfromLat=$o,o.mercatorZfromAltitude=no,o.mul=q2,o.mul$1=H2,o.multiply=xa,o.multiply$1=M0,o.multiply$2=k0,o.nextPowerOfTwo=Vn,o.normalize=zn,o.normalize$1=K2,o.normalize$2=z0,o.number=tr,o.ortho=function(t,e,r,i,d,h,p){var _=1/(e-r),x=1/(i-d),b=1/(h-p);return t[0]=-2*_,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*x,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*b,t[11]=0,t[12]=(e+r)*_,t[13]=(d+i)*x,t[14]=(p+h)*b,t[15]=1,t},o.pbf=Fm,o.perspective=function(t,e,r,i,d){var h,p=1/Math.tan(e/2);return t[0]=p/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,d!=null&&d!==1/0?(t[10]=(d+i)*(h=1/(i-d)),t[14]=2*d*i*h):(t[10]=-1,t[14]=-2*i),t},o.pick=function(t,e){const r={};for(let i=0;i<e.length;i++){const d=e[i];d in t&&(r[d]=t[d])}return r},o.plugin=E,o.pointGeometry=ft,o.polesInViewport=function(t){const e=to(new Float64Array(16));xa(e,t.pixelMatrix,t.globeMatrix);const r=[0,Li,0],i=[0,Ri,0];return Nr(r,r,e),Nr(i,i,e),[r[0]>0&&r[0]<=t.width&&r[1]>0&&r[1]<=t.height&&!Y1(t,new pr(t.center.lat,90)),i[0]>0&&i[0]<=t.width&&i[1]>0&&i[1]<=t.height&&!Y1(t,new pr(t.center.lat,-90))]},o.polygonContainsPoint=Sa,o.polygonIntersectsBox=am,o.polygonIntersectsPolygon=nm,o.polygonizeBounds=function(t,e,r=0,i=!0){const d=new ve(r,r),h=t.sub(d),p=e.add(d),_=[h,new ve(p.x,h.y),p,new ve(h.x,p.y)];return i&&_.push(h.clone()),_},o.posAttributes=ac,o.postMapLoadEvent=Rr,o.postPerformanceEvent=Dr,o.postTurnstileEvent=Ft,o.potpack=xf,o.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},o.radToDeg=_e,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(t){return t({pluginStatus:u,pluginURL:n}),g.on("pluginStateChange",t),t},o.removeAuthState=function(t){rn.delete(t)},o.renderColorRamp=af,o.resample=tm,o.rotateX=N1,o.rotateX$1=N0,o.rotateY=Uu,o.rotateY$1=j0,o.rotateZ=function(t,e,r){var i=Math.sin(r),d=Math.cos(r),h=e[0],p=e[1],_=e[2],x=e[3],b=e[4],T=e[5],A=e[6],M=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=h*d+b*i,t[1]=p*d+T*i,t[2]=_*d+A*i,t[3]=x*d+M*i,t[4]=b*d-h*i,t[5]=T*d-p*i,t[6]=A*d-_*i,t[7]=M*d-x*i,t},o.rotateZ$1=function(t,e,r){r*=.5;var i=e[0],d=e[1],h=e[2],p=e[3],_=Math.sin(r),x=Math.cos(r);return t[0]=i*x+d*_,t[1]=d*x-i*_,t[2]=h*x+p*_,t[3]=p*x-h*_,t},o.scale=ba,o.scale$1=O0,o.scale$2=gi,o.scaleAndAdd=oc,o.set=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t},o.setCacheLimits=function(t,e){Io=t,ns=e},o.setColumn=function(t,e,r){t[4*e+0]=r[0],t[4*e+1]=r[1],t[4*e+2]=r[2],t[4*e+3]=r[3]},o.setRTLTextPlugin=function(t,e,r=!1){if(u===Xd||u===Yd||u===Jd)throw new Error("setRTLTextPlugin cannot be called multiple times.");n=Yn.resolveURL(t),u=Xd,$s=e,f(),r||w()},o.smoothstep=Br,o.spec=Te,o.squaredLength=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i},o.storeAuthState=function(t,e){e?rn.add(t):rn.delete(t)},o.sub=ro,o.subtract=U1,o.symbolSize=av,o.tileAABB=function(t,e,r,i,d,h,p,_,x){if(x.name==="globe")return e4(t,e,new nh(r,i,d));const b=Aa({z:r,x:i,y:d},x);return new Bn([(h+b.x/b.scale)*e,e*(b.y/b.scale),p],[(h+b.x2/b.scale)*e,e*(b.y2/b.scale),_])},o.tileCornersToBounds=Gu,o.tileTransform=Aa,o.transformMat3=function(t,e,r){var i=e[0],d=e[1],h=e[2];return t[0]=i*r[0]+d*r[3]+h*r[6],t[1]=i*r[1]+d*r[4]+h*r[7],t[2]=i*r[2]+d*r[5]+h*r[8],t},o.transformMat4=Nr,o.transformMat4$1=$a,o.transformQuat=D0,o.transitionTileAABBinECEF=q0,o.translate=tc,o.transpose=function(t,e){if(t===e){var r=e[1],i=e[2],d=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=d}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},o.triggerPluginCompletionEvent=l,o.uniqueId=en,o.updateGlobeVertexNormal=function(t,e,r,i,d){const h=5*e+2;t.float32[h+0]=r,t.float32[h+1]=i,t.float32[h+2]=d},o.validateCustomStyleLayer=function(t){const e=[],r=t.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),t.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),t.renderingMode&&t.renderingMode!=="2d"&&t.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},o.validateFilter=t=>ni(ma(t)),o.validateFog=t=>ni(Pu(t)),o.validateLayer=t=>ni(Cu(t)),o.validateLight=t=>ni(Mu(t)),o.validateSource=t=>ni(Iu(t)),o.validateStyle=Ru,o.validateTerrain=t=>ni(Zd(t)),o.values=bn,o.vectorTile=eh,o.version=N,o.warnOnce=yr,o.window=I,o.wrap=Qt}),S(["./shared"],function(o){function I(le){if(typeof le=="number"||typeof le=="boolean"||typeof le=="string"||le==null)return JSON.stringify(le);if(Array.isArray(le)){let G="[";for(const ie of le)G+=`${I(ie)},`;return`${G}]`}let j="{";for(const G of Object.keys(le).sort())j+=`${G}:${I(le[G])},`;return`${j}}`}function N(le){let j="";for(const G of o.refProperties)j+=`/${I(le[G])}`;return j}class Y{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,G){for(const ce of j)this._layerConfigs[ce.id]=ce,(this._layers[ce.id]=o.createStyleLayer(ce)).compileFilter(),this.keyCache[ce.id]&&delete this.keyCache[ce.id];for(const ce of G)delete this.keyCache[ce],delete this._layerConfigs[ce],delete this._layers[ce];this.familiesBySource={};const ie=function(ce,ge){const Ae={};for(let ye=0;ye<ce.length;ye++){const De=ge&&ge[ce[ye].id]||N(ce[ye]);ge&&(ge[ce[ye].id]=De);let at=Ae[De];at||(at=Ae[De]=[]),at.push(ce[ye])}const Se=[];for(const ye in Ae)Se.push(Ae[ye]);return Se}(o.values(this._layerConfigs),this.keyCache);for(const ce of ie){const ge=ce.map(ct=>this._layers[ct.id]),Ae=ge[0];if(Ae.visibility==="none")continue;const Se=Ae.source||"";let ye=this.familiesBySource[Se];ye||(ye=this.familiesBySource[Se]={});const De=Ae.sourceLayer||"_geojsonTileLayer";let at=ye[De];at||(at=ye[De]=[]),at.push(ge)}}}class U{loadTile(j,G){const{uid:ie,encoding:ce,rawImageData:ge,padding:Ae,buildQuadTree:Se}=j,ye=o.window.ImageBitmap&&ge instanceof o.window.ImageBitmap?this.getImageData(ge,Ae):ge;G(null,new o.DEMData(ie,ye,ce,Ae<1,Se))}getImageData(j,G){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const ie=this.offscreenCanvasContext.getImageData(-G,-G,j.width+2*G,j.height+2*G);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ie}}function oe(le,j){if(le.length!==0){ae(le[0],j);for(var G=1;G<le.length;G++)ae(le[G],!j)}}function ae(le,j){for(var G=0,ie=0,ce=0,ge=le.length,Ae=ge-1;ce<ge;Ae=ce++){var Se=(le[ce][0]-le[Ae][0])*(le[Ae][1]+le[ce][1]),ye=G+Se;ie+=Math.abs(G)>=Math.abs(Se)?G-ye+Se:Se-ye+G,G=ye}G+ie>=0!=!!j&&le.reverse()}var $e=o.getDefaultExportFromCjs(function le(j,G){var ie,ce=j&&j.type;if(ce==="FeatureCollection")for(ie=0;ie<j.features.length;ie++)le(j.features[ie],G);else if(ce==="GeometryCollection")for(ie=0;ie<j.geometries.length;ie++)le(j.geometries[ie],G);else if(ce==="Feature")le(j.geometry,G);else if(ce==="Polygon")oe(j.coordinates,G);else if(ce==="MultiPolygon")for(ie=0;ie<j.coordinates.length;ie++)oe(j.coordinates[ie],G);return j});const Ie=o.VectorTileFeature.prototype.toGeoJSON;var Be={exports:{}},xe=o.pointGeometry,Je=o.vectorTile.VectorTileFeature,We=ht;function ht(le,j){this.options=j||{},this.features=le,this.length=le.length}function Lt(le,j){this.id=typeof le.id=="number"?le.id:void 0,this.type=le.type,this.rawGeometry=le.type===1?[le.geometry]:le.geometry,this.properties=le.tags,this.extent=j||4096}ht.prototype.feature=function(le){return new Lt(this.features[le],this.options.extent)},Lt.prototype.loadGeometry=function(){var le=this.rawGeometry;this.geometry=[];for(var j=0;j<le.length;j++){for(var G=le[j],ie=[],ce=0;ce<G.length;ce++)ie.push(new xe(G[ce][0],G[ce][1]));this.geometry.push(ie)}return this.geometry},Lt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var le=this.geometry,j=1/0,G=-1/0,ie=1/0,ce=-1/0,ge=0;ge<le.length;ge++)for(var Ae=le[ge],Se=0;Se<Ae.length;Se++){var ye=Ae[Se];j=Math.min(j,ye.x),G=Math.max(G,ye.x),ie=Math.min(ie,ye.y),ce=Math.max(ce,ye.y)}return[j,ie,G,ce]},Lt.prototype.toGeoJSON=Je.prototype.toGeoJSON;var Ye=o.pbf,ft=We;function gt(le){var j=new Ye;return function(G,ie){for(var ce in G.layers)ie.writeMessage(3,ve,G.layers[ce])}(le,j),j.finish()}function ve(le,j){var G;j.writeVarintField(15,le.version||1),j.writeStringField(1,le.name||""),j.writeVarintField(5,le.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<le.length;G++)ie.feature=le.feature(G),j.writeMessage(2,Ke,ie);var ce=ie.keys;for(G=0;G<ce.length;G++)j.writeStringField(3,ce[G]);var ge=ie.values;for(G=0;G<ge.length;G++)j.writeMessage(4,It,ge[G])}function Ke(le,j){var G=le.feature;G.id!==void 0&&j.writeVarintField(1,G.id),j.writeMessage(2,Ct,le),j.writeVarintField(3,G.type),j.writeMessage(4,je,G)}function Ct(le,j){var G=le.feature,ie=le.keys,ce=le.values,ge=le.keycache,Ae=le.valuecache;for(var Se in G.properties){var ye=G.properties[Se],De=ge[Se];if(ye!==null){De===void 0&&(ie.push(Se),ge[Se]=De=ie.length-1),j.writeVarint(De);var at=typeof ye;at!=="string"&&at!=="boolean"&&at!=="number"&&(ye=JSON.stringify(ye));var ct=at+":"+ye,it=Ae[ct];it===void 0&&(ce.push(ye),Ae[ct]=it=ce.length-1),j.writeVarint(it)}}}function tt(le,j){return(j<<3)+(7&le)}function _e(le){return le<<1^le>>31}function je(le,j){for(var G=le.loadGeometry(),ie=le.type,ce=0,ge=0,Ae=G.length,Se=0;Se<Ae;Se++){var ye=G[Se],De=1;ie===1&&(De=ye.length),j.writeVarint(tt(1,De));for(var at=ie===3?ye.length-1:ye.length,ct=0;ct<at;ct++){ct===1&&ie!==1&&j.writeVarint(tt(2,at-1));var it=ye[ct].x-ce,zt=ye[ct].y-ge;j.writeVarint(_e(it)),j.writeVarint(_e(zt)),ce+=it,ge+=zt}ie===3&&j.writeVarint(tt(7,1))}}function It(le,j){var G=typeof le;G==="string"?j.writeStringField(1,le):G==="boolean"?j.writeBooleanField(7,le):G==="number"&&(le%1!=0?j.writeDoubleField(3,le):le<0?j.writeSVarintField(6,le):j.writeVarintField(5,le))}Be.exports=gt,Be.exports.fromVectorTileJs=gt,Be.exports.fromGeojsonVt=function(le,j){j=j||{};var G={};for(var ie in le)G[ie]=new ft(le[ie].features,j),G[ie].name=ie,G[ie].version=j.version,G[ie].extent=j.extent;return gt({layers:G})},Be.exports.GeoJSONWrapper=ft;var Tt=o.getDefaultExportFromCjs(Be.exports);const Wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:le=>le},ut=Math.fround||(Br=new Float32Array(1),le=>(Br[0]=+le,Br[0]));var Br;const Qt=3,Tr=5,bn=6;class er{constructor(j){this.options=Object.assign(Object.create(Wt),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:G,minZoom:ie,maxZoom:ce}=this.options;G&&console.time("total time");const ge=`prepare ${j.length} points`;G&&console.time(ge),this.points=j;const Ae=[];for(let ye=0;ye<j.length;ye++){const De=j[ye];if(!De.geometry)continue;const[at,ct]=De.geometry.coordinates,it=ut(Mn(at)),zt=ut(Vn(ct));Ae.push(it,zt,1/0,ye,-1,1),this.options.reduce&&Ae.push(0)}let Se=this.trees[ce+1]=this._createTree(Ae);G&&console.timeEnd(ge);for(let ye=ce;ye>=ie;ye--){const De=+Date.now();Se=this.trees[ye]=this._createTree(this._cluster(Se,ye)),G&&console.log("z%d: %d clusters in %dms",ye,Se.numItems,+Date.now()-De)}return G&&console.timeEnd("total time"),this}getClusters(j,G){let ie=((j[0]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,j[1]));let ge=j[2]===180?180:((j[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)ie=-180,ge=180;else if(ie>ge){const ct=this.getClusters([ie,ce,180,Ae],G),it=this.getClusters([-180,ce,ge,Ae],G);return ct.concat(it)}const Se=this.trees[this._limitZoom(G)],ye=Se.range(Mn(ie),Vn(Ae),Mn(ge),Vn(ce)),De=Se.data,at=[];for(const ct of ye){const it=this.stride*ct;at.push(De[it+Tr]>1?$n(De,it,this.clusterProps):this.points[De[it+Qt]])}return at}getChildren(j){const G=this._getOriginId(j),ie=this._getOriginZoom(j),ce="No cluster with the specified id.",ge=this.trees[ie];if(!ge)throw new Error(ce);const Ae=ge.data;if(G*this.stride>=Ae.length)throw new Error(ce);const Se=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),ye=ge.within(Ae[G*this.stride],Ae[G*this.stride+1],Se),De=[];for(const at of ye){const ct=at*this.stride;Ae[ct+4]===j&&De.push(Ae[ct+Tr]>1?$n(Ae,ct,this.clusterProps):this.points[Ae[ct+Qt]])}if(De.length===0)throw new Error(ce);return De}getLeaves(j,G,ie){const ce=[];return this._appendLeaves(ce,j,G=G||10,ie=ie||0,0),ce}getTile(j,G,ie){const ce=this.trees[this._limitZoom(j)],ge=Math.pow(2,j),{extent:Ae,radius:Se}=this.options,ye=Se/Ae,De=(ie-ye)/ge,at=(ie+1+ye)/ge,ct={features:[]};return this._addTileFeatures(ce.range((G-ye)/ge,De,(G+1+ye)/ge,at),ce.data,G,ie,ge,ct),G===0&&this._addTileFeatures(ce.range(1-ye/ge,De,1,at),ce.data,ge,ie,ge,ct),G===ge-1&&this._addTileFeatures(ce.range(0,De,ye/ge,at),ce.data,-1,ie,ge,ct),ct.features.length?ct:null}getClusterExpansionZoom(j){let G=this._getOriginZoom(j)-1;for(;G<=this.options.maxZoom;){const ie=this.getChildren(j);if(G++,ie.length!==1)break;j=ie[0].properties.cluster_id}return G}_appendLeaves(j,G,ie,ce,ge){const Ae=this.getChildren(G);for(const Se of Ae){const ye=Se.properties;if(ye&&ye.cluster?ge+ye.point_count<=ce?ge+=ye.point_count:ge=this._appendLeaves(j,ye.cluster_id,ie,ce,ge):ge<ce?ge++:j.push(Se),j.length===ie)break}return ge}_createTree(j){const G=new o.KDBush(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<j.length;ie+=this.stride)G.add(j[ie],j[ie+1]);return G.finish(),G.data=j,G}_addTileFeatures(j,G,ie,ce,ge,Ae){for(const Se of j){const ye=Se*this.stride,De=G[ye+Tr]>1;let at,ct,it;if(De)at=en(G,ye,this.clusterProps),ct=G[ye],it=G[ye+1];else{const Bt=this.points[G[ye+Qt]];at=Bt.properties;const[Zt,Ft]=Bt.geometry.coordinates;ct=Mn(Zt),it=Vn(Ft)}const zt={type:1,geometry:[[Math.round(this.options.extent*(ct*ge-ie)),Math.round(this.options.extent*(it*ge-ce))]],tags:at};let Kt;Kt=De||this.options.generateId?G[ye+Qt]:this.points[G[ye+Qt]].id,Kt!==void 0&&(zt.id=Kt),Ae.features.push(zt)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,G){const{radius:ie,extent:ce,reduce:ge,minPoints:Ae}=this.options,Se=ie/(ce*Math.pow(2,G)),ye=j.data,De=[],at=this.stride;for(let ct=0;ct<ye.length;ct+=at){if(ye[ct+2]<=G)continue;ye[ct+2]=G;const it=ye[ct],zt=ye[ct+1],Kt=j.within(ye[ct],ye[ct+1],Se),Bt=ye[ct+Tr];let Zt=Bt;for(const Ft of Kt){const Sr=Ft*at;ye[Sr+2]>G&&(Zt+=ye[Sr+Tr])}if(Zt>Bt&&Zt>=Ae){let Ft,Sr=it*Bt,Rr=zt*Bt,tn=-1;const Dr=((ct/at|0)<<5)+(G+1)+this.points.length;for(const Rn of Kt){const Gr=Rn*at;if(ye[Gr+2]<=G)continue;ye[Gr+2]=G;const rn=ye[Gr+Tr];Sr+=ye[Gr]*rn,Rr+=ye[Gr+1]*rn,ye[Gr+4]=Dr,ge&&(Ft||(Ft=this._map(ye,ct,!0),tn=this.clusterProps.length,this.clusterProps.push(Ft)),ge(Ft,this._map(ye,Gr)))}ye[ct+4]=Dr,De.push(Sr/Zt,Rr/Zt,1/0,Dr,-1,Zt),ge&&De.push(tn)}else{for(let Ft=0;Ft<at;Ft++)De.push(ye[ct+Ft]);if(Zt>1)for(const Ft of Kt){const Sr=Ft*at;if(!(ye[Sr+2]<=G)){ye[Sr+2]=G;for(let Rr=0;Rr<at;Rr++)De.push(ye[Sr+Rr])}}}}return De}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,G,ie){if(j[G+Tr]>1){const Ae=this.clusterProps[j[G+bn]];return ie?Object.assign({},Ae):Ae}const ce=this.points[j[G+Qt]].properties,ge=this.options.map(ce);return ie&&ge===ce?Object.assign({},ge):ge}}function $n(le,j,G){return{type:"Feature",id:le[j+Qt],properties:en(le,j,G),geometry:{type:"Point",coordinates:[(ie=le[j],360*(ie-.5)),ho(le[j+1])]}};var ie}function en(le,j,G){const ie=le[j+Tr],ce=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,ge=le[j+bn],Ae=ge===-1?{}:Object.assign({},G[ge]);return Object.assign(Ae,{cluster:!0,cluster_id:le[j+Qt],point_count:ie,point_count_abbreviated:ce})}function Mn(le){return le/360+.5}function Vn(le){const j=Math.sin(le*Math.PI/180),G=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return G<0?0:G>1?1:G}function ho(le){const j=(180-360*le)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function ci(le,j,G,ie){for(var ce,ge=ie,Ae=G-j>>1,Se=G-j,ye=le[j],De=le[j+1],at=le[G],ct=le[G+1],it=j+3;it<G;it+=3){var zt=wi(le[it],le[it+1],ye,De,at,ct);if(zt>ge)ce=it,ge=zt;else if(zt===ge){var Kt=Math.abs(it-Ae);Kt<Se&&(ce=it,Se=Kt)}}ge>ie&&(ce-j>3&&ci(le,j,ce,ie),le[ce+2]=ge,G-ce>3&&ci(le,ce,G,ie))}function wi(le,j,G,ie,ce,ge){var Ae=ce-G,Se=ge-ie;if(Ae!==0||Se!==0){var ye=((le-G)*Ae+(j-ie)*Se)/(Ae*Ae+Se*Se);ye>1?(G=ce,ie=ge):ye>0&&(G+=Ae*ye,ie+=Se*ye)}return(Ae=le-G)*Ae+(Se=j-ie)*Se}function Vt(le,j,G,ie){var ce={id:le===void 0?null:le,type:j,geometry:G,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var Ae=ge.geometry,Se=ge.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")ui(ge,Ae);else if(Se==="Polygon"||Se==="MultiLineString")for(var ye=0;ye<Ae.length;ye++)ui(ge,Ae[ye]);else if(Se==="MultiPolygon")for(ye=0;ye<Ae.length;ye++)for(var De=0;De<Ae[ye].length;De++)ui(ge,Ae[ye][De])}(ce),ce}function ui(le,j){for(var G=0;G<j.length;G+=3)le.minX=Math.min(le.minX,j[G]),le.minY=Math.min(le.minY,j[G+1]),le.maxX=Math.max(le.maxX,j[G]),le.maxY=Math.max(le.maxY,j[G+1])}function dn(le,j,G,ie){if(j.geometry){var ce=j.geometry.coordinates,ge=j.geometry.type,Ae=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),Se=[],ye=j.id;if(G.promoteId?ye=j.properties[G.promoteId]:G.generateId&&(ye=ie||0),ge==="Point")Ei(ce,Se);else if(ge==="MultiPoint")for(var De=0;De<ce.length;De++)Ei(ce[De],Se);else if(ge==="LineString")yr(ce,Se,Ae,!1);else if(ge==="MultiLineString"){if(G.lineMetrics){for(De=0;De<ce.length;De++)yr(ce[De],Se=[],Ae,!1),le.push(Vt(ye,"LineString",Se,j.properties));return}fn(ce,Se,Ae,!1)}else if(ge==="Polygon")fn(ce,Se,Ae,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(De=0;De<j.geometry.geometries.length;De++)dn(le,{id:ye,geometry:j.geometry.geometries[De],properties:j.properties},G,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(De=0;De<ce.length;De++){var at=[];fn(ce[De],at,Ae,!0),Se.push(at)}}le.push(Vt(ye,ge,Se,j.properties))}}function Ei(le,j){j.push(Gn(le[0])),j.push(Gt(le[1])),j.push(0)}function yr(le,j,G,ie){for(var ce,ge,Ae=0,Se=0;Se<le.length;Se++){var ye=Gn(le[Se][0]),De=Gt(le[Se][1]);j.push(ye),j.push(De),j.push(0),Se>0&&(Ae+=ie?(ce*De-ye*ge)/2:Math.sqrt(Math.pow(ye-ce,2)+Math.pow(De-ge,2))),ce=ye,ge=De}var at=j.length-3;j[2]=1,ci(j,0,at,G),j[at+2]=1,j.size=Math.abs(Ae),j.start=0,j.end=j.size}function fn(le,j,G,ie){for(var ce=0;ce<le.length;ce++){var ge=[];yr(le[ce],ge,G,ie),j.push(ge)}}function Gn(le){return le/360+.5}function Gt(le){var j=Math.sin(le*Math.PI/180),G=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return G<0?0:G>1?1:G}function vr(le,j,G,ie,ce,ge,Ae,Se){if(ie/=j,ge>=(G/=j)&&Ae<ie)return le;if(Ae<G||ge>=ie)return null;for(var ye=[],De=0;De<le.length;De++){var at=le[De],ct=at.geometry,it=at.type,zt=ce===0?at.minX:at.minY,Kt=ce===0?at.maxX:at.maxY;if(zt>=G&&Kt<ie)ye.push(at);else if(!(Kt<G||zt>=ie)){var Bt=[];if(it==="Point"||it==="MultiPoint")Vr(ct,Bt,G,ie,ce);else if(it==="LineString")Pn(ct,Bt,G,ie,ce,!1,Se.lineMetrics);else if(it==="MultiLineString")hi(ct,Bt,G,ie,ce,!1);else if(it==="Polygon")hi(ct,Bt,G,ie,ce,!0);else if(it==="MultiPolygon")for(var Zt=0;Zt<ct.length;Zt++){var Ft=[];hi(ct[Zt],Ft,G,ie,ce,!0),Ft.length&&Bt.push(Ft)}if(Bt.length){if(Se.lineMetrics&&it==="LineString"){for(Zt=0;Zt<Bt.length;Zt++)ye.push(Vt(at.id,it,Bt[Zt],at.tags));continue}it!=="LineString"&&it!=="MultiLineString"||(Bt.length===1?(it="LineString",Bt=Bt[0]):it="MultiLineString"),it!=="Point"&&it!=="MultiPoint"||(it=Bt.length===3?"Point":"MultiPoint"),ye.push(Vt(at.id,it,Bt,at.tags))}}}return ye.length?ye:null}function Vr(le,j,G,ie,ce){for(var ge=0;ge<le.length;ge+=3){var Ae=le[ge+ce];Ae>=G&&Ae<=ie&&(j.push(le[ge]),j.push(le[ge+1]),j.push(le[ge+2]))}}function Pn(le,j,G,ie,ce,ge,Ae){for(var Se,ye,De=Kn(le),at=ce===0?Io:ns,ct=le.start,it=0;it<le.length-3;it+=3){var zt=le[it],Kt=le[it+1],Bt=le[it+2],Zt=le[it+3],Ft=le[it+4],Sr=ce===0?zt:Kt,Rr=ce===0?Zt:Ft,tn=!1;Ae&&(Se=Math.sqrt(Math.pow(zt-Zt,2)+Math.pow(Kt-Ft,2))),Sr<G?Rr>G&&(ye=at(De,zt,Kt,Zt,Ft,G),Ae&&(De.start=ct+Se*ye)):Sr>ie?Rr<ie&&(ye=at(De,zt,Kt,Zt,Ft,ie),Ae&&(De.start=ct+Se*ye)):ji(De,zt,Kt,Bt),Rr<G&&Sr>=G&&(ye=at(De,zt,Kt,Zt,Ft,G),tn=!0),Rr>ie&&Sr<=ie&&(ye=at(De,zt,Kt,Zt,Ft,ie),tn=!0),!ge&&tn&&(Ae&&(De.end=ct+Se*ye),j.push(De),De=Kn(le)),Ae&&(ct+=Se)}var Dr=le.length-3;zt=le[Dr],Kt=le[Dr+1],Bt=le[Dr+2],(Sr=ce===0?zt:Kt)>=G&&Sr<=ie&&ji(De,zt,Kt,Bt),Dr=De.length-3,ge&&Dr>=3&&(De[Dr]!==De[0]||De[Dr+1]!==De[1])&&ji(De,De[0],De[1],De[2]),De.length&&j.push(De)}function Kn(le){var j=[];return j.size=le.size,j.start=le.start,j.end=le.end,j}function hi(le,j,G,ie,ce,ge){for(var Ae=0;Ae<le.length;Ae++)Pn(le[Ae],j,G,ie,ce,ge,!1)}function ji(le,j,G,ie){le.push(j),le.push(G),le.push(ie)}function Io(le,j,G,ie,ce,ge){var Ae=(ge-j)/(ie-j);return le.push(ge),le.push(G+(ce-G)*Ae),le.push(1),Ae}function ns(le,j,G,ie,ce,ge){var Ae=(ge-G)/(ce-G);return le.push(j+(ie-j)*Ae),le.push(ge),le.push(1),Ae}function Ln(le,j){for(var G=[],ie=0;ie<le.length;ie++){var ce,ge=le[ie],Ae=ge.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ce=Ti(ge.geometry,j);else if(Ae==="MultiLineString"||Ae==="Polygon"){ce=[];for(var Se=0;Se<ge.geometry.length;Se++)ce.push(Ti(ge.geometry[Se],j))}else if(Ae==="MultiPolygon")for(ce=[],Se=0;Se<ge.geometry.length;Se++){for(var ye=[],De=0;De<ge.geometry[Se].length;De++)ye.push(Ti(ge.geometry[Se][De],j));ce.push(ye)}G.push(Vt(ge.id,Ae,ce,ge.tags))}return G}function Ti(le,j){var G=[];G.size=le.size,le.start!==void 0&&(G.start=le.start,G.end=le.end);for(var ie=0;ie<le.length;ie+=3)G.push(le[ie]+j,le[ie+1],le[ie+2]);return G}function fo(le,j){if(le.transformed)return le;var G,ie,ce,ge=1<<le.z,Ae=le.x,Se=le.y;for(G=0;G<le.features.length;G++){var ye=le.features[G],De=ye.geometry,at=ye.type;if(ye.geometry=[],at===1)for(ie=0;ie<De.length;ie+=2)ye.geometry.push(Xn(De[ie],De[ie+1],j,ge,Ae,Se));else for(ie=0;ie<De.length;ie++){var ct=[];for(ce=0;ce<De[ie].length;ce+=2)ct.push(Xn(De[ie][ce],De[ie][ce+1],j,ge,Ae,Se));ye.geometry.push(ct)}}return le.transformed=!0,le}function Xn(le,j,G,ie,ce,ge){return[Math.round(G*(le*ie-ce)),Math.round(G*(j*ie-ge))]}function Ui(le,j,G,ie,ce){for(var ge=j===ce.maxZoom?0:ce.tolerance/((1<<j)*ce.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:ie,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Se=0;Se<le.length;Se++){Ae.numFeatures++,fi(Ae,le[Se],ge,ce);var ye=le[Se].minX,De=le[Se].minY,at=le[Se].maxX,ct=le[Se].maxY;ye<Ae.minX&&(Ae.minX=ye),De<Ae.minY&&(Ae.minY=De),at>Ae.maxX&&(Ae.maxX=at),ct>Ae.maxY&&(Ae.maxY=ct)}return Ae}function fi(le,j,G,ie){var ce=j.geometry,ge=j.type,Ae=[];if(ge==="Point"||ge==="MultiPoint")for(var Se=0;Se<ce.length;Se+=3)Ae.push(ce[Se]),Ae.push(ce[Se+1]),le.numPoints++,le.numSimplified++;else if(ge==="LineString")wn(Ae,ce,le,G,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(Se=0;Se<ce.length;Se++)wn(Ae,ce[Se],le,G,ge==="Polygon",Se===0);else if(ge==="MultiPolygon")for(var ye=0;ye<ce.length;ye++){var De=ce[ye];for(Se=0;Se<De.length;Se++)wn(Ae,De[Se],le,G,!0,Se===0)}if(Ae.length){var at=j.tags||null;if(ge==="LineString"&&ie.lineMetrics){for(var ct in at={},j.tags)at[ct]=j.tags[ct];at.mapbox_clip_start=ce.start/ce.size,at.mapbox_clip_end=ce.end/ce.size}var it={geometry:Ae,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:at};j.id!==null&&(it.id=j.id),le.features.push(it)}}function wn(le,j,G,ie,ce,ge){var Ae=ie*ie;if(ie>0&&j.size<(ce?Ae:ie))G.numPoints+=j.length/3;else{for(var Se=[],ye=0;ye<j.length;ye+=3)(ie===0||j[ye+2]>Ae)&&(G.numSimplified++,Se.push(j[ye]),Se.push(j[ye+1])),G.numPoints++;ce&&function(De,at){for(var ct=0,it=0,zt=De.length,Kt=zt-2;it<zt;Kt=it,it+=2)ct+=(De[it]-De[Kt])*(De[it+1]+De[Kt+1]);if(ct>0===at)for(it=0,zt=De.length;it<zt/2;it+=2){var Bt=De[it],Zt=De[it+1];De[it]=De[zt-2-it],De[it+1]=De[zt-1-it],De[zt-2-it]=Bt,De[zt-1-it]=Zt}}(Se,ge),le.push(Se)}}function En(le,j){var G=(j=this.options=function(ce,ge){for(var Ae in ge)ce[Ae]=ge[Ae];return ce}(Object.create(this.options),j)).debug;if(G&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(ce,ge){var Ae=[];if(ce.type==="FeatureCollection")for(var Se=0;Se<ce.features.length;Se++)dn(Ae,ce.features[Se],ge,Se);else dn(Ae,ce.type==="Feature"?ce:{geometry:ce},ge);return Ae}(le,j);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(ce,ge){var Ae=ge.buffer/ge.extent,Se=ce,ye=vr(ce,1,-1-Ae,Ae,0,-1,2,ge),De=vr(ce,1,1-Ae,2+Ae,0,-1,2,ge);return(ye||De)&&(Se=vr(ce,1,-Ae,1+Ae,0,-1,2,ge)||[],ye&&(Se=Ln(ye,1).concat(Se)),De&&(Se=Se.concat(Ln(De,-1)))),Se}(ie,j),ie.length&&this.splitTile(ie,0,0,0),G&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Vi(le,j,G){return 32*((1<<le)*G+j)+le}function pn(le,j){const G=le.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const ie=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!ie)return j(null,null);const ce=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(Se){this._feature=Se,this.extent=o.EXTENT,this.type=Se.type,this.properties=Se.tags,"id"in Se&&!isNaN(Se.id)&&(this.id=parseInt(Se.id,10))}loadGeometry(){if(this._feature.type===1){const Se=[];for(const ye of this._feature.geometry)Se.push([new o.Point(ye[0],ye[1])]);return Se}{const Se=[];for(const ye of this._feature.geometry){const De=[];for(const at of ye)De.push(new o.Point(at[0],at[1]));Se.push(De)}return Se}}toGeoJSON(Se,ye,De){return Ie.call(this,Se,ye,De)}}(this._features[Ae])}}(ie.features);let ge=Tt(ce);ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),j(null,{vectorTile:ce,rawData:ge.buffer})}En.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},En.prototype.splitTile=function(le,j,G,ie,ce,ge,Ae){for(var Se=[le,j,G,ie],ye=this.options,De=ye.debug;Se.length;){ie=Se.pop(),G=Se.pop(),j=Se.pop(),le=Se.pop();var at=1<<j,ct=Vi(j,G,ie),it=this.tiles[ct];if(!it&&(De>1&&console.time("creation"),it=this.tiles[ct]=Ui(le,j,G,ie,ye),this.tileCoords.push({z:j,x:G,y:ie}),De)){De>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,G,ie,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));var zt="z"+j;this.stats[zt]=(this.stats[zt]||0)+1,this.total++}if(it.source=le,ce){if(j===ye.maxZoom||j===ce)continue;var Kt=1<<ce-j;if(G!==Math.floor(ge/Kt)||ie!==Math.floor(Ae/Kt))continue}else if(j===ye.indexMaxZoom||it.numPoints<=ye.indexMaxPoints)continue;if(it.source=null,le.length!==0){De>1&&console.time("clipping");var Bt,Zt,Ft,Sr,Rr,tn,Dr=.5*ye.buffer/ye.extent,Rn=.5-Dr,Gr=.5+Dr,rn=1+Dr;Bt=Zt=Ft=Sr=null,Rr=vr(le,at,G-Dr,G+Gr,0,it.minX,it.maxX,ye),tn=vr(le,at,G+Rn,G+rn,0,it.minX,it.maxX,ye),le=null,Rr&&(Bt=vr(Rr,at,ie-Dr,ie+Gr,1,it.minY,it.maxY,ye),Zt=vr(Rr,at,ie+Rn,ie+rn,1,it.minY,it.maxY,ye),Rr=null),tn&&(Ft=vr(tn,at,ie-Dr,ie+Gr,1,it.minY,it.maxY,ye),Sr=vr(tn,at,ie+Rn,ie+rn,1,it.minY,it.maxY,ye),tn=null),De>1&&console.timeEnd("clipping"),Se.push(Bt||[],j+1,2*G,2*ie),Se.push(Zt||[],j+1,2*G,2*ie+1),Se.push(Ft||[],j+1,2*G+1,2*ie),Se.push(Sr||[],j+1,2*G+1,2*ie+1)}}},En.prototype.getTile=function(le,j,G){var ie=this.options,ce=ie.extent,ge=ie.debug;if(le<0||le>24)return null;var Ae=1<<le,Se=Vi(le,j=(j%Ae+Ae)%Ae,G);if(this.tiles[Se])return fo(this.tiles[Se],ce);ge>1&&console.log("drilling down to z%d-%d-%d",le,j,G);for(var ye,De=le,at=j,ct=G;!ye&&De>0;)De--,at=Math.floor(at/2),ct=Math.floor(ct/2),ye=this.tiles[Vi(De,at,ct)];return ye&&ye.source?(ge>1&&console.log("found parent tile z%d-%d-%d",De,at,ct),ge>1&&console.time("drilling down"),this.splitTile(ye.source,De,at,ct,le,j,G),ge>1&&console.timeEnd("drilling down"),this.tiles[Se]?fo(this.tiles[Se],ce):null):null};class Si extends o.VectorTileWorkerSource{constructor(j,G,ie,ce,ge){super(j,G,ie,ce,pn),ge&&(this.loadGeoJSON=ge)}loadData(j,G){const ie=j&&j.request,ce=ie&&ie.collectResourceTiming;this.loadGeoJSON(j,(ge,Ae)=>{if(ge||!Ae)return G(ge);if(typeof Ae!="object")return G(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{$e(Ae,!0);try{if(j.filter){const ye=o.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(at=>`${at.key}: ${at.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(at=>ye.value.evaluate({zoom:0},at))}}this._geoJSONIndex=j.cluster?new er(function({superclusterOptions:ye,clusterProperties:De}){if(!De||!ye)return ye;const at={},ct={},it={accumulated:null,zoom:0},zt={properties:null},Kt=Object.keys(De);for(const Bt of Kt){const[Zt,Ft]=De[Bt],Sr=o.createExpression(Ft),Rr=o.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",Bt]]:Zt);at[Bt]=Sr.value,ct[Bt]=Rr.value}return ye.map=Bt=>{zt.properties=Bt;const Zt={};for(const Ft of Kt)Zt[Ft]=at[Ft].evaluate(it,zt);return Zt},ye.reduce=(Bt,Zt)=>{zt.properties=Zt;for(const Ft of Kt)it.accumulated=Bt[Ft],Bt[Ft]=ct[Ft].evaluate(it,zt)},ye}(j)).load(Ae.features):function(ye,De){return new En(ye,De)}(Ae,j.geojsonVtOptions)}catch(ye){return G(ye)}this.loaded={};const Se={};if(ce){const ye=o.getPerformanceMeasurement(ie);ye&&(Se.resourceTiming={},Se.resourceTiming[j.source]=JSON.parse(JSON.stringify(ye)))}G(null,Se)}})}reloadTile(j,G){const ie=this.loaded;return ie&&ie[j.uid]?super.reloadTile(j,G):this.loadTile(j,G)}loadGeoJSON(j,G){if(j.request)o.getJSON(j.request,G);else{if(typeof j.data!="string")return G(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return G(null,JSON.parse(j.data))}catch{return G(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(ie){G(ie)}}getClusterChildren(j,G){try{G(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(ie){G(ie)}}getClusterLeaves(j,G){try{G(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(ie){G(ie)}}}class Mo{constructor(j){this.self=j,this.actor=new o.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Si},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,ie)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=ie},this.self.registerRTLTextPlugin=G=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=G.applyArabicShaping,o.plugin.processBidirectionalText=G.processBidirectionalText,o.plugin.processStyledBidirectionalText=G.processStyledBidirectionalText}}clearCaches(j,G,ie){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],ie()}checkIfReady(j,G,ie){ie()}setReferrer(j,G){this.referrer=G}spriteLoaded(j,G){this.isSpriteLoaded[j]=G;for(const ie in this.workerSources[j]){const ce=this.workerSources[j][ie];for(const ge in ce)ce[ge]instanceof o.VectorTileWorkerSource&&(ce[ge].isSpriteLoaded=G,ce[ge].fire(new o.Event("isSpriteLoaded")))}}setImages(j,G,ie){this.availableImages[j]=G;for(const ce in this.workerSources[j]){const ge=this.workerSources[j][ce];for(const Ae in ge)ge[Ae].availableImages=G}ie()}enableTerrain(j,G,ie){this.terrain=G,ie()}setProjection(j,G){this.projections[j]=o.getProjection(G)}setLayers(j,G,ie){this.getLayerIndex(j).replace(G),ie()}updateLayers(j,G,ie){this.getLayerIndex(j).update(G.layers,G.removedIds),ie()}loadTile(j,G,ie){const ce=this.enableTerrain?o.extend({enableTerrain:this.terrain},G):G;ce.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,G.type,G.source).loadTile(ce,ie)}loadDEMTile(j,G,ie){const ce=this.enableTerrain?o.extend({buildQuadTree:this.terrain},G):G;this.getDEMWorkerSource(j,G.source).loadTile(ce,ie)}reloadTile(j,G,ie){const ce=this.enableTerrain?o.extend({enableTerrain:this.terrain},G):G;ce.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,G.type,G.source).reloadTile(ce,ie)}abortTile(j,G,ie){this.getWorkerSource(j,G.type,G.source).abortTile(G,ie)}removeTile(j,G,ie){this.getWorkerSource(j,G.type,G.source).removeTile(G,ie)}removeSource(j,G,ie){if(!this.workerSources[j]||!this.workerSources[j][G.type]||!this.workerSources[j][G.type][G.source])return;const ce=this.workerSources[j][G.type][G.source];delete this.workerSources[j][G.type][G.source],ce.removeSource!==void 0?ce.removeSource(G,ie):ie()}loadWorkerSource(j,G,ie){try{this.self.importScripts(G.url),ie()}catch(ce){ie(ce.toString())}}syncRTLPluginState(j,G,ie){try{o.plugin.setState(G);const ce=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&ce!=null){this.self.importScripts(ce);const ge=o.plugin.isParsed();ie(ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ce}`),ge)}}catch(ce){ie(ce.toString())}}getAvailableImages(j){let G=this.availableImages[j];return G||(G=[]),G}getLayerIndex(j){let G=this.layerIndexes[j];return G||(G=this.layerIndexes[j]=new Y),G}getWorkerSource(j,G,ie){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][G]||(this.workerSources[j][G]={}),!this.workerSources[j][G][ie]){const ce={send:(ge,Ae,Se,ye,De,at)=>{this.actor.send(ge,Ae,Se,j,De,at)},scheduler:this.actor.scheduler};this.workerSources[j][G][ie]=new this.workerSourceTypes[G](ce,this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])}return this.workerSources[j][G][ie]}getDEMWorkerSource(j,G){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][G]||(this.demWorkerSources[j][G]=new U),this.demWorkerSources[j][G]}enforceCacheSizeLimit(j,G){o.enforceCacheSizeLimit(G)}getWorkerPerformanceMetrics(j,G,ie){ie(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Mo(self)),Mo}),S(["./shared"],function(o){function I(u,n){if(Array.isArray(u)){if(!Array.isArray(n)||u.length!==n.length)return!1;for(let l=0;l<u.length;l++)if(!I(u[l],n[l]))return!1;return!0}if(typeof u=="object"&&u!==null&&n!==null){if(typeof n!="object"||Object.keys(u).length!==Object.keys(n).length)return!1;for(const l in u)if(!I(u[l],n[l]))return!1;return!0}return u===n}var N=Y;function Y(u){return!function(n){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,g,y=new Blob([""],{type:"text/javascript"}),w=URL.createObjectURL(y);try{g=new Worker(w),f=!0}catch{f=!1}return g&&g.terminate(),URL.revokeObjectURL(w),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var g=f.getContext("2d");if(!g)return!1;var y=g.getImageData(0,0,1,1);return y&&y.width===f.width}()?(U[l=n&&n.failIfMajorPerformanceCaveat]===void 0&&(U[l]=function(f){var g,y=function(w){var E=document.createElement("canvas"),C=Object.create(Y.webGLContextAttributes);return C.failIfMajorPerformanceCaveat=w,E.getContext("webgl",C)||E.getContext("experimental-webgl",C)}(f);if(!y)return!1;try{g=y.createShader(y.VERTEX_SHADER)}catch{return!1}return!(!g||y.isContextLost())&&(y.shaderSource(g,"void main() {}"),y.compileShader(g),y.getShaderParameter(g,y.COMPILE_STATUS)===!0)}(l)),U[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(u)}var U={};function oe(u,n,l){const f=o.window.document.createElement(u);return n!==void 0&&(f.className=n),l&&l.appendChild(f),f}function ae(u,n,l){const f=o.window.document.createElementNS("http://www.w3.org/2000/svg",u);for(const g of Object.keys(n))f.setAttributeNS(null,g,n[g]);return l&&l.appendChild(f),f}Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const $e=o.window.document&&o.window.document.documentElement.style,Ie=$e&&$e.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Be;function xe(){$e&&Ie&&(Be=$e[Ie],$e[Ie]="none")}function Je(){$e&&Ie&&($e[Ie]=Be)}function We(u){u.preventDefault(),u.stopPropagation(),o.window.removeEventListener("click",We,!0)}function ht(){o.window.addEventListener("click",We,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",We,!0)},0)}function Lt(u,n){const l=u.getBoundingClientRect();return gt(u,l,n)}function Ye(u,n){const l=u.getBoundingClientRect(),f=[];for(let g=0;g<n.length;g++)f.push(gt(u,l,n[g]));return f}function ft(u){return o.window.InstallTrigger!==void 0&&u.button===2&&u.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:u.button}function gt(u,n,l){const f=u.offsetWidth===n.width?1:u.offsetWidth/n.width;return new o.Point((l.clientX-n.left)*f,(l.clientY-n.top)*f)}function ve(u,n){var l=n[0],f=n[1],g=n[2],y=n[3],w=l*y-g*f;return w?(u[0]=y*(w=1/w),u[1]=-f*w,u[2]=-g*w,u[3]=l*w,u):null}function Ke(u){const{userImage:n}=u;return!!(n&&n.render&&n.render())&&(u.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ct extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,callback:f}of this.requestors)this._notify(l,f);this.requestors=[]}}hasImage(n){return!!this.getImage(n)}getImage(n){return this.images[n]}addImage(n,l){this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let f=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${n}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${n}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new o.ErrorEvent(new Error(`Image "${n}" has invalid "content" value`))),f=!1),f}_validateStretch(n,l){if(!n)return!0;let f=0;for(const g of n){if(g[0]<f||g[1]<g[0]||l<g[1])return!1;f=g[1]}return!0}_validateContent(n,l){return!(n&&(n.length!==4||n[0]<0||l.data.width<n[0]||n[1]<0||l.data.height<n[1]||n[2]<0||l.data.width<n[2]||n[3]<0||l.data.height<n[3]||n[2]<n[0]||n[3]<n[1]))}updateImage(n,l){l.version=this.images[n].version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n,l){let f=!0;if(!this.isLoaded())for(const g of n)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(n,l):this.requestors.push({ids:n,callback:l})}_notify(n,l){const f={};for(const g of n){this.images[g]||this.fire(new o.Event("styleimagemissing",{id:g}));const y=this.images[g];y?f[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.warnOnce(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,f)}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],f=this.getImage(n);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},y=new o.ImagePosition(g,f);this.patterns[n]={bin:g,position:y}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(n,this.atlasImage,l.RGBA),this.atlasTexture&&this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const y in this.patterns)n.push(this.patterns[y].bin);const{w:l,h:f}=o.potpack(n),g=this.atlasImage;g.resize({width:l||1,height:f||1});for(const y in this.patterns){const{bin:w}=this.patterns[y],E=w.x+1,C=w.y+1,R=this.images[y].data,L=R.width,z=R.height;o.RGBAImage.copy(R,g,{x:0,y:0},{x:E,y:C},{width:L,height:z}),o.RGBAImage.copy(R,g,{x:0,y:z-1},{x:E,y:C-1},{width:L,height:1}),o.RGBAImage.copy(R,g,{x:0,y:0},{x:E,y:C+z},{width:L,height:1}),o.RGBAImage.copy(R,g,{x:L-1,y:0},{x:E-1,y:C},{width:1,height:z}),o.RGBAImage.copy(R,g,{x:0,y:0},{x:E+L,y:C},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.images[l];Ke(f)&&this.updateImage(l,f)}}}const tt=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(u,n){return function([l,f,g]){const y=o.degToRad(f+90),w=o.degToRad(g);return{x:l*Math.cos(y)*Math.sin(w),y:l*Math.sin(y)*Math.sin(w),z:l*Math.cos(w),azimuthal:f,polar:g}}(u.expression.evaluate(n))}interpolate(u,n,l){return{x:o.number(u.x,n.x,l),y:o.number(u.y,n.y,l),z:o.number(u.z,n.z,l),azimuthal:o.number(u.azimuthal,n.azimuthal,l),polar:o.number(u.polar,n.polar,l)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)});class _e extends o.Evented{constructor(n){super(),this._transitionable=new o.Transitionable(tt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(o.validateLight,n,l))for(const f in n){const g=n[f];o.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f){return(!f||f.validate!==!1)&&o.emitValidationErrors(this,n.call(o.validateStyle,o.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const je=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)});let It=class extends o.Evented{constructor(u,n){super(),this._transitionable=new o.Transitionable(je),this.set(u),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(u){for(const n in u){const l=u[n];o.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),l):this._transitionable.setValue(n,l)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}};function Tt(u,n,l,f){const g=o.smoothstep(45,65,l),[y,w]=Wt(u,f),E=o.length(n);let C=1-Math.min(1,Math.exp((E-y)/(w-y)*-6));return C*=C*C,C=Math.min(1,1.00747*C),C*g*u.alpha}function Wt(u,n){const l=.5/Math.tan(.5*n);return[u.range[0]+l,u.range[1]+l]}const ut=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])});class Br extends o.Evented{constructor(n,l){super(),this._transitionable=new o.Transitionable(ut),this.set(n),this._transitioning=this._transitionable.untransitioned(),this._transform=l}get state(){const n=this._transform,l=n.projection.name==="globe",f=o.globeToMercatorTransition(n.zoom),g=this.properties.get("range"),y=[.5,3];return{range:l?[o.number(y[0],g[0],f),o.number(y[1],g[1],f)]:g,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(n,l={}){if(!this._validate(o.validateFog,n,l)){for(const f of Object.keys(o.spec.fog))n&&n[f]===void 0&&(n[f]=o.spec.fog[f].default);for(const f in n){const g=n[f];o.endsWith(f,"-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}}getOpacity(n){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,n))*l.a}getOpacityAtLatLng(n,l){return this._transform.projection.supportsFog?function(f,g,y){const w=o.MercatorCoordinate.fromLngLat(g),E=y.elevation?y.elevation.getAtPointOrZero(w):0,C=[w.x,w.y,E];return o.transformMat4(C,C,y.mercatorFogMatrix),Tt(f,C,y.pitch,y._fov)}(this.state,n,l):0}getFovAdjustedRange(n){return this._transform.projection.supportsFog?Wt(this.state,n):[0,1]}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f){return(!f||f.validate!==!1)&&o.emitValidationErrors(this,n.call(o.validateStyle,o.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Qt{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const f=this.workerPool.acquire(this.id);for(let g=0;g<f.length;g++){const y=new Qt.Actor(f[g],l,this.id);y.name=`Worker ${g}`,this.actors.push(y)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(n,l,f){o.asyncAll(this.actors,(g,y)=>{g.send(n,l,y)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(n=>{n.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Tr(u,n,l){return n*(o.EXTENT/(u.tileSize*Math.pow(2,l-u.tileID.overscaledZ)))}Qt.Actor=o.Actor;class bn{constructor(n,l,f,g){this.screenBounds=n,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=f,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,g)}static createFromScreenPoints(n,l){let f,g;if(n instanceof o.Point||typeof n[0]=="number"){const y=o.Point.convert(n);f=[y],g=l.isPointAboveHorizon(y)}else{const y=o.Point.convert(n[0]),w=o.Point.convert(n[1]);f=[y,w],g=o.polygonizeBounds(y,w).every(E=>l.isPointAboveHorizon(E))}return new bn(f,l.getCameraPoint(),g,l)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(n){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],n)}bufferedCameraGeometry(n){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],g=o.polygonizeBounds(l,f,0,!1);return this.cameraPoint.y>f.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<f.x?g.splice(3,0,this.cameraPoint):this.cameraPoint.x>=f.x?g[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(g[3]=this.cameraPoint)),o.bufferConvexPolygon(g,n)}bufferedCameraGeometryGlobe(n){const l=this.screenBounds[0],f=this.screenBounds.length===1?this.screenBounds[0].add(new o.Point(1,1)):this.screenBounds[1],g=o.polygonizeBounds(l,f,n),y=this.cameraPoint.clone();switch(3*((y.y>l.y)+(y.y>f.y))+((y.x>l.x)+(y.x>f.x))){case 0:g[0]=y,g[4]=y.clone();break;case 1:g.splice(1,0,y);break;case 2:g[1]=y;break;case 3:g.splice(4,0,y);break;case 5:g.splice(2,0,y);break;case 6:g[3]=y;break;case 7:g.splice(3,0,y);break;case 8:g[2]=y}return g}containsTile(n,l,f,g=0){const y=n.queryPadding/l._pixelsPerMercatorPixel+1,w=f?this._bufferedCameraMercator(y,l):this._bufferedScreenMercator(y,l);let E=n.tileID.wrap+(w.unwrapped?g:0);const C=w.polygon.map(Q=>o.getTilePoint(n.tileTransform,Q,E));if(!o.polygonIntersectsBox(C,0,0,o.EXTENT,o.EXTENT))return;E=n.tileID.wrap+(this.screenGeometryMercator.unwrapped?g:0);const R=this.screenGeometryMercator.polygon.map(Q=>o.getTileVec3(n.tileTransform,Q,E)),L=R.map(Q=>new o.Point(Q[0],Q[1])),z=l.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),Z=o.getTileVec3(n.tileTransform,z,E),W=R.map(Q=>{const B=o.sub(Q,Q,Z);return o.normalize(B,B),new o.Ray(Z,B)}),X=Tr(n,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:L,tilespaceRays:W,bufferedTilespaceGeometry:C,bufferedTilespaceBounds:(K=o.getBounds(C),K.min.x=o.clamp(K.min.x,0,o.EXTENT),K.min.y=o.clamp(K.min.y,0,o.EXTENT),K.max.x=o.clamp(K.max.x,0,o.EXTENT),K.max.y=o.clamp(K.max.y,0,o.EXTENT),K),tile:n,tileID:n.tileID,pixelToTileUnitsFactor:X};var K}_bufferedScreenMercator(n,l){const f=en(n);if(this._screenRaycastCache[f])return this._screenRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(n),l):{polygon:this.bufferedScreenGeometry(n).map(y=>l.pointCoordinate3D(y)),unwrapped:!0},this._screenRaycastCache[f]=g,g}}_bufferedCameraMercator(n,l){const f=en(n);if(this._cameraRaycastCache[f])return this._cameraRaycastCache[f];{let g;return g=l.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(n),l):{polygon:this.bufferedCameraGeometry(n).map(y=>l.pointCoordinate3D(y)),unwrapped:!0},this._cameraRaycastCache[f]=g,g}}_projectAndResample(n,l){const f=function(y,w){const E=o.multiply([],w.pixelMatrix,w.globeMatrix),C=[0,-o.GLOBE_RADIUS,0,1],R=[0,o.GLOBE_RADIUS,0,1],L=[0,0,0,1];o.transformMat4$1(C,C,E),o.transformMat4$1(R,R,E),o.transformMat4$1(L,L,E);const z=new o.Point(C[0]/C[3],C[1]/C[3]),Z=new o.Point(R[0]/R[3],R[1]/R[3]),W=o.polygonContainsPoint(y,z)&&C[3]<L[3],X=o.polygonContainsPoint(y,Z)&&R[3]<L[3];if(!W&&!X)return null;const K=function(pe,we,be){for(let Re=1;Re<pe.length;Re++){const rt=$n(we.pointCoordinate3D(pe[Re-1]).x),Me=$n(we.pointCoordinate3D(pe[Re]).x);if(be<0){if(rt<Me)return{idx:Re,t:-rt/(Me-1-rt)}}else if(Me<rt)return{idx:Re,t:(1-rt)/(Me+1-rt)}}return null}(y,w,W?-1:1);if(!K)return null;const{idx:Q,t:B}=K;let H=Q>1?er(y.slice(0,Q),w):[],re=Q<y.length?er(y.slice(Q),w):[];H=H.map(pe=>new o.Point($n(pe.x),pe.y)),re=re.map(pe=>new o.Point($n(pe.x),pe.y));const ne=[...H];ne.length===0&&ne.push(re[re.length-1]);const fe=o.number(ne[ne.length-1].y,(re.length===0?H[0]:re[0]).y,B);let me;return me=W?[new o.Point(0,fe),new o.Point(0,0),new o.Point(1,0),new o.Point(1,fe)]:[new o.Point(1,fe),new o.Point(1,1),new o.Point(0,1),new o.Point(0,fe)],ne.push(...me),re.length===0?ne.push(H[0]):ne.push(...re),{polygon:ne.map(pe=>new o.MercatorCoordinate(pe.x,pe.y)),unwrapped:!1}}(n,l);if(f)return f;const g=function(y,w){let E=!1,C=-1/0,R=0;for(let z=0;z<y.length-1;z++)y[z].x>C&&(C=y[z].x,R=z);for(let z=0;z<y.length-1;z++){const Z=(R+z)%(y.length-1),W=y[Z],X=y[Z+1];Math.abs(W.x-X.x)>.5&&(W.x<X.x?(W.x+=1,Z===0&&(y[y.length-1].x+=1)):(X.x+=1,Z+1===y.length-1&&(y[0].x+=1)),E=!0)}const L=o.mercatorXfromLng(w.center.lng);return E&&L<Math.abs(L-1)&&y.forEach(z=>{z.x-=1}),{polygon:y,unwrapped:E}}(er(n,l).map(y=>new o.Point($n(y.x),y.y)),l);return{polygon:g.polygon.map(y=>new o.MercatorCoordinate(y.x,y.y)),unwrapped:g.unwrapped}}}function er(u,n){return o.resample(u,l=>{const f=n.pointCoordinate3D(l);l.x=f.x,l.y=f.y},1/256)}function $n(u){return u<0?1+u%1:u%1}function en(u){return 100*u|0}function Mn(u,n,l,f,g){const y=function(w,E){if(w)return g(w);if(E){u.url&&E.tiles&&u.tiles&&delete u.tiles;const C=o.pick(o.extend(E,u),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(C.vectorLayers=E.vector_layers,C.vectorLayerIds=C.vectorLayers.map(R=>R.id)),C.tiles=n.canonicalizeTileset(C,u.url),g(null,C)}};return u.url?o.getJSON(n.transformRequest(n.normalizeSourceURL(u.url,null,l,f),o.ResourceType.Source),y):o.exported.frame(()=>y(null,u))}class Vn{constructor(n,l,f){this.bounds=o.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),f=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*l),g=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*l),y=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*l),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*l);return n.x>=f&&n.x<y&&n.y>=g&&n.y<w}}class ho{constructor(n,l,f){this.context=n;const g=n.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ci={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wi{constructor(n,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=n;const y=n.gl;this.buffer=y.createBuffer(),n.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let f=0;f<this.attributes.length;f++){const g=l.attributes[this.attributes[f].name];g!==void 0&&n.enableVertexAttribArray(g)}}setVertexAttribPointers(n,l,f){for(let g=0;g<this.attributes.length;g++){const y=this.attributes[g],w=l.attributes[y.name];w!==void 0&&n.vertexAttribPointer(w,y.components,n[ci[y.type]],!1,this.itemSize,y.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Vt{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ui extends Vt{getDefault(){return o.Color.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class dn extends Vt{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ei extends Vt{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class yr extends Vt{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class fn extends Vt{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Gn extends Vt{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Gt extends Vt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class vr extends Vt{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Vr extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class Pn extends Vt{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Kn extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class hi extends Vt{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class ji extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class Io extends Vt{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class ns extends Vt{getDefault(){return o.Color.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ln extends Vt{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ti extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class fo extends Vt{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Xn extends Vt{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}let Ui,fi=class extends Vt{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}};class wn extends Vt{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class En extends Vt{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Vi extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class pn extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Si extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Mo extends Vt{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class le extends Vt{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class j extends Vt{constructor(n){super(n),this.vao=n.extVertexArrayObject}getDefault(){return null}set(n){this.vao&&(n!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(n),this.current=n,this.dirty=!1)}}class G extends Vt{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class ie extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class ce extends Vt{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class ge extends Vt{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Ae extends ge{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Se extends ge{attachment(){return this.gl.DEPTH_ATTACHMENT}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ye extends Se{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class De{constructor(n,l,f,g){this.context=n,this.width=l,this.height=f;const y=this.framebuffer=n.gl.createFramebuffer();this.colorAttachment=new Ae(n,y),g&&(this.depthAttachment=new Se(n,y))}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&n.deleteRenderbuffer(f)}n.deleteFramebuffer(this.framebuffer)}}class at{constructor(n,l=!1){if(this.gl=n,this.isWebGL2=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),l){const f=n;this.extVertexArrayObject={createVertexArrayOES:f.createVertexArray.bind(n),deleteVertexArrayOES:f.deleteVertexArray.bind(n),bindVertexArrayOES:f.bindVertexArray.bind(n)}}this.clearColor=new ui(this),this.clearDepth=new dn(this),this.clearStencil=new Ei(this),this.colorMask=new yr(this),this.depthMask=new fn(this),this.stencilMask=new Gn(this),this.stencilFunc=new Gt(this),this.stencilOp=new vr(this),this.stencilTest=new Vr(this),this.depthRange=new Pn(this),this.depthTest=new Kn(this),this.depthFunc=new hi(this),this.blend=new ji(this),this.blendFunc=new Io(this),this.blendColor=new ns(this),this.blendEquation=new Ln(this),this.cullFace=new Ti(this),this.cullFaceSide=new fo(this),this.frontFace=new Xn(this),this.program=new fi(this),this.activeTexture=new wn(this),this.viewport=new En(this),this.bindFramebuffer=new Vi(this),this.bindRenderbuffer=new pn(this),this.bindTexture=new Si(this),this.bindVertexBuffer=new Mo(this),this.bindElementBuffer=new le(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new j(this),this.pixelStoreUnpack=new G(this),this.pixelStoreUnpackPremultiplyAlpha=new ie(this),this.pixelStoreUnpackFlipY=new ce(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=n.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=n.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=n.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),l||(this.extTextureHalfFloat=n.getExtension("OES_texture_half_float")),(l||this.extTextureHalfFloat&&n.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=n.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l||n.getExtension("OES_standard_derivatives"),this.extTimerQuery=n.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new ho(this,n,l)}createVertexBuffer(n,l,f){return new wi(this,n,l,f)}createRenderbuffer(n,l,f){const g=this.gl,y=g.createRenderbuffer();return this.bindRenderbuffer.set(y),g.renderbufferStorage(g.RENDERBUFFER,n,l,f),this.bindRenderbuffer.set(null),y}createFramebuffer(n,l,f){return new De(this,n,l,f)}clear({color:n,depth:l,stencil:f}){const g=this.gl;let y=0;n&&(y|=g.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(y|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(y|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(y)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){I(n.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ct extends o.Evented{constructor(n,l,f,g){if(super(),this.id=n,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(l,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(n){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,f=this.map._worldview;this._tileJSONRequest=Mn(this._options,this.map._requestManager,l,f,(g,y)=>{this._tileJSONRequest=null,this._loaded=!0,g?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new o.ErrorEvent(g))):y&&(o.extend(this,y),y.bounds&&(this.tileBounds=new Vn(y.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(y.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),n&&n(g)})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(n){return this._options.tiles=n,this.reload(),this}setUrl(n){return this.url=n,this._options.url=n,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(n,l){const f=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,o.ResourceType.Tile),data:void 0,uid:n.uid,tileID:n.tileID,tileZoom:n.tileZoom,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:n.isSymbolTile};if(g.request.collectResourceTiming=this._collectResourceTiming,n.actor&&n.state!=="expired")n.state==="loading"?n.reloadCallback=l:n.request=n.actor.send("reloadTile",g,y.bind(this));else if(n.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)n.request=n.actor.send("loadTile",g,y.bind(this),void 0,!0);else{const w=o.loadVectorTile.call({deduped:this._deduped},g,(E,C)=>{E||!C?y.call(this,E):(g.data={cacheControl:C.cacheControl,expires:C.expires,rawData:C.rawData.slice(0)},n.actor&&n.actor.send("loadTile",g,y.bind(this),void 0,!0))},!0);n.request={cancel:w}}function y(w,E){return delete n.request,n.aborted?l(null):w&&w.status!==404?l(w):(E&&E.resourceTiming&&(n.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&n.setExpiryData(E),n.loadVectorData(E,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(n.reloadCallback&&(this.loadTile(n,n.reloadCallback),n.reloadCallback=null)))}}abortTile(n){n.request&&(n.request.cancel(),delete n.request),n.actor&&n.actor.send("abortTile",{uid:n.uid,type:this.type,source:this.id})}unloadTile(n){n.unloadVectorData(),n.actor&&n.actor.send("removeTile",{uid:n.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class it extends o.Evented{constructor(n,l,f,g){super(),this.id=n,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},l),o.extend(this,o.pick(l,["url","scheme","tileSize"]))}load(n){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Mn(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(o.extend(this,f),f.bounds&&(this.tileBounds=new Vn(f.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(f.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),n&&n(l)})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(n){return this._options.tiles=n,this.reload(),this}setUrl(n){return this.url=n,this._options.url=n,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n,l){const f=o.exported.devicePixelRatio>=2,g=this.map._requestManager.normalizeTileURL(n.tileID.canonical.url(this.tiles,this.scheme),f,this.tileSize);n.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),(y,w,E,C)=>(delete n.request,n.aborted?(n.state="unloaded",l(null)):y?(n.state="errored",l(y)):w?(this.map._refreshExpiredTiles&&n.setExpiryData({cacheControl:E,expires:C}),n.setTexture(w,this.map.painter),n.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void l(null)):l(null)))}static loadTileData(n,l,f){n.setTexture(l,f)}static unloadTileData(n,l){n.texture&&l.saveTileTexture(n.texture)}abortTile(n,l){n.request&&(n.request.cancel(),delete n.request),l()}unloadTile(n,l){n.texture&&this.map.painter.saveTileTexture(n.texture),l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function zt(u,n,l,f,g,y,w,E){const C=[u,l,g,n,f,y,1,1,1],R=[w,E,1],L=o.adjoint([],C),[z,Z,W]=o.transformMat3(R,R,o.transpose(L,L));return o.multiply$1(C,[z,0,0,0,Z,0,0,0,W],C)}class Kt extends o.Evented{constructor(n,l,f,g){super(),this.id=n,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l,this._dirty=!1}load(n,l){this._loaded=l||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(f,g)=>{if(this._imageRequest=null,this._loaded=!0,f)this.fire(new o.ErrorEvent(f));else if(g){const{HTMLImageElement:y}=o.window;this.image=g instanceof y?o.exported.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,n&&(this.coordinates=n),this._finishLoading()}})}loaded(){return this._loaded}updateImage(n){return this.image&&n.url?(this._imageRequest&&n.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=n.url,this.load(n.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(n){this.coordinates=n,this._boundsArray=void 0;const l=n.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(f){let g=1/0,y=1/0,w=-1/0,E=-1/0;for(const z of f)g=Math.min(g,z.x),y=Math.min(y,z.y),w=Math.max(w,z.x),E=Math.max(E,z.y);const C=Math.max(w-g,E-y),R=Math.max(0,Math.floor(-Math.log(C)/Math.LN2)),L=Math.pow(2,R);return new o.CanonicalTileID(R,Math.floor((g+w)/2*L),Math.floor((y+E)/2*L))}(l),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(n){for(const C in this.tiles){const R=this.tiles[C];R.state!=="loaded"&&(R.state="loaded",R.texture=this.texture)}if(this._boundsArray)return;const l=o.tileTransform(this.tileID,this.map.transform.projection),[f,g,y,w]=this.coordinates.map(C=>{const R=l.projection.project(C[0],C[1]);return o.getTilePoint(l,R)._round()});this.perspectiveTransform=function(C,R,L,z,Z,W,X,K,Q,B){const H=zt(0,0,C,0,0,R,C,R),re=zt(L,z,Z,W,X,K,Q,B);return o.multiply$1(re,o.adjoint(H,H),re),[re[6]/re[8]*C/o.EXTENT,re[7]/re[8]*R/o.EXTENT]}(this.width,this.height,f.x,f.y,g.x,g.y,w.x,w.y,y.x,y.y);const E=this._boundsArray=new o.StructArrayLayout4i8;E.emplaceBack(f.x,f.y,0,0),E.emplaceBack(g.x,g.y,o.EXTENT,0),E.emplaceBack(w.x,w.y,0,o.EXTENT),E.emplaceBack(y.x,y.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=n.createVertexBuffer(E,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(n)}loadTile(n,l){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={},l(null)):(n.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Bt={vector:ct,raster:it,"raster-dem":class extends it{constructor(u,n,l,f){super(u,n,l,f),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(u,n){const l=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function f(g,y){g&&(u.state="errored",n(g)),y&&(u.dem=y,u.dem.onDeserialize(),u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0,u.state="loaded",n(null))}u.request=o.getImage(this.map._requestManager.transformRequest(l,o.ResourceType.Tile),(function(g,y,w,E){if(delete u.request,u.aborted)u.state="unloaded",n(null);else if(g)u.state="errored",n(g);else if(y){this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:w,expires:E});const C=o.window.ImageBitmap&&y instanceof o.window.ImageBitmap&&(Ui==null&&(Ui=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),Ui),R=1-(y.width-o.prevPowerOfTwo(y.width))/2;R<1||u.neighboringTiles||(u.neighboringTiles=this._getNeighboringTiles(u.tileID));const L=C?y:o.exported.getImageData(y,R),z={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:L,encoding:this.encoding,padding:R};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",z,f.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(u){const n=u.canonical,l=Math.pow(2,n.z),f=(n.x-1+l)%l,g=n.x===0?u.wrap-1:u.wrap,y=(n.x+1+l)%l,w=n.x+1===l?u.wrap+1:u.wrap,E={};return E[new o.OverscaledTileID(u.overscaledZ,g,n.z,f,n.y).key]={backfilled:!1},E[new o.OverscaledTileID(u.overscaledZ,w,n.z,y,n.y).key]={backfilled:!1},n.y>0&&(E[new o.OverscaledTileID(u.overscaledZ,g,n.z,f,n.y-1).key]={backfilled:!1},E[new o.OverscaledTileID(u.overscaledZ,u.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},E[new o.OverscaledTileID(u.overscaledZ,w,n.z,y,n.y-1).key]={backfilled:!1}),n.y+1<l&&(E[new o.OverscaledTileID(u.overscaledZ,g,n.z,f,n.y+1).key]={backfilled:!1},E[new o.OverscaledTileID(u.overscaledZ,u.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},E[new o.OverscaledTileID(u.overscaledZ,w,n.z,y,n.y+1).key]={backfilled:!1}),E}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded"}},geojson:class extends o.Evented{constructor(u,n,l,f){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(f),this._data=n.data,this._options=o.extend({},n),this._collectResourceTiming=n.collectResourceTiming,n.maxzoom!==void 0&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const g=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(n.buffer!==void 0?n.buffer:128)*g,tolerance:(n.tolerance!==void 0?n.tolerance:.375)*g,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:n.clusterMaxZoom!==void 0?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:o.EXTENT,radius:(n.clusterRadius!==void 0?n.clusterRadius:50)*g,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(u){this.map=u,this.setData(this._data)}setData(u){return this._data=u,this._updateWorkerData(),this}getClusterExpansionZoom(u,n){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},n),this}getClusterChildren(u,n){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},n),this}getClusterLeaves(u,n,l,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:n,offset:l},f),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const u=o.extend({},this.workerOptions),n=this._data;typeof n=="string"?(u.request=this.map._requestManager.transformRequest(o.exported.resolveURL(n),o.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,u,(l,f)=>{if(this._loaded=!0,this._pendingLoad=null,l)this.fire(new o.ErrorEvent(l));else{const g={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&f&&f.resourceTiming&&f.resourceTiming[this.id]&&(g.resourceTiming=f.resourceTiming[this.id]),this.fire(new o.Event("data",g)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(u,n){const l=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(l,{type:this.type,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(f,g)=>(delete u.request,u.unloadVectorData(),u.aborted?n(null):f?n(f):(u.loadVectorData(g,this.map.painter,l==="reloadTile"),n(null))),void 0,l==="loadTile")}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Kt{constructor(u,n,l,f){super(u,n,l,f),this.roundZoom=!0,this.type="video",this.options=n}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const n of u.urls)this.urls.push(this.map._requestManager.transformRequest(n,o.ResourceType.Source).url);o.getVideo(this.urls,(n,l)=>{this._loaded=!0,n?this.fire(new o.ErrorEvent(n)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const n=this.video.seekable;u<n.start(0)||u>n.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,n=u.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(u)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Kt,canvas:class extends Kt{constructor(u,n,l,f){super(u,n,l,f),n.coordinates?Array.isArray(n.coordinates)&&n.coordinates.length===4&&!n.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(y=>typeof y!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),n.animate&&typeof n.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),n.canvas?typeof n.canvas=="string"||n.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=n,this.animate=n.animate===void 0||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const n=this.map.painter.context;this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}},custom:class extends o.Evented{constructor(u,n,l,f){super(),this.id=u,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=n,this.setEventedParent(f),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Vn(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(u){this._map=u,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(u),this.load()}onRemove(u){this._implementation.onRemove&&this._implementation.onRemove(u)}hasTile(u){if(this._implementation.hasTile){const{x:n,y:l,z:f}=u.canonical;return this._implementation.hasTile({x:n,y:l,z:f})}return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,n){const{x:l,y:f,z:g}=u.tileID.canonical,y=new o.window.AbortController;u.request=Promise.resolve(this._implementation.loadTile({x:l,y:f,z:g},{signal:y.signal})).then((function(w){return delete u.request,u.aborted?(u.state="unloaded",n(null)):w===void 0?(u.state="errored",n(null)):w===null?(this.loadTileData(u,{width:this.tileSize,height:this.tileSize,data:null}),u.state="loaded",n(null)):function(E){return E instanceof o.window.ImageData||E instanceof o.window.HTMLCanvasElement||E instanceof o.window.ImageBitmap||E instanceof o.window.HTMLImageElement}(w)?(this.loadTileData(u,w),u.state="loaded",void n(null)):(u.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(w=>{w.code!==20&&(u.state="errored",n(w))}),u.request.cancel=()=>y.abort()}loadTileData(u,n){it.loadTileData(u,n,this._map.painter)}unloadTileData(u){it.unloadTileData(u,this._map.painter)}unloadTile(u,n){if(this.unloadTileData(u),this._implementation.unloadTile){const{x:l,y:f,z:g}=u.tileID.canonical;this._implementation.unloadTile({x:l,y:f,z:g})}n()}abortTile(u,n){u.request&&u.request.cancel&&(u.request.cancel(),delete u.request),n()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(u=>({x:u.canonical.x,y:u.canonical.y,z:u.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Zt=function(u,n,l,f){const g=new Bt[n.type](u,n,l,f);if(g.id!==u)throw new Error(`Expected Source id to be ${u} instead of ${g.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],g),g};function Ft(u,n){const l=o.identity([]);return o.scale(l,l,[.5*u.width,.5*-u.height,1]),o.translate(l,l,[1,-1,0]),o.multiply(l,l,u.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(l)}function Sr(u,n,l,f,g,y,w,E=!1){const C=u.tilesIn(f,w,E);C.sort(tn);const R=[];for(const z of C)R.push({wrappedTileID:z.tile.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(n,l,u._state,z,g,y,Ft(u.transform,z.tile.tileID),E)});const L=function(z){const Z={},W={};for(const X of z){const K=X.queryResults,Q=X.wrappedTileID,B=W[Q]=W[Q]||{};for(const H in K){const re=K[H],ne=B[H]=B[H]||{},fe=Z[H]=Z[H]||[];for(const me of re)ne[me.featureIndex]||(ne[me.featureIndex]=!0,fe.push(me))}}return Z}(R);for(const z in L)L[z].forEach(Z=>{const W=Z.feature,X=W.layer;X&&X.type!=="background"&&X.type!=="sky"&&(W.source=X.source,X["source-layer"]&&(W.sourceLayer=X["source-layer"]),W.state=W.id!==void 0?u.getFeatureState(X["source-layer"],W.id):{})});return L}function Rr(u,n){const l=u.getRenderableIds().map(y=>u.getTileByID(y)),f=[],g={};for(let y=0;y<l.length;y++){const w=l[y],E=w.tileID.canonical.key;g[E]||(g[E]=!0,w.querySourceFeatures(f,n))}return f}function tn(u,n){const l=u.tileID,f=n.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Dr(){return $s.workerClass!=null?new $s.workerClass:new o.window.Worker($s.workerUrl)}const Rn="mapboxgl_preloaded_worker_pool";class Gr{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Gr.workerCount;)this.workers.push(new Dr);return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Rn]}numActive(){return Object.keys(this.active).length}}let rn;function po(){return rn||(rn=new Gr),rn}function Za(u,n){const l={};for(const f in u)f!=="ref"&&(l[f]=u[f]);return o.refProperties.forEach(f=>{f in n&&(l[f]=n[f])}),l}function qs(u){u=u.slice();const n=Object.create(null);for(let l=0;l<u.length;l++)n[u[l].id]=u[l];for(let l=0;l<u.length;l++)"ref"in u[l]&&(u[l]=Za(u[l],n[u[l].ref]));return u}Gr.workerCount=2;const Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Po(u,n,l){l.push({command:Jt.addSource,args:[u,n[u]]})}function mo(u,n,l){n.push({command:Jt.removeSource,args:[u]}),l[u]=!0}function is(u,n,l,f){mo(u,l,f),Po(u,n,l)}function Lo(u,n,l){let f;for(f in u[l])if(u[l].hasOwnProperty(f)&&f!=="data"&&!I(u[l][f],n[l][f]))return!1;for(f in n[l])if(n[l].hasOwnProperty(f)&&f!=="data"&&!I(u[l][f],n[l][f]))return!1;return!0}function Zn(u,n,l,f,g,y){let w;for(w in n=n||{},u=u||{})u.hasOwnProperty(w)&&(I(u[w],n[w])||l.push({command:y,args:[f,w,n[w],g]}));for(w in n)n.hasOwnProperty(w)&&!u.hasOwnProperty(w)&&(I(u[w],n[w])||l.push({command:y,args:[f,w,n[w],g]}))}function Yn(u){return u.id}function nn(u,n){return u[n.id]=n,u}class Hs{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.clamp(n,0,1);let l=1,f=this._distances[l];const g=n*this.paddedLength+this.padding;for(;f<g&&l<this._distances.length;)f=this._distances[++l];const y=l-1,w=this._distances[y],E=f-w,C=E>0?(g-w)/E:0;return this.points[y].mult(1-C).add(this.points[l].mult(C))}}class Gi{constructor(n,l,f){const g=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(n/f),this.yCellCount=Math.ceil(l/f);for(let w=0;w<this.xCellCount*this.yCellCount;w++)g.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,f,g,y){this._forEachCell(l,f,g,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(y)}insertCircle(n,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(f),this.circles.push(g)}_insertBoxCell(n,l,f,g,y,w){this.boxCells[y].push(w)}_insertCircleCell(n,l,f,g,y,w){this.circleCells[y].push(w)}_query(n,l,f,g,y,w){if(f<0||n>this.width||g<0||l>this.height)return!y&&[];const E=[];if(n<=0&&l<=0&&this.width<=f&&this.height<=g){if(y)return!0;for(let C=0;C<this.boxKeys.length;C++)E.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(let C=0;C<this.circleKeys.length;C++){const R=this.circles[3*C],L=this.circles[3*C+1],z=this.circles[3*C+2];E.push({key:this.circleKeys[C],x1:R-z,y1:L-z,x2:R+z,y2:L+z})}return w?E.filter(w):E}return this._forEachCell(n,l,f,g,this._queryCell,E,{hitTest:y,seenUids:{box:{},circle:{}}},w),y?E.length>0:E}_queryCircle(n,l,f,g,y){const w=n-f,E=n+f,C=l-f,R=l+f;if(E<0||w>this.width||R<0||C>this.height)return!g&&[];const L=[];return this._forEachCell(w,C,E,R,this._queryCellCircle,L,{hitTest:g,circle:{x:n,y:l,radius:f},seenUids:{box:{},circle:{}}},y),g?L.length>0:L}query(n,l,f,g,y){return this._query(n,l,f,g,!1,y)}hitTest(n,l,f,g,y){return this._query(n,l,f,g,!0,y)}hitTestCircle(n,l,f,g){return this._queryCircle(n,l,f,!0,g)}_queryCell(n,l,f,g,y,w,E,C){const R=E.seenUids,L=this.boxCells[y];if(L!==null){const Z=this.bboxes;for(const W of L)if(!R.box[W]){R.box[W]=!0;const X=4*W;if(n<=Z[X+2]&&l<=Z[X+3]&&f>=Z[X+0]&&g>=Z[X+1]&&(!C||C(this.boxKeys[W]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[W],x1:Z[X],y1:Z[X+1],x2:Z[X+2],y2:Z[X+3]})}}}const z=this.circleCells[y];if(z!==null){const Z=this.circles;for(const W of z)if(!R.circle[W]){R.circle[W]=!0;const X=3*W;if(this._circleAndRectCollide(Z[X],Z[X+1],Z[X+2],n,l,f,g)&&(!C||C(this.circleKeys[W]))){if(E.hitTest)return w.push(!0),!0;{const K=Z[X],Q=Z[X+1],B=Z[X+2];w.push({key:this.circleKeys[W],x1:K-B,y1:Q-B,x2:K+B,y2:Q+B})}}}}}_queryCellCircle(n,l,f,g,y,w,E,C){const R=E.circle,L=E.seenUids,z=this.boxCells[y];if(z!==null){const W=this.bboxes;for(const X of z)if(!L.box[X]){L.box[X]=!0;const K=4*X;if(this._circleAndRectCollide(R.x,R.y,R.radius,W[K+0],W[K+1],W[K+2],W[K+3])&&(!C||C(this.boxKeys[X])))return w.push(!0),!0}}const Z=this.circleCells[y];if(Z!==null){const W=this.circles;for(const X of Z)if(!L.circle[X]){L.circle[X]=!0;const K=3*X;if(this._circlesCollide(W[K],W[K+1],W[K+2],R.x,R.y,R.radius)&&(!C||C(this.circleKeys[X])))return w.push(!0),!0}}}_forEachCell(n,l,f,g,y,w,E,C){const R=this._convertToXCellCoord(n),L=this._convertToYCellCoord(l),z=this._convertToXCellCoord(f),Z=this._convertToYCellCoord(g);for(let W=R;W<=z;W++)for(let X=L;X<=Z;X++)if(y.call(this,n,l,f,g,this.xCellCount*X+W,w,E,C))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,f,g,y,w){const E=g-n,C=y-l,R=f+w;return R*R>E*E+C*C}_circleAndRectCollide(n,l,f,g,y,w,E){const C=(w-g)/2,R=Math.abs(n-(g+C));if(R>C+f)return!1;const L=(E-y)/2,z=Math.abs(l-(y+L));if(z>L+f)return!1;if(R<=C||z<=L)return!0;const Z=R-C,W=z-L;return Z*Z+W*W<=f*f}}const Jn={unknown:0,flipRequired:1,flipNotRequired:2},Ro=Math.tan(85*Math.PI/180);function Te(u,n,l,f,g,y,w){const E=o.create();if(l)if(y.name==="globe"){const C=o.calculateGlobeLabelMatrix(g,n);o.multiply(E,E,C)}else{const C=ve([],w);E[0]=C[0],E[1]=C[1],E[4]=C[2],E[5]=C[3],f||o.rotateZ(E,E,g.angle)}else o.multiply(E,g.labelPlaneMatrix,u);return E}function Tn(u,n,l,f,g,y,w){const E=Te(u,n,l,f,g,y,w);return y.name==="globe"&&l||(E[2]=E[6]=E[10]=E[14]=0),E}function dr(u,n,l,f,g,y,w){if(l){if(y.name==="globe"){const E=Te(u,n,l,f,g,y,w);return o.invert(E,E),o.multiply(E,u,E),E}{const E=o.clone(u),C=o.identity([]);return C[0]=w[0],C[1]=w[1],C[4]=w[2],C[5]=w[3],o.multiply(E,E,C),f||o.rotateZ(E,E,-g.angle),E}}return g.glCoordMatrix}function Ar(u,n,l,f){const g=[u,n,l,1];l?o.transformMat4$1(g,g,f):bt(g,g,f);const y=g[3];return g[0]/=y,g[1]/=y,g[2]/=y,g}function os(u,n){return Math.min(.5+u/n*.5,1.5)}function qn(u,n){const l=u[0]/u[3],f=u[1]/u[3];return l>=-n[0]&&l<=n[0]&&f>=-n[1]&&f<=n[1]}function Jr(u,n,l,f,g,y,w,E,C,R){const L=l.transform,z=f?u.textSizeData:u.iconSizeData,Z=o.evaluateSizeForZoom(z,l.transform.zoom),W=L.projection.name==="globe",X=[256/l.width*2+1,256/l.height*2+1],K=f?u.text.dynamicLayoutVertexArray:u.icon.dynamicLayoutVertexArray;K.clear();let Q=null;W&&(Q=f?u.text.globeExtVertexArray:u.icon.globeExtVertexArray);const B=u.lineVertexArray,H=f?u.text.placedSymbolArray:u.icon.placedSymbolArray,re=l.transform.width/l.transform.height;let ne,fe=!1;for(let me=0;me<H.length;me++){const pe=H.get(me),{numGlyphs:we,writingMode:be}=pe;if(be!==o.WritingMode.vertical||fe||ne===o.WritingMode.horizontal||(fe=!0),ne=be,(pe.hidden||be===o.WritingMode.vertical)&&!fe){_t(we,K);continue}fe=!1;const Re=new o.Point(pe.tileAnchorX,pe.tileAnchorY);let{x:rt,y:Me,z:Ve}=L.projection.projectTilePoint(Re.x,Re.y,R.canonical);if(C){const[Ot,wt,kt]=C(Re);rt+=Ot,Me+=wt,Ve+=kt}const Oe=[rt,Me,Ve,1];if(o.transformMat4$1(Oe,Oe,n),!qn(Oe,X)){_t(we,K);continue}const et=os(l.transform.cameraToCenterDistance,Oe[3]),Le=o.evaluateSizeForFeature(z,Z,pe),Ue=w?Le/et:Le*et,ot=Ar(rt,Me,Ve,g);if(ot[3]<=0){_t(we,K);continue}let Xe={};const st=w?null:C,Mt=J(pe,Ue,!1,E,n,g,y,u.glyphOffsetArray,B,K,Q,ot,Re,Xe,re,st,L.projection,R,w);fe=Mt.useVertical,st&&Mt.needsFlipping&&(Xe={}),(Mt.notEnoughRoom||fe||Mt.needsFlipping&&J(pe,Ue,!0,E,n,g,y,u.glyphOffsetArray,B,K,Q,ot,Re,Xe,re,st,L.projection,R,w).notEnoughRoom)&&_t(we,K)}f?(u.text.dynamicLayoutVertexBuffer.updateData(K),Q&&u.text.globeExtVertexBuffer.updateData(Q)):(u.icon.dynamicLayoutVertexBuffer.updateData(K),Q&&u.icon.globeExtVertexBuffer.updateData(Q))}function k(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K){const{lineStartIndex:Q,glyphStartIndex:B,segment:H}=E,re=B+E.numGlyphs,ne=Q+E.lineLength,fe=n.getoffsetX(B),me=n.getoffsetX(re-1),pe=Ze(u*fe,l,f,g,y,w,H,Q,ne,C,R,L,z,Z,!0,W,X,K);if(!pe)return null;const we=Ze(u*me,l,f,g,y,w,H,Q,ne,C,R,L,z,Z,!0,W,X,K);return we?{first:pe,last:we}:null}function V(u,n,l,f){return u===o.WritingMode.horizontal&&Math.abs(f)>Math.abs(l)?{useVertical:!0}:u===o.WritingMode.vertical?f>0?{needsFlipping:!0}:null:n!==Jn.unknown&&function(g,y){return g===0||Math.abs(y/g)>Ro}(l,f)?n===Jn.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null}function J(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K,Q,B,H){const re=n/24,ne=u.lineOffsetX*re,fe=u.lineOffsetY*re,{lineStartIndex:me,glyphStartIndex:pe,numGlyphs:we,segment:be,writingMode:Re,flipState:rt}=u,Me=me+u.lineLength,Ve=Oe=>{if(L){const[ot,Xe,st]=Oe.up,Mt=R.length;o.updateGlobeVertexNormal(L,Mt+0,ot,Xe,st),o.updateGlobeVertexNormal(L,Mt+1,ot,Xe,st),o.updateGlobeVertexNormal(L,Mt+2,ot,Xe,st),o.updateGlobeVertexNormal(L,Mt+3,ot,Xe,st)}const[et,Le,Ue]=Oe.point;o.addDynamicAttributes(R,et,Le,Ue,Oe.angle)};if(we>1){const Oe=k(re,E,ne,fe,l,z,Z,u,C,y,W,K,!1,Q,B,H);if(!Oe)return{notEnoughRoom:!0};if(f&&!l){let[et,Le,Ue]=Oe.first.point,[ot,Xe,st]=Oe.last.point;[et,Le]=Ar(et,Le,Ue,w),[ot,Xe]=Ar(ot,Xe,st,w);const Mt=V(Re,rt,(ot-et)*X,Xe-Le);if(u.flipState=Mt&&Mt.needsFlipping?Jn.flipRequired:Jn.flipNotRequired,Mt)return Mt}Ve(Oe.first);for(let et=pe+1;et<pe+we-1;et++){const Le=Ze(re*E.getoffsetX(et),ne,fe,l,z,Z,be,me,Me,C,y,W,K,!1,!1,Q,B,H);if(!Le)return R.length-=4*(et-pe),{notEnoughRoom:!0};Ve(Le)}Ve(Oe.last)}else{if(f&&!l){const et=Ar(Z.x,Z.y,0,g),Le=me+be+1,Ue=new o.Point(C.getx(Le),C.gety(Le)),ot=Ar(Ue.x,Ue.y,0,g),Xe=ot[3]>0?ot:Ce(Z,Ue,et,1,g,void 0,Q,B.canonical),st=V(Re,rt,(Xe[0]-et[0])*X,Xe[1]-et[1]);if(u.flipState=st&&st.needsFlipping?Jn.flipRequired:Jn.flipNotRequired,st)return st}const Oe=Ze(re*E.getoffsetX(pe),ne,fe,l,z,Z,be,me,Me,C,y,W,K,!1,!1,Q,B,H);if(!Oe)return{notEnoughRoom:!0};Ve(Oe)}return{}}function Ee(u,n,l,f,g){const{x:y,y:w,z:E}=f.projectTilePoint(u.x,u.y,n);if(!g)return Ar(y,w,E,l);const[C,R,L]=g(u);return Ar(y+C,w+R,E+L,l)}function Ce(u,n,l,f,g,y,w,E){const C=Ee(u.sub(n)._unit()._add(u),E,g,w,y);return o.sub(C,l,C),o.normalize(C,C),o.scaleAndAdd(C,l,C,f)}function Ze(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K,Q,B){const H=f?u-n:u+n;let re=H>0?1:-1,ne=0;f&&(re*=-1,ne=Math.PI),re<0&&(ne+=Math.PI);let fe=E+w+(re>0?0:1)|0,me=g,pe=g,we=0,be=0;const Re=Math.abs(H),rt=[],Me=[];let Ve=y,Oe=Ve;const et=()=>Ce(Oe,Ve,pe,Re-we+1,L,Z,K,Q.canonical);for(;we+be<=Re;){if(fe+=re,fe<E||fe>=C)return null;if(pe=me,Oe=Ve,rt.push(pe),W&&Me.push(Oe),Ve=new o.Point(R.getx(fe),R.gety(fe)),me=z[fe],!me){const kt=Ee(Ve,Q.canonical,L,K,Z);me=kt[3]>0?z[fe]=kt:et()}we+=be,be=o.distance(pe,me)}X&&Z&&(z[fe]&&(me=et(),be=o.distance(pe,me)),z[fe]=me);const Le=(Re-we)/be,Ue=Ve.sub(Oe)._mult(Le)._add(Oe),ot=o.sub([],me,pe),Xe=o.scaleAndAdd([],pe,ot,Le);let st=[0,0,1],Mt=ot[0],Ot=ot[1];if(B&&(st=K.upVector(Q.canonical,Ue.x,Ue.y),st[0]!==0||st[1]!==0||st[2]!==1)){const kt=[st[2],0,-st[0]],Yt=o.cross([],st,kt);o.normalize(kt,kt),o.normalize(Yt,Yt),Mt=o.dot(ot,kt),Ot=o.dot(ot,Yt)}if(l){const kt=o.cross([],st,ot);o.normalize(kt,kt),o.scaleAndAdd(Xe,Xe,kt,l*re)}const wt=ne+Math.atan2(Ot,Mt);return rt.push(Xe),W&&Me.push(Ue),{point:Xe,angle:wt,path:rt,tilePath:Me,up:st}}function _t(u,n){const l=n.length,f=l+4*u;n.resize(f),n.float32.fill(-1/0,4*l,4*f)}function bt(u,n,l){const f=n[0],g=n[1];return u[0]=l[0]*f+l[4]*g+l[12],u[1]=l[1]*f+l[5]*g+l[13],u[3]=l[3]*f+l[7]*g+l[15],u}const ar=100;class Qn{constructor(n,l,f=new Gi(n.width+200,n.height+200,25),g=new Gi(n.width+200,n.height+200,25)){this.transform=n,this.grid=f,this.ignoredGrid=g,this.pitchfactor=Math.cos(n._pitch)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+ar,this.screenBottomBoundary=n.height+ar,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.fogState=l}placeCollisionBox(n,l,f,g,y,w,E,C){let R=f.projectedAnchorX,L=f.projectedAnchorY,z=f.projectedAnchorZ;const Z=f.elevation,W=f.tileID,X=n.getProjection();if(Z&&W){const[me,pe,we]=X.upVector(W.canonical,f.tileAnchorX,f.tileAnchorY),be=X.upVectorScale(W.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;R+=me*Z*be,L+=pe*Z*be,z+=we*Z*be}const K=this.projectAndGetPerspectiveRatio(E,R,L,z,f.tileID,X.name==="globe"||!!Z||this.transform.pitch>0,X),Q=w*K.perspectiveRatio,B=(f.x1*l+g.x-f.padding)*Q+K.point.x,H=(f.y1*l+g.y-f.padding)*Q+K.point.y,re=(f.x2*l+g.x+f.padding)*Q+K.point.x,ne=(f.y2*l+g.y+f.padding)*Q+K.point.y,fe=K.perspectiveRatio<=.55||K.occluded;return!this.isInsideGrid(B,H,re,ne)||!y&&this.grid.hitTest(B,H,re,ne,C)||fe?{box:[],offscreen:!1,occluded:K.occluded}:{box:[B,H,re,ne],offscreen:this.isOffscreen(B,H,re,ne),occluded:!1}}placeCollisionCircles(n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K){const Q=[],B=this.transform.elevation,H=n.getProjection(),re=B?B.getAtTileOffsetFunc(K,this.transform.center.lat,this.transform.worldSize,H):null,ne=new o.Point(f.tileAnchorX,f.tileAnchorY);let{x:fe,y:me,z:pe}=H.projectTilePoint(ne.x,ne.y,K.canonical);if(re){const[Ue,ot,Xe]=re(ne);fe+=Ue,me+=ot,pe+=Xe}const we=H.name==="globe",be=this.projectAndGetPerspectiveRatio(E,fe,me,pe,K,we||!!B||this.transform.pitch>0,H),{perspectiveRatio:Re}=be,rt=(z?w/Re:w*Re)/o.ONE_EM,Me=Ar(fe,me,pe,C),Ve=be.signedDistanceFromCamera>0?k(rt,y,f.lineOffsetX*rt,f.lineOffsetY*rt,!1,Me,ne,f,g,C,{},B&&!z?re:null,z&&!!B,H,K,z):null;let Oe=!1,et=!1,Le=!0;if(Ve&&!be.occluded){const Ue=.5*W*Re+X,ot=new o.Point(-100,-100),Xe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),st=new Hs,{first:Mt,last:Ot}=Ve,wt=Mt.path.length;let kt=[];for(let At=wt-1;At>=1;At--)kt.push(Mt.path[At]);for(let At=1;At<Ot.path.length;At++)kt.push(Ot.path[At]);const Yt=2.5*Ue;R&&(kt=kt.map(([At,lr,cr],ur)=>(re&&!we&&(cr=re(ur<wt-1?Mt.tilePath[wt-1-ur]:Ot.tilePath[ur-wt+2])[2]),Ar(At,lr,cr,R))),kt.some(At=>At[3]<=0)&&(kt=[]));let Xt=[];if(kt.length>0){let At=1/0,lr=-1/0,cr=1/0,ur=-1/0;for(const hr of kt)At=Math.min(At,hr[0]),cr=Math.min(cr,hr[1]),lr=Math.max(lr,hr[0]),ur=Math.max(ur,hr[1]);lr>=ot.x&&At<=Xe.x&&ur>=ot.y&&cr<=Xe.y&&(Xt=[kt.map(hr=>new o.Point(hr[0],hr[1]))],(At<ot.x||lr>Xe.x||cr<ot.y||ur>Xe.y)&&(Xt=o.clipLine(Xt,ot.x,ot.y,Xe.x,Xe.y)))}for(const At of Xt){st.reset(At,.25*Ue);let lr=0;lr=st.length<=.5*Ue?1:Math.ceil(st.paddedLength/Yt)+1;for(let cr=0;cr<lr;cr++){const ur=cr/Math.max(lr-1,1),hr=st.lerp(ur),gn=hr.x+ar,sn=hr.y+ar;Q.push(gn,sn,Ue,0);const ii=gn-Ue,Mi=sn-Ue,Mr=gn+Ue,fr=sn+Ue;if(Le=Le&&this.isOffscreen(ii,Mi,Mr,fr),et=et||this.isInsideGrid(ii,Mi,Mr,fr),!l&&this.grid.hitTestCircle(gn,sn,Ue,Z)&&(Oe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Oe,occluded:!1}}}}return{circles:!L&&Oe||!et?[]:Q,offscreen:Le,collisionDetected:Oe,occluded:be.occluded}}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let f=1/0,g=1/0,y=-1/0,w=-1/0;for(const L of n){const z=new o.Point(L.x+ar,L.y+ar);f=Math.min(f,z.x),g=Math.min(g,z.y),y=Math.max(y,z.x),w=Math.max(w,z.y),l.push(z)}const E=this.grid.query(f,g,y,w).concat(this.ignoredGrid.query(f,g,y,w)),C={},R={};for(const L of E){const z=L.key;if(C[z.bucketInstanceId]===void 0&&(C[z.bucketInstanceId]={}),C[z.bucketInstanceId][z.featureIndex])continue;const Z=[new o.Point(L.x1,L.y1),new o.Point(L.x2,L.y1),new o.Point(L.x2,L.y2),new o.Point(L.x1,L.y2)];o.polygonIntersectsPolygon(l,Z)&&(C[z.bucketInstanceId][z.featureIndex]=!0,R[z.bucketInstanceId]===void 0&&(R[z.bucketInstanceId]=[]),R[z.bucketInstanceId].push(z.featureIndex))}return R}insertCollisionBox(n,l,f,g,y){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:y},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,f,g,y){const w=l?this.ignoredGrid:this.grid,E={bucketInstanceId:f,featureIndex:g,collisionGroupID:y};for(let C=0;C<n.length;C+=4)w.insertCircle(E,n[C],n[C+1],n[C+2])}projectAndGetPerspectiveRatio(n,l,f,g,y,w,E){const C=[l,f,g,1];let R=!1;g||this.transform.pitch>0?(o.transformMat4$1(C,C,n),this.fogState&&y&&E.name!=="globe"&&(R=function(Z,W,X,K,Q,B){const H=B.calculateFogTileMatrix(Q),re=[W,X,K];return o.transformMat4(re,re,H),Tt(Z,re,B.pitch,B._fov)}(this.fogState,l,f,g,y.toUnwrapped(),this.transform)>.9)):bt(C,C,n);const L=C[3];return{point:new o.Point((C[0]/L+1)/2*this.transform.width+ar,(-C[1]/L+1)/2*this.transform.height+ar),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(E)/L*.5,1.5),signedDistanceFromCamera:L,occluded:w&&C[2]>L||R}}isOffscreen(n,l,f,g){return f<ar||n>=this.screenRightBoundary||g<ar||l>this.screenBottomBoundary}isInsideGrid(n,l,f,g){return f>=0&&n<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=o.identity([]);return o.translate(n,n,[-100,-100,0]),n}}function ko(u,n,l){const f=n.createTileMatrix(u,u.worldSize,l.toUnwrapped());return o.multiply(new Float32Array(16),u.projMatrix,f)}function ei(u,n,l){if(n.projection.name===l.projection.name)return u.projMatrix;const f=l.clone();return f.setProjection(n.projection),ko(f,n.getProjection(),u)}function Ir(u,n,l){return n.name===l.projection.name?u.projMatrix:ko(l,n,u)}class eu{constructor(n,l,f,g){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Zi{constructor(n,l,f,g,y,w=!1){this.text=new eu(n?n.text:null,l,f,y),this.icon=new eu(n?n.icon:null,l,g,y),this.clipped=w}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ws{constructor(n,l,f,g=!1){this.text=n,this.icon=l,this.skipFade=f,this.clipped=g}}class Ks{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class dd{constructor(n,l,f,g,y){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=y}}class tu{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[n]}}function Xs(u,n,l,f,g){const{horizontalAlign:y,verticalAlign:w}=o.getAnchorAlignment(u),E=-(y-.5)*n,C=-(w-.5)*l,R=o.evaluateVariableOffset(u,f);return new o.Point(E+R[0]*g,C+R[1]*g)}function Ys(u,n,l,f,g){const y=new o.Point(u,n);return l&&y._rotate(f?g:-g),y}class qa{constructor(n,l,f,g,y){this.transform=n.clone(),this.projection=n.projection.name,this.collisionIndex=new Qn(this.transform,y),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new tu(f),this.collisionCircleArrays={},this.prevPlacement=g,g&&(g.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(n,l,f,g){const y=f.getBucket(l),w=f.latestFeatureIndex;if(!y||!w||l.id!==y.layerIds[0])return;const E=y.layers[0].layout,C=f.collisionBoxArray,R=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),L=f.tileSize/o.EXTENT,z=f.tileID.toUnwrapped();this.transform.setProjection(y.projection);const Z=(W=f.tileID,X=y.getProjection(),K=this.transform,X.name===this.projection?K.calculateProjMatrix(W.toUnwrapped()):ko(K,X,W));var W,X,K;const Q=E.get("text-pitch-alignment")==="map",B=E.get("text-rotation-alignment")==="map";l.compileFilter();const H=l.dynamicFilter(),re=l.dynamicFilterNeedsFeature(),ne=this.transform.calculatePixelsToTileUnitsMatrix(f),fe=Tn(Z,f.tileID.canonical,Q,B,this.transform,y.getProjection(),ne);let me=null;if(Q){const be=dr(Z,f.tileID.canonical,Q,B,this.transform,y.getProjection(),ne);me=o.multiply([],this.transform.labelPlaneMatrix,be)}let pe=null;H&&f.latestFeatureIndex&&(pe={unwrappedTileID:z,dynamicFilter:H,dynamicFilterNeedsFeature:re,featureIndex:f.latestFeatureIndex}),this.retainedQueryData[y.bucketInstanceId]=new dd(y.bucketInstanceId,w,y.sourceLayerIndex,y.index,f.tileID);const we={bucket:y,layout:E,posMatrix:Z,textLabelPlaneMatrix:fe,labelToScreenMatrix:me,clippingData:pe,scale:R,textPixelRatio:L,holdingForFade:f.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(y.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(g)for(const be of y.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:rt,symbolInstanceEnd:Me}=be;n.push({sortKey:Re,symbolInstanceStart:rt,symbolInstanceEnd:Me,parameters:we})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:we})}attemptAnchorPlacement(n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K,Q,B,H){const{textOffset0:re,textOffset1:ne,crossTileID:fe}=Z,me=[re,ne],pe=Xs(n,f,g,me,y),we=this.collisionIndex.placeCollisionBox(X,y,l,Ys(pe.x,pe.y,w,E,this.transform.angle),z,C,R,L.predicate);if(Q){const be=X.getSymbolInstanceIconSize(H,this.transform.zoom,Z.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(X,be,Q,Ys(pe.x,pe.y,w,E,this.transform.angle),z,C,R,L.predicate).box.length===0)return}if(we.box.length>0){let be;return this.prevPlacement&&this.prevPlacement.variableOffsets[fe]&&this.prevPlacement.placements[fe]&&this.prevPlacement.placements[fe].text&&(be=this.prevPlacement.variableOffsets[fe].anchor),this.variableOffsets[fe]={textOffset:me,width:f,height:g,anchor:n,textScale:y,prevAnchor:be},this.markUsedJustification(X,n,Z,K),X.allowVerticalPlacement&&(this.markUsedOrientation(X,K,Z),this.placedOrientations[fe]=K),{shift:pe,placedGlyphBoxes:we}}}placeLayerBucketPart(n,l,f,g){const{bucket:y,layout:w,posMatrix:E,textLabelPlaneMatrix:C,labelToScreenMatrix:R,clippingData:L,textPixelRatio:z,holdingForFade:Z,collisionBoxArray:W,partiallyEvaluatedTextSize:X,partiallyEvaluatedIconSize:K,collisionGroup:Q}=n.parameters,B=w.get("text-optional"),H=w.get("icon-optional"),re=w.get("text-allow-overlap"),ne=w.get("icon-allow-overlap"),fe=w.get("text-rotation-alignment")==="map",me=w.get("text-pitch-alignment")==="map",pe=w.get("icon-text-fit")!=="none",we=w.get("symbol-z-order")==="viewport-y";this.transform.setProjection(y.projection);let be=re&&(ne||!y.hasIconData()||H),Re=ne&&(re||!y.hasTextData()||B);!y.collisionArrays&&W&&y.deserializeCollisionBoxes(W),f&&g&&y.updateCollisionDebugBuffers(this.transform.zoom,W);const rt=(Me,Ve,Oe)=>{const{crossTileID:et,numVerticalGlyphVertices:Le}=Me;if(L){const Mr={zoom:this.transform.zoom,pitch:this.transform.pitch};let fr=null;if(L.dynamicFilterNeedsFeature){const ir=this.retainedQueryData[y.bucketInstanceId];fr=L.featureIndex.loadFeature({featureIndex:Me.featureIndex,bucketIndex:ir.bucketIndex,sourceLayerIndex:ir.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,L.dynamicFilter)(Mr,fr,this.retainedQueryData[y.bucketInstanceId].tileID.canonical,new o.Point(Me.tileAnchorX,Me.tileAnchorY),this.transform.calculateDistanceTileData(L.unwrappedTileID)))return this.placements[et]=new Ws(!1,!1,!1,!0),void l.add(et)}if(l.has(et))return;if(Z)return void(this.placements[et]=new Ws(!1,!1,!1));let Ue=!1,ot=!1,Xe=!0,st=!1,Mt=!1,Ot=null,wt={box:null,offscreen:null,occluded:null},kt={box:null,offscreen:null,occluded:null},Yt=null,Xt=null,At=null,lr=0,cr=0,ur=0;Oe.textFeatureIndex?lr=Oe.textFeatureIndex:Me.useRuntimeCollisionCircles&&(lr=Me.featureIndex),Oe.verticalTextFeatureIndex&&(cr=Oe.verticalTextFeatureIndex);const hr=Mr=>{Mr.tileID=this.retainedQueryData[y.bucketInstanceId].tileID;const fr=this.transform.elevation;(fr||Mr.elevation)&&(Mr.elevation=fr?fr.getAtTileOffset(Mr.tileID,Mr.tileAnchorX,Mr.tileAnchorY):0)},gn=Oe.textBox;if(gn){hr(gn);const Mr=ir=>{let Zr=o.WritingMode.horizontal;if(y.allowVerticalPlacement&&!ir&&this.prevPlacement){const Sn=this.prevPlacement.placedOrientations[et];Sn&&(this.placedOrientations[et]=Sn,Zr=Sn,this.markUsedOrientation(y,Zr,Me))}return Zr},fr=(ir,Zr)=>{if(y.allowVerticalPlacement&&Le>0&&Oe.verticalTextBox){for(const Sn of y.writingModes)if(Sn===o.WritingMode.vertical?(wt=Zr(),kt=wt):wt=ir(),wt&&wt.box&&wt.box.length)break}else wt=ir()};if(w.get("text-variable-anchor")){let ir=w.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[et]){const Cr=this.prevPlacement.variableOffsets[et];ir.indexOf(Cr.anchor)>0&&(ir=ir.filter(On=>On!==Cr.anchor),ir.unshift(Cr.anchor))}const Zr=(Cr,On,vl)=>{const Uo=y.getSymbolInstanceTextSize(X,Me,this.transform.zoom,Ve),_a=(Cr.x2-Cr.x1)*Uo+2*Cr.padding,Ji=(Cr.y2-Cr.y1)*Uo+2*Cr.padding,yo=pe&&!ne?On:null;yo&&hr(yo);let Vo={box:[],offscreen:!1,occluded:!1};const xl=re?2*ir.length:ir.length;for(let ya=0;ya<xl;++ya){const Qd=this.attemptAnchorPlacement(ir[ya%ir.length],Cr,_a,Ji,Uo,fe,me,z,E,Q,ya>=ir.length,Me,Ve,y,vl,yo,X,K);if(Qd&&(Vo=Qd.placedGlyphBoxes,Vo&&Vo.box&&Vo.box.length)){Ue=!0,Ot=Qd.shift;break}}return Vo};fr(()=>Zr(gn,Oe.iconBox,o.WritingMode.horizontal),()=>{const Cr=Oe.verticalTextBox;return Cr&&hr(Cr),y.allowVerticalPlacement&&!(wt&&wt.box&&wt.box.length)&&Le>0&&Cr?Zr(Cr,Oe.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),wt&&(Ue=wt.box,Xe=wt.offscreen,st=wt.occluded);const Sn=Mr(!(!wt||!wt.box));if(!Ue&&this.prevPlacement){const Cr=this.prevPlacement.variableOffsets[et];Cr&&(this.variableOffsets[et]=Cr,this.markUsedJustification(y,Cr.anchor,Me,Sn))}}else{const ir=(Zr,Sn)=>{const Cr=y.getSymbolInstanceTextSize(X,Me,this.transform.zoom,Ve),On=this.collisionIndex.placeCollisionBox(y,Cr,Zr,new o.Point(0,0),re,z,E,Q.predicate);return On&&On.box&&On.box.length&&(this.markUsedOrientation(y,Sn,Me),this.placedOrientations[et]=Sn),On};fr(()=>ir(gn,o.WritingMode.horizontal),()=>{const Zr=Oe.verticalTextBox;return y.allowVerticalPlacement&&Le>0&&Zr?(hr(Zr),ir(Zr,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Mr(!!(wt&&wt.box&&wt.box.length))}}if(Yt=wt,Ue=Yt&&Yt.box&&Yt.box.length>0,Xe=Yt&&Yt.offscreen,st=Yt&&Yt.occluded,Me.useRuntimeCollisionCircles){const Mr=y.text.placedSymbolArray.get(Me.centerJustifiedTextSymbolIndex>=0?Me.centerJustifiedTextSymbolIndex:Me.verticalPlacedTextSymbolIndex),fr=o.evaluateSizeForFeature(y.textSizeData,X,Mr),ir=w.get("text-padding");Xt=this.collisionIndex.placeCollisionCircles(y,re,Mr,y.lineVertexArray,y.glyphOffsetArray,fr,E,C,R,f,me,Q.predicate,Me.collisionCircleDiameter*fr/o.ONE_EM,ir,this.retainedQueryData[y.bucketInstanceId].tileID),Ue=re||Xt.circles.length>0&&!Xt.collisionDetected,Xe=Xe&&Xt.offscreen,st=Xt.occluded}if(Oe.iconFeatureIndex&&(ur=Oe.iconFeatureIndex),Oe.iconBox){const Mr=fr=>{hr(fr);const ir=pe&&Ot?Ys(Ot.x,Ot.y,fe,me,this.transform.angle):new o.Point(0,0),Zr=y.getSymbolInstanceIconSize(K,this.transform.zoom,Me.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(y,Zr,fr,ir,ne,z,E,Q.predicate)};kt&&kt.box&&kt.box.length&&Oe.verticalIconBox?(At=Mr(Oe.verticalIconBox),ot=At.box.length>0):(At=Mr(Oe.iconBox),ot=At.box.length>0),Xe=Xe&&At.offscreen,Mt=At.occluded}const sn=B||Me.numHorizontalGlyphVertices===0&&Le===0,ii=H||Me.numIconVertices===0;if(sn||ii?ii?sn||(ot=ot&&Ue):Ue=ot&&Ue:ot=Ue=ot&&Ue,Ue&&Yt&&Yt.box&&this.collisionIndex.insertCollisionBox(Yt.box,w.get("text-ignore-placement"),y.bucketInstanceId,kt&&kt.box&&cr?cr:lr,Q.ID),ot&&At&&this.collisionIndex.insertCollisionBox(At.box,w.get("icon-ignore-placement"),y.bucketInstanceId,ur,Q.ID),Xt&&(Ue&&this.collisionIndex.insertCollisionCircles(Xt.circles,w.get("text-ignore-placement"),y.bucketInstanceId,lr,Q.ID),f)){const Mr=y.bucketInstanceId;let fr=this.collisionCircleArrays[Mr];fr===void 0&&(fr=this.collisionCircleArrays[Mr]=new Ks);for(let ir=0;ir<Xt.circles.length;ir+=4)fr.circles.push(Xt.circles[ir+0]),fr.circles.push(Xt.circles[ir+1]),fr.circles.push(Xt.circles[ir+2]),fr.circles.push(Xt.collisionDetected?1:0)}const Mi=y.projection.name!=="globe";be=be&&(Mi||!st),Re=Re&&(Mi||!Mt),this.placements[et]=new Ws(Ue||be,ot||Re,Xe||y.justReloaded),l.add(et)};if(we){const Me=y.getSortedSymbolIndexes(this.transform.angle);for(let Ve=Me.length-1;Ve>=0;--Ve){const Oe=Me[Ve];rt(y.symbolInstances.get(Oe),Oe,y.collisionArrays[Oe])}}else for(let Me=n.symbolInstanceStart;Me<n.symbolInstanceEnd;Me++)rt(y.symbolInstances.get(Me),Me,y.collisionArrays[Me]);if(f&&y.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[y.bucketInstanceId];o.invert(Me.invProjMatrix,E),Me.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(n,l,f,g){const{leftJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:w,rightJustifiedTextSymbolIndex:E,verticalPlacedTextSymbolIndex:C,crossTileID:R}=f,L=o.getAnchorJustification(l),z=g===o.WritingMode.vertical?C:L==="left"?y:L==="center"?w:L==="right"?E:-1;y>=0&&(n.text.placedSymbolArray.get(y).crossTileID=z>=0&&y!==z?0:R),w>=0&&(n.text.placedSymbolArray.get(w).crossTileID=z>=0&&w!==z?0:R),E>=0&&(n.text.placedSymbolArray.get(E).crossTileID=z>=0&&E!==z?0:R),C>=0&&(n.text.placedSymbolArray.get(C).crossTileID=z>=0&&C!==z?0:R)}markUsedOrientation(n,l,f){const g=l===o.WritingMode.horizontal||l===o.WritingMode.horizontalOnly?l:0,y=l===o.WritingMode.vertical?l:0,{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:C,verticalPlacedTextSymbolIndex:R}=f,L=n.text.placedSymbolArray;w>=0&&(L.get(w).placedOrientation=g),E>=0&&(L.get(E).placedOrientation=g),C>=0&&(L.get(C).placedOrientation=g),R>=0&&(L.get(R).placedOrientation=y)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(n):1,y=l?l.opacities:{},w=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(const C in this.placements){const R=this.placements[C],L=y[C];L?(this.opacities[C]=new Zi(L,g,R.text,R.icon,null,R.clipped),f=f||R.text!==L.text.placed||R.icon!==L.icon.placed):(this.opacities[C]=new Zi(null,g,R.text,R.icon,R.skipFade,R.clipped),f=f||R.text||R.icon)}for(const C in y){const R=y[C];if(!this.opacities[C]){const L=new Zi(R,g,!1,!1);L.isHidden()||(this.opacities[C]=L,f=f||R.text.placed||R.icon.placed)}}for(const C in w)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=w[C]);for(const C in E)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=E[C]);f?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const f=new Set;for(const g of l){const y=g.getBucket(n);y&&g.latestFeatureIndex&&n.id===y.layerIds[0]&&this.updateBucketOpacities(y,f,g.collisionBoxArray)}}updateBucketOpacities(n,l,f){n.hasTextData()&&n.text.opacityVertexArray.clear(),n.hasIconData()&&n.icon.opacityVertexArray.clear(),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const g=n.layers[0].layout,y=!!n.layers[0].dynamicFilter(),w=new Zi(null,0,!1,!1,!0),E=g.get("text-allow-overlap"),C=g.get("icon-allow-overlap"),R=g.get("text-variable-anchor"),L=g.get("text-rotation-alignment")==="map",z=g.get("text-pitch-alignment")==="map",Z=g.get("icon-text-fit")!=="none",W=new Zi(null,0,E&&(C||!n.hasIconData()||g.get("icon-optional")),C&&(E||!n.hasTextData()||g.get("text-optional")),!0);!n.collisionArrays&&f&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(f);const X=(Q,B,H)=>{for(let re=0;re<B/4;re++)Q.opacityVertexArray.emplaceBack(H)};let K=0;for(let Q=0;Q<n.symbolInstances.length;Q++){const B=n.symbolInstances.get(Q),{numHorizontalGlyphVertices:H,numVerticalGlyphVertices:re,crossTileID:ne,numIconVertices:fe}=B,me=l.has(ne);let pe=this.opacities[ne];me?pe=w:pe||(pe=W,this.opacities[ne]=pe),l.add(ne);const we=H>0||re>0,be=fe>0,Re=this.placedOrientations[ne],rt=Re===o.WritingMode.vertical,Me=Re===o.WritingMode.horizontal||Re===o.WritingMode.horizontalOnly;if(!we&&!be||pe.isHidden()||K++,we){const Ve=Js(pe.text);X(n.text,H,rt?Or:Ve),X(n.text,re,Me?Or:Ve);const Oe=pe.text.isHidden(),{leftJustifiedTextSymbolIndex:et,centerJustifiedTextSymbolIndex:Le,rightJustifiedTextSymbolIndex:Ue,verticalPlacedTextSymbolIndex:ot}=B,Xe=n.text.placedSymbolArray,st=Oe||rt?1:0;et>=0&&(Xe.get(et).hidden=st),Le>=0&&(Xe.get(Le).hidden=st),Ue>=0&&(Xe.get(Ue).hidden=st),ot>=0&&(Xe.get(ot).hidden=Oe||Me?1:0);const Mt=this.variableOffsets[ne];Mt&&this.markUsedJustification(n,Mt.anchor,B,Re);const Ot=this.placedOrientations[ne];Ot&&(this.markUsedJustification(n,"left",B,Ot),this.markUsedOrientation(n,Ot,B))}if(be){const Ve=Js(pe.icon),{placedIconSymbolIndex:Oe,verticalPlacedIconSymbolIndex:et}=B,Le=n.icon.placedSymbolArray,Ue=pe.icon.isHidden()?1:0;Oe>=0&&(X(n.icon,fe,rt?Or:Ve),Le.get(Oe).hidden=Ue),et>=0&&(X(n.icon,B.numVerticalIconVertices,Me?Or:Ve),Le.get(et).hidden=Ue)}if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Ve=n.collisionArrays[Q];if(Ve){let Oe=new o.Point(0,0),et=!0;if(Ve.textBox||Ve.verticalTextBox){if(R){const Ue=this.variableOffsets[ne];Ue?(Oe=Xs(Ue.anchor,Ue.width,Ue.height,Ue.textOffset,Ue.textScale),L&&Oe._rotate(z?this.transform.angle:-this.transform.angle)):et=!1}y&&(et=!pe.clipped),Ve.textBox&&ss(n.textCollisionBox.collisionVertexArray,pe.text.placed,!et||rt,Oe.x,Oe.y),Ve.verticalTextBox&&ss(n.textCollisionBox.collisionVertexArray,pe.text.placed,!et||Me,Oe.x,Oe.y)}const Le=et&&!!(!Me&&Ve.verticalIconBox);Ve.iconBox&&ss(n.iconCollisionBox.collisionVertexArray,pe.icon.placed,Le,Z?Oe.x:0,Z?Oe.y:0),Ve.verticalIconBox&&ss(n.iconCollisionBox.collisionVertexArray,pe.icon.placed,!Le,Z?Oe.x:0,Z?Oe.y:0)}}}if(n.fullyClipped=K===0,n.sortFeatures(this.transform.angle),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.bucketInstanceId in this.collisionCircleArrays){const Q=this.collisionCircleArrays[n.bucketInstanceId];n.placementInvProjMatrix=Q.invProjMatrix,n.placementViewportMatrix=Q.viewportMatrix,n.collisionCircleArray=Q.circles,delete this.collisionCircleArrays[n.bucketInstanceId]}}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>n}setStale(){this.stale=!0}}function ss(u,n,l,f,g){u.emplaceBack(n?1:0,l?1:0,f||0,g||0),u.emplaceBack(n?1:0,l?1:0,f||0,g||0),u.emplaceBack(n?1:0,l?1:0,f||0,g||0),u.emplaceBack(n?1:0,l?1:0,f||0,g||0)}const kn=Math.pow(2,25),Fr=Math.pow(2,24),cd=Math.pow(2,17),ud=Math.pow(2,16),Dn=Math.pow(2,9),ti=Math.pow(2,8),ru=Math.pow(2,1);function Js(u){if(u.opacity===0&&!u.placed)return 0;if(u.opacity===1&&u.placed)return 4294967295;const n=u.placed?1:0,l=Math.floor(127*u.opacity);return l*kn+n*Fr+l*cd+n*ud+l*Dn+n*ti+l*ru+n}const Or=0;class Qs{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&n.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(n,l,f,g,y){const w=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(w,g,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((E,C)=>E.sortKey-C.sortKey));this._currentPartIndex<w.length;){const E=w[this._currentPartIndex];if(l.placeLayerBucketPart(E,this._seenCrossTileIDs,f,E.symbolInstanceStart===0),this._currentPartIndex++,y())return!0}return!1}}class hd{constructor(n,l,f,g,y,w,E,C){this.placement=new qa(n,y,w,E,C),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(n,l,f){const g=o.exported.now(),y=()=>{const w=o.exported.now()-g;return!this._forceFullPlacement&&w>2};for(;this._currentPlacementIndex>=0;){const w=l[n[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=E)&&(!w.maxzoom||w.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Qs(w)),this._inProgressLayer.continuePlacement(f[w.source],this.placement,this._showCollisionBoxes,w,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const Do=512/o.EXTENT/2;class cn{constructor(n,l,f){this.tileID=n,this.bucketInstanceId=f,this.index=new o.KDBush(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const g=n.canonical.x*o.EXTENT,y=n.canonical.y*o.EXTENT;for(let w=0;w<l.length;w++){const{key:E,crossTileID:C,tileAnchorX:R,tileAnchorY:L}=l.get(w),z=Math.floor((g+R)*Do),Z=Math.floor((y+L)*Do);this.index.add(z,Z),this.keys.push(E),this.crossTileIDs.push(C)}this.index.finish()}findMatches(n,l,f){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),y=Do/Math.pow(2,l.canonical.z-this.tileID.canonical.z),w=l.canonical.x*o.EXTENT,E=l.canonical.y*o.EXTENT;for(let C=0;C<n.length;C++){const R=n.get(C);if(R.crossTileID)continue;const{key:L,tileAnchorX:z,tileAnchorY:Z}=R,W=Math.floor((w+z)*y),X=Math.floor((E+Z)*y),K=this.index.range(W-g,X-g,W+g,X+g);for(const Q of K){const B=this.crossTileIDs[Q];if(this.keys[Q]===L&&!f.has(B)){f.add(B),R.crossTileID=B;break}}}}}class fd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class pd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const f in this.indexes){const g=this.indexes[f],y={};for(const w in g){const E=g[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),y[E.tileID.key]=E}this.indexes[f]=y}this.lng=n}addBucket(n,l,f){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let y=0;y<l.symbolInstances.length;y++)l.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]=new Set);const g=this.usedCrossTileIDs[n.overscaledZ];for(const y in this.indexes){const w=this.indexes[y];if(Number(y)>n.overscaledZ)for(const E in w){const C=w[E];C.tileID.isChildOf(n)&&C.findMatches(l.symbolInstances,n,g)}else{const E=w[n.scaledTo(Number(y)).key];E&&E.findMatches(l.symbolInstances,n,g)}}for(let y=0;y<l.symbolInstances.length;y++){const w=l.symbolInstances.get(y);w.crossTileID||(w.crossTileID=f.generate(),g.add(w.crossTileID))}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new cn(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const f of l.crossTileIDs)this.usedCrossTileIDs[n].delete(f)}removeStaleBuckets(n){let l=!1;for(const f in this.indexes){const g=this.indexes[f];for(const y in g)n[g[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[y]),delete g[y],l=!0)}return l}}class qi{constructor(){this.layerIndexes={},this.crossTileIDs=new fd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,f,g){let y=this.layerIndexes[n.id];y===void 0&&(y=this.layerIndexes[n.id]=new pd);let w=!1;const E={};g.name!=="globe"&&y.handleWrapJump(f);for(const C of l){const R=C.getBucket(n);R&&n.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(C.tileID,R,this.crossTileIDs)&&(w=!0),E[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(E)&&(w=!0),w}pruneUnusedLayers(n){const l={};n.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}const go=(u,n)=>o.emitValidationErrors(u,n&&n.filter(l=>l.identifier!=="source.canvas")),Ha=o.pick(Jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),p1=o.pick(Jt,["setCenter","setZoom","setBearing","setPitch"]),md={version:8,layers:[],sources:{}},as={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ci extends o.Evented{constructor(n,l={}){super(),this.map=n,this.dispatcher=new Qt(po(),this),this.imageManager=new Ct,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(n._requestManager,l.localFontFamily?o.LocalGlyphMode.all:l.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,l.localFontFamily||l.localIdeographFontFamily),this.crossTileSymbolIndex=new qi,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const f=this;this._rtlTextPluginCallback=Ci.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(y,w)=>{if(o.triggerPluginCompletionEvent(y),w&&w.every(E=>E))for(const E in f._sourceCaches){const C=f._sourceCaches[E],R=C.getSource().type;R!=="vector"&&R!=="geojson"||C.reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.getSource(g.sourceId);if(y&&y.vectorLayerIds)for(const w in this._layers){const E=this._layers[w];E.source===y.id&&this._validateLayer(E)}})}loadURL(n,l={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const f=typeof l.validate=="boolean"?l.validate:!o.isMapboxURL(n);n=this.map._requestManager.normalizeStyleURL(n,l.accessToken);const g=this.map._requestManager.transformRequest(n,o.ResourceType.Style);this._request=o.getJSON(g,(y,w)=>{this._request=null,y?this.fire(new o.ErrorEvent(y)):w&&this._load(w,f)})}loadJSON(n,l={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(n,l.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(md,!1)}_updateLayerCount(n,l){const f=l?1:-1;n.is3D()&&(this._num3DLayers+=f),n.type==="circle"&&(this._numCircleLayers+=f),n.type==="symbol"&&(this._numSymbolLayers+=f)}_load(n,l){if(l&&go(this,o.validateStyle(n)))return;this._loaded=!0,this.stylesheet=o.clone$1(n),this._updateMapProjection();for(const g in n.sources)this.addSource(g,n.sources[g],{validate:!1});this._changed=!1,n.sprite?this._loadSprite(n.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(n.glyphs);const f=qs(this.stylesheet.layers);this._order=f.map(g=>g.id),this._layers={},this._serializedLayers={};for(const g of f){const y=o.createStyleLayer(g);y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize(),this._updateLayerCount(y,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new _e(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(n){n?this.stylesheet.projection=n:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(n){this._spriteRequest=function(l,f,g){let y,w,E;const C=o.exported.devicePixelRatio>1?"@2x":"";let R=o.getJSON(f.transformRequest(f.normalizeSpriteURL(l,C,".json"),o.ResourceType.SpriteJSON),(Z,W)=>{R=null,E||(E=Z,y=W,z())}),L=o.getImage(f.transformRequest(f.normalizeSpriteURL(l,C,".png"),o.ResourceType.SpriteImage),(Z,W)=>{L=null,E||(E=Z,w=W,z())});function z(){if(E)g(E);else if(y&&w){const Z=o.exported.getImageData(w),W={};for(const X in y){const{width:K,height:Q,x:B,y:H,sdf:re,pixelRatio:ne,stretchX:fe,stretchY:me,content:pe}=y[X],we=new o.RGBAImage({width:K,height:Q});o.RGBAImage.copy(Z,we,{x:B,y:H},{x:0,y:0},{width:K,height:Q}),W[X]={data:we,pixelRatio:ne,sdf:re,stretchX:fe,stretchY:me,content:pe}}g(null,W)}}return{cancel(){R&&(R.cancel(),R=null),L&&(L.cancel(),L=null)}}}(n,this.map._requestManager,(l,f)=>{if(this._spriteRequest=null,l)this.fire(new o.ErrorEvent(l));else if(f)for(const g in f)this.imageManager.addImage(g,f[g]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(n){const l=this.getSource(n.source);if(!l)return;const f=n.sourceLayer;f&&(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${l.id}" as specified by style layer "${n.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this._sourceCaches)if(!this._sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(n){const l=[];for(const f of n){const g=this._layers[f];g.type!=="custom"&&l.push(g.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const n in this._sourceCaches)if(this._sourceCaches[n].hasTransition())return!0;for(const n in this._layers)if(this._layers[n].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(n){return!!this.terrain&&(typeof n.isLayerDraped=="function"?n.isLayerDraped():as[n.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(n){if(!this._loaded)return;const l=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(g.length||y.length)&&this._updateWorkerLayers(g,y);for(const w in this._updatedSources){const E=this._updatedSources[w];E==="reload"?this._reloadSource(w):E==="clear"&&this._clearSource(w)}this._updateTilesForChangedImages();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(n);this.light.updateTransitions(n),this.fog&&this.fog.updateTransitions(n),this._resetUpdates()}const f={};for(const g in this._sourceCaches){const y=this._sourceCaches[g];f[g]=y.used,y.used=!1}for(const g of this._order){const y=this._layers[g];if(y.recalculate(n,this._availableImages),!y.isHidden(n.zoom)){const E=this._getLayerSourceCache(y);E&&(E.used=!0)}const w=this.map.painter;if(w){const E=y.getProgramIds();if(!E)continue;const C=y.getProgramConfiguration(n.zoom);for(const R of E)w.useProgram(R,C)}}for(const g in f){const y=this._sourceCaches[g];f[g]!==y.used&&y.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y.getSource().id}))}this.light.recalculate(n),this.terrain&&this.terrain.recalculate(n),this.fog&&this.fog.recalculate(n),this.z=n.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),l&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(n),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),go(this,o.validateStyle(n)))return!1;(n=o.clone$1(n)).layers=qs(n.layers);const l=function(g,y){if(!g)return[{command:Jt.setStyle,args:[y]}];let w=[];try{if(!I(g.version,y.version))return[{command:Jt.setStyle,args:[y]}];I(g.center,y.center)||w.push({command:Jt.setCenter,args:[y.center]}),I(g.zoom,y.zoom)||w.push({command:Jt.setZoom,args:[y.zoom]}),I(g.bearing,y.bearing)||w.push({command:Jt.setBearing,args:[y.bearing]}),I(g.pitch,y.pitch)||w.push({command:Jt.setPitch,args:[y.pitch]}),I(g.sprite,y.sprite)||w.push({command:Jt.setSprite,args:[y.sprite]}),I(g.glyphs,y.glyphs)||w.push({command:Jt.setGlyphs,args:[y.glyphs]}),I(g.transition,y.transition)||w.push({command:Jt.setTransition,args:[y.transition]}),I(g.light,y.light)||w.push({command:Jt.setLight,args:[y.light]}),I(g.fog,y.fog)||w.push({command:Jt.setFog,args:[y.fog]}),I(g.projection,y.projection)||w.push({command:Jt.setProjection,args:[y.projection]});const E={},C=[];(function(z,Z,W,X){let K;for(K in Z=Z||{},z=z||{})z.hasOwnProperty(K)&&(Z.hasOwnProperty(K)||mo(K,W,X));for(K in Z){if(!Z.hasOwnProperty(K))continue;const Q=Z[K];z.hasOwnProperty(K)?I(z[K],Q)||(z[K].type==="geojson"&&Q.type==="geojson"&&Lo(z,Z,K)?W.push({command:Jt.setGeoJSONSourceData,args:[K,Q.data]}):is(K,Z,W,X)):Po(K,Z,W)}})(g.sources,y.sources,C,E);const R=[];g.layers&&g.layers.forEach(z=>{z.source&&E[z.source]?w.push({command:Jt.removeLayer,args:[z.id]}):R.push(z)});let L=g.terrain;L&&E[L.source]&&(w.push({command:Jt.setTerrain,args:[void 0]}),L=void 0),w=w.concat(C),I(L,y.terrain)||w.push({command:Jt.setTerrain,args:[y.terrain]}),function(z,Z,W){Z=Z||[];const X=(z=z||[]).map(Yn),K=Z.map(Yn),Q=z.reduce(nn,{}),B=Z.reduce(nn,{}),H=X.slice(),re=Object.create(null);let ne,fe,me,pe,we,be,Re;for(ne=0,fe=0;ne<X.length;ne++)me=X[ne],B.hasOwnProperty(me)?fe++:(W.push({command:Jt.removeLayer,args:[me]}),H.splice(H.indexOf(me,fe),1));for(ne=0,fe=0;ne<K.length;ne++)me=K[K.length-1-ne],H[H.length-1-ne]!==me&&(Q.hasOwnProperty(me)?(W.push({command:Jt.removeLayer,args:[me]}),H.splice(H.lastIndexOf(me,H.length-fe),1)):fe++,be=H[H.length-ne],W.push({command:Jt.addLayer,args:[B[me],be]}),H.splice(H.length-ne,0,me),re[me]=!0);for(ne=0;ne<K.length;ne++)if(me=K[ne],pe=Q[me],we=B[me],!re[me]&&!I(pe,we))if(I(pe.source,we.source)&&I(pe["source-layer"],we["source-layer"])&&I(pe.type,we.type)){for(Re in Zn(pe.layout,we.layout,W,me,null,Jt.setLayoutProperty),Zn(pe.paint,we.paint,W,me,null,Jt.setPaintProperty),I(pe.filter,we.filter)||W.push({command:Jt.setFilter,args:[me,we.filter]}),I(pe.minzoom,we.minzoom)&&I(pe.maxzoom,we.maxzoom)||W.push({command:Jt.setLayerZoomRange,args:[me,we.minzoom,we.maxzoom]}),pe)pe.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Zn(pe[Re],we[Re],W,me,Re.slice(6),Jt.setPaintProperty):I(pe[Re],we[Re])||W.push({command:Jt.setLayerProperty,args:[me,Re,we[Re]]}));for(Re in we)we.hasOwnProperty(Re)&&!pe.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Zn(pe[Re],we[Re],W,me,Re.slice(6),Jt.setPaintProperty):I(pe[Re],we[Re])||W.push({command:Jt.setLayerProperty,args:[me,Re,we[Re]]}))}else W.push({command:Jt.removeLayer,args:[me]}),be=H[H.lastIndexOf(me)+1],W.push({command:Jt.addLayer,args:[we,be]})}(R,y.layers,w)}catch(E){console.warn("Unable to compute style diff:",E),w=[{command:Jt.setStyle,args:[y]}]}return w}(this.serialize(),n).filter(g=>!(g.command in p1));if(l.length===0)return!1;const f=l.filter(g=>!(g.command in Ha));if(f.length>0)throw new Error(`Unimplemented: ${f.map(g=>g.command).join(", ")}.`);return l.forEach(g=>{g.command!=="setTransition"&&g.command!=="setProjection"&&this[g.command].apply(this,g.args)}),this.stylesheet=n,this._updateMapProjection(),!0}addImage(n,l){return this.getImage(n)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(n,l),this._afterImageUpdated(n),this)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){return this.getImage(n)?(this.imageManager.removeImage(n),this._afterImageUpdated(n),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(n,l,f={}){if(this._checkLoaded(),this.getSource(n)!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(o.validateSource,`sources.${n}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=Zt(n,l,this.dispatcher,this);g.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(n),source:g.serialize(),sourceId:n}));const y=w=>{const E=(w?"symbol:":"other:")+n,C=this._sourceCaches[E]=new o.SourceCache(E,g,w);(w?this._symbolSourceCaches:this._otherSourceCaches)[n]=C,C.style=this,C.onAdd(this.map)};y(!1),l.type!=="vector"&&l.type!=="geojson"||y(!0),g.onAdd&&g.onAdd(this.map),this._changed=!0}removeSource(n){this._checkLoaded();const l=this.getSource(n);if(!l)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===n)return this.fire(new o.ErrorEvent(new Error(`Source "${n}" cannot be removed while layer "${g}" is using it.`)));if(this.terrain&&this.terrain.get().source===n)return this.fire(new o.ErrorEvent(new Error(`Source "${n}" cannot be removed while terrain is using it.`)));const f=this._getSourceCaches(n);for(const g of f)delete this._sourceCaches[g.id],delete this._updatedSources[g.id],g.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g.getSource().id})),g.setEventedParent(null),g.clearTiles();return delete this._otherSourceCaches[n],delete this._symbolSourceCaches[n],l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(n,l){this._checkLoaded(),this.getSource(n).setData(l),this._changed=!0}getSource(n){const l=this._getSourceCache(n);return l&&l.getSource()}_getSources(){const n=[];for(const l in this._otherSourceCaches){const f=this._getSourceCache(l);f&&n.push(f.getSource())}return n}addLayer(n,l,f={}){this._checkLoaded();const g=n.id;if(this.getLayer(g))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${g}" already exists on this map`)));let y;if(n.type==="custom"){if(go(this,o.validateCustomStyleLayer(n)))return;y=o.createStyleLayer(n)}else{if(typeof n.source=="object"&&(this.addSource(g,n.source),n=o.clone$1(n),n=o.extend(n,{source:g})),this._validate(o.validateLayer,`layers.${g}`,n,{arrayIndex:-1},f))return;y=o.createStyleLayer(n),this._validateLayer(y),y.setEventedParent(this,{layer:{id:g}}),this._serializedLayers[y.id]=y.serialize(),this._updateLayerCount(y,!0)}const w=l?this._order.indexOf(l):this._order.length;if(l&&w===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`)));this._order.splice(w,0,g),this._layerOrderChanged=!0,this._layers[g]=y;const E=this._getLayerSourceCache(y);if(this._removedLayers[g]&&y.source&&E&&y.type!=="custom"){const C=this._removedLayers[g];delete this._removedLayers[g],C.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",E.pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const f=this._order.indexOf(n);this._order.splice(f,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`))):(this._order.splice(g,0,n),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be removed.`)));l.setEventedParent(null),this._updateLayerCount(l,!1);const f=this._order.indexOf(n);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(n){return this._layers[n]}hasLayer(n){return n in this._layers}hasLayerType(n){for(const l in this._layers)if(this._layers[l].type===n)return!0;return!1}setLayerZoomRange(n,l,f){this._checkLoaded();const g=this.getLayer(n);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,l,f={}){this._checkLoaded();const g=this.getLayer(n);if(g){if(!I(g.filter,l))return l==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(o.validateFilter,`layers.${g.id}.filter`,l,{layerType:g.type},f)||(g.filter=o.clone$1(l),this._updateLayer(g)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(n){const l=this.getLayer(n);return l&&o.clone$1(l.filter)}setLayoutProperty(n,l,f,g={}){this._checkLoaded();const y=this.getLayer(n);y?I(y.getLayoutProperty(l),f)||(y.setLayoutProperty(l,f,g),this._updateLayer(y)):this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(n,l){const f=this.getLayer(n);if(f)return f.getLayoutProperty(l);this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style.`)))}setPaintProperty(n,l,f,g={}){this._checkLoaded();const y=this.getLayer(n);y?I(y.getPaintProperty(l),f)||(y.setPaintProperty(l,f,g)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(n,l){const f=this.getLayer(n);return f&&f.getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const f=n.source,g=n.sourceLayer,y=this.getSource(f);if(!y)return void this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const w=y.type;if(w==="geojson"&&g)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(w==="vector"&&!g)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));n.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const E=this._getSourceCaches(f);for(const C of E)C.setFeatureState(g,n.id,l)}removeFeatureState(n,l){this._checkLoaded();const f=n.source,g=this.getSource(f);if(!g)return void this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const y=g.type,w=y==="vector"?n.sourceLayer:void 0;if(y==="vector"&&!w)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&typeof n.id!="string"&&typeof n.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const E=this._getSourceCaches(f);for(const C of E)C.removeFeatureState(w,n.id,l)}getFeatureState(n){this._checkLoaded();const l=n.source,f=n.sourceLayer,g=this.getSource(l);if(g){if(g.type!=="vector"||f)return n.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(l)[0].getFeatureState(f,n.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const n={};for(const l in this._sourceCaches){const f=this._sourceCaches[l].getSource();n[f.id]||(n[f.id]=f.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:n,layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0;const l=this._getLayerSourceCache(n);n.source&&!this._updatedSources[n.source]&&l&&l.getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",l.pause()),this._changed=!0,n.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(n){const l=w=>this._layers[w].type==="fill-extrusion",f={},g=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(l(E)){f[E]=w;for(const C of n){const R=C[E];if(R)for(const L of R)g.push(L)}}}g.sort((w,E)=>E.intersectionZ-w.intersectionZ);const y=[];for(let w=this._order.length-1;w>=0;w--){const E=this._order[w];if(l(E))for(let C=g.length-1;C>=0;C--){const R=g[C].feature;if(f[R.layer.id]<w)break;y.push(R),g.pop()}else for(const C of n){const R=C[E];if(R)for(const L of R)y.push(L.feature)}}return y}queryRenderedFeatures(n,l,f){l&&l.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const C of l.layers){const R=this._layers[C];if(!R)return this.fire(new o.ErrorEvent(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[R.source]=!0}}const y=[];l.availableImages=this._availableImages;const w=l&&l.layers?l.layers.some(C=>{const R=this.getLayer(C);return R&&R.is3D()}):this.has3DLayers(),E=bn.createFromScreenPoints(n,f);for(const C in this._sourceCaches){const R=this._sourceCaches[C].getSource().id;l.layers&&!g[R]||y.push(Sr(this._sourceCaches[C],this._layers,this._serializedLayers,E,l,f,w,!!this.map._showQueryGeometry))}return this.placement&&y.push(function(C,R,L,z,Z,W,X){const K={},Q=W.queryRenderedSymbols(z),B=[];for(const H of Object.keys(Q).map(Number))B.push(X[H]);B.sort(tn);for(const H of B){const re=H.featureIndex.lookupSymbolFeatures(Q[H.bucketInstanceId],R,H.bucketIndex,H.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,C);for(const ne in re){const fe=K[ne]=K[ne]||[],me=re[ne];me.sort((pe,we)=>{const be=H.featureSortOrder;if(be){const Re=be.indexOf(pe.featureIndex);return be.indexOf(we.featureIndex)-Re}return we.featureIndex-pe.featureIndex});for(const pe of me)fe.push(pe)}}for(const H in K)K[H].forEach(re=>{const ne=re.feature,fe=L(C[H]);if(!fe)return;const me=fe.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=me});return K}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),E.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(n,l){l&&l.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",l.filter,null,l);const f=this._getSourceCaches(n);let g=[];for(const y of f)g=g.concat(Rr(y,l));return g}addSourceType(n,l,f){return Ci.getSourceType(n)?f(new Error(`A source type called "${n}" already exists.`)):(Ci.setSourceType(n,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:n,url:l.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const w in n)if(!I(n[w],f[w])){g=!0;break}if(!g)return;const y=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(n,l),this.light.updateTransitions(y)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,l=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let f=n;if(l===1){if(typeof f.source=="object"){const g="terrain-dem-src";this.addSource(g,f.source),f=o.clone$1(f),f=o.extend(f,{source:g})}if(this._validate(o.validateTerrain,"terrain",f))return}if(!this.terrain||this.terrain&&l!==this.terrain.drapeRenderMode){if(!f)return;this._createTerrain(f,l)}else{const g=this.terrain,y=g.get();for(const w of Object.keys(o.spec.terrain))!f.hasOwnProperty(w)&&o.spec.terrain[w].default&&(f[w]=o.spec.terrain[w].default);for(const w in f)if(!I(f[w],y[w])){g.set(f),this.stylesheet.terrain=f;const E=this._setTransitionParameters({duration:0});g.updateTransitions(E);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(n){const l=this.fog=new Br(n,this.map.transform);this.stylesheet.fog=n;const f=this._setTransitionParameters({duration:0});l.updateTransitions(f)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const n of this.map._markers)n._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(n){if(this._checkLoaded(),!n)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog,f=l.get();Object.keys(n).length===0&&l.set(n);for(const g in n)if(!I(n[g],f[g])){l.set(n),this.stylesheet.fog=n;const y=this._setTransitionParameters({duration:0});l.updateTransitions(y);break}}else this._createFog(n);this._markersNeedUpdate=!0}_setTransitionParameters(n){return{now:o.exported.now(),transition:o.extend(n,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const n=this._order.filter(f=>this.isLayerDraped(this._layers[f])),l=this._order.filter(f=>!this.isLayerDraped(this._layers[f]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...n),this._drapedFirstOrder.push(...l)}_createTerrain(n,l){const f=this.terrain=new It(n,l);this.stylesheet.terrain=n,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const g=this._setTransitionParameters({duration:0});f.updateTransitions(g)}_force3DLayerUpdate(){for(const n in this._layers){const l=this._layers[n];l.type==="fill-extrusion"&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const n in this._layers){const l=this._layers[n];l.type==="symbol"&&this._updateLayer(l)}}_validate(n,l,f,g,y={}){return(!y||y.validate!==!1)&&go(this,n.call(o.validateStyle,o.extend({key:l,style:this.serialize(),value:f,styleSpec:o.spec},g)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const n in this._layers)this._layers[n].setEventedParent(null);for(const n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(n){const l=this._getSourceCaches(n);for(const f of l)f.clearTiles()}_reloadSource(n){const l=this._getSourceCaches(n);for(const f of l)f.resume(),f.reload()}_reloadSources(){for(const n of this._getSources())n.reload&&n.reload()}_updateSources(n){for(const l in this._sourceCaches)this._sourceCaches[l].update(n)}_generateCollisionBoxes(){for(const n in this._sourceCaches){const l=this._sourceCaches[n];l.resume(),l.reload()}}_updatePlacement(n,l,f,g,y=!1){let w=!1,E=!1;const C={};for(const R of this._order){const L=this._layers[R];if(L.type!=="symbol")continue;if(!C[L.source]){const Z=this._getLayerSourceCache(L);if(!Z)continue;C[L.source]=Z.getRenderableIds(!0).map(W=>Z.getTileByID(W)).sort((W,X)=>X.tileID.overscaledZ-W.tileID.overscaledZ||(W.tileID.isLessThan(X.tileID)?-1:1))}const z=this.crossTileSymbolIndex.addLayer(L,C[L.source],n.center.lng,n.projection);w=w||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),y=y||this._layerOrderChanged||f===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(y||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),n.zoom))&&(this.pauseablePlacement=new hd(n,this._order,y,l,f,g,this.placement,this.fog&&n.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),E=!0),w&&this.pauseablePlacement.placement.setStale()),E||w)for(const R of this._order){const L=this._layers[R];L.type==="symbol"&&this.placement.updateLayerOpacities(L,C[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const n in this._sourceCaches)this._sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l,f){this.imageManager.getImages(l.icons,f),this._updateTilesForChangedImages();const g=y=>{y&&y.setDependencies(l.tileID.key,l.type,l.icons)};g(this._otherSourceCaches[l.source]),g(this._symbolSourceCaches[l.source])}getGlyphs(n,l,f){this.glyphManager.getGlyphs(l.stacks,f)}getResource(n,l,f){return o.makeRequest(l,f)}_getSourceCache(n){return this._otherSourceCaches[n]}_getLayerSourceCache(n){return n.type==="symbol"?this._symbolSourceCaches[n.source]:this._otherSourceCaches[n.source]}_getSourceCaches(n){const l=[];return this._otherSourceCaches[n]&&l.push(this._otherSourceCaches[n]),this._symbolSourceCaches[n]&&l.push(this._symbolSourceCaches[n]),l}_isSourceCacheLoaded(n){const l=this._getSourceCaches(n);return l.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${n}'`))),!1):l.every(f=>f.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ci.getSourceType=function(u){return Bt[u]},Ci.setSourceType=function(u,n){Bt[u]=n},Ci.registerForPluginStateChange=o.registerForPluginStateChange;var gd=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Oo="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Hi=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,ea=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Wi=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Wa={},ls={};const ta=[];ds(gd,ta),ds(Hi,ta),ds(ea,ta),ds(Wi,ta),Wa=sr("",Hi),ls=sr(Wi,ea);const nu=sr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ka=gd,_d=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var yd={background:sr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:sr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:sr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:sr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:sr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:sr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:sr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oo),skyboxGradient:sr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oo),skyboxCapture:sr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:sr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ds(u,n){const l=u.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let f of l)if(f=f.trim(),f[0]==="#"&&f.includes("if")&&!f.includes("endif")){f=f.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const g=f.split(" ");for(const y of g)n.includes(y)||n.push(y)}}function sr(u,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=n.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),g={},y=[...ta];return ds(u,y),ds(n,y),{fragmentSource:u=u.replace(l,(w,E,C,R,L)=>(g[L]=!0,E==="define"?`
#ifndef HAS_UNIFORM_u_${L}
varying ${C} ${R} ${L};
#else
uniform ${C} ${R} u_${L};
#endif
`:`
#ifdef HAS_UNIFORM_u_${L}
    ${C} ${R} ${L} = u_${L};
#endif
`)),vertexSource:n=n.replace(l,(w,E,C,R,L)=>{const z=R==="float"?"vec2":"vec4",Z=L.match(/color/)?"color":z;return g[L]?E==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${C} ${z} a_${L};
varying ${C} ${R} ${L};
#else
uniform ${C} ${R} u_${L};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = a_${L};
#else
    ${C} ${R} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = unpack_mix_${Z}(a_${L}, u_${L}_t);
#else
    ${C} ${R} ${L} = u_${L};
#endif
`:E==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
attribute ${C} ${z} a_${L};
#else
uniform ${C} ${R} u_${L};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${C} ${R} ${L} = a_${L};
#else
    ${C} ${R} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${C} ${R} ${L} = unpack_mix_${Z}(a_${L}, u_${L}_t);
#else
    ${C} ${R} ${L} = u_${L};
#endif
`}),staticAttributes:f,usedDefines:y}}class m1{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(n,l,f,g,y,w,E){this.context=n;let C=this.boundPaintVertexBuffers.length!==g.length;for(let L=0;!C&&L<g.length;L++)this.boundPaintVertexBuffers[L]!==g[L]&&(C=!0);let R=this.boundDynamicVertexBuffers.length!==E.length;for(let L=0;!R&&L<E.length;L++)this.boundDynamicVertexBuffers[L]!==E[L]&&(R=!0);if(!n.extVertexArrayObject||!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||C||R||this.boundIndexBuffer!==y||this.boundVertexOffset!==w)this.freshBind(l,f,g,y,w,E);else{n.bindVertexArrayOES.set(this.vao);for(const L of E)L&&L.bind();y&&y.dynamicDraw&&y.bind()}}freshBind(n,l,f,g,y,w){let E;const C=n.numAttributes,R=this.context,L=R.gl;if(R.extVertexArrayObject)this.vao&&this.destroy(),this.vao=R.extVertexArrayObject.createVertexArrayOES(),R.bindVertexArrayOES.set(this.vao),E=0,this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=y,this.boundDynamicVertexBuffers=w;else{E=R.currentNumAttributes||0;for(let z=C;z<E;z++)L.disableVertexAttribArray(z)}l.enableAttributes(L,n),l.bind(),l.setVertexAttribPointers(L,n,y);for(const z of f)z.enableAttributes(L,n),z.bind(),z.setVertexAttribPointers(L,n,y);for(const z of w)z&&(z.enableAttributes(L,n),z.bind(),z.setVertexAttribPointers(L,n,y));g&&g.bind(),R.currentNumAttributes=C}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function vd(u,n){const l=Math.pow(2,n.canonical.z),f=n.canonical.y;return[new o.MercatorCoordinate(0,f/l).toLngLat().lat,new o.MercatorCoordinate(0,(f+1)/l).toLngLat().lat]}function iu(u,n,l,f,g,y,w){const E=u.context,C=E.gl,R=l.fbo;if(!R)return;u.prepareDrawTile();const L=u.useProgram("hillshade");E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,R.colorAttachment.get());const z=((K,Q,B,H)=>{const re=B.paint.get("hillshade-shadow-color"),ne=B.paint.get("hillshade-highlight-color"),fe=B.paint.get("hillshade-accent-color");let me=B.paint.get("hillshade-illumination-direction")*(Math.PI/180);B.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=K.transform.angle);const pe=!K.options.moving;return{u_matrix:H||K.transform.calculateProjMatrix(Q.tileID.toUnwrapped(),pe),u_image:0,u_latrange:vd(0,Q.tileID),u_light:[B.paint.get("hillshade-exaggeration"),me],u_shadow:re,u_highlight:ne,u_accent:fe}})(u,l,f,u.terrain?n.projMatrix:null);u.prepareDrawProgram(E,L,n.toUnwrapped());const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:W,tileBoundsSegments:X}=u.getTileBoundsBuffers(l);L.draw(E,C.TRIANGLES,g,y,w,o.CullFaceMode.disabled,z,f.id,Z,W,X)}function xd(u,n,l){if(!n.needsDEMTextureUpload)return;const f=u.context,g=f.gl;f.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||u.getTileTexture(l.stride);const y=l.getPixels();n.demTexture?n.demTexture.update(y,{premultiply:!1}):n.demTexture=new o.Texture(f,y,g.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function ou(u,n,l,f,g,y){const w=u.context,E=w.gl;if(!n.dem)return;const C=n.dem;if(w.activeTexture.set(E.TEXTURE1),xd(u,n,C),!n.demTexture)return;n.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);const R=C.dim;w.activeTexture.set(E.TEXTURE0);let L=n.fbo;if(!L){const X=new o.Texture(w,{width:R,height:R,data:null},E.RGBA);X.bind(E.LINEAR,E.CLAMP_TO_EDGE),L=n.fbo=w.createFramebuffer(R,R,!0),L.colorAttachment.set(X.texture)}w.bindFramebuffer.set(L.framebuffer),w.viewport.set([0,0,R,R]);const{tileBoundsBuffer:z,tileBoundsIndexBuffer:Z,tileBoundsSegments:W}=u.getMercatorTileBoundsBuffers();u.useProgram("hillshadePrepare").draw(w,E.TRIANGLES,f,g,y,o.CullFaceMode.disabled,((X,K)=>{const Q=K.stride,B=o.create();return o.ortho(B,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(B,B,[0,-o.EXTENT,0]),{u_matrix:B,u_image:1,u_dimension:[Q,Q],u_zoom:X.overscaledZ,u_unpack:K.unpackVector}})(n.tileID,C),l.id,z,Z,W),n.needsHillshadePrepare=!1}const bd=u=>({u_matrix:new o.UniformMatrix4f(u),u_image0:new o.Uniform1i(u),u_skirt_height:new o.Uniform1f(u)}),cs=(u,n)=>({u_matrix:u,u_image0:0,u_skirt_height:n}),Xa=(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X)=>({u_proj_matrix:Float32Array.from(u),u_globe_matrix:n,u_normalize_matrix:Float32Array.from(f),u_merc_matrix:l,u_zoom_transition:g,u_merc_center:y,u_image0:0,u_frustum_tl:w,u_frustum_tr:E,u_frustum_br:C,u_frustum_bl:R,u_globe_pos:L,u_globe_radius:z,u_viewport:Z,u_grid_matrix:X?Float32Array.from(X):new Float32Array(9),u_skirt_height:W});function us(u,n){return u!=null&&n!=null&&!(!u.hasData()||!n.hasData())&&u.demTexture!=null&&n.demTexture!=null&&u.tileID.key!==n.tileID.key}const Ki=new class{constructor(){this.operations={}}newMorphing(u,n,l,f,g){if(u in this.operations){const y=this.operations[u];y.to.tileID.key!==l.tileID.key&&(y.queued=l)}else this.operations[u]={startTime:f,phase:0,duration:g,from:n,to:l,queued:null}}getMorphValuesForProxy(u){if(!(u in this.operations))return null;const n=this.operations[u];return{from:n.from,to:n.to,phase:n.phase}}update(u){for(const n in this.operations){const l=this.operations[n];for(l.phase=(u-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,u)){delete this.operations[n];break}}}_nextOp(u,n){return!!u.queued&&(u.from=u.to,u.to=u.queued,u.queued=null,u.phase=0,u.startTime=n,!0)}_validOp(u){return u.from.hasData()&&u.to.hasData()}},zo={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ya(u){return 6*Math.pow(1.5,22-u)}function su(u,n){const l=1<<u.z;return!n&&(u.x===0||u.x===l-1)||u.y===0||u.y===l-1}const ra=u=>({u_matrix:u});function $d(u,n,l,f,g){if(g>0){const y=o.exported.now(),w=(y-u.timeAdded)/g,E=n?(y-n.timeAdded)/g:-1,C=l.getSource(),R=f.coveringZoomLevel({tileSize:C.tileSize,roundZoom:C.roundZoom}),L=!n||Math.abs(n.tileID.overscaledZ-R)>Math.abs(u.tileID.overscaledZ-R),z=L&&u.refreshedUponExpiration?1:o.clamp(L?w:1-E,0,1);return u.refreshedUponExpiration&&w>=1&&(u.refreshedUponExpiration=!1),n?{opacity:1,mix:1-z}:{opacity:z,mix:0}}return{opacity:1,mix:0}}class wd extends o.SourceCache{constructor(n){const l={type:"raster-dem",maxzoom:n.transform.maxZoom},f=new Qt(po(),null),g=Zt("mock-dem",l,f,n.style);super("mock-dem",g,!1),g.setEventedParent(this),this._sourceLoaded=!0}_loadTile(n,l){n.state="loaded",l(null)}}class Ja extends o.SourceCache{constructor(n){const l=Zt("proxy",{type:"geojson",maxzoom:n.transform.maxZoom},new Qt(po(),null),n.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=n,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(n,l,f){if(n.freezeTileCoverage)return;this.transform=n;const g=n.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((y,w)=>{if(y[w.key]="",!this._tiles[w.key]){const E=new o.Tile(w,this._source.tileSize*w.overscaleFactor(),n.tileZoom);E.state="loaded",this._tiles[w.key]=E}return y},{});for(const y in this._tiles)y in g||(this.freeFBO(y),this._tiles[y].unloadVectorData(),delete this._tiles[y])}freeFBO(n){const l=this.proxyCachedFBO[n];if(l!==void 0){const f=Object.values(l);this.renderCachePool.push(...f),delete this.proxyCachedFBO[n]}}deallocRenderCache(){this.renderCache.forEach(n=>n.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Qa extends o.OverscaledTileID{constructor(n,l,f){super(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y),this.proxyTileKey=l,this.projMatrix=f}}class Ed extends o.Elevation{constructor(n,l){super(),this.painter=n,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[f,g,y]=function(C){const R=new o.StructArrayLayout2i4,L=new o.StructArrayLayout3ui6,z=131;R.reserve(17161),L.reserve(33800);const Z=o.EXTENT/128,W=o.EXTENT+Z/2,X=W+Z;for(let Q=-Z;Q<X;Q+=Z)for(let B=-Z;B<X;B+=Z){const H=B<0||B>W||Q<0||Q>W?24575:0,re=o.clamp(Math.round(B),0,o.EXTENT),ne=o.clamp(Math.round(Q),0,o.EXTENT);R.emplaceBack(re+H,ne)}const K=(Q,B)=>{const H=B*z+Q;L.emplaceBack(H+1,H,H+z),L.emplaceBack(H+z,H+z+1,H+1)};for(let Q=1;Q<129;Q++)for(let B=1;B<129;B++)K(B,Q);return[0,129].forEach(Q=>{for(let B=0;B<130;B++)K(B,Q),K(Q,B)}),[R,L,32768]}(),w=n.context;this.gridBuffer=w.createVertexBuffer(f,o.posAttributes.members),this.gridIndexBuffer=w.createIndexBuffer(g),this.gridSegments=o.SegmentVector.simpleSegment(0,0,f.length,g.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,f.length,y),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ja(l.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const E=w.gl;this._overlapStencilMode=new o.StencilMode({func:E.GEQUAL,mask:255},0,255,E.KEEP,E.KEEP,E.REPLACE),this._previousZoom=n.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new wd(l.map)}set style(n){n.on("data",this._onStyleDataEvent.bind(this)),n.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=n,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(n,l,f){if(n&&n.terrain){this._style!==n&&(this.style=n),this.enabled=!0;const g=n.terrain.properties;this.sourceCache=n.terrain.drapeRenderMode===0?this._mockSourceCache:n._getSourceCache(g.get("source")),this._exaggeration=g.get("exaggeration");const y=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const w=this.getScaledDemTileSize();this.sourceCache.update(l,w,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,y(),this._initializing=!0),y(),l.updateElevation(!0,f),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(n){this._findCoveringTileCache[n]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const n=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||n.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${n.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${n.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(n){n.coord&&n.dataType==="source"?this._clearRenderCacheForTile(n.sourceCacheId,n.coord):n.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const n in this._style._sourceCaches)this._style._sourceCaches[n].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(n=>n.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const n=2*this.proxySourceCache.getSource().tileSize;return[n,n]}set useVertexMorphing(n){this._useVertexMorphing=n}updateTileBinding(n){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,f=this.painter.transform;this._initializing&&(this._initializing=f._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(f.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const g=this.proxyCoords=l.getIds().map(C=>{const R=l.getTileByID(C).tileID;return R.projMatrix=f.calculateProjMatrix(R.toUnwrapped()),R});(function(C,R){const L=R.transform.pointCoordinate(R.transform.getCameraPoint()),z=new o.Point(L.x,L.y);C.sort((Z,W)=>{if(W.overscaledZ-Z.overscaledZ)return W.overscaledZ-Z.overscaledZ;const X=new o.Point(Z.canonical.x+(1<<Z.canonical.z)*Z.wrap,Z.canonical.y),K=new o.Point(W.canonical.x+(1<<W.canonical.z)*W.wrap,W.canonical.y),Q=z.mult(1<<Z.canonical.z);return Q.x-=.5,Q.y-=.5,Q.distSqr(X)-Q.distSqr(K)})})(g,this.painter),this._previousZoom=f.zoom;const y=this.proxyToSource||{};this.proxyToSource={},g.forEach(C=>{this.proxyToSource[C.key]={}}),this.terrainTileForTile={};const w=this._style._sourceCaches;for(const C in w){const R=w[C];if(!R.used||(R!==this.sourceCache&&this.resetTileLookupCache(R.id),this._setupProxiedCoordsForOrtho(R,n[C],y),R.usedForTerrain))continue;const L=n[C];R.getSource().reparseOverscaled&&this._assignTerrainTiles(L)}this.proxiedCoords[l.id]=g.map(C=>new Qa(C,C.key,this.orthoMatrix)),this._assignTerrainTiles(g),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(y),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const E={};this._visibleDemTiles=[];for(const C of this.proxyCoords){const R=this.terrainTileForTile[C.key];if(!R)continue;const L=R.tileID.key;L in E||(this._visibleDemTiles.push(R),E[L]=L)}}_assignTerrainTiles(n){this._initializing||n.forEach(l=>{if(this.terrainTileForTile[l.key])return;const f=this._findTileCoveringTileID(l,this.sourceCache);f&&(this.terrainTileForTile[l.key]=f)})}_prepareDEMTextures(){const n=this.painter.context,l=n.gl;for(const f in this.terrainTileForTile){const g=this.terrainTileForTile[f],y=g.dem;!y||g.demTexture&&!g.needsDEMTextureUpload||(n.activeTexture.set(l.TEXTURE1),xd(this.painter,g,y))}}_prepareDemTileUniforms(n,l,f,g){if(!l||l.demTexture==null)return!1;const y=n.tileID.canonical,w=Math.pow(2,l.tileID.canonical.z-y.z),E=g||"";return f[`u_dem_tl${E}`]=[y.x*w%1,y.y*w%1],f[`u_dem_scale${E}`]=w,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const n=this.painter.context,l=n.gl;if(!this._emptyDepthBufferTexture){const f=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(n,f,l.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let n=0;const l=this._visibleDemTiles.reduce((f,g)=>{if(!g.dem)return f;const y=g.dem.tree.minimums[0];return y>0&&n++,f+y},0);return n?l/n:0}_updateEmptyDEMTexture(){const n=this.painter.context,l=n.gl;n.activeTexture.set(l.TEXTURE2);const f=this._getLoadedAreaMinimum(),g=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(f,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let y=this._emptyDEMTexture;return y?y.update(g,{premultiply:!1}):y=this._emptyDEMTexture=new o.Texture(n,g,l.RGBA,{premultiply:!1}),y}setupElevationDraw(n,l,f){const g=this.painter.context,y=g.gl,w=(E=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(E),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var E;w.u_dem_size=this.sourceCache.getSource().tileSize,w.u_exaggeration=this.exaggeration();let C=null,R=null,L=1;if(f&&f.morphing&&this._useVertexMorphing){const z=f.morphing.srcDemTile,Z=f.morphing.dstDemTile;L=f.morphing.phase,z&&Z&&(this._prepareDemTileUniforms(n,z,w,"_prev")&&(R=z),this._prepareDemTileUniforms(n,Z,w)&&(C=Z))}if(R&&C?(g.activeTexture.set(y.TEXTURE2),C.demTexture.bind(y.NEAREST,y.CLAMP_TO_EDGE,y.NEAREST),g.activeTexture.set(y.TEXTURE4),R.demTexture.bind(y.NEAREST,y.CLAMP_TO_EDGE,y.NEAREST),w.u_dem_lerp=L):(C=this.terrainTileForTile[n.tileID.key],g.activeTexture.set(y.TEXTURE2),(this._prepareDemTileUniforms(n,C,w)?C.demTexture:this.emptyDEMTexture).bind(y.NEAREST,y.CLAMP_TO_EDGE)),g.activeTexture.set(y.TEXTURE3),f&&f.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(y.NEAREST,y.CLAMP_TO_EDGE),this._depthFBO&&(w.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(y.NEAREST,y.CLAMP_TO_EDGE),w.u_depth_size_inv=[1,1]),f&&f.useMeterToDem&&C){const z=(1<<C.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;w.u_meter_to_dem=z}if(f&&f.labelPlaneMatrixInv&&(w.u_label_plane_matrix_inv=f.labelPlaneMatrixInv),l.setTerrainUniformValues(g,w),this.painter.transform.projection.name==="globe"){const z=this.globeUniformValues(this.painter.transform,n.tileID.canonical,f&&f.useDenormalizedUpVectorScale);l.setGlobeUniformValues(g,z)}}globeUniformValues(n,l,f){const g=n.projection;return{u_tile_tl_up:g.upVector(l,0,0),u_tile_tr_up:g.upVector(l,o.EXTENT,0),u_tile_br_up:g.upVector(l,o.EXTENT,o.EXTENT),u_tile_bl_up:g.upVector(l,0,o.EXTENT),u_tile_up_scale:f?o.globeMetersToEcef(1):g.upVectorScale(l,n.center.lat,n.worldSize).metersToTile}}renderToBackBuffer(n){const l=this.painter,f=this.painter.context;n.length!==0&&(f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(g,y,w,E,C){if(g.transform.projection.name==="globe")(function(R,L,z,Z,W){const X=R.context,K=X.gl;let Q,B;const H=R.options.showTerrainWireframe?2:0,re=R.transform,ne=o.globeUseCustomAntiAliasing(R,X,re),fe=(et,Le)=>{if(B===et)return;const Ue=[zo[et],"PROJECTION_GLOBE_VIEW"];ne&&Ue.push("CUSTOM_ANTIALIASING"),Le&&Ue.push(zo[H]),Q=R.useProgram("globeRaster",null,Ue),B=et},me=R.colorModeForRenderPass(),pe=new o.DepthMode(K.LEQUAL,o.DepthMode.ReadWrite,R.depthRangeFor3D);Ki.update(W);const we=o.calculateGlobeMercatorMatrix(re),be=[o.mercatorXfromLng(re.center.lng),o.mercatorYfromLat(re.center.lat)],Re=H?[!1,!0]:[!1],rt=R.globeSharedBuffers,Me=[re.width*o.exported.devicePixelRatio,re.height*o.exported.devicePixelRatio],Ve=Float32Array.from(re.globeMatrix),Oe={useDenormalizedUpVectorScale:!0};if(Re.forEach(et=>{const Le=R.transform,Ue=Ya(Le.zoom)*L.exaggeration();B=-1;const ot=et?K.LINES:K.TRIANGLES;for(const Xe of Z){const st=z.getTile(Xe),Mt=o.StencilMode.disabled,Ot=L.prevTerrainTileForTile[Xe.key],wt=L.terrainTileForTile[Xe.key];us(Ot,wt)&&Ki.newMorphing(Xe.key,Ot,wt,W,250),X.activeTexture.set(K.TEXTURE0),st.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const kt=Ki.getMorphValuesForProxy(Xe.key),Yt=kt?1:0;kt&&o.extend$1(Oe,{morphing:{srcDemTile:kt.from,dstDemTile:kt.to,phase:o.easeCubicInOut(kt.phase)}});const Xt=o.tileCornersToBounds(Xe.canonical),At=o.getLatitudinalLod(Xt.getCenter().lat),lr=o.getGridMatrix(Xe.canonical,Xt,At,Le.worldSize/Le._pixelsPerMercatorPixel),cr=o.globeNormalizeECEF(o.globeTileBounds(Xe.canonical)),ur=Xa(Le.projMatrix,Ve,we,cr,o.globeToMercatorTransition(Le.zoom),be,Le.frustumCorners.TL,Le.frustumCorners.TR,Le.frustumCorners.BR,Le.frustumCorners.BL,Le.globeCenterInViewSpace,Le.globeRadius,Me,Ue,lr);if(fe(Yt,et),L.setupElevationDraw(st,Q,Oe),R.prepareDrawProgram(X,Q,Xe.toUnwrapped()),rt){const[hr,gn,sn]=et?rt.getWirefameBuffers(R.context,At):rt.getGridBuffers(At,Ue!==0);Q.draw(X,ot,pe,Mt,me,o.CullFaceMode.backCCW,ur,"globe_raster",hr,gn,sn)}}}),rt){const et=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ne&&et.push("CUSTOM_ANTIALIASING"),Q=R.useProgram("globeRaster",null,et);for(const Le of Z){const{x:Ue,y:ot,z:Xe}=Le.canonical,st=ot===0,Mt=ot===(1<<Xe)-1,[Ot,wt,kt,Yt]=rt.getPoleBuffers(Xe);if(Yt&&(st||Mt)){const Xt=z.getTile(Le);X.activeTexture.set(K.TEXTURE0),Xt.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);let At=o.globePoleMatrixForTile(Xe,Ue,re);const lr=o.globeNormalizeECEF(o.globeTileBounds(Le.canonical)),cr=(ur,hr)=>ur.draw(X,K.TRIANGLES,pe,o.StencilMode.disabled,me,o.CullFaceMode.disabled,Xa(re.projMatrix,At,At,lr,0,be,re.frustumCorners.TL,re.frustumCorners.TR,re.frustumCorners.BR,re.frustumCorners.BL,re.globeCenterInViewSpace,re.globeRadius,Me,0),"globe_pole_raster",hr,kt,Yt);L.setupElevationDraw(Xt,Q,Oe),R.prepareDrawProgram(X,Q,Le.toUnwrapped()),st&&cr(Q,Ot),Mt&&(At=o.scale(o.create(),At,[1,-1,1]),cr(Q,wt))}}}})(g,y,w,E,C);else{const R=g.context,L=R.gl;let z,Z;const W=g.options.showTerrainWireframe?2:0,X=(re,ne)=>{if(Z===re)return;const fe=[zo[re]];ne&&fe.push(zo[W]),z=g.useProgram("terrainRaster",null,fe),Z=re},K=g.colorModeForRenderPass(),Q=new o.DepthMode(L.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D);Ki.update(C);const B=g.transform,H=Ya(B.zoom)*y.exaggeration();(W?[!1,!0]:[!1]).forEach(re=>{Z=-1;const ne=re?L.LINES:L.TRIANGLES,[fe,me]=re?y.getWirefameBuffer():[y.gridIndexBuffer,y.gridSegments];for(const pe of E){const we=w.getTile(pe),be=o.StencilMode.disabled,Re=y.prevTerrainTileForTile[pe.key],rt=y.terrainTileForTile[pe.key];us(Re,rt)&&Ki.newMorphing(pe.key,Re,rt,C,250),R.activeTexture.set(L.TEXTURE0),we.texture.bind(L.LINEAR,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST);const Me=Ki.getMorphValuesForProxy(pe.key),Ve=Me?1:0;let Oe;Me&&(Oe={morphing:{srcDemTile:Me.from,dstDemTile:Me.to,phase:o.easeCubicInOut(Me.phase)}});const et=cs(pe.projMatrix,su(pe.canonical,B.renderWorldCopies)?H/10:H);X(Ve,re),y.setupElevationDraw(we,z,Oe),g.prepareDrawProgram(R,z,pe.toUnwrapped()),z.draw(R,ne,Q,be,K,o.CullFaceMode.backCCW,et,"terrain_raster",y.gridBuffer,fe,me)}})}}(l,this,this.proxySourceCache,n,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),n.splice(0,n.length))}renderBatch(n){if(this._drapedRenderBatches.length===0)return n+1;this.renderingToTexture=!0;const l=this.painter,f=this.painter.context,g=this.proxySourceCache,y=this.proxiedCoords[g.id],w=this._drapedRenderBatches.shift(),E=[],C=l.style.order;let R=0;for(const L of y){const z=g.getTileByID(L.proxyTileKey),Z=g.proxyCachedFBO[L.key]?g.proxyCachedFBO[L.key][n]:void 0,W=Z!==void 0?g.renderCache[Z]:this.pool[R++],X=Z!==void 0;if(z.texture=W.tex,X&&!W.dirty){E.push(z.tileID);continue}let K;f.bindFramebuffer.set(W.fb.framebuffer),this.renderedToTile=!1,W.dirty&&(f.clear({color:o.Color.transparent,stencil:0}),W.dirty=!1);for(let Q=w.start;Q<=w.end;++Q){const B=l.style._layers[C[Q]];if(B.isHidden(l.transform.zoom))continue;const H=l.style._getLayerSourceCache(B),re=H?this.proxyToSource[L.key][H.id]:[L];if(!re)continue;const ne=re;f.viewport.set([0,0,W.fb.width,W.fb.height]),K!==(H?H.id:null)&&(this._setupStencil(W,re,B,H),K=H?H.id:null),l.renderLayer(l,H,B,ne)}this.renderedToTile?(W.dirty=!0,E.push(z.tileID)):X||--R,R===5&&(R=0,this.renderToBackBuffer(E))}return this.renderToBackBuffer(E),this.renderingToTexture=!1,f.bindFramebuffer.set(null),f.viewport.set([0,0,l.width,l.height]),w.end+1}postRender(){}renderCacheEfficiency(n){const l=n.order.length;if(l===0)return{efficiency:100};let f,g=0,y=0,w=!1;for(let E=0;E<l;++E){const C=n._layers[n.order[E]];this._style.isLayerDraped(C)?(w&&++g,++y):w||(w=!0,f=C.id)}return y===0?{efficiency:100}:{efficiency:100*(1-g/y),firstUndrapedLayer:f}}getMinElevationBelowMSL(){let n=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{n=Math.min(n,l.dem.tree.minimums[0])}),n===0?n:(n-30)*this._exaggeration}raycast(n,l,f){if(!this._visibleDemTiles)return null;const g=this._visibleDemTiles.filter(y=>y.dem).map(y=>{const w=y.tileID,E=1<<w.overscaledZ,{x:C,y:R}=w.canonical,L=C/E,z=(C+1)/E,Z=R/E,W=(R+1)/E;return{minx:L,miny:Z,maxx:z,maxy:W,t:y.dem.tree.raycastRoot(L,Z,z,W,n,l,f),tile:y}});g.sort((y,w)=>(y.t!==null?y.t:Number.MAX_VALUE)-(w.t!==null?w.t:Number.MAX_VALUE));for(const y of g){if(y.t==null)return null;const w=y.tile.dem.tree.raycast(y.minx,y.miny,y.maxx,y.maxy,n,l,f);if(w!=null)return w}return null}_createFBO(){const n=this.painter.context,l=n.gl,f=this.drapeBufferSize;n.activeTexture.set(l.TEXTURE0);const g=new o.Texture(n,{width:f[0],height:f[1],data:null},l.RGBA);g.bind(l.LINEAR,l.CLAMP_TO_EDGE);const y=n.createFramebuffer(f[0],f[1],!1);return y.colorAttachment.set(g.texture),y.depthAttachment=new ye(n,y.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=n.createRenderbuffer(n.gl.DEPTH_STENCIL,f[0],f[1]),this._stencilRef=0,y.depthAttachment.set(this._sharedDepthStencil),n.clear({stencil:0})):y.depthAttachment.set(this._sharedDepthStencil),n.extTextureFilterAnisotropic&&!n.extTextureFilterAnisotropicForceOff&&l.texParameterf(l.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax),{fb:y,tex:g,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n].hasTransition())return!0;return this._style.order.some(n=>{const l=this._style._layers[n],f=l.isHidden(this.painter.transform.zoom);return l.type==="custom"?!f&&l.shouldRedrape():!f&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let n=!1;for(const f of this._style._getSources())if(f instanceof ct){n=!0;break}if(!n)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],y=this._style._getLayerSourceCache(g);if(y&&!l[y.id]&&!g.isHidden(this.painter.transform.zoom)&&g.type==="line"&&g.widthExpression()instanceof o.ZoomDependentExpression){l[y.id]=!0;for(const w of this.proxyCoords){const E=this.proxyToSource[w.key][y.id];if(E)for(const C of E)this._clearRenderCacheForTile(y.id,C)}}}}_clearRasterLayersFromRenderCache(){let n=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof it){n=!0;break}if(!n)return;const l={};for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],y=this._style._getLayerSourceCache(g);if(!y||l[y.id]||g.isHidden(this.painter.transform.zoom)||g.type!=="raster")continue;const w=g.paint.get("raster-fade-duration");for(const E of this.proxyCoords){const C=this.proxyToSource[E.key][y.id];if(C)for(const R of C){const L=$d(y.getTile(R),y.findLoadedParent(R,0),y,this.painter.transform,w);(L.opacity!==1||L.mix!==0)&&this._clearRenderCacheForTile(y.id,R)}}}}_setupDrapedRenderBatches(){const n=this._style.order,l=n.length;if(l===0)return;const f=[];let g,y=0,w=this._style._layers[n[y]];for(;!this._style.isLayerDraped(w)&&w.isHidden(this.painter.transform.zoom)&&++y<l;)w=this._style._layers[n[y]];for(;y<l;++y){const E=this._style._layers[n[y]];E.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(E)?g===void 0&&(g=y):g!==void 0&&(f.push({start:g,end:y-1}),g=void 0))}g!==void 0&&f.push({start:g,end:y-1}),this._drapedRenderBatches=f}_setupRenderCache(n){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const w=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let E=0;E<w.length;++E){const C=Object.values(w[E]);l.renderCachePool.push(...C)}}return}this._clearRasterLayersFromRenderCache();const f=this.proxyCoords,g=this._tilesDirty;for(let w=f.length-1;w>=0;w--){const E=f[w];if(l.getTileByID(E.key),l.proxyCachedFBO[E.key]!==void 0){const C=n[E.key],R=this.proxyToSource[E.key];let L=0;for(const z in R){const Z=R[z],W=C[z];if(!W||W.length!==Z.length||Z.some((X,K)=>X!==W[K]||g[z]&&g[z].hasOwnProperty(X.key))){L=-1;break}++L}for(const z in l.proxyCachedFBO[E.key])l.renderCache[l.proxyCachedFBO[E.key][z]].dirty=L<0||L!==Object.values(C).length}}const y=[...this._drapedRenderBatches];y.sort((w,E)=>E.end-E.start-(w.end-w.start));for(const w of y)for(const E of f){if(l.proxyCachedFBO[E.key])continue;let C=l.renderCachePool.pop();C===void 0&&l.renderCache.length<50&&(C=l.renderCache.length,l.renderCache.push(this._createFBO())),C!==void 0&&(l.proxyCachedFBO[E.key]={},l.proxyCachedFBO[E.key][w.start]=C,l.renderCache[C].dirty=!0)}this._tilesDirty={}}_setupStencil(n,l,f,g){if(!g||!this._sourceTilesOverlap[g.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const y=this.painter.context,w=y.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let E;if(f.isTileClipped())E=l.length,this._overlapStencilMode.test={func:w.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);E=1,this._overlapStencilMode.test={func:w.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+E>255&&(y.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=E,this._overlapStencilMode.ref=this._stencilRef,f.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(n){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[n.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(n,l){const f=this.painter,g=this.painter.context,y=g.gl;f._tileClippingMaskIDs={},g.setColorMode(o.ColorMode.disabled),g.setDepthMode(o.DepthMode.disabled);const w=f.useProgram("clippingMask");for(const E of n){const C=f._tileClippingMaskIDs[E.key]=--l;w.draw(g,y.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:y.ALWAYS,mask:0},C,255,y.KEEP,y.KEEP,y.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,ra(E.projMatrix),"$clipping",f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}}pointCoordinate(n){const l=this.painter.transform;if(n.x<0||n.x>l.width||n.y<0||n.y>l.height)return null;const f=[n.x,n.y,1,1];o.transformMat4$1(f,f,l.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),f[0]/=l.worldSize,f[1]/=l.worldSize;const g=l._camera.position,y=o.mercatorZfromAltitude(1,l.center.lat),w=[g[0],g[1],g[2]/y,0],E=o.subtract([],f.slice(0,3),w);o.normalize(E,E);const C=this.raycast(w,E,this._exaggeration);return C!==null&&C?(o.scaleAndAdd(w,w,E,C),w[3]=w[2],w[2]*=y,w):null}drawDepth(){const n=this.painter,l=n.context,f=this.proxySourceCache,g=Math.ceil(n.width),y=Math.ceil(n.height);if(!this._depthFBO||this._depthFBO.width===g&&this._depthFBO.height===y||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const w=l.gl,E=l.createFramebuffer(g,y,!0);l.activeTexture.set(w.TEXTURE0);const C=new o.Texture(l,{width:g,height:y,data:null},w.RGBA);C.bind(w.NEAREST,w.CLAMP_TO_EDGE),E.colorAttachment.set(C.texture);const R=l.createRenderbuffer(l.gl.DEPTH_COMPONENT16,g,y);E.depthAttachment.set(R),this._depthFBO=E,this._depthTexture=C}l.bindFramebuffer.set(this._depthFBO.framebuffer),l.viewport.set([0,0,g,y]),function(w,E,C,R){if(w.transform.projection.name==="globe")return;const L=w.context,z=L.gl;L.clear({depth:1});const Z=w.useProgram("terrainDepth"),W=new o.DepthMode(z.LESS,o.DepthMode.ReadWrite,w.depthRangeFor3D);for(const X of R){const K=C.getTile(X),Q=cs(X.projMatrix,0);E.setupElevationDraw(K,Z),Z.draw(L,z.TRIANGLES,W,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,Q,"terrain_depth",E.gridBuffer,E.gridIndexBuffer,E.gridNoSkirtSegments)}}(n,this,f,this.proxyCoords)}_setupProxiedCoordsForOrtho(n,l,f){if(n.getSource()instanceof Kt)return this._setupProxiedCoordsForImageSource(n,l,f);this._findCoveringTileCache[n.id]=this._findCoveringTileCache[n.id]||{};const g=this.proxiedCoords[n.id]=[],y=this.proxyCoords;for(let E=0;E<y.length;E++){const C=y[E],R=this._findTileCoveringTileID(C,n);if(R){const L=this._createProxiedId(C,R,f[C.key]&&f[C.key][n.id]);g.push(L),this.proxyToSource[C.key][n.id]=[L]}}let w=!1;for(let E=0;E<l.length;E++){const C=n.getTile(l[E]);if(!C||!C.hasData())continue;const R=this._findTileCoveringTileID(C.tileID,this.proxySourceCache);if(R&&R.tileID.canonical.z!==C.tileID.canonical.z){const L=this.proxyToSource[R.tileID.key][n.id],z=this._createProxiedId(R.tileID,C,f[R.tileID.key]&&f[R.tileID.key][n.id]);L?L.splice(L.length-1,0,z):this.proxyToSource[R.tileID.key][n.id]=[z],g.push(z),w=!0}}this._sourceTilesOverlap[n.id]=w}_setupProxiedCoordsForImageSource(n,l,f){if(!n.getSource().loaded())return;const g=this.proxiedCoords[n.id]=[],y=this.proxyCoords,w=n.getSource(),E=new o.Point(w.tileID.x,w.tileID.y)._div(1<<w.tileID.z),C=w.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((L,z)=>(L.min.x=Math.min(L.min.x,z.x-E.x),L.min.y=Math.min(L.min.y,z.y-E.y),L.max.x=Math.max(L.max.x,z.x-E.x),L.max.y=Math.max(L.max.y,z.y-E.y),L),{min:new o.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),R=(L,z)=>{const Z=L.wrap+L.canonical.x/(1<<L.canonical.z),W=L.canonical.y/(1<<L.canonical.z),X=o.EXTENT/(1<<L.canonical.z),K=z.wrap+z.canonical.x/(1<<z.canonical.z),Q=z.canonical.y/(1<<z.canonical.z);return Z+X<K+C.min.x||Z>K+C.max.x||W+X<Q+C.min.y||W>Q+C.max.y};for(let L=0;L<y.length;L++){const z=y[L];for(let Z=0;Z<l.length;Z++){const W=n.getTile(l[Z]);if(!W||!W.hasData()||R(z,W.tileID))continue;const X=this._createProxiedId(z,W,f[z.key]&&f[z.key][n.id]),K=this.proxyToSource[z.key][n.id];K?K.push(X):this.proxyToSource[z.key][n.id]=[X],g.push(X)}}}_createProxiedId(n,l,f){let g=this.orthoMatrix;if(f){const y=f.find(w=>w.key===l.tileID.key);if(y)return y}if(l.tileID.key!==n.key){const y=n.canonical.z-l.tileID.canonical.z;let w,E,C;g=o.create();const R=l.tileID.wrap-n.wrap<<n.overscaledZ;y>0?(w=o.EXTENT>>y,E=w*((l.tileID.canonical.x<<y)-n.canonical.x+R),C=w*((l.tileID.canonical.y<<y)-n.canonical.y)):(w=o.EXTENT<<-y,E=o.EXTENT*(l.tileID.canonical.x-(n.canonical.x+R<<-y)),C=o.EXTENT*(l.tileID.canonical.y-(n.canonical.y<<-y))),o.ortho(g,0,w,0,w,0,1),o.translate(g,g,[E,C,0])}return new Qa(l.tileID,n.key,g)}_findTileCoveringTileID(n,l){let f=l.getTile(n);if(f&&f.hasData())return f;const g=this._findCoveringTileCache[l.id],y=g[n.key];if(f=y?l.getTileByID(y):null,f&&f.hasData()||y===null)return f;let w=f?f.tileID:n,E=w.overscaledZ;const C=l.getSource().minzoom,R=[];if(!y){const z=l.getSource().maxzoom;if(n.canonical.z>=z){const Z=n.canonical.z-z;l.getSource().reparseOverscaled?(E=Math.max(n.canonical.z+2,l.transform.tileZoom),w=new o.OverscaledTileID(E,n.wrap,z,n.canonical.x>>Z,n.canonical.y>>Z)):Z!==0&&(E=z,w=new o.OverscaledTileID(E,n.wrap,z,n.canonical.x>>Z,n.canonical.y>>Z))}w.key!==n.key&&(R.push(w.key),f=l.getTile(w))}const L=z=>{R.forEach(Z=>{g[Z]=z}),R.length=0};for(E-=1;E>=C&&(!f||!f.hasData());E--){f&&L(f.tileID.key);const z=w.calculateScaledKey(E);if(f=l.getTileByID(z),f&&f.hasData())break;const Z=g[z];if(Z===null)break;Z===void 0?R.push(z):f=l.getTileByID(Z)}return L(f?f.tileID.key:null),f&&f.hasData()?f:null}findDEMTileFor(n){return this.enabled?this._findTileCoveringTileID(n,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(n,l){let f=this._tilesDirty[n];f||(f=this._tilesDirty[n]={}),f[l.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const n=function(l){let f=0;const g=new o.StructArrayLayout2ui4,y=131;for(let w=1;w<129;w++){for(let E=1;E<129;E++)f=w*y+E,g.emplaceBack(f,f+1),g.emplaceBack(f,f+y),g.emplaceBack(f+1,f+y),w===128&&g.emplaceBack(f+y,f+y+1);g.emplaceBack(f+1,f+1+y)}return g}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(n),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,n.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class tr{static cacheKey(n,l,f,g){let y=`${l}${g?g.cacheKey:""}`;for(const w of f)n.usedDefines.includes(w)&&(y+=`/${w}`);return y}constructor(n,l,f,g,y,w){const E=n.gl;this.program=E.createProgram();const C=function(B){const H=[];for(let re=0;re<B.length;re++){if(B[re]===null)continue;const ne=B[re].split(" ");H.push(ne.pop())}return H}(f.staticAttributes),R=g?g.getBinderAttributes():[],L=C.concat(R);let z=g?g.defines():[];z=z.concat(w.map(B=>`#define ${B}`));const Z=n.isWebGL2?`#version 300 es
`:"",W=Z+z.concat(n.extStandardDerivatives&&Z.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(_d):_d,_d,Ka,nu.fragmentSource,ls.fragmentSource,f.fragmentSource).join(`
`),X=Z+z.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ka,nu.vertexSource,ls.vertexSource,Wa.vertexSource,f.vertexSource).join(`
`),K=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);E.shaderSource(K,W),E.compileShader(K),E.attachShader(this.program,K);const Q=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Q,X),E.compileShader(Q),E.attachShader(this.program,Q),this.attributes={},this.numAttributes=L.length;for(let B=0;B<this.numAttributes;B++)L[B]&&(E.bindAttribLocation(this.program,B,L[B]),this.attributes[L[B]]=B);E.linkProgram(this.program),E.deleteShader(Q),E.deleteShader(K),this.fixedUniforms=y(n),this.binderUniforms=g?g.getUniforms(n):[],w.includes("TERRAIN")&&(this.terrainUniforms=(B=>({u_dem:new o.Uniform1i(B),u_dem_prev:new o.Uniform1i(B),u_dem_unpack:new o.Uniform4f(B),u_dem_tl:new o.Uniform2f(B),u_dem_scale:new o.Uniform1f(B),u_dem_tl_prev:new o.Uniform2f(B),u_dem_scale_prev:new o.Uniform1f(B),u_dem_size:new o.Uniform1f(B),u_dem_lerp:new o.Uniform1f(B),u_exaggeration:new o.Uniform1f(B),u_depth:new o.Uniform1i(B),u_depth_size_inv:new o.Uniform2f(B),u_meter_to_dem:new o.Uniform1f(B),u_label_plane_matrix_inv:new o.UniformMatrix4f(B)}))(n)),w.includes("GLOBE")&&(this.globeUniforms=(B=>({u_tile_tl_up:new o.Uniform3f(B),u_tile_tr_up:new o.Uniform3f(B),u_tile_br_up:new o.Uniform3f(B),u_tile_bl_up:new o.Uniform3f(B),u_tile_up_scale:new o.Uniform1f(B)}))(n)),w.includes("FOG")&&(this.fogUniforms=(B=>({u_fog_matrix:new o.UniformMatrix4f(B),u_fog_range:new o.Uniform2f(B),u_fog_color:new o.Uniform4f(B),u_fog_horizon_blend:new o.Uniform1f(B),u_fog_temporal_offset:new o.Uniform1f(B),u_frustum_tl:new o.Uniform3f(B),u_frustum_tr:new o.Uniform3f(B),u_frustum_br:new o.Uniform3f(B),u_frustum_bl:new o.Uniform3f(B),u_globe_pos:new o.Uniform3f(B),u_globe_radius:new o.Uniform1f(B),u_globe_transition:new o.Uniform1f(B),u_is_globe:new o.Uniform1i(B),u_viewport:new o.Uniform2f(B)}))(n))}}setTerrainUniformValues(n,l){if(!this.terrainUniforms)return;const f=this.terrainUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setGlobeUniformValues(n,l){if(!this.globeUniforms)return;const f=this.globeUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const g in l)f[g]&&f[g].set(this.program,g,l[g])}}setFogUniformValues(n,l){if(!this.fogUniforms)return;const f=this.fogUniforms;if(!this.failedToCreate){n.program.set(this.program);for(const g in l)f[g].set(this.program,g,l[g])}}draw(n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K){const Q=n.gl;if(this.failedToCreate)return;n.program.set(this.program),n.setDepthMode(f),n.setStencilMode(g),n.setColorMode(y),n.setCullFace(w);for(const H of Object.keys(this.fixedUniforms))this.fixedUniforms[H].set(this.program,H,E[H]);X&&X.setUniforms(this.program,n,this.binderUniforms,Z,{zoom:W});const B={[Q.LINES]:2,[Q.TRIANGLES]:3,[Q.LINE_STRIP]:1}[l];for(const H of z.get()){const re=H.vaos||(H.vaos={});(re[C]||(re[C]=new m1)).bind(n,this,R,X?X.getPaintVertexBuffers():[],L,H.vertexOffset,K||[]),Q.drawElements(l,H.primitiveLength*B,Q.UNSIGNED_SHORT,H.primitiveOffset*B*2)}}}function na(u,n){const l=Math.pow(2,n.tileID.overscaledZ),f=n.tileSize*Math.pow(2,u.transform.tileZoom)/l,g=f*(n.tileID.canonical.x+n.tileID.wrap*l),y=f*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_tile_units_to_pixels:1/Tr(n,1,u.transform.tileZoom),u_pixel_coord_upper:[g>>16,y>>16],u_pixel_coord_lower:[65535&g,65535&y]}}const au=o.create(),Td=(u,n,l,f,g,y,w,E,C,R,L)=>{const z=n.style.light,Z=z.properties.get("position"),W=[Z.x,Z.y,Z.z],X=o.create$1();z.properties.get("anchor")==="viewport"&&(o.fromRotation(X,-n.transform.angle),o.transformMat3(W,W,X));const K=z.properties.get("color"),Q=n.transform,B={u_matrix:u,u_lightpos:W,u_lightintensity:z.properties.get("intensity"),u_lightcolor:[K.r,K.g,K.b],u_vertical_gradient:+l,u_opacity:f,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:au,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:g,u_edge_radius:y};return Q.projection.name==="globe"&&(B.u_tile_id=[w.canonical.x,w.canonical.y,1<<w.canonical.z],B.u_zoom_transition=C,B.u_inv_rot_matrix=L,B.u_merc_center=R,B.u_up_dir=Q.projection.upVector(new o.CanonicalTileID(0,0,0),R[0]*o.EXTENT,R[1]*o.EXTENT),B.u_height_lift=E),B},lu=(u,n,l,f,g,y,w,E,C,R,L,z)=>{const Z=Td(u,n,l,f,g,y,w,C,R,L,z),W={u_height_factor:-Math.pow(2,w.overscaledZ)/E.tileSize/8};return o.extend(Z,na(n,E),W)},Bo=u=>({u_matrix:u}),Sd=(u,n,l)=>o.extend(Bo(u),na(n,l)),g1=(u,n)=>({u_matrix:u,u_world:n}),_1=(u,n,l,f)=>o.extend(Sd(u,n,l),{u_world:f}),y1=o.create(),Cd=(u,n,l,f,g,y)=>{const w=u.transform,E=w.projection.name==="globe";let C;if(y.paint.get("circle-pitch-alignment")==="map")if(E){const L=o.globePixelsToTileUnits(w.zoom,n.canonical)*w._pixelsPerMercatorPixel;C=Float32Array.from([L,0,0,L])}else C=w.calculatePixelsToTileUnitsMatrix(l);else C=new Float32Array([w.pixelsToGLUnits[0],0,0,w.pixelsToGLUnits[1]]);const R={u_camera_to_center_distance:w.cameraToCenterDistance,u_matrix:u.translatePosMatrix(n.projMatrix,l,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:C,u_inv_rot_matrix:y1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(E){R.u_inv_rot_matrix=f,R.u_merc_center=g,R.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],R.u_zoom_transition=o.globeToMercatorTransition(w.zoom);const L=g[0]*o.EXTENT,z=g[1]*o.EXTENT;R.u_up_dir=w.projection.upVector(new o.CanonicalTileID(0,0,0),L,z)}return R},Ad=u=>{const n=[];return u.paint.get("circle-pitch-alignment")==="map"&&n.push("PITCH_WITH_MAP"),u.paint.get("circle-pitch-scale")==="map"&&n.push("SCALE_WITH_MAP"),n},Id=(u,n,l,f)=>{const g=o.EXTENT/l.tileSize;return{u_matrix:u,u_camera_to_center_distance:n.getCameraToCenterDistance(f),u_extrude_scale:[n.pixelsToGLUnits[0]/g,n.pixelsToGLUnits[1]/g]}},el=(u,n,l=1)=>({u_matrix:u,u_color:n,u_overlay:0,u_overlay_scale:l}),du=o.create(),cu=(u,n,l,f,g,y,w)=>{const E=u.transform,C=E.projection.name==="globe",R=C?o.globePixelsToTileUnits(E.zoom,n.canonical)*E._pixelsPerMercatorPixel:Tr(l,1,y),L={u_matrix:n.projMatrix,u_extrude_scale:R,u_intensity:w,u_inv_rot_matrix:du,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(C){L.u_inv_rot_matrix=f,L.u_merc_center=g,L.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],L.u_zoom_transition=o.globeToMercatorTransition(E.zoom);const z=g[0]*o.EXTENT,Z=g[1]*o.EXTENT;L.u_up_dir=E.projection.upVector(new o.CanonicalTileID(0,0,0),z,Z)}return L},v1=(u,n,l,f,g,y,w)=>{const E=u.transform,C=E.calculatePixelsToTileUnitsMatrix(n);return{u_matrix:Md(u,n,l,f),u_pixels_to_tile_units:C,u_device_pixel_ratio:y,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:oa(l)?n.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:hs(n,u.transform),u_alpha_discard_threshold:0,u_trim_offset:w}},ia=(u,n,l,f,g)=>{const y=u.transform;return{u_matrix:Md(u,n,l,f),u_texsize:n.imageAtlasTexture.size,u_pixels_to_tile_units:y.calculatePixelsToTileUnitsMatrix(n),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:hs(n,y),u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hs(u,n){return 1/Tr(u,1,n.tileZoom)}function Md(u,n,l,f){return u.translatePosMatrix(f||n.tileID.projMatrix,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}function oa(u){const n=u.paint.get("line-dasharray").value;return n.value||n.kind!=="constant"}const Pd=(u,n,l,f,g,y)=>{return{u_matrix:u,u_tl_parent:n,u_scale_parent:l,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(E=g.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=g.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Ai(g.paint.get("raster-hue-rotate")),u_perspective_transform:y};var w,E};function Ai(u){u*=Math.PI/180;const n=Math.sin(u),l=Math.cos(u);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const tl=o.create(),Ld=(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K)=>{const Q=g.transform,B={u_is_size_zoom_constant:+(u==="constant"||u==="source"),u_is_size_feature_constant:+(u==="constant"||u==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_rotate_symbol:+l,u_aspect_ratio:Q.width/Q.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:w,u_coord_matrix:E,u_is_text:+C,u_pitch_with_map:+f,u_texsize:R,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:tl,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:tl,u_up_vector:[0,-1,0]};return K.name==="globe"&&(B.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],B.u_zoom_transition=z,B.u_inv_rot_matrix=W,B.u_merc_center=Z,B.u_camera_forward=Q._camera.forward(),B.u_ecef_origin=o.globeECEFOrigin(Q.globeMatrix,L.toUnwrapped()),B.u_tile_matrix=Float32Array.from(Q.globeMatrix),B.u_up_vector=X),B},rl=(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K,Q)=>o.extend(Ld(u,n,l,f,g,y,w,E,C,R,z,Z,W,X,K,Q),{u_gamma_scale:f?g.transform.cameraToCenterDistance*Math.cos(g.terrain?0:g.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+L}),uu=(u,n,l,f,g,y,w,E,C,R,L,z,Z,W,X,K)=>o.extend(rl(u,n,l,f,g,y,w,E,!0,C,!0,L,z,Z,W,X,K),{u_texsize_icon:R,u_texture_icon:1}),Rd=(u,n,l)=>({u_matrix:u,u_opacity:n,u_color:l}),x1=(u,n,l,f,g)=>o.extend(function(y,w,E){const C=w.imageManager.getPattern(y.toString()),{width:R,height:L}=w.imageManager.getPixelSize(),z=Math.pow(2,E.tileID.overscaledZ),Z=E.tileSize*Math.pow(2,w.transform.tileZoom)/z,W=Z*(E.tileID.canonical.x+E.tileID.wrap*z),X=Z*E.tileID.canonical.y;return{u_image:0,u_pattern_tl:C.tl,u_pattern_br:C.br,u_texsize:[R,L],u_pattern_size:C.displaySize,u_tile_units_to_pixels:1/Tr(E,1,w.transform.tileZoom),u_pixel_coord_upper:[W>>16,X>>16],u_pixel_coord_lower:[65535&W,65535&X]}}(f,l,g),{u_matrix:u,u_opacity:n}),kd={fillExtrusion:u=>({u_matrix:new o.UniformMatrix4f(u),u_lightpos:new o.Uniform3f(u),u_lightintensity:new o.Uniform1f(u),u_lightcolor:new o.Uniform3f(u),u_vertical_gradient:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_edge_radius:new o.Uniform1f(u),u_ao:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_up_dir:new o.Uniform3f(u),u_height_lift:new o.Uniform1f(u)}),fillExtrusionPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_lightpos:new o.Uniform3f(u),u_lightintensity:new o.Uniform1f(u),u_lightcolor:new o.Uniform3f(u),u_vertical_gradient:new o.Uniform1f(u),u_height_factor:new o.Uniform1f(u),u_edge_radius:new o.Uniform1f(u),u_ao:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_up_dir:new o.Uniform3f(u),u_height_lift:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u)}),fill:u=>({u_matrix:new o.UniformMatrix4f(u)}),fillPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),fillOutline:u=>({u_matrix:new o.UniformMatrix4f(u),u_world:new o.Uniform2f(u)}),fillOutlinePattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_world:new o.Uniform2f(u),u_image:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),circle:u=>({u_camera_to_center_distance:new o.Uniform1f(u),u_extrude_scale:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_up_dir:new o.Uniform3f(u)}),collisionBox:u=>({u_matrix:new o.UniformMatrix4f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_extrude_scale:new o.Uniform2f(u)}),collisionCircle:u=>({u_matrix:new o.UniformMatrix4f(u),u_inv_matrix:new o.UniformMatrix4f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_viewport_size:new o.Uniform2f(u)}),debug:u=>({u_color:new o.UniformColor(u),u_matrix:new o.UniformMatrix4f(u),u_overlay:new o.Uniform1i(u),u_overlay_scale:new o.Uniform1f(u)}),clippingMask:u=>({u_matrix:new o.UniformMatrix4f(u)}),heatmap:u=>({u_extrude_scale:new o.Uniform1f(u),u_intensity:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_up_dir:new o.Uniform3f(u)}),heatmapTexture:u=>({u_image:new o.Uniform1i(u),u_color_ramp:new o.Uniform1i(u),u_opacity:new o.Uniform1f(u)}),hillshade:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_latrange:new o.Uniform2f(u),u_light:new o.Uniform2f(u),u_shadow:new o.UniformColor(u),u_highlight:new o.UniformColor(u),u_accent:new o.UniformColor(u)}),hillshadePrepare:u=>({u_matrix:new o.UniformMatrix4f(u),u_image:new o.Uniform1i(u),u_dimension:new o.Uniform2f(u),u_zoom:new o.Uniform1f(u),u_unpack:new o.Uniform4f(u)}),line:u=>({u_matrix:new o.UniformMatrix4f(u),u_pixels_to_tile_units:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_units_to_pixels:new o.Uniform2f(u),u_dash_image:new o.Uniform1i(u),u_gradient_image:new o.Uniform1i(u),u_image_height:new o.Uniform1f(u),u_texsize:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_alpha_discard_threshold:new o.Uniform1f(u),u_trim_offset:new o.Uniform2f(u)}),linePattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_texsize:new o.Uniform2f(u),u_pixels_to_tile_units:new o.UniformMatrix2f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_units_to_pixels:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u),u_alpha_discard_threshold:new o.Uniform1f(u)}),raster:u=>({u_matrix:new o.UniformMatrix4f(u),u_tl_parent:new o.Uniform2f(u),u_scale_parent:new o.Uniform1f(u),u_fade_t:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_image0:new o.Uniform1i(u),u_image1:new o.Uniform1i(u),u_brightness_low:new o.Uniform1f(u),u_brightness_high:new o.Uniform1f(u),u_saturation_factor:new o.Uniform1f(u),u_contrast_factor:new o.Uniform1f(u),u_spin_weights:new o.Uniform3f(u),u_perspective_transform:new o.Uniform2f(u)}),symbolIcon:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_camera_forward:new o.Uniform3f(u),u_tile_matrix:new o.UniformMatrix4f(u),u_up_vector:new o.Uniform3f(u),u_ecef_origin:new o.Uniform3f(u),u_texture:new o.Uniform1i(u)}),symbolSDF:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_texture:new o.Uniform1i(u),u_gamma_scale:new o.Uniform1f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_tile_id:new o.Uniform3f(u),u_zoom_transition:new o.Uniform1f(u),u_inv_rot_matrix:new o.UniformMatrix4f(u),u_merc_center:new o.Uniform2f(u),u_camera_forward:new o.Uniform3f(u),u_tile_matrix:new o.UniformMatrix4f(u),u_up_vector:new o.Uniform3f(u),u_ecef_origin:new o.Uniform3f(u),u_is_halo:new o.Uniform1i(u)}),symbolTextAndIcon:u=>({u_is_size_zoom_constant:new o.Uniform1i(u),u_is_size_feature_constant:new o.Uniform1i(u),u_size_t:new o.Uniform1f(u),u_size:new o.Uniform1f(u),u_camera_to_center_distance:new o.Uniform1f(u),u_rotate_symbol:new o.Uniform1i(u),u_aspect_ratio:new o.Uniform1f(u),u_fade_change:new o.Uniform1f(u),u_matrix:new o.UniformMatrix4f(u),u_label_plane_matrix:new o.UniformMatrix4f(u),u_coord_matrix:new o.UniformMatrix4f(u),u_is_text:new o.Uniform1i(u),u_pitch_with_map:new o.Uniform1i(u),u_texsize:new o.Uniform2f(u),u_texsize_icon:new o.Uniform2f(u),u_texture:new o.Uniform1i(u),u_texture_icon:new o.Uniform1i(u),u_gamma_scale:new o.Uniform1f(u),u_device_pixel_ratio:new o.Uniform1f(u),u_is_halo:new o.Uniform1i(u)}),background:u=>({u_matrix:new o.UniformMatrix4f(u),u_opacity:new o.Uniform1f(u),u_color:new o.UniformColor(u)}),backgroundPattern:u=>({u_matrix:new o.UniformMatrix4f(u),u_opacity:new o.Uniform1f(u),u_image:new o.Uniform1i(u),u_pattern_tl:new o.Uniform2f(u),u_pattern_br:new o.Uniform2f(u),u_texsize:new o.Uniform2f(u),u_pattern_size:new o.Uniform2f(u),u_pixel_coord_upper:new o.Uniform2f(u),u_pixel_coord_lower:new o.Uniform2f(u),u_tile_units_to_pixels:new o.Uniform1f(u)}),terrainRaster:bd,terrainDepth:bd,skybox:u=>({u_matrix:new o.UniformMatrix4f(u),u_sun_direction:new o.Uniform3f(u),u_cubemap:new o.Uniform1i(u),u_opacity:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u)}),skyboxGradient:u=>({u_matrix:new o.UniformMatrix4f(u),u_color_ramp:new o.Uniform1i(u),u_center_direction:new o.Uniform3f(u),u_radius:new o.Uniform1f(u),u_opacity:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u)}),skyboxCapture:u=>({u_matrix_3f:new o.UniformMatrix3f(u),u_sun_direction:new o.Uniform3f(u),u_sun_intensity:new o.Uniform1f(u),u_color_tint_r:new o.Uniform4f(u),u_color_tint_m:new o.Uniform4f(u),u_luminance:new o.Uniform1f(u)}),globeRaster:u=>({u_proj_matrix:new o.UniformMatrix4f(u),u_globe_matrix:new o.UniformMatrix4f(u),u_normalize_matrix:new o.UniformMatrix4f(u),u_merc_matrix:new o.UniformMatrix4f(u),u_zoom_transition:new o.Uniform1f(u),u_merc_center:new o.Uniform2f(u),u_image0:new o.Uniform1i(u),u_grid_matrix:new o.UniformMatrix3f(u),u_skirt_height:new o.Uniform1f(u),u_frustum_tl:new o.Uniform3f(u),u_frustum_tr:new o.Uniform3f(u),u_frustum_br:new o.Uniform3f(u),u_frustum_bl:new o.Uniform3f(u),u_globe_pos:new o.Uniform3f(u),u_globe_radius:new o.Uniform1f(u),u_viewport:new o.Uniform2f(u)}),globeAtmosphere:u=>({u_frustum_tl:new o.Uniform3f(u),u_frustum_tr:new o.Uniform3f(u),u_frustum_br:new o.Uniform3f(u),u_frustum_bl:new o.Uniform3f(u),u_horizon:new o.Uniform1f(u),u_transition:new o.Uniform1f(u),u_fadeout_range:new o.Uniform1f(u),u_color:new o.Uniform4f(u),u_high_color:new o.Uniform4f(u),u_space_color:new o.Uniform4f(u),u_star_intensity:new o.Uniform1f(u),u_star_density:new o.Uniform1f(u),u_star_size:new o.Uniform1f(u),u_temporal_offset:new o.Uniform1f(u),u_horizon_angle:new o.Uniform1f(u),u_rotation_matrix:new o.UniformMatrix4f(u)})};let nl;function sa(u,n,l,f,g,y,w){const E=u.context,C=E.gl,R=u.transform,L=u.useProgram("collisionBox"),z=[];let Z=0,W=0;for(let ne=0;ne<f.length;ne++){const fe=f[ne],me=n.getTile(fe),pe=me.getBucket(l);if(!pe)continue;const we=ei(fe,pe,R);let be=we;g[0]===0&&g[1]===0||(be=u.translatePosMatrix(we,me,g,y));const Re=w?pe.textCollisionBox:pe.iconCollisionBox,rt=pe.collisionCircleArray;if(rt.length>0){const Me=o.create(),Ve=be;o.mul(Me,pe.placementInvProjMatrix,R.glCoordMatrix),o.mul(Me,Me,pe.placementViewportMatrix),z.push({circleArray:rt,circleOffset:W,transform:Ve,invTransform:Me,projection:pe.getProjection()}),Z+=rt.length/4,W=Z}Re&&(u.terrain&&u.terrain.setupElevationDraw(me,L),L.draw(E,C.LINES,o.DepthMode.disabled,o.StencilMode.disabled,u.colorModeForRenderPass(),o.CullFaceMode.disabled,Id(be,R,me,pe.getProjection()),l.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,R.zoom,null,[Re.collisionVertexBuffer,Re.collisionVertexBufferExt]))}if(!w||!z.length)return;const X=u.useProgram("collisionCircle"),K=new o.StructArrayLayout2f1f2i16;K.resize(4*Z),K._trim();let Q=0;for(const ne of z)for(let fe=0;fe<ne.circleArray.length/4;fe++){const me=4*fe,pe=ne.circleArray[me+0],we=ne.circleArray[me+1],be=ne.circleArray[me+2],Re=ne.circleArray[me+3];K.emplace(Q++,pe,we,be,Re,0),K.emplace(Q++,pe,we,be,Re,1),K.emplace(Q++,pe,we,be,Re,2),K.emplace(Q++,pe,we,be,Re,3)}(!nl||nl.length<2*Z)&&(nl=function(ne){const fe=2*ne,me=new o.StructArrayLayout3ui6;me.resize(fe),me._trim();for(let pe=0;pe<fe;pe++){const we=6*pe;me.uint16[we+0]=4*pe+0,me.uint16[we+1]=4*pe+1,me.uint16[we+2]=4*pe+2,me.uint16[we+3]=4*pe+2,me.uint16[we+4]=4*pe+3,me.uint16[we+5]=4*pe+0}return me}(Z));const B=E.createIndexBuffer(nl,!0),H=E.createVertexBuffer(K,o.collisionCircleLayout.members,!0);for(const ne of z){const fe={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(re=R).getCameraToCenterDistance(ne.projection),u_viewport_size:[re.width,re.height]};X.draw(E,C.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,u.colorModeForRenderPass(),o.CullFaceMode.disabled,fe,l.id,H,B,o.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,R.zoom)}var re;H.destroy(),B.destroy()}const hu=o.create();function Dd({width:u,height:n,anchor:l,textOffset:f,textScale:g},y){const{horizontalAlign:w,verticalAlign:E}=o.getAnchorAlignment(l),C=-(w-.5)*u,R=-(E-.5)*n,L=o.evaluateVariableOffset(l,f);return new o.Point((C/g+L[0])*y,(R/g+L[1])*y)}function b1(u,n,l,f,g,y,w,E,C,R,L){const z=u.text.placedSymbolArray,Z=u.text.dynamicLayoutVertexArray,W=u.icon.dynamicLayoutVertexArray,X={},K=u.getProjection(),Q=Ir(E,K,y),B=y.elevation,H=K.upVectorScale(E.canonical,y.center.lat,y.worldSize).metersToTile;Z.clear();for(let re=0;re<z.length;re++){const ne=z.get(re),{tileAnchorX:fe,tileAnchorY:me,numGlyphs:pe}=ne,we=ne.hidden||!ne.crossTileID||u.allowVerticalPlacement&&!ne.placedOrientation?null:f[ne.crossTileID];if(we){let be=0,Re=0,rt=0;if(B){const st=B?B.getAtTileOffset(E,fe,me):0,[Mt,Ot,wt]=K.upVector(E.canonical,fe,me);be=st*Mt*H,Re=st*Ot*H,rt=st*wt*H}let[Me,Ve,Oe,et]=Ar(ne.projectedAnchorX+be,ne.projectedAnchorY+Re,ne.projectedAnchorZ+rt,l?Q:w);const Le=os(y.getCameraToCenterDistance(K),et);let Ue=g.evaluateSizeForFeature(u.textSizeData,R,ne)*Le/o.ONE_EM;l&&(Ue*=u.tilePixelRatio/C);const ot=Dd(we,Ue);l?({x:Me,y:Ve,z:Oe}=K.projectTilePoint(fe+ot.x,me+ot.y,E.canonical),[Me,Ve,Oe]=Ar(Me+be,Ve+Re,Oe+rt,w)):(n&&ot._rotate(-y.angle),Me+=ot.x,Ve+=ot.y,Oe=0);const Xe=u.allowVerticalPlacement&&ne.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let st=0;st<pe;st++)o.addDynamicAttributes(Z,Me,Ve,Oe,Xe);L&&ne.associatedIconIndex>=0&&(X[ne.associatedIconIndex]={x:Me,y:Ve,z:Oe,angle:Xe})}else _t(pe,Z)}if(L){W.clear();const re=u.icon.placedSymbolArray;for(let ne=0;ne<re.length;ne++){const fe=re.get(ne),{numGlyphs:me}=fe,pe=X[ne];if(fe.hidden||!pe)_t(me,W);else{const{x:we,y:be,z:Re,angle:rt}=pe;for(let Me=0;Me<me;Me++)o.addDynamicAttributes(W,we,be,Re,rt)}}u.icon.dynamicLayoutVertexBuffer.updateData(W)}u.text.dynamicLayoutVertexBuffer.updateData(Z)}function Od(u,n,l){return l.iconsInText&&n?"symbolTextAndIcon":u?"symbolSDF":"symbolIcon"}function fu(u,n,l,f,g,y,w,E,C,R,L,z){const Z=u.context,W=Z.gl,X=u.transform,K=E==="map",Q=C==="map",B=K&&l.layout.get("symbol-placement")!=="point",H=K&&!Q&&!B,re=l.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ne=!1;const fe=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),me=[o.mercatorXfromLng(X.center.lng),o.mercatorYfromLat(X.center.lat)],pe=l.layout.get("text-variable-anchor"),we=X.projection.name==="globe",be=[],Re=[0,-1,0];let rt=Re;!we&&!X.mercatorFromTransition||K||(rt=function(Me){const Ve=Me._camera.getWorldToCamera(Me.worldSize,1),Oe=o.multiply([],Ve,Me.globeMatrix);o.invert(Oe,Oe);const et=[0,0,0],Le=[0,1,0,0];return o.transformMat4$1(Le,Le,Oe),et[0]=Le[0],et[1]=Le[1],et[2]=Le[2],o.normalize(et,et),et}(X));for(const Me of f){const Ve=n.getTile(Me),Oe=Ve.getBucket(l);if(!Oe||Oe.projection.name==="mercator"&&we)continue;const et=g?Oe.text:Oe.icon;if(!et||Oe.fullyClipped||!et.segments.get().length)continue;const Le=et.programConfigurations.get(l.id),Ue=g||Oe.sdfIcons,ot=g?Oe.textSizeData:Oe.iconSizeData,Xe=Q||X.pitch!==0,st=o.evaluateSizeForZoom(ot,X.zoom);let Mt,Ot,wt,kt,Yt=[0,0],Xt=null;if(g)Ot=Ve.glyphAtlasTexture,wt=W.LINEAR,Mt=Ve.glyphAtlasTexture.size,Oe.iconsInText&&(Yt=Ve.imageAtlasTexture.size,Xt=Ve.imageAtlasTexture,kt=Xe||u.options.rotating||u.options.zooming||ot.kind==="composite"||ot.kind==="camera"?W.LINEAR:W.NEAREST);else{const Ji=l.layout.get("icon-size").constantOr(0)!==1||Oe.iconsNeedLinear;Ot=Ve.imageAtlasTexture,wt=Ue||u.options.rotating||u.options.zooming||Ji||Xe?W.LINEAR:W.NEAREST,Mt=Ve.imageAtlasTexture.size}const At=Oe.projection.name==="globe",lr=At?rt:Re,cr=At?o.globeToMercatorTransition(X.zoom):0,ur=Ir(Me,Oe.getProjection(),X),hr=X.calculatePixelsToTileUnitsMatrix(Ve),gn=Te(ur,Ve.tileID.canonical,Q,K,X,Oe.getProjection(),hr),sn=u.terrain&&Q&&B?o.invert(o.create(),gn):hu,ii=dr(ur,Ve.tileID.canonical,Q,K,X,Oe.getProjection(),hr),Mi=pe&&Oe.hasTextData(),Mr=l.layout.get("icon-text-fit")!=="none"&&Mi&&Oe.hasIconData();if(B){const Ji=X.elevation,yo=Ji?Ji.getAtTileOffsetFunc(Me,X.center.lat,X.worldSize,Oe.getProjection()):null,Vo=Tn(ur,Ve.tileID.canonical,Q,K,X,Oe.getProjection(),hr);Jr(Oe,ur,u,g,Vo,ii,Q,R,yo,Me)}const fr=B||g&&pe||Mr,ir=u.translatePosMatrix(ur,Ve,y,w),Zr=fr?hu:gn,Sn=u.translatePosMatrix(ii,Ve,y,w,!0),Cr=Oe.getProjection().createInversionMatrix(X,Me.canonical),On=[];u.terrainRenderModeElevated()&&Q&&On.push("PITCH_WITH_MAP_TERRAIN"),At&&On.push("PROJECTION_GLOBE_VIEW"),fr&&On.push("PROJECTED_POS_ON_VIEWPORT");const vl=Ue&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Uo;Uo=Ue?Oe.iconsInText?uu(ot.kind,st,H,Q,u,ir,Zr,Sn,Mt,Yt,Me,cr,me,Cr,lr,Oe.getProjection()):rl(ot.kind,st,H,Q,u,ir,Zr,Sn,g,Mt,!0,Me,cr,me,Cr,lr,Oe.getProjection()):Ld(ot.kind,st,H,Q,u,ir,Zr,Sn,g,Mt,Me,cr,me,Cr,lr,Oe.getProjection());const _a={program:u.useProgram(Od(Ue,g,Oe),Le,On),buffers:et,uniformValues:Uo,atlasTexture:Ot,atlasTextureIcon:Xt,atlasInterpolation:wt,atlasInterpolationIcon:kt,isSDF:Ue,hasHalo:vl,tile:Ve,labelPlaneMatrixInv:sn};if(re&&Oe.canOverlap){ne=!0;const Ji=et.segments.get();for(const yo of Ji)be.push({segments:new o.SegmentVector([yo]),sortKey:yo.sortKey,state:_a})}else be.push({segments:et.segments,sortKey:0,state:_a})}ne&&be.sort((Me,Ve)=>Me.sortKey-Ve.sortKey);for(const Me of be){const Ve=Me.state;if(u.terrain&&u.terrain.setupElevationDraw(Ve.tile,Ve.program,{useDepthForOcclusion:!we,labelPlaneMatrixInv:Ve.labelPlaneMatrixInv}),Z.activeTexture.set(W.TEXTURE0),Ve.atlasTexture.bind(Ve.atlasInterpolation,W.CLAMP_TO_EDGE),Ve.atlasTextureIcon&&(Z.activeTexture.set(W.TEXTURE1),Ve.atlasTextureIcon&&Ve.atlasTextureIcon.bind(Ve.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),Ve.isSDF){const Oe=Ve.uniformValues;Ve.hasHalo&&(Oe.u_is_halo=1,aa(Ve.buffers,Me.segments,l,u,Ve.program,fe,L,z,Oe)),Oe.u_is_halo=0}aa(Ve.buffers,Me.segments,l,u,Ve.program,fe,L,z,Ve.uniformValues)}}function aa(u,n,l,f,g,y,w,E,C){const R=f.context,L=[u.dynamicLayoutVertexBuffer,u.opacityVertexBuffer,u.globeExtVertexBuffer];g.draw(R,R.gl.TRIANGLES,y,w,E,o.CullFaceMode.disabled,C,l.id,u.layoutVertexBuffer,u.indexBuffer,n,l.paint,f.transform.zoom,u.programConfigurations.get(l.id),L)}function pu(u,n,l,f,g,y,w){const E=u.context.gl,C=l.paint.get("fill-pattern"),R=C&&C.constantOr(1);let L,z,Z,W,X;w?(z=R&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",L=E.LINES):(z=R?"fillPattern":"fill",L=E.TRIANGLES);for(const K of f){const Q=n.getTile(K);if(R&&!Q.patternsLoaded())continue;const B=Q.getBucket(l);if(!B)continue;u.prepareDrawTile();const H=B.programConfigurations.get(l.id),re=u.useProgram(z,H);R&&(u.context.activeTexture.set(E.TEXTURE0),Q.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),H.updatePaintBuffers());const ne=C.constantOr(null);if(ne&&Q.imageAtlas){const me=Q.imageAtlas.patternPositions[ne.toString()];me&&H.setConstantPatternPositions(me)}const fe=u.translatePosMatrix(K.projMatrix,Q,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(w){W=B.indexBuffer2,X=B.segments2;const me=u.terrain&&u.terrain.renderingToTexture?u.terrain.drapeBufferSize:[E.drawingBufferWidth,E.drawingBufferHeight];Z=z==="fillOutlinePattern"&&R?_1(fe,u,Q,me):g1(fe,me)}else W=B.indexBuffer,X=B.segments,Z=R?Sd(fe,u,Q):Bo(fe);u.prepareDrawProgram(u.context,re,K.toUnwrapped()),re.draw(u.context,L,g,u.stencilModeForClipping(K),y,o.CullFaceMode.disabled,Z,l.id,B.layoutVertexBuffer,W,X,l.paint,u.transform.zoom,H)}}function il(u,n,l,f,g,y,w){const E=u.context,C=E.gl,R=u.transform,L=l.paint.get("fill-extrusion-pattern"),z=L.constantOr(1),Z=l.paint.get("fill-extrusion-opacity"),W=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),l.paint.get("fill-extrusion-ambient-occlusion-radius")],X=l.layout.get("fill-extrusion-edge-radius"),K=X>0&&!l.paint.get("fill-extrusion-rounded-roof"),Q=K?0:X,B=R.projection.name==="globe"?o.fillExtrusionHeightLift():0,H=R.projection.name==="globe",re=H?o.globeToMercatorTransition(R.zoom):0,ne=[o.mercatorXfromLng(R.center.lng),o.mercatorYfromLat(R.center.lat)],fe=[];H&&fe.push("PROJECTION_GLOBE_VIEW"),W[0]>0&&fe.push("FAUX_AO"),K&&fe.push("ZERO_ROOF_RADIUS");for(const me of f){const pe=n.getTile(me),we=pe.getBucket(l);if(!we||we.projection.name!==R.projection.name)continue;const be=we.programConfigurations.get(l.id),Re=u.useProgram(z?"fillExtrusionPattern":"fillExtrusion",be,fe);if(u.terrain){const Ue=u.terrain;if(u.style.terrainSetForDrapingOnly())Ue.setupElevationDraw(pe,Re,{useMeterToDem:!0});else{if(!we.enableTerrain)continue;if(Ue.setupElevationDraw(pe,Re,{useMeterToDem:!0}),mu(E,n,me,we,l,Ue),!we.centroidVertexBuffer){const ot=Re.attributes.a_centroid_pos;ot!==void 0&&C.vertexAttrib2f(ot,0,0)}}}z&&(u.context.activeTexture.set(C.TEXTURE0),pe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),be.updatePaintBuffers());const rt=L.constantOr(null);if(rt&&pe.imageAtlas){const Ue=pe.imageAtlas.patternPositions[rt.toString()];Ue&&be.setConstantPatternPositions(Ue)}const Me=u.translatePosMatrix(me.projMatrix,pe,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Ve=R.projection.createInversionMatrix(R,me.canonical),Oe=l.paint.get("fill-extrusion-vertical-gradient"),et=z?lu(Me,u,Oe,Z,W,Q,me,pe,B,re,ne,Ve):Td(Me,u,Oe,Z,W,Q,me,B,re,ne,Ve);u.prepareDrawProgram(E,Re,me.toUnwrapped());const Le=[];u.terrain&&Le.push(we.centroidVertexBuffer),H&&Le.push(we.layoutVertexExtBuffer),Re.draw(E,E.gl.TRIANGLES,g,y,w,o.CullFaceMode.backCCW,et,l.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,l.paint,u.transform.zoom,be,Le)}}function mu(u,n,l,f,g,y){const w=[B=>{let H=B.canonical.x-1,re=B.wrap;return H<0&&(H=(1<<B.canonical.z)-1,re--),new o.OverscaledTileID(B.overscaledZ,re,B.canonical.z,H,B.canonical.y)},B=>{let H=B.canonical.x+1,re=B.wrap;return H===1<<B.canonical.z&&(H=0,re++),new o.OverscaledTileID(B.overscaledZ,re,B.canonical.z,H,B.canonical.y)},B=>new o.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,(B.canonical.y===0?1<<B.canonical.z:B.canonical.y)-1),B=>new o.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y===(1<<B.canonical.z)-1?0:B.canonical.y+1)],E=B=>{const H=n.getSource().minzoom,re=fe=>{const me=n.getTileByID(fe);if(me&&me.hasData())return me.getBucket(g)},ne=[0,-1,1];for(const fe of ne){if(B.overscaledZ+fe<H)continue;const me=re(B.calculateScaledKey(B.overscaledZ+fe));if(me)return me}},C=[0,0,0],R=(B,H)=>(C[0]=Math.min(B.min.y,H.min.y),C[1]=Math.max(B.max.y,H.max.y),C[2]=o.EXTENT-H.min.x>B.max.x?H.min.x-o.EXTENT:B.max.x,C),L=(B,H)=>(C[0]=Math.min(B.min.x,H.min.x),C[1]=Math.max(B.max.x,H.max.x),C[2]=o.EXTENT-H.min.y>B.max.y?H.min.y-o.EXTENT:B.max.y,C),z=[(B,H)=>R(B,H),(B,H)=>R(H,B),(B,H)=>L(B,H),(B,H)=>L(H,B)],Z=new o.Point(0,0);let W,X,K;const Q=(B,H,re,ne,fe)=>{const me=[[ne?re:B,ne?B:re,0],[ne?re:H,ne?H:re,0]],pe=fe<0?o.EXTENT+fe:fe,we=[ne?pe:(B+H)/2,ne?(B+H)/2:pe,0];return re===0&&fe<0||re!==0&&fe>0?y.getForTilePoints(K,[we],!0,X):me.push(we),y.getForTilePoints(l,me,!0,W),Math.max(me[0][2],me[1][2],we[2])/y.exaggeration()};for(let B=0;B<4;B++){const H=(B<2?1:5)-B,re=f.borders[B];if(re.length===0)continue;const ne=K=w[B](l),fe=E(ne);if(!(fe&&fe instanceof o.FillExtrusionBucket&&fe.enableTerrain)||f.borderDoneWithNeighborZ[B]===fe.canonical.z&&fe.borderDoneWithNeighborZ[H]===f.canonical.z||(X=y.findDEMTileFor(ne),!X||!X.dem))continue;if(!W){const be=y.findDEMTileFor(l);if(!be||!be.dem)return;W=be}const me=fe.borders[H];let pe=0;const we=fe.borderDoneWithNeighborZ[H]!==f.canonical.z;if(f.canonical.z===fe.canonical.z){for(let be=0;be<re.length;be++){const Re=f.featuresOnBorder[re[be]],rt=Re.borders[B];let Me;for(;pe<me.length&&(Me=fe.featuresOnBorder[me[pe]],!(Me.borders[H][1]>rt[0]+3));)we&&fe.encodeCentroid(void 0,Me,!1),pe++;if(Me&&pe<me.length){const Ve=pe;let Oe=0;for(;!(Me.borders[H][0]>rt[1]-3)&&(Oe++,++pe!==me.length);)Me=fe.featuresOnBorder[me[pe]];if(Me=fe.featuresOnBorder[me[Ve]],Re.intersectsCount()>1||Me.intersectsCount()>1||Oe!==1){Oe!==1&&(pe=Ve),f.encodeCentroid(void 0,Re,!1),we&&fe.encodeCentroid(void 0,Me,!1);continue}const et=z[B](Re,Me),Le=B%2?o.EXTENT-1:0;Z.x=Q(et[0],Math.min(o.EXTENT-1,et[1]),Le,B<2,et[2]),Z.y=0,f.encodeCentroid(Z,Re,!1),we&&fe.encodeCentroid(Z,Me,!1)}else f.encodeCentroid(void 0,Re,!1)}f.borderDoneWithNeighborZ[B]=fe.canonical.z,f.needsCentroidUpdate=!0,we&&(fe.borderDoneWithNeighborZ[H]=f.canonical.z,fe.needsCentroidUpdate=!0)}else{for(const be of re)f.encodeCentroid(void 0,f.featuresOnBorder[be],!1);if(we){for(const be of me)fe.encodeCentroid(void 0,fe.featuresOnBorder[be],!1);fe.borderDoneWithNeighborZ[H]=f.canonical.z,fe.needsCentroidUpdate=!0}f.borderDoneWithNeighborZ[B]=fe.canonical.z,f.needsCentroidUpdate=!0}}(f.needsCentroidUpdate||!f.centroidVertexBuffer&&f.centroidVertexArray.length!==0)&&f.uploadCentroid(u)}const fs=new o.Color(1,0,0,1),$1=new o.Color(0,1,0,1),w1=new o.Color(0,0,1,1),E1=new o.Color(1,0,1,1),T1=new o.Color(0,1,1,1);function S1(u,n,l){const f=u.context,g=u.transform,y=f.gl,w=g.projection.name==="globe",E=w?["PROJECTION_GLOBE_VIEW"]:null;let C=l.projMatrix;if(w&&o.globeToMercatorTransition(g.zoom)>0){const Re=o.transitionTileAABBinECEF(l.canonical,g),rt=o.globeDenormalizeECEF(Re);C=o.multiply(new Float32Array(16),g.globeMatrix,rt),o.multiply(C,g.projMatrix,C)}const R=u.useProgram("debug",null,E),L=n.getTileByID(l.key);u.terrain&&u.terrain.setupElevationDraw(L,R);const z=o.DepthMode.disabled,Z=o.StencilMode.disabled,W=u.colorModeForRenderPass(),X="$debug";f.activeTexture.set(y.TEXTURE0),u.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),w?L._makeGlobeTileDebugBuffers(u.context,g):L._makeDebugTileBoundsBuffers(u.context,g.projection);const K=L._tileDebugBuffer||u.debugBuffer,Q=L._tileDebugIndexBuffer||u.debugIndexBuffer,B=L._tileDebugSegments||u.debugSegments;R.draw(f,y.LINE_STRIP,z,Z,W,o.CullFaceMode.disabled,el(C,o.Color.red),X,K,Q,B,null,null,null,[L._globeTileDebugBorderBuffer]);const H=L.latestRawTileData,re=Math.floor((H&&H.byteLength||0)/1024),ne=n.getTile(l).tileSize,fe=512/Math.min(ne,512)*(l.overscaledZ/g.zoom)*.5;let me=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(me+=` => ${l.overscaledZ}`),me+=` ${re}kb`,function(Re,rt){Re.initDebugOverlayCanvas();const Me=Re.debugOverlayCanvas,Ve=Re.context.gl,Oe=Re.debugOverlayCanvas.getContext("2d");Oe.clearRect(0,0,Me.width,Me.height),Oe.shadowColor="white",Oe.shadowBlur=2,Oe.lineWidth=1.5,Oe.strokeStyle="white",Oe.textBaseline="top",Oe.font="bold 36px Open Sans, sans-serif",Oe.fillText(rt,5,5),Oe.strokeText(rt,5,5),Re.debugOverlayTexture.update(Me),Re.debugOverlayTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE)}(u,me);const pe=L._tileDebugTextBuffer||u.debugBuffer,we=L._tileDebugTextIndexBuffer||u.quadTriangleIndexBuffer,be=L._tileDebugTextSegments||u.debugSegments;R.draw(f,y.TRIANGLES,z,Z,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,el(C,o.Color.transparent,fe),X,pe,we,be,null,null,null,[L._globeTileDebugTextBuffer])}function gu(u,n,l,f){ps(u,0,n+l/2,u.transform.width,l,f)}function ol(u,n,l,f){ps(u,n-l/2,0,l,u.transform.height,f)}function ps(u,n,l,f,g,y){const w=u.context,E=w.gl;E.enable(E.SCISSOR_TEST),E.scissor(n*o.exported.devicePixelRatio,l*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,g*o.exported.devicePixelRatio),w.clear({color:y}),E.disable(E.SCISSOR_TEST)}const _u=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:yu}=_u;function Xi(u,n,l,f){u.emplaceBack(n,l,f)}class sl{constructor(n){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Xi(this.vertexArray,-1,-1,1),Xi(this.vertexArray,1,-1,1),Xi(this.vertexArray,-1,1,1),Xi(this.vertexArray,1,1,1),Xi(this.vertexArray,-1,-1,-1),Xi(this.vertexArray,1,-1,-1),Xi(this.vertexArray,-1,1,-1),Xi(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,yu),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function ri(u,n,l,f,g,y){const w=u.gl,E=n.paint.get("sky-atmosphere-color"),C=n.paint.get("sky-atmosphere-halo-color"),R=n.paint.get("sky-atmosphere-sun-intensity"),L=((z,Z,W,X,K)=>({u_matrix_3f:z,u_sun_direction:Z,u_sun_intensity:W,u_color_tint_r:[X.r,X.g,X.b,X.a],u_color_tint_m:[K.r,K.g,K.b,K.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),f),g,R,E,C);w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_CUBE_MAP_POSITIVE_X+y,n.skyboxTexture,0),l.draw(u,w.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,L,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const la=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class vu{constructor(n){const l=new o.StructArrayLayout5f20;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const f=new o.StructArrayLayout3ui6;f.emplaceBack(0,1,2),f.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(l,la.members),this.indexBuffer=n.createIndexBuffer(f),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Fo={symbol:function(u,n,l,f,g){if(u.renderPass!=="translucent")return;const y=o.StencilMode.disabled,w=u.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(E,C,R,L,z,Z,W){const X=C.transform,K=z==="map",Q=Z==="map";for(const B of E){const H=L.getTile(B),re=H.getBucket(R);if(!re||!re.text||!re.text.segments.get().length)continue;const ne=o.evaluateSizeForZoom(re.textSizeData,X.zoom),fe=Ir(B,re.getProjection(),X),me=X.calculatePixelsToTileUnitsMatrix(H),pe=Te(fe,H.tileID.canonical,Q,K,X,re.getProjection(),me),we=R.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(ne){const be=Math.pow(2,X.zoom-H.tileID.overscaledZ);b1(re,K,Q,W,o.symbolSize,X,pe,B,be,ne,we)}}}(f,u,l,n,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),g),l.paint.get("icon-opacity").constantOr(1)!==0&&fu(u,n,l,f,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),y,w),l.paint.get("text-opacity").constantOr(1)!==0&&fu(u,n,l,f,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),y,w),n.map.showCollisionBoxes&&(sa(u,n,l,f,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),sa(u,n,l,f,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(u,n,l,f){if(u.renderPass!=="translucent")return;const g=l.paint.get("circle-opacity"),y=l.paint.get("circle-stroke-width"),w=l.paint.get("circle-stroke-opacity"),E=l.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)===0&&(y.constantOr(1)===0||w.constantOr(1)===0))return;const C=u.context,R=C.gl,L=u.transform,z=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),Z=o.StencilMode.disabled,W=u.colorModeForRenderPass(),X=L.projection.name==="globe",K=[o.mercatorXfromLng(L.center.lng),o.mercatorYfromLat(L.center.lat)],Q=[];for(let H=0;H<f.length;H++){const re=f[H],ne=n.getTile(re),fe=ne.getBucket(l);if(!fe||fe.projection.name!==L.projection.name)continue;const me=fe.programConfigurations.get(l.id),pe=Ad(l);X&&pe.push("PROJECTION_GLOBE_VIEW");const we=u.useProgram("circle",me,pe),be=fe.layoutVertexBuffer,Re=fe.globeExtVertexBuffer,rt=fe.indexBuffer,Me=L.projection.createInversionMatrix(L,re.canonical),Ve={programConfiguration:me,program:we,layoutVertexBuffer:be,globeExtVertexBuffer:Re,indexBuffer:rt,uniformValues:Cd(u,re,ne,Me,K,l),tile:ne};if(E){const Oe=fe.segments.get();for(const et of Oe)Q.push({segments:new o.SegmentVector([et]),sortKey:et.sortKey,state:Ve})}else Q.push({segments:fe.segments,sortKey:0,state:Ve})}E&&Q.sort((H,re)=>H.sortKey-re.sortKey);const B={useDepthForOcclusion:!X};for(const H of Q){const{programConfiguration:re,program:ne,layoutVertexBuffer:fe,globeExtVertexBuffer:me,indexBuffer:pe,uniformValues:we,tile:be}=H.state,Re=H.segments;u.terrain&&u.terrain.setupElevationDraw(be,ne,B),u.prepareDrawProgram(C,ne,be.tileID.toUnwrapped()),ne.draw(C,R.TRIANGLES,z,Z,W,o.CullFaceMode.disabled,we,l.id,fe,pe,Re,l.paint,L.zoom,re,[me])}},heatmap:function(u,n,l,f){if(l.paint.get("heatmap-opacity")!==0)if(u.renderPass==="offscreen"){const g=u.context,y=g.gl,w=o.StencilMode.disabled,E=new o.ColorMode([y.ONE,y.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(W,X,K,Q){const B=W.gl,H=X.width*Q,re=X.height*Q;W.activeTexture.set(B.TEXTURE1),W.viewport.set([0,0,H,re]);let ne=K.heatmapFbo;if(!ne||ne&&(ne.width!==H||ne.height!==re)){ne&&ne.destroy();const fe=B.createTexture();B.bindTexture(B.TEXTURE_2D,fe),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),ne=K.heatmapFbo=W.createFramebuffer(H,re,!1),function(me,pe,we,be,Re,rt){const Me=me.gl;Me.texImage2D(Me.TEXTURE_2D,0,me.isWebGL2&&me.extRenderToTextureHalfFloat?Me.RGBA16F:Me.RGBA,Re,rt,0,Me.RGBA,me.extRenderToTextureHalfFloat?me.isWebGL2?Me.HALF_FLOAT:me.extTextureHalfFloat.HALF_FLOAT_OES:Me.UNSIGNED_BYTE,null),be.colorAttachment.set(we)}(W,0,fe,ne,H,re)}else B.bindTexture(B.TEXTURE_2D,ne.colorAttachment.get()),W.bindFramebuffer.set(ne.framebuffer)})(g,u,l,u.transform.projection.name==="globe"?.5:.25),g.clear({color:o.Color.transparent});const C=u.transform,R=C.projection.name==="globe",L=R?["PROJECTION_GLOBE_VIEW"]:null,z=R?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,Z=[o.mercatorXfromLng(C.center.lng),o.mercatorYfromLat(C.center.lat)];for(let W=0;W<f.length;W++){const X=f[W];if(n.hasRenderableParent(X))continue;const K=n.getTile(X),Q=K.getBucket(l);if(!Q||Q.projection.name!==C.projection.name)continue;const B=Q.programConfigurations.get(l.id),H=u.useProgram("heatmap",B,L),{zoom:re}=u.transform;u.terrain&&u.terrain.setupElevationDraw(K,H),u.prepareDrawProgram(g,H,X.toUnwrapped());const ne=C.projection.createInversionMatrix(C,X.canonical);H.draw(g,y.TRIANGLES,o.DepthMode.disabled,w,E,z,cu(u,X,K,ne,Z,re,l.paint.get("heatmap-intensity")),l.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,l.paint,u.transform.zoom,B,R?[Q.globeExtVertexBuffer]:null)}g.viewport.set([0,0,u.width,u.height])}else u.renderPass==="translucent"&&(u.context.setColorMode(u.colorModeForRenderPass()),function(g,y){const w=g.context,E=w.gl,C=y.heatmapFbo;if(!C)return;w.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,C.colorAttachment.get()),w.activeTexture.set(E.TEXTURE1);let R=y.colorRampTexture;R||(R=y.colorRampTexture=new o.Texture(w,y.colorRamp,E.RGBA)),R.bind(E.LINEAR,E.CLAMP_TO_EDGE),g.useProgram("heatmapTexture").draw(w,E.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,((L,z,Z,W)=>({u_image:0,u_color_ramp:1,u_opacity:z.paint.get("heatmap-opacity")}))(0,y),y.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments,y.paint,g.transform.zoom)}(u,l))},line:function(u,n,l,f){if(u.renderPass!=="translucent")return;const g=l.paint.get("line-opacity"),y=l.paint.get("line-width");if(g.constantOr(1)===0||y.constantOr(1)===0)return;const w=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),E=u.colorModeForRenderPass(),C=u.terrain&&u.terrain.renderingToTexture?1:o.exported.devicePixelRatio,R=l.paint.get("line-dasharray"),L=R.constantOr(1),z=l.layout.get("line-cap"),Z=l.paint.get("line-pattern"),W=Z.constantOr(1),X=l.paint.get("line-gradient"),K=W?"linePattern":"line",Q=u.context,B=Q.gl,H=(ne=>{const fe=[];oa(ne)&&fe.push("RENDER_LINE_DASH"),ne.paint.get("line-gradient")&&fe.push("RENDER_LINE_GRADIENT");const me=ne.paint.get("line-trim-offset");me[0]===0&&me[1]===0||fe.push("RENDER_LINE_TRIM_OFFSET");const pe=ne.paint.get("line-pattern").constantOr(1),we=ne.paint.get("line-opacity").constantOr(1)!==1;return!pe&&we&&fe.push("RENDER_LINE_ALPHA_DISCARD"),fe})(l);let re=H.includes("RENDER_LINE_ALPHA_DISCARD");u.terrain&&u.terrain.clipOrMaskOverlapStencilType()&&(re=!1);for(const ne of f){const fe=n.getTile(ne);if(W&&!fe.patternsLoaded())continue;const me=fe.getBucket(l);if(!me)continue;u.prepareDrawTile();const pe=me.programConfigurations.get(l.id),we=u.useProgram(K,pe,H),be=Z.constantOr(null);if(be&&fe.imageAtlas){const Ue=fe.imageAtlas.patternPositions[be.toString()];Ue&&pe.setConstantPatternPositions(Ue)}const Re=R.constantOr(null),rt=z.constantOr(null);if(!W&&Re&&rt&&fe.lineAtlas){const Ue=fe.lineAtlas.getDash(Re,rt);Ue&&pe.setConstantPatternPositions(Ue)}let[Me,Ve]=l.paint.get("line-trim-offset");(rt==="round"||rt==="square")&&Me!==Ve&&(Me===0&&(Me-=1),Ve===1&&(Ve+=1));const Oe=u.terrain?ne.projMatrix:null,et=W?ia(u,fe,l,Oe,C):v1(u,fe,l,Oe,me.lineClipsArray.length,C,[Me,Ve]);if(X){const Ue=me.gradients[l.id];let ot=Ue.texture;if(l.gradientVersion!==Ue.version){let Xe=256;if(l.stepInterpolant){const st=n.getSource().maxzoom,Mt=ne.canonical.z===st?Math.ceil(1<<u.transform.maxZoom-ne.canonical.z):1;Xe=o.clamp(o.nextPowerOfTwo(me.maxLineLength/o.EXTENT*1024*Mt),256,Q.maxTextureSize)}Ue.gradient=o.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Xe,image:Ue.gradient||void 0,clips:me.lineClipsArray}),Ue.texture?Ue.texture.update(Ue.gradient):Ue.texture=new o.Texture(Q,Ue.gradient,B.RGBA),Ue.version=l.gradientVersion,ot=Ue.texture}Q.activeTexture.set(B.TEXTURE1),ot.bind(l.stepInterpolant?B.NEAREST:B.LINEAR,B.CLAMP_TO_EDGE)}L&&(Q.activeTexture.set(B.TEXTURE0),fe.lineAtlasTexture.bind(B.LINEAR,B.REPEAT),pe.updatePaintBuffers()),W&&(Q.activeTexture.set(B.TEXTURE0),fe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),pe.updatePaintBuffers()),u.prepareDrawProgram(Q,we,ne.toUnwrapped());const Le=Ue=>{we.draw(Q,B.TRIANGLES,w,Ue,E,o.CullFaceMode.disabled,et,l.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,l.paint,u.transform.zoom,pe,[me.layoutVertexBuffer2])};if(re){const Ue=u.stencilModeForClipping(ne).ref;Ue===0&&u.terrain&&Q.clear({stencil:0});const ot={func:B.EQUAL,mask:255};et.u_alpha_discard_threshold=.8,Le(new o.StencilMode(ot,Ue,255,B.KEEP,B.KEEP,B.INVERT)),et.u_alpha_discard_threshold=0,Le(new o.StencilMode(ot,Ue,255,B.KEEP,B.KEEP,B.KEEP))}else Le(u.stencilModeForClipping(ne))}re&&(u.resetStencilClippingMasks(),u.terrain&&Q.clear({stencil:0}))},fill:function(u,n,l,f){const g=l.paint.get("fill-color"),y=l.paint.get("fill-opacity");if(y.constantOr(1)===0)return;const w=u.colorModeForRenderPass(),E=l.paint.get("fill-pattern"),C=u.opaquePassEnabledForLayer()&&!E.constantOr(1)&&g.constantOr(o.Color.transparent).a===1&&y.constantOr(0)===1?"opaque":"translucent";if(u.renderPass===C){const R=u.depthModeForSublayer(1,u.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);pu(u,n,l,f,R,w,!1)}if(u.renderPass==="translucent"&&l.paint.get("fill-antialias")){const R=u.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);pu(u,n,l,f,R,w,!0)}},"fill-extrusion":function(u,n,l,f){const g=l.paint.get("fill-extrusion-opacity");if(g!==0&&u.renderPass==="translucent"){const y=new o.DepthMode(u.context.gl.LEQUAL,o.DepthMode.ReadWrite,u.depthRangeFor3D);if(g!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))il(u,n,l,f,y,o.StencilMode.disabled,o.ColorMode.disabled),il(u,n,l,f,y,u.stencilModeFor3D(),u.colorModeForRenderPass()),u.resetStencilClippingMasks();else{const w=u.colorModeForRenderPass();il(u,n,l,f,y,o.StencilMode.disabled,w)}}},hillshade:function(u,n,l,f){if(u.renderPass!=="offscreen"&&u.renderPass!=="translucent")return;const g=u.context,y=u.depthModeForSublayer(0,o.DepthMode.ReadOnly),w=u.colorModeForRenderPass(),E=u.terrain&&u.terrain.renderingToTexture,[C,R]=u.renderPass!=="translucent"||E?[{},f]:u.stencilConfigForOverlap(f);for(const L of R){const z=n.getTile(L);if(z.needsHillshadePrepare&&u.renderPass==="offscreen")ou(u,z,l,y,o.StencilMode.disabled,w);else if(u.renderPass==="translucent"){const Z=E&&u.terrain?u.terrain.stencilModeForRTTOverlap(L):C[L.overscaledZ];iu(u,L,z,l,y,Z,w)}}g.viewport.set([0,0,u.width,u.height]),u.resetStencilClippingMasks()},raster:function(u,n,l,f,g,y){if(u.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!f.length)return;const w=u.context,E=w.gl,C=n.getSource(),R=u.useProgram("raster"),L=u.colorModeForRenderPass(),z=u.terrain&&u.terrain.renderingToTexture,[Z,W]=C instanceof Kt||z?[{},f]:u.stencilConfigForOverlap(f),X=W[W.length-1].overscaledZ,K=!u.options.moving;for(const Q of W){const B=z?o.DepthMode.disabled:u.depthModeForSublayer(Q.overscaledZ-X,l.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,E.LESS),H=Q.toUnwrapped(),re=n.getTile(Q);if(z&&(!re||!re.hasData()))continue;const ne=z?Q.projMatrix:u.transform.calculateProjMatrix(H,K),fe=u.terrain&&z?u.terrain.stencilModeForRTTOverlap(Q):Z[Q.overscaledZ],me=y?0:l.paint.get("raster-fade-duration");re.registerFadeDuration(me);const pe=n.findLoadedParent(Q,0),we=$d(re,pe,n,u.transform,me);let be,Re;u.terrain&&u.terrain.prepareDrawTile();const rt=l.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;w.activeTexture.set(E.TEXTURE0),re.texture.bind(rt,E.CLAMP_TO_EDGE),w.activeTexture.set(E.TEXTURE1),pe?(pe.texture.bind(rt,E.CLAMP_TO_EDGE),be=Math.pow(2,pe.tileID.overscaledZ-re.tileID.overscaledZ),Re=[re.tileID.canonical.x*be%1,re.tileID.canonical.y*be%1]):re.texture.bind(rt,E.CLAMP_TO_EDGE),re.texture.useMipmap&&w.extTextureFilterAnisotropic&&u.transform.pitch>20&&E.texParameterf(E.TEXTURE_2D,w.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,w.extTextureFilterAnisotropicMax);const Me=Pd(ne,Re||[0,0],be||1,we,l,C instanceof Kt?C.perspectiveTransform:[0,0]);if(u.prepareDrawProgram(w,R,H),C instanceof Kt)C.boundsBuffer&&C.boundsSegments&&R.draw(w,E.TRIANGLES,B,o.StencilMode.disabled,L,o.CullFaceMode.disabled,Me,l.id,C.boundsBuffer,u.quadTriangleIndexBuffer,C.boundsSegments);else{const{tileBoundsBuffer:Ve,tileBoundsIndexBuffer:Oe,tileBoundsSegments:et}=u.getTileBoundsBuffers(re);R.draw(w,E.TRIANGLES,B,fe,L,o.CullFaceMode.disabled,Me,l.id,Ve,Oe,et)}}u.resetStencilClippingMasks()},background:function(u,n,l,f){const g=l.paint.get("background-color"),y=l.paint.get("background-opacity");if(y===0)return;const w=u.context,E=w.gl,C=u.transform,R=C.tileSize,L=l.paint.get("background-pattern");if(u.isPatternMissing(L))return;const z=!L&&g.a===1&&y===1&&u.opaquePassEnabledForLayer()?"opaque":"translucent";if(u.renderPass!==z)return;const Z=o.StencilMode.disabled,W=u.depthModeForSublayer(0,z==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),X=u.colorModeForRenderPass(),K=u.useProgram(L?"backgroundPattern":"background");let Q,B=f;B||(Q=u.getBackgroundTiles(),B=Object.values(Q).map(H=>H.tileID)),L&&(w.activeTexture.set(E.TEXTURE0),u.imageManager.bind(u.context));for(const H of B){const re=H.toUnwrapped(),ne=f?H.projMatrix:u.transform.calculateProjMatrix(re);u.prepareDrawTile();const fe=n?n.getTile(H):Q?Q[H.key]:new o.Tile(H,R,C.zoom,u),me=L?x1(ne,y,u,L,{tileID:H,tileSize:R}):Rd(ne,y,g);u.prepareDrawProgram(w,K,re);const{tileBoundsBuffer:pe,tileBoundsIndexBuffer:we,tileBoundsSegments:be}=u.getTileBoundsBuffers(fe);K.draw(w,E.TRIANGLES,W,Z,X,o.CullFaceMode.disabled,me,l.id,pe,we,be)}},sky:function(u,n,l){const f=u.transform,g=f.projection.name==="mercator"||f.projection.name==="globe"?1:o.smoothstep(7,8,f.zoom),y=l.paint.get("sky-opacity")*g;if(y===0)return;const w=u.context,E=l.paint.get("sky-type"),C=new o.DepthMode(w.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),R=u.frameCounter/1e3%1;E==="atmosphere"?u.renderPass==="offscreen"?l.needsSkyboxCapture(u)&&(function(L,z,Z,W){const X=L.context,K=X.gl;let Q=z.skyboxFbo;if(!Q){Q=z.skyboxFbo=X.createFramebuffer(32,32,!1),z.skyboxGeometry=new sl(X),z.skyboxTexture=X.gl.createTexture(),K.bindTexture(K.TEXTURE_CUBE_MAP,z.skyboxTexture),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_CUBE_MAP,K.TEXTURE_MAG_FILTER,K.LINEAR);for(let ne=0;ne<6;++ne)K.texImage2D(K.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,K.RGBA,32,32,0,K.RGBA,K.UNSIGNED_BYTE,null)}X.bindFramebuffer.set(Q.framebuffer),X.viewport.set([0,0,32,32]);const B=z.getCenter(L,!0),H=L.useProgram("skyboxCapture"),re=new Float64Array(16);o.identity(re),o.rotateY(re,re,.5*-Math.PI),ri(X,z,H,re,B,0),o.identity(re),o.rotateY(re,re,.5*Math.PI),ri(X,z,H,re,B,1),o.identity(re),o.rotateX(re,re,.5*-Math.PI),ri(X,z,H,re,B,2),o.identity(re),o.rotateX(re,re,.5*Math.PI),ri(X,z,H,re,B,3),o.identity(re),ri(X,z,H,re,B,4),o.identity(re),o.rotateY(re,re,Math.PI),ri(X,z,H,re,B,5),X.viewport.set([0,0,L.width,L.height])}(u,l),l.markSkyboxValid(u)):u.renderPass==="sky"&&function(L,z,Z,W,X){const K=L.context,Q=K.gl,B=L.transform,H=L.useProgram("skybox");K.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_CUBE_MAP,z.skyboxTexture);const re=((ne,fe,me,pe,we)=>({u_matrix:ne,u_sun_direction:fe,u_cubemap:0,u_opacity:pe,u_temporal_offset:we}))(B.skyboxMatrix,z.getCenter(L,!1),0,W,X);L.prepareDrawProgram(K,H),H.draw(K,Q.TRIANGLES,Z,o.StencilMode.disabled,L.colorModeForRenderPass(),o.CullFaceMode.backCW,re,"skybox",z.skyboxGeometry.vertexBuffer,z.skyboxGeometry.indexBuffer,z.skyboxGeometry.segment)}(u,l,C,y,R):E==="gradient"&&u.renderPass==="sky"&&function(L,z,Z,W,X){const K=L.context,Q=K.gl,B=L.transform,H=L.useProgram("skyboxGradient");z.skyboxGeometry||(z.skyboxGeometry=new sl(K)),K.activeTexture.set(Q.TEXTURE0);let re=z.colorRampTexture;re||(re=z.colorRampTexture=new o.Texture(K,z.colorRamp,Q.RGBA)),re.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const ne=((fe,me,pe,we,be)=>({u_matrix:fe,u_color_ramp:0,u_center_direction:me,u_radius:o.degToRad(pe),u_opacity:we,u_temporal_offset:be}))(B.skyboxMatrix,z.getCenter(L,!1),z.paint.get("sky-gradient-radius"),W,X);L.prepareDrawProgram(K,H),H.draw(K,Q.TRIANGLES,Z,o.StencilMode.disabled,L.colorModeForRenderPass(),o.CullFaceMode.backCW,ne,"skyboxGradient",z.skyboxGeometry.vertexBuffer,z.skyboxGeometry.indexBuffer,z.skyboxGeometry.segment)}(u,l,C,y,R)},debug:function(u,n,l){for(let f=0;f<l.length;f++)S1(u,n,l[f])},custom:function(u,n,l,f){const g=u.context,y=l.implementation;if(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes("custom")||u.terrain&&(u.terrain.renderingToTexture||u.renderPass==="offscreen")&&l.isLayerDraped()){if(u.renderPass==="offscreen"){const w=y.prerender;if(w){if(u.setCustomLayerDefaults(),g.setColorMode(u.colorModeForRenderPass()),u.transform.projection.name==="globe"){const E=u.transform.pointMerc;w.call(y,g.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(u.transform.zoom),[E.x,E.y],u.transform.pixelsPerMeterRatio)}else w.call(y,g.gl,u.transform.customLayerMatrix());g.setDirty(),u.setBaseState()}}else if(u.renderPass==="translucent"){if(u.terrain&&u.terrain.renderingToTexture){const E=y.renderToTile;if(E){const C=f[0].canonical,R=new o.MercatorCoordinate(C.x+f[0].wrap*(1<<C.z),C.y,C.z);g.setDepthMode(o.DepthMode.disabled),g.setStencilMode(o.StencilMode.disabled),g.setColorMode(u.colorModeForRenderPass()),u.setCustomLayerDefaults(),E.call(y,g.gl,R),g.setDirty(),u.setBaseState()}return}u.setCustomLayerDefaults(),g.setColorMode(u.colorModeForRenderPass()),g.setStencilMode(o.StencilMode.disabled);const w=y.renderingMode==="3d"?new o.DepthMode(u.context.gl.LEQUAL,o.DepthMode.ReadWrite,u.depthRangeFor3D):u.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(g.setDepthMode(w),u.transform.projection.name==="globe"){const E=u.transform.pointMerc;y.render(g.gl,u.transform.customLayerMatrix(),u.transform.getProjection(),u.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(u.transform.zoom),[E.x,E.y],u.transform.pixelsPerMeterRatio)}else y.render(g.gl,u.transform.customLayerMatrix());g.setDirty(),u.setBaseState(),g.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ms{constructor(n,l,f=!1){this.context=new at(n,f),this.transform=l,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(n,l){const f=!!n&&!!n.terrain&&this.transform.projection.supportsTerrain;if(!(f||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ed(this,n));const g=this._terrain;this.transform.elevation=f?g:null,g.update(n,this.transform,l)}_updateFog(n){const l=n.fog;if(!l||this.transform.projection.name==="globe"||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[f,g]=l.getFovAdjustedRange(this.transform._fov);if(f>g)return void(this.transform.fogCullDistSq=null);const y=f+.78*(g-f);this.transform.fogCullDistSq=y*y}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(n,l){if(this.width=n*o.exported.devicePixelRatio,this.height=l*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style.order)this.style._layers[f].resize()}setup(){const n=this.context,l=new o.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(o.EXTENT,0),l.emplaceBack(0,o.EXTENT),l.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=n.createVertexBuffer(l,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=n.createVertexBuffer(f,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const g=new o.StructArrayLayout2i4;g.emplaceBack(-1,-1),g.emplaceBack(1,-1),g.emplaceBack(-1,1),g.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(g,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const y=new o.StructArrayLayout4i8;y.emplaceBack(0,0,0,0),y.emplaceBack(o.EXTENT,0,o.EXTENT,0),y.emplaceBack(0,o.EXTENT,0,o.EXTENT),y.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=n.createVertexBuffer(y,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const w=new o.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(w);const E=new o.StructArrayLayout1ui2;for(const R of[0,1,3,2,0])E.emplaceBack(R);this.debugIndexBuffer=n.createIndexBuffer(E),this.emptyTexture=new o.Texture(n,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),n.gl.RGBA),this.identityMat=o.create();const C=this.context.gl;this.stencilClearMode=new o.StencilMode({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new vu(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(n){return n._makeTileBoundsBuffers(this.context,this.transform.projection),n._tileBoundsBuffer?{tileBoundsBuffer:n._tileBoundsBuffer,tileBoundsIndexBuffer:n._tileBoundsIndexBuffer,tileBoundsSegments:n._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(n,l.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,ra(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(n,l,f){if(!l||this.currentStencilSource===l.id||!n.isTileClipped()||!f||f.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let E=!1;for(const C of f)if(this._tileClippingMaskIDs[C.key]===void 0){E=!0;break}if(!E)return}this.currentStencilSource=l.id;const g=this.context,y=g.gl;this.nextStencilID+f.length>256&&this.clearStencil(),g.setColorMode(o.ColorMode.disabled),g.setDepthMode(o.DepthMode.disabled);const w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const E of f){const C=l.getTile(E),R=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,{tileBoundsBuffer:L,tileBoundsIndexBuffer:z,tileBoundsSegments:Z}=this.getTileBoundsBuffers(C);w.draw(g,y.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:y.ALWAYS,mask:0},R,255,y.KEEP,y.KEEP,y.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,ra(E.projMatrix),"$clipping",L,z,Z)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new o.StencilMode({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(n);const l=this.context.gl;return new o.StencilMode({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(n){const l=this.context.gl,f=n.sort((w,E)=>E.overscaledZ-w.overscaledZ),g=f[f.length-1].overscaledZ,y=f[0].overscaledZ-g+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const w={};for(let E=0;E<y;E++)w[E+g]=new o.StencilMode({func:l.GEQUAL,mask:255},E+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=y,[w,f]}return[{[g]:o.StencilMode.disabled},f]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([n.CONSTANT_COLOR,n.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(n,l,f){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new o.DepthMode(f||this.context.gl.LEQUAL,l,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){this.style=n,this.options=l,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const f=this.style.order,g=this.style._sourceCaches;for(const R in g){const L=g[R];L.used&&L.prepare(this.context)}const y={},w={},E={};for(const R in g){const L=g[R];y[R]=L.getVisibleCoordinates(),w[R]=y[R].slice().reverse(),E[R]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<f.length;R++)if(this.style._layers[f[R]].is3D()){this.opaquePassCutoff=R;break}if(this.terrain&&(this.terrain.updateTileBinding(E),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const R of f){const L=this.style._layers[R],z=n._getLayerSourceCache(L);if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const Z=z?w[z.id]:void 0;(L.type==="custom"||L.isSky()||Z&&Z.length)&&this.renderLayer(this,z,L,Z)}this.depthRangeFor3D=[0,1-(n.order.length+2)*this.numSublayers*this.depthEpsilon];const C=this.terrain;if(C&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&C.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:l.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[f[this.currentLayer]],L=n._getLayerSourceCache(R);if(R.isSky())continue;const z=L?w[L.id]:void 0;this._renderTileClippingMasks(R,L,z),this.renderLayer(this,L,R,z)}if(this.style.fog&&this.transform.projection.supportsFog&&function(R,L){const z=R.context,Z=z.gl,W=R.transform,X=new o.DepthMode(Z.LEQUAL,o.DepthMode.ReadOnly,[0,1]),K=R.useProgram("globeAtmosphere",null,W.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Q=o.globeToMercatorTransition(W.zoom),B=L.properties.get("color").toArray01(),H=L.properties.get("high-color").toArray01(),re=L.properties.get("space-color").toArray01PremultipliedAlpha(),ne=o.identity$1([]);o.rotateY$1(ne,ne,-o.degToRad(W._center.lng)),o.rotateX$1(ne,ne,o.degToRad(W._center.lat)),o.rotateZ$1(ne,ne,W.angle),o.rotateX$1(ne,ne,-W._pitch);const fe=o.fromQuat(new Float32Array(16),ne),me=o.mapValue(L.properties.get("star-intensity"),0,1,0,.25),pe=5e-4,we=o.mapValue(L.properties.get("horizon-blend"),0,1,pe,.25),be=o.globeUseCustomAntiAliasing(R,z,W)&&we===pe?W.worldSize/(2*Math.PI*1.025)-1:W.globeRadius,Re=R.frameCounter/1e3%1,rt=o.length(W.globeCenterInViewSpace),Me=Math.sqrt(Math.pow(rt,2)-Math.pow(be,2)),Ve=Math.acos(Me/rt),Oe=((Le,Ue,ot,Xe,st,Mt,Ot,wt,kt,Yt,Xt,At,lr,cr)=>({u_frustum_tl:Le,u_frustum_tr:Ue,u_frustum_br:ot,u_frustum_bl:Xe,u_horizon:st,u_transition:Mt,u_fadeout_range:Ot,u_color:wt,u_high_color:kt,u_space_color:Yt,u_star_intensity:Xt,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:At,u_horizon_angle:lr,u_rotation_matrix:cr}))(W.frustumCorners.TL,W.frustumCorners.TR,W.frustumCorners.BR,W.frustumCorners.BL,W.frustumCorners.horizon,Q,we,B,H,re,me,Re,Ve,fe);R.prepareDrawProgram(z,K);const et=R.atmosphereBuffer;et&&K.draw(z,Z.TRIANGLES,X,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,Oe,"skybox",et.vertexBuffer,et.indexBuffer,et.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const R=this.style._layers[f[this.currentLayer]],L=n._getLayerSourceCache(R);R.isSky()&&this.renderLayer(this,L,R,L?w[L.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;){const R=this.style._layers[f[this.currentLayer]],L=n._getLayerSourceCache(R);if(R.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(R)){if(R.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const z=L?(R.type==="symbol"?E:w)[L.id]:void 0;this._renderTileClippingMasks(R,L,L?y[L.id]:void 0),this.renderLayer(this,L,R,z),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let R=null;o.values(this.style._layers).forEach(L=>{const z=n._getLayerSourceCache(L);z&&!L.isHidden(this.transform.zoom)&&(!R||R.getSource().maxzoom<z.getSource().maxzoom)&&(R=z)}),R&&this.options.showTileBoundaries&&Fo.debug(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const L=R.transform.padding;gu(R,R.transform.height-(L.top||0),3,fs),gu(R,L.bottom||0,3,$1),ol(R,L.left||0,3,w1),ol(R,R.transform.width-(L.right||0),3,E1);const z=R.transform.centerPoint;(function(Z,W,X,K){ps(Z,W-1,X-10,2,20,K),ps(Z,W-10,X-1,20,2,K)})(R,z.x,R.transform.height-z.y,T1)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(n,l,f,g){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="sky"||f.type==="custom"||g&&g.length)&&(this.id=f.id,this.gpuTimingStart(f),(!n.transform.projection.unsupportedLayers||!n.transform.projection.unsupportedLayers.includes(f.type)||n.terrain&&f.type==="custom")&&Fo[f.type](n,l,f,g,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(n){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let f=this.gpuTimers[n.id];f||(f=this.gpuTimers[n.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),f.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,f.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const n=this.context.extTimerQuery,l=n.createQueryEXT();this.deferredRenderGpuTimeQueries.push(l),n.beginQueryEXT(n.TIME_ELAPSED_EXT,l)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const n=this.context.extTimerQuery;n.endQueryEXT(n.TIME_ELAPSED_EXT)}collectGpuTimers(){const n=this.gpuTimers;return this.gpuTimers={},n}collectDeferredRenderGpuQueries(){const n=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],n}queryGpuTimers(n){const l={};for(const f in n){const g=n[f],y=this.context.extTimerQuery,w=y.getQueryObjectEXT(g.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(g.query),l[f]=w}return l}queryGpuTimeDeferredRender(n){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery;let f=0;for(const g of n)f+=l.getQueryObjectEXT(g,l.QUERY_RESULT_EXT)/1e6,l.deleteQueryEXT(g);return f}translatePosMatrix(n,l,f,g,y){if(!f[0]&&!f[1])return n;const w=y?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(w){const R=Math.sin(w),L=Math.cos(w);f=[f[0]*L-f[1]*R,f[0]*R+f[1]*L]}const E=[y?f[0]:Tr(l,f[0],this.transform.zoom),y?f[1]:Tr(l,f[1],this.transform.zoom),0],C=new Float32Array(16);return o.translate(C,n,E),C}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){return n===null||n!==void 0&&!this.imageManager.getPattern(n.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const n=this.terrain&&this.terrain.renderingToTexture,l=this.terrain&&this.terrain.exaggeration()===0,f=this.style&&this.style.fog,g=[];return this.terrainRenderModeElevated()&&g.push("TERRAIN"),this.transform.projection.name==="globe"&&g.push("GLOBE"),l&&g.push("ZERO_EXAGGERATION"),f&&!n&&f.getOpacity(this.transform.pitch)!==0&&g.push("FOG"),n&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}useProgram(n,l,f){this.cache=this.cache||{};const g=f||[],y=this.currentGlobalDefines().concat(g),w=tr.cacheKey(yd[n],n,y,l);return this.cache[w]||(this.cache[w]=new tr(this.context,n,yd[n],l,kd[n],y)),this.cache[w]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(n,l,f){if(this.terrain&&this.terrain.renderingToTexture)return;const g=this.style.fog;if(g){const y=g.getOpacity(this.transform.pitch),w=((E,C,R,L,z,Z,W,X,K,Q,B)=>{const H=E.transform,re=C.properties.get("color").toArray01();re[3]=L;const ne=E.frameCounter/1e3%1;return{u_fog_matrix:R?H.calculateFogTileMatrix(R):E.identityMat,u_fog_range:C.getFovAdjustedRange(H._fov),u_fog_color:re,u_fog_horizon_blend:C.properties.get("horizon-blend"),u_fog_temporal_offset:ne,u_frustum_tl:z,u_frustum_tr:Z,u_frustum_br:W,u_frustum_bl:X,u_globe_pos:K,u_globe_radius:Q,u_viewport:B,u_globe_transition:o.globeToMercatorTransition(H.zoom),u_is_globe:+(H.projection.name==="globe")}})(this,g,f,y,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);l.setFogUniformValues(n,w)}}setTileLoadedFlag(n){this.tileLoaded=n}saveCanvasCopy(){const n=this.canvasCopy();n&&(this.frameCopies.push(n),this.tileLoaded=!1)}canvasCopy(){const n=this.context.gl,l=n.createTexture();return n.bindTexture(n.TEXTURE_2D,l),n.copyTexImage2D(n.TEXTURE_2D,0,n.RGBA,0,0,n.drawingBufferWidth,n.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const n=this.style&&this.style.fog;return!!n&&n.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const n=this._backgroundTiles,l=this._backgroundTiles={},f=this.transform.coveringTiles({tileSize:512});for(const g of f)l[g.key]=n[g.key]||new o.Tile(g,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}}class al{constructor(n=0,l=0,f=0,g=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=f,this.right=g}interpolate(n,l,f){return l.top!=null&&n.top!=null&&(this.top=o.number(n.top,l.top,f)),l.bottom!=null&&n.bottom!=null&&(this.bottom=o.number(n.bottom,l.bottom,f)),l.left!=null&&n.left!=null&&(this.left=o.number(n.left,l.left,f)),l.right!=null&&n.right!=null&&(this.right=o.number(n.right,l.right,f)),this}getCenter(n,l){const f=o.clamp((this.left+n-this.right)/2,0,n),g=o.clamp((this.top+l-this.bottom)/2,0,l);return new o.Point(f,g)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new al(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ll(u,n){const l=o.getColumn(u,3);o.fromQuat(u,n),o.setColumn(u,3,l)}function rr(u,n){const l=o.identity$1([]);return o.rotateZ$1(l,l,-n),o.rotateX$1(l,l,-u),l}function da(u,n){const l=[u[0],u[1],0],f=[n[0],n[1],0];if(o.length(l)>=1e-15){const w=o.normalize([],l);o.scale$2(f,w,o.dot(f,w)),n[0]=f[0],n[1]=f[1]}const g=o.cross([],n,u);if(o.len(g)<1e-15)return null;const y=Math.atan2(-g[1],g[0]);return rr(Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2]),y)}class xu{constructor(n,l){this.position=n,this.orientation=l}get position(){return this._position}set position(n){if(n){const l=n instanceof o.MercatorCoordinate?n:new o.MercatorCoordinate(n[0],n[1],n[2]);this._renderWorldCopies&&(l.x=o.wrap(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(n,l){if(this.orientation=null,!this.position)return;const f=this.position,g=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(n)):0,y=o.MercatorCoordinate.fromLngLat(n,g),w=[y.x-f.x,y.y-f.y,y.z-f.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=da(w,l)}setPitchBearing(n,l){this.orientation=rr(o.degToRad(n),o.degToRad(-l))}}class dl{constructor(n,l){this._transform=o.identity([]),this.orientation=l,this.position=n}get mercatorPosition(){const n=this.position;return new o.MercatorCoordinate(n[0],n[1],n[2])}get position(){const n=o.getColumn(this._transform,3);return[n[0],n[1],n[2]]}set position(n){var l;n&&o.setColumn(this._transform,3,[(l=n)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(n){this._orientation=n||o.identity$1([]),n&&ll(this._transform,this._orientation)}getPitchBearing(){const n=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(n[0]*n[0]+n[1]*n[1]),-n[2])}}setPitchBearing(n,l){this._orientation=rr(n,l),ll(this._transform,this._orientation)}forward(){const n=o.getColumn(this._transform,2);return[-n[0],-n[1],-n[2]]}up(){const n=o.getColumn(this._transform,1);return[-n[0],-n[1],-n[2]]}right(){const n=o.getColumn(this._transform,0);return[n[0],n[1],n[2]]}getCameraToWorld(n,l){const f=new Float64Array(16);return o.invert(f,this.getWorldToCamera(n,l)),f}getWorldToCameraPosition(n,l,f){const g=this.position;o.scale$2(g,g,-n);const y=new Float64Array(16);return o.fromScaling(y,[f,f,f]),o.translate(y,y,g),y[10]*=l,y}getWorldToCamera(n,l){const f=new Float64Array(16),g=new Float64Array(4),y=this.position;return o.conjugate(g,this._orientation),o.scale$2(y,y,-n),o.fromQuat(f,g),o.translate(f,f,y),f[1]*=-1,f[5]*=-1,f[9]*=-1,f[13]*=-1,f[8]*=l,f[9]*=l,f[10]*=l,f[11]*=l,f}getCameraToClipPerspective(n,l,f,g){const y=new Float64Array(16);return o.perspective(y,n,l,f,g),y}getDistanceToElevation(n,l=!1){const f=n===0?0:o.mercatorZfromAltitude(n,l?o.latFromMercatorY(this.position[1]):this.position[1]),g=this.forward();return(f-this.position[2])/g[2]}clone(){return new dl([...this.position],[...this.orientation])}}function gs(u,n){const l=cl(u.projection,u.zoom,u.width,u.height),f=function(y,w,E,C,R){const L=new o.LngLat(E.lng-180*Yi,E.lat),z=new o.LngLat(E.lng+180*Yi,E.lat),Z=y.project(L.lng,L.lat),W=y.project(z.lng,z.lat),X=-Math.atan2(W.y-Z.y,W.x-Z.x),K=o.MercatorCoordinate.fromLngLat(E);K.y=o.clamp(K.y,-1+Yi,1-Yi);const Q=K.toLngLat(),B=y.project(Q.lng,Q.lat),H=o.MercatorCoordinate.fromLngLat(Q);H.x+=Yi;const re=H.toLngLat(),ne=y.project(re.lng,re.lat),fe=ul(ne.x-B.x,ne.y-B.y,X),me=o.MercatorCoordinate.fromLngLat(Q);me.y+=Yi;const pe=me.toLngLat(),we=y.project(pe.lng,pe.lat),be=ul(we.x-B.x,we.y-B.y,X),Re=Math.abs(fe.x)/Math.abs(be.y),rt=o.identity([]);o.rotateZ(rt,rt,-X*(1-(R?0:C)));const Me=o.identity([]);return o.scale(Me,Me,[1,1-(1-Re)*C,1]),Me[4]=-be.x/be.y*C,o.rotateZ(Me,Me,X),o.multiply(Me,rt,Me),Me}(u.projection,0,u.center,l,n),g=bu(u);return o.scale(f,f,[g,g,1]),f}function bu(u){const n=u.projection,l=cl(u.projection,u.zoom,u.width,u.height),f=$u(n,u.center),g=$u(n,o.LngLat.convert(n.center));return Math.pow(2,f*l+(1-l)*g)}function cl(u,n,l,f,g=1/0){const y=u.range;if(!y)return 0;const w=Math.min(g,Math.max(l,f)),E=Math.log(w/1024)/Math.LN2;return o.smoothstep(y[0]+E,y[1]+E,n)}const Yi=1/4e4;function $u(u,n){const l=o.clamp(n.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),f=new o.LngLat(n.lng-180*Yi,l),g=new o.LngLat(n.lng+180*Yi,l),y=u.project(f.lng,l),w=u.project(g.lng,l),E=o.MercatorCoordinate.fromLngLat(f),C=o.MercatorCoordinate.fromLngLat(g),R=w.x-y.x,L=w.y-y.y,z=C.x-E.x,Z=C.y-E.y,W=Math.sqrt((z*z+Z*Z)/(R*R+L*L));return Math.log(W)/Math.LN2}function ul(u,n,l){const f=Math.cos(l),g=Math.sin(l);return{x:u*f-n*g,y:u*g+n*f}}class _s{constructor(n,l,f,g,y,w,E){this.tileSize=512,this._renderWorldCopies=y===void 0||y,this._minZoom=n||0,this._maxZoom=l||22,this._minPitch=f??0,this._maxPitch=g??60,this.setProjection(w),this.setMaxBounds(E),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new al,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new dl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const n=new _s(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return n._elevation=this._elevation,n._centerAltitude=this._centerAltitude,n._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,n.tileSize=this.tileSize,n.mercatorFromTransition=this.mercatorFromTransition,n.width=this.width,n.height=this.height,n.cameraElevationReference=this.cameraElevationReference,n._center=this._center,n._setZoom(this.zoom),n._seaLevelZoom=this._seaLevelZoom,n.angle=this.angle,n._fov=this._fov,n._pitch=this._pitch,n._nearZ=this._nearZ,n._farZ=this._farZ,n._averageElevation=this._averageElevation,n._unmodified=this._unmodified,n._edgeInsets=this._edgeInsets.clone(),n._camera=this._camera.clone(),n._calcMatrices(),n.freezeTileCoverage=this.freezeTileCoverage,n.frustumCorners=this.frustumCorners,n}get elevation(){return this._elevation}set elevation(n){this._elevation!==n&&(this._elevation=n,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(n,l=!1){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(n||f)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const f=!I(l,this.getProjection());return f&&this._calcMatrices(),this.mercatorFromTransition=!1,f}setMercatorFromTransition(){const n=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const l=n!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(n){this._minZoom!==n&&(this._minZoom=n,this.zoom=Math.max(this.zoom,n))}get maxZoom(){return this._maxZoom}set maxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.zoom=Math.min(this.zoom,n))}get minPitch(){return this._minPitch}set minPitch(n){this._minPitch!==n&&(this._minPitch=n,this.pitch=Math.max(this.pitch,n))}get maxPitch(){return this._maxPitch}set maxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.pitch=Math.min(this.pitch,n))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const n=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(n))}get cameraWorldSize(){const n=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(n))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.Point(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(n){this.rotation=n}get rotation(){return-this.angle/Math.PI*180}set rotation(n){const l=-n*Math.PI/180;var f;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(f=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f),function(g,y,w){var E=y[0],C=y[1],R=y[2],L=y[3],z=Math.sin(w),Z=Math.cos(w);g[0]=E*Z+R*z,g[1]=C*Z+L*z,g[2]=E*-z+R*Z,g[3]=C*-z+L*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(n){const l=o.clamp(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const n=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/n)}set fov(n){n=Math.max(.01,Math.min(60,n)),this._fov!==n&&(this._unmodified=!1,this._fov=o.degToRad(n),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(n){this._averageElevation=n,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(n){const l=Math.min(Math.max(n,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(n){this._zoom=n,this.scale=this.zoomScale(n),this.tileZoom=Math.floor(n),this.zoomFraction=n-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const n=this._elevation;this._centerAltitude=n.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=n.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const n=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],f=this.horizonLineFromTop();let g=0,y=0;for(let w=0;w<l.length;w++){const E=new o.Point(l[w][0]*this.width,f+l[w][1]*(this.height-f)),C=n.pointCoordinate(E);if(!C)continue;const R=1/Math.hypot(C[0]-this._camera.position[0],C[1]-this._camera.position[1]);g+=C[3]*R,y+=R}return y===0?NaN:g/y}get center(){return this._center}set center(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const n=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),f=this.pixelsPerMeter/this.worldSize*l,g=this._mercatorZfromZoom(n),y=this._mercatorZfromZoom(this._maxZoom),w=Math.max(g-f,y);this._setZoom(this._zoomFromMercatorZ(w))}get padding(){return this._edgeInsets.toJSON()}set padding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}computeZoomRelativeTo(n){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,n.toAltitude()));let f;f=n.z<this._camera.position[2]?[l.x,l.y,l.z]:[n.x,n.y,n.z];const g=o.length(o.sub([],this._camera.position,f));return o.clamp(this._zoomFromMercatorZ(g),this._minZoom,this._maxZoom)}setFreeCameraOptions(n){if(!this.height||!n.position&&!n.orientation)return;this._updateCameraState();let l=!1;if(n.orientation&&!o.exactEquals(n.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(n.orientation)),n.position){const f=[n.position.x,n.position.y,n.position.z];o.exactEquals$1(f,this._camera.position)||(this._setCameraPosition(f),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const n=this._camera.position,l=new xu;return l.position=new o.MercatorCoordinate(n[0],n[1],n[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(n){if(!o.length$1(n))return!1;o.normalize$1(n,n);const l=o.transformQuat([],[0,0,-1],n),f=o.transformQuat([],[0,-1,0],n);if(f[2]<0)return!1;const g=da(l,f);return!!g&&(this._camera.orientation=g,!0)}_setCameraPosition(n){const l=this.zoomScale(this.minZoom)*this.tileSize,f=this.zoomScale(this.maxZoom)*this.tileSize,g=this.cameraToCenterDistance;n[2]=o.clamp(n[2],g/f,g/l),this._camera.position=n}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,f){this._unmodified=!1,this._edgeInsets.interpolate(n,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(n){const l=(n.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/n.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(n){const l=[new o.UnwrappedTileID(0,n)];if(this.renderWorldCopies){const f=this.pointCoordinate(new o.Point(0,0)),g=this.pointCoordinate(new o.Point(this.width,0)),y=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(f.x,g.x,y.x,w.x)),C=Math.floor(Math.max(f.x,g.x,y.x,w.x)),R=1;for(let L=E-R;L<=C+R;L++)L!==0&&l.push(new o.UnwrappedTileID(L,n))}return l}coveringTiles(n){let l=this.coveringZoomLevel(n);const f=l,g=this.elevation&&!n.isTerrainDEM,y=this.projection.name==="mercator";if(n.minzoom!==void 0&&l<n.minzoom)return[];n.maxzoom!==void 0&&l>n.maxzoom&&(l=n.maxzoom);const w=this.locationCoordinate(this.center),E=this.center.lat,C=1<<l,R=[C*w.x,C*w.y,0],L=this.projection.name==="globe",z=!L,Z=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,z),W=L?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),X=C*o.mercatorZfromAltitude(1,this.center.lat),K=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),Q=[C*W.x,C*W.y,K*(z?1:X)],B=this.cameraToCenterDistance/n.tileSize*(n.roundZoom?1:.502),H=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?l:0,re=n.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ne=n.isTerrainDEM?-re:this._elevation?this._elevation.getMinElevationBelowMSL():0,fe=this.projection.isReprojectedInTileSpace?bu(this):1,me=Le=>{const ot=new o.MercatorCoordinate(Le.x+25e-6,Le.y,Le.z),Xe=new o.MercatorCoordinate(Le.x,Le.y+25e-6,Le.z),st=Le.toLngLat(),Mt=ot.toLngLat(),Ot=Xe.toLngLat(),wt=this.locationCoordinate(st),kt=this.locationCoordinate(Mt),Yt=this.locationCoordinate(Ot),Xt=Math.hypot(kt.x-wt.x,kt.y-wt.y),At=Math.hypot(Yt.x-wt.x,Yt.y-wt.y);return Math.sqrt(Xt*At)*fe/25e-6},pe=Le=>{const Ue=re,ot=ne;return{aabb:o.tileAABB(this,C,0,0,0,Le,ot,Ue,this.projection),zoom:0,x:0,y:0,minZ:ot,maxZ:Ue,wrap:Le,fullyVisible:!1}},we=[];let be=[];const Re=l,rt=n.reparseOverscaled?f:l,Me=Le=>Le*Le,Ve=Me((K-this._centerAltitude)*X),Oe=Le=>{if(!this._elevation||!Le.tileID||!y)return;const Ue=this._elevation.getMinMaxForTile(Le.tileID),ot=Le.aabb;Ue?(ot.min[2]=Ue.min,ot.max[2]=Ue.max,ot.center[2]=(ot.min[2]+ot.max[2])/2):(Le.shouldSplit=et(Le),Le.shouldSplit||(ot.min[2]=ot.max[2]=ot.center[2]=this._centerAltitude))},et=Le=>{if(Le.zoom<H)return!0;if(Le.zoom===Re)return!1;if(Le.shouldSplit!=null)return Le.shouldSplit;const Ue=Le.aabb.distanceX(Q),ot=Le.aabb.distanceY(Q);let Xe=Ve,st=1;if(L){Xe=Me(Le.aabb.distanceZ(Q));const wt=Math.pow(2,Le.zoom),kt=o.latFromMercatorY((Le.y+1)/wt),Yt=o.latFromMercatorY(Le.y/wt),Xt=Math.min(Math.max(E,kt),Yt),At=o.circumferenceAtLatitude(Xt)/o.circumferenceAtLatitude(E);if(st=Xt===E?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,At/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&Le.zoom===Re-1&&At>=.9)return!0}else if(g&&(Xe=Me(Le.aabb.distanceZ(Q)*X)),this.projection.isReprojectedInTileSpace&&f<=5){const wt=Math.pow(2,Le.zoom),kt=me(new o.MercatorCoordinate((Le.x+.5)/wt,(Le.y+.5)/wt));st=kt>.85?1:kt}const Mt=Ue*Ue+ot*ot+Xe,Ot=Me((1<<Re-Le.zoom)*B*st*((wt,kt)=>{if(kt*Me(.707)<wt)return 1;const Yt=Math.sqrt(kt/wt);return Yt/(1.4144271570014144+(Math.pow(1.1,Yt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Xe,Ve),Mt));return Mt<Ot};if(this.renderWorldCopies)for(let Le=1;Le<=3;Le++)we.push(pe(-Le)),we.push(pe(Le));for(we.push(pe(0));we.length>0;){const Le=we.pop(),Ue=Le.x,ot=Le.y;let Xe=Le.fullyVisible;if(!Xe){const st=Le.aabb.intersects(Z);if(st===0)continue;Xe=st===2}if(Le.zoom!==Re&&et(Le))for(let st=0;st<4;st++){const Mt=(Ue<<1)+st%2,Ot=(ot<<1)+(st>>1),wt={aabb:y?Le.aabb.quadrant(st):o.tileAABB(this,C,Le.zoom+1,Mt,Ot,Le.wrap,Le.minZ,Le.maxZ,this.projection),zoom:Le.zoom+1,x:Mt,y:Ot,wrap:Le.wrap,fullyVisible:Xe,tileID:void 0,shouldSplit:void 0,minZ:Le.minZ,maxZ:Le.maxZ};g&&!L&&(wt.tileID=new o.OverscaledTileID(Le.zoom+1===Re?rt:Le.zoom+1,Le.wrap,Le.zoom+1,Mt,Ot),Oe(wt)),we.push(wt)}else{const st=Le.zoom===Re?rt:Le.zoom;if(n.minzoom&&n.minzoom>st)continue;const Mt=R[0]-(.5+Ue+(Le.wrap<<Le.zoom))*(1<<l-Le.zoom),Ot=R[1]-.5-ot,wt=Le.tileID?Le.tileID:new o.OverscaledTileID(st,Le.wrap,Le.zoom,Ue,ot);be.push({tileID:wt,distanceSq:Mt*Mt+Ot*Ot})}}if(this.fogCullDistSq){const Le=this.fogCullDistSq,Ue=this.horizonLineFromTop();be=be.filter(ot=>{const Xe=[0,0,0,1],st=[o.EXTENT,o.EXTENT,0,1],Mt=this.calculateFogTileMatrix(ot.tileID.toUnwrapped());o.transformMat4$1(Xe,Xe,Mt),o.transformMat4$1(st,st,Mt);const Ot=o.getAABBPointSquareDist(Xe,st);if(Ot===0)return!0;let wt=!1;const kt=this._elevation;if(kt&&Ot>Le&&Ue!==0){const Yt=this.calculateProjMatrix(ot.tileID.toUnwrapped());let Xt;n.isTerrainDEM||(Xt=kt.getMinMaxForTile(ot.tileID)),Xt||(Xt={min:ne,max:re});const At=o.furthestTileCorner(this.rotation),lr=[At[0]*o.EXTENT,At[1]*o.EXTENT,Xt.max];o.transformMat4(lr,lr,Yt),wt=(1-lr[1])*this.height*.5<Ue}return Ot<Le||wt})}return be.sort((Le,Ue)=>Le.distanceSq-Ue.distanceSq).map(Le=>Le.tileID)}resize(n,l){this.width=n,this.height=l,this.pixelsToGLUnits=[2/n,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(n){return Math.pow(2,n)}scaleZoom(n){return Math.log(n)/Math.LN2}project(n){const l=o.clamp(n.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),f=this.projection.project(n.lng,l);return new o.Point(f.x*this.worldSize,f.y*this.worldSize)}unproject(n){return this.projection.unproject(n.x/this.worldSize,n.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(n,l){let f,g;const y=this.centerPoint;if(this.projection.name==="globe"){const E=this.worldSize;f=(l.x-y.x)/E,g=(l.y-y.y)/E}else{const E=this.pointCoordinate(l),C=this.pointCoordinate(y);f=E.x-C.x,g=E.y-C.y}const w=this.locationCoordinate(n);this.setLocation(new o.MercatorCoordinate(w.x-f,w.y-g))}setLocation(n){this.center=this.coordinateLocation(n),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(n){return this.projection.locationPoint(this,n)}locationPoint3D(n){return this.projection.locationPoint(this,n,!0)}pointLocation(n){return this.coordinateLocation(this.pointCoordinate(n))}pointLocation3D(n){return this.coordinateLocation(this.pointCoordinate3D(n))}locationCoordinate(n,l){const f=l?o.mercatorZfromAltitude(l,n.lat):void 0,g=this.projection.project(n.lng,n.lat);return new o.MercatorCoordinate(g.x,g.y,f)}coordinateLocation(n){return this.projection.unproject(n.x,n.y)}pointRayIntersection(n,l){const f=l??this._centerAltitude,g=[n.x,n.y,0,1],y=[n.x,n.y,1,1];o.transformMat4$1(g,g,this.pixelMatrixInverse),o.transformMat4$1(y,y,this.pixelMatrixInverse);const w=y[3];o.scale$1(g,g,1/g[3]),o.scale$1(y,y,1/w);const E=g[2],C=y[2];return{p0:g,p1:y,t:E===C?0:(f-E)/(C-E)}}screenPointToMercatorRay(n){const l=[n.x,n.y,0,1],f=[n.x,n.y,1,1];return o.transformMat4$1(l,l,this.pixelMatrixInverse),o.transformMat4$1(f,f,this.pixelMatrixInverse),o.scale$1(l,l,1/l[3]),o.scale$1(f,f,1/f[3]),l[2]=o.mercatorZfromAltitude(l[2],this._center.lat)*this.worldSize,f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,o.scale$1(l,l,1/this.worldSize),o.scale$1(f,f,1/this.worldSize),new o.Ray([l[0],l[1],l[2]],o.normalize([],o.sub([],f,l)))}rayIntersectionCoordinate(n){const{p0:l,p1:f,t:g}=n,y=o.mercatorZfromAltitude(l[2],this._center.lat),w=o.mercatorZfromAltitude(f[2],this._center.lat);return new o.MercatorCoordinate(o.number(l[0],f[0],g)/this.worldSize,o.number(l[1],f[1],g)/this.worldSize,o.number(y,w,g))}pointCoordinate(n,l=this._centerAltitude){return this.projection.pointCoordinate(this,n.x,n.y,l)}pointCoordinate3D(n){if(!this.elevation)return this.pointCoordinate(n);let l=this.projection.pointCoordinate3D(this,n.x,n.y);if(l)return new o.MercatorCoordinate(l[0],l[1],l[2]);let f=0,g=this.horizonLineFromTop();if(n.y>g)return this.pointCoordinate(n);const y=.02*g,w=n.clone();for(let E=0;E<10&&g-f>y;E++){w.y=o.number(f,g,.66);const C=this.projection.pointCoordinate3D(this,w.x,w.y);C?(g=w.y,l=C):f=w.y}return l?new o.MercatorCoordinate(l[0],l[1],l[2]):this.pointCoordinate(n)}isPointAboveHorizon(n){return this.projection.isPointAboveHorizon(this,n)}isPointOnSurface(n){if(n.y<0||n.y>this.height||n.x<0||n.x>this.width)return!1;if(this.elevation||this.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(n);const l=this.pointCoordinate(n);return l.y>=0&&l.y<=1}_coordinatePoint(n,l){const f=l&&this.elevation?this.elevation.getAtPointOrZero(n,this._centerAltitude):this._centerAltitude,g=[n.x*this.worldSize,n.y*this.worldSize,f+n.toAltitude(),1];return o.transformMat4$1(g,g,this.pixelMatrix),g[3]>0?new o.Point(g[0]/g[3],g[1]/g[3]):new o.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:n,left:l}=this._edgeInsets,f=this.height-this._edgeInsets.bottom,g=this.width-this._edgeInsets.right,y=this.pointLocation3D(new o.Point(l,n)),w=this.pointLocation3D(new o.Point(g,n)),E=this.pointLocation3D(new o.Point(g,f)),C=this.pointLocation3D(new o.Point(l,f));let R=Math.min(y.lng,w.lng,E.lng,C.lng),L=Math.max(y.lng,w.lng,E.lng,C.lng),z=Math.min(y.lat,w.lat,E.lat,C.lat),Z=Math.max(y.lat,w.lat,E.lat,C.lat);const W=Math.pow(2,-this.zoom)/16*270,X=this.projection.name==="globe"?1:4,K=(Q,B,H,re,ne)=>{const fe=(Q+H)/2,me=(B+re)/2,pe=new o.Point(fe,me),{lng:we,lat:be}=this.pointLocation3D(pe),Re=Math.max(0,R-we,z-be,we-L,be-Z);R=Math.min(R,we),L=Math.max(L,we),z=Math.min(z,be),Z=Math.max(Z,be),(ne<X||Re>W)&&(K(Q,B,fe,me,ne+1),K(fe,me,H,re,ne+1))};if(K(l,n,g,n,1),K(g,n,g,f,1),K(g,f,l,f,1),K(l,f,l,n,1),this.projection.name==="globe"){const[Q,B]=o.polesInViewport(this);Q?(Z=90,L=180,R=-180):B&&(z=-90,L=180,R=-180)}return new o.LngLatBounds(new o.LngLat(R,z),new o.LngLat(L,Z))}_getBoundsRectangular(n,l){const{top:f,left:g}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,w=this.width-this._edgeInsets.right,E=new o.Point(g,f),C=new o.Point(w,f),R=new o.Point(w,y),L=new o.Point(g,y);let z=this.pointCoordinate(E,n),Z=this.pointCoordinate(C,n);const W=this.pointCoordinate(R,l),X=this.pointCoordinate(L,l),K=(Q,B)=>(B.y-Q.y)/(B.x-Q.x);return z.y>1&&Z.y>=0?z=new o.MercatorCoordinate((1-X.y)/K(X,z)+X.x,1):z.y<0&&Z.y<=1&&(z=new o.MercatorCoordinate(-X.y/K(X,z)+X.x,0)),Z.y>1&&z.y>=0?Z=new o.MercatorCoordinate((1-W.y)/K(W,Z)+W.x,1):Z.y<0&&z.y<=1&&(Z=new o.MercatorCoordinate(-W.y/K(W,Z)+W.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(z)).extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(W))}_getBoundsRectangularTerrain(){const n=this.elevation;if(!n.visibleDemTiles.length||n.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=n.visibleDemTiles.reduce((f,g)=>{if(g.dem){const y=g.dem.tree;f.min=Math.min(f.min,y.minimums[0]),f.max=Math.max(f.max,y.maximums[0])}return f},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*n.exaggeration(),l.max*n.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(n=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,f=this.height/2-l*(1-this._horizonShift);return n?Math.max(0,f):f}getMaxBounds(){return this.maxBounds}setMaxBounds(n){this.maxBounds=n,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,n&&(this.minLat=n.getSouth(),this.maxLat=n.getNorth(),this.minLng=n.getWest(),this.maxLng=n.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(n,l){return this.projection.createTileMatrix(this,l,n)}calculateDistanceTileData(n){const l=n.key,f=this._distanceTileDataCache;if(f[l])return f[l];const g=n.canonical,y=1/this.height,w=this.cameraWorldSize,E=w/this.zoomScale(g.z),C=(g.x+Math.pow(2,g.z)*n.wrap)*E,R=g.y*E,L=this.point;L.x*=w/this.worldSize,L.y*=w/this.worldSize;const z=this.angle,Z=Math.sin(-z),W=-Math.cos(-z);return f[l]={bearing:[Z,W],center:[(L.x-C)*y,(L.y-R)*y],scale:E/o.EXTENT*y},f[l]}calculateFogTileMatrix(n){const l=n.key,f=this._fogTileMatrixCache;if(f[l])return f[l];const g=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,n);return o.multiply(g,this.worldToFogMatrix,g),f[l]=new Float32Array(g),f[l]}calculateProjMatrix(n,l=!1){const f=n.key,g=l?this._alignedProjMatrixCache:this._projMatrixCache;if(g[f])return g[f];const y=this.calculatePosMatrix(n,this.worldSize);return o.multiply(y,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:l?this.alignedProjMatrix:this.projMatrix,y),g[f]=new Float32Array(y),g[f]}calculatePixelsToTileUnitsMatrix(n){const l=n.tileID.key,f=this._pixelsToTileUnitsCache;if(f[l])return f[l];const g=function(y,w){const{scale:E}=y.tileTransform,C=E*o.EXTENT/(y.tileSize*Math.pow(2,w.zoom-y.tileID.overscaledZ+y.tileID.canonical.z));return R=new Float32Array(4),Z=(L=w.inverseAdjustmentMatrix)[1],W=L[2],X=L[3],Q=(z=[C,C])[1],R[0]=L[0]*(K=z[0]),R[1]=Z*K,R[2]=W*Q,R[3]=X*Q,R;var R,L,z,Z,W,X,K,Q}(n,this);return f[l]=g,f[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const n=1/this.worldSize,l=o.fromScaling([],[n,n,n]);return o.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const n=this._elevation;this._updateCameraState();const l=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,f=this._computeCameraPosition(l),g=this._camera.forward(),y=o.mercatorZfromAltitude(1,this._center.lat);f[2]/=y,g[2]/=y,o.normalize(g,g);const w=n.raycast(f,g,n.exaggeration());if(w){const E=o.scaleAndAdd([],f,g,w),C=new o.MercatorCoordinate(E[0],E[1],o.mercatorZfromAltitude(E[2],o.latFromMercatorY(E[1]))),R=(C.z+o.length([C.x-f[0],C.y-f[1],C.z-f[2]*y]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(R),this._centerAltitude=C.toAltitude(),this._center=this.coordinateLocation(C),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(n=!1){if(!this._elevation)return;const l=this._elevation,f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(f),y=l.getAtPointOrZero(new o.MercatorCoordinate(...g)),w=this.pixelsPerMeter/this.worldSize*y,E=this._minimumHeightOverTerrain(),C=g[2]-w;if(C<=E)if(C<0||n){const R=this.locationCoordinate(this._center,this._centerAltitude),L=[g[0],g[1],R.z-g[2]],z=o.length(L);L[2]-=(E-C)/this._pixelsPerMercatorPixel;const Z=o.length(L);if(Z===0)return;o.scale$2(L,L,z/Z*this._pixelsPerMercatorPixel),this._camera.position=[g[0],g[1],R.z*this._pixelsPerMercatorPixel-L[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const n=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||n){const Z=this.center;return Z.lat=o.clamp(Z.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!n)&&(Z.lng=o.clamp(Z.lng,this.minLng,this.maxLng)),this.center=Z,void(this._constraining=!1)}const l=this._unmodified,{x:f,y:g}=this.point;let y=0,w=f,E=g;const C=this.width/2,R=this.height/2,L=this.worldMinY*this.scale,z=this.worldMaxY*this.scale;if(g-R<L&&(E=L+R),g+R>z&&(E=z-R),z-L<this.height&&(y=Math.max(y,this.height/(z-L)),E=(z+L)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Z=this.worldMinX*this.scale,W=this.worldMaxX*this.scale,X=this.worldSize/2-(Z+W)/2;w=(f+X+this.worldSize)%this.worldSize-X,w-C<Z&&(w=Z+C),w+C>W&&(w=W-C),W-Z<this.width&&(y=Math.max(y,this.width/(W-Z)),w=(W+Z)/2)}w===f&&E===g||(this.center=this.unproject(new o.Point(w,E))),y&&(this.zoom+=this.scaleZoom(y)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let n=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(n=Math.max(n,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),n}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const n=this.centerOffset,l=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const f=cl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,f),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const g=this.projection.zAxisUnit==="meters"?l:1,y=this._camera.getWorldToCamera(this.worldSize,g),w=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);w[8]=2*-n.x/this.width,w[9]=2*n.y/this.height;let E=o.mul([],w,y);if(this.projection.isReprojectedInTileSpace){const me=this.locationCoordinate(this.center),pe=o.identity([]);o.translate(pe,pe,[me.x*this.worldSize,me.y*this.worldSize,0]),o.multiply(pe,pe,gs(this)),o.translate(pe,pe,[-me.x*this.worldSize,-me.y*this.worldSize,0]),o.multiply(E,E,pe),this.inverseAdjustmentMatrix=function(we){const be=gs(we,!0);return ve([],[be[0],be[1],be[4],be[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],E,[this.worldSize,this.worldSize,this.worldSize/g,1]),this.projMatrix=E,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const C=o.invert([],w);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(C,this.horizonLineFromTop(),this.height);const R=new Float32Array(16);o.identity(R),o.scale(R,R,[1,-1,1]),o.rotateX(R,R,this._pitch),o.rotateZ(R,R,this.angle);const L=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;L[8]=2*-n.x/this.width,L[9]=2*(n.y+z)/this.height,this.skyboxMatrix=o.multiply(R,L,R);const Z=this.point,W=Z.x,X=Z.y,K=this.width%2/2,Q=this.height%2/2,B=Math.cos(this.angle),H=Math.sin(this.angle),re=W-Math.round(W)+B*K+H*Q,ne=X-Math.round(X)+B*Q+H*K,fe=new Float64Array(E);if(o.translate(fe,fe,[re>.5?re-1:re,ne>.5?ne-1:ne,0]),this.alignedProjMatrix=fe,E=o.create(),o.scale(E,E,[this.width/2,-this.height/2,1]),o.translate(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=o.create(),o.scale(E,E,[1,-1,1]),o.translate(E,E,[-1,-1,0]),o.scale(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},E=o.invert(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=E,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(me,me,y),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=E;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const n=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,f=this._camera.position,g=1/this.height/this._pixelsPerMercatorPixel,y=[n,n,l];o.scale$2(y,y,g),o.scale$2(f,f,-1),o.multiply$2(f,f,y);const w=o.create();o.translate(w,w,f),o.scale(w,w,y),this.mercatorFogMatrix=w,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(n,l,g)}_computeCameraPosition(n){const l=(n=n||this.pixelsPerMeter)/this.pixelsPerMeter,f=this._camera.forward(),g=this.point,y=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-n/this.worldSize*this._centerAltitude;return[g.x/this.worldSize-f[0]*y,g.y/this.worldSize-f[1]*y,n/this.worldSize*this._centerAltitude-f[2]*y]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(n){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),f=this._camera.position[2],g=n[2];let y=1;this.projection.wrap&&(this.center=this.center.wrap()),g>0&&(y=Math.min((l-f)/g,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,n,y),this._updateStateFromCamera()}_updateStateFromCamera(){const n=this._camera.position,l=this._camera.forward(),{pitch:f,bearing:g}=this._camera.getPitchBearing(),y=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,w=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),E=Math.max((n[2]-y)/Math.cos(f),w),C=this._zoomFromMercatorZ(E);o.scaleAndAdd(n,n,l,E),this._pitch=o.clamp(f,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(g,-Math.PI,Math.PI),this._setZoom(o.clamp(C,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(n[0],n[1],n[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(n){return Math.pow(2,n)*this.tileSize}_mercatorZfromZoom(n){return this.cameraToCenterDistance/this._worldSizeFromZoom(n)}_minimumHeightOverTerrain(){const n=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(n)}_zoomFromMercatorZ(n){return this.scaleZoom(this.cameraToCenterDistance/(n*this.tileSize))}zoomFromMercatorZAdjusted(n){let l=0,f=o.GLOBE_ZOOM_THRESHOLD_MAX,g=0,y=1/0;for(;f-l>1e-6&&f>l;){const w=l+.5*(f-l),E=this.tileSize*Math.pow(2,w),C=this.getCameraToCenterDistance(this.projection,w,E),R=this.scaleZoom(C/(n*this.tileSize)),L=Math.abs(w-R);L<y&&(y=L,g=w),w<R?l=w:f=w}return g}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(n,l){const f=Math.min(n.x,l.x),g=Math.max(n.x,l.x),y=Math.min(n.y,l.y),w=Math.max(n.y,l.y);if(y<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const E=[new o.Point(f,y),new o.Point(g,w),new o.Point(f,w),new o.Point(g,y)],C=this.renderWorldCopies?-3:0,R=this.renderWorldCopies?4:1;for(const L of E){const z=this.pointRayIntersection(L);if(z.t<0)return!0;const Z=this.rayIntersectionCoordinate(z);if(Z.x<C||Z.y<0||Z.x>R||Z.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.Point(0,0),new o.Point(this.width,this.height))}zoomDeltaToMovement(n,l){const f=o.length(o.sub([],this._camera.position,n)),g=this._zoomFromMercatorZ(f)+l;return f-this._mercatorZfromZoom(g)}getCameraPoint(){if(this.projection.name==="globe"){const n=function([l,f,g],y){const w=[l,f,g,1];o.transformMat4$1(w,w,y);const E=w[3]=Math.max(w[3],1e-6);return w[0]/=E,w[1]/=E,w[2]/=E,w}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.Point(n[0],n[1])}{const n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,n))}}getCameraToCenterDistance(n,l=this.zoom,f=this.worldSize){const g=cl(n,l,this.width,this.height,1024),y=n.pixelSpaceConversion(this.center.lat,f,g);return .5/Math.tan(.5*this._fov)*this.height*y}getWorldToCameraMatrix(){const n=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(n,n,this.globeMatrix),n}}function ys(u,n){let l=!1,f=null;const g=()=>{f=null,l&&(u(),f=setTimeout(g,n),l=!1)};return()=>(l=!0,f||g(),f)}class zd{constructor(n){this._hashName=n&&encodeURIComponent(n),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ys(this._updateHashUnthrottled.bind(this),300)}addTo(n){return this._map=n,o.window.addEventListener("hashchange",this._onHashChange,!1),n.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const n=this._map;if(!n)return"";const l=ca(n);if(this._hashName){const f=this._hashName;let g=!1;const y=o.window.location.hash.slice(1).split("&").map(w=>{const E=w.split("=")[0];return E===f?(g=!0,`${E}=${l}`):w}).filter(w=>w);return g||y.push(`${f}=${l}`),`#${y.join("&")}`}return`#${l}`}_getCurrentHash(){const n=o.window.location.hash.replace("#","");if(this._hashName){let l;return n.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(l=f)}),(l&&l[1]||"").split("/")}return n.split("/")}_onHashChange(){const n=this._map;if(!n)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){const f=n.dragRotate.isEnabled()&&n.touchZoomRotate.isEnabled()?+(l[3]||0):n.getBearing();return n.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const n=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,n)}}function ca(u,n){const l=u.getCenter(),f=Math.round(100*u.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,g),w=Math.round(l.lng*y)/y,E=Math.round(l.lat*y)/y,C=u.getBearing(),R=u.getPitch();let L=n?`/${w}/${E}/${f}`:`${f}/${E}/${w}`;return(C||R)&&(L+="/"+Math.round(10*C)/10),R&&(L+=`/${Math.round(R)}`),L}const ua={linearity:.3,easing:o.bezier(0,0,.3,1)},hl=o.extend({deceleration:2500,maxSpeed:1400},ua),fl=o.extend({deceleration:20,maxSpeed:1400},ua),xt=o.extend({deceleration:1e3,maxSpeed:360},ua),pi=o.extend({deceleration:1e3,maxSpeed:90},ua);class wu{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=o.exported.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)l.zoom+=y.zoomDelta||0,l.bearing+=y.bearingDelta||0,l.pitch+=y.pitchDelta||0,y.panDelta&&l.pan._add(y.panDelta),y.around&&(l.around=y.around),y.pinchAround&&(l.pinchAround=y.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const y=fa(l.pan.mag(),f,o.extend({},hl,n||{}));g.offset=l.pan.mult(y.amount/l.pan.mag()),g.center=this._map.transform.center,ha(g,y)}if(l.zoom){const y=fa(l.zoom,f,fl);g.zoom=this._map.transform.zoom+y.amount,ha(g,y)}if(l.bearing){const y=fa(l.bearing,f,xt);g.bearing=this._map.transform.bearing+o.clamp(y.amount,-179,179),ha(g,y)}if(l.pitch){const y=fa(l.pitch,f,pi);g.pitch=this._map.transform.pitch+y.amount,ha(g,y)}if(g.zoom||g.bearing){const y=l.pinchAround===void 0?l.around:l.pinchAround;g.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),g.noMoveStart=!0,g}}function ha(u,n){(!u.duration||u.duration<n.duration)&&(u.duration=n.duration,u.easing=n.easing)}function fa(u,n,l){const{maxSpeed:f,linearity:g,deceleration:y}=l,w=o.clamp(u*g/(n/1e3),-f,f),E=Math.abs(w)/(y*g);return{easing:l.easing,duration:1e3*E,amount:w*(E/2)}}class on extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f,g={}){const y=Lt(l.getCanvasContainer(),f),w=l.unproject(y);super(n,o.extend({point:y,lngLat:w,originalEvent:f},g)),this._defaultPrevented=!1,this.target=l}}class pa extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){const g=n==="touchend"?f.changedTouches:f.touches,y=Ye(l.getCanvasContainer(),g),w=y.map(C=>l.unproject(C)),E=y.reduce((C,R,L,z)=>C.add(R.div(z.length)),new o.Point(0,0));super(n,{points:y,point:E,lngLats:w,lngLat:l.unproject(E),originalEvent:f}),this._defaultPrevented=!1}}class pl extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){super(n,{originalEvent:f}),this._defaultPrevented=!1}}class Bd{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(n){return this._firePreventable(new pl(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new on(n.type,this._map,n))}mouseup(n){this._map.fire(new on(n.type,this._map,n))}preclick(n){const l=o.extend({},n);l.type="preclick",this._map.fire(new on(l.type,this._map,l))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(n),this._map.fire(new on(n.type,this._map,n)))}dblclick(n){return this._firePreventable(new on(n.type,this._map,n))}mouseover(n){this._map.fire(new on(n.type,this._map,n))}mouseout(n){this._map.fire(new on(n.type,this._map,n))}touchstart(n){return this._firePreventable(new pa(n.type,this._map,n))}touchmove(n){this._map.fire(new pa(n.type,this._map,n))}touchend(n){this._map.fire(new pa(n.type,this._map,n))}touchcancel(n){this._map.fire(new pa(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ml{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(n){this._map.fire(new on(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new on("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._map.fire(new on(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eu{constructor(n,l){this._map=n,this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(xe(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const f=l,g=this._startPos,y=this._lastPos;if(!g||!y||y.equals(f)||!this._box&&f.dist(g)<this._clickTolerance)return;this._lastPos=f,this._box||(this._box=oe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",n));const w=Math.min(g.x,f.x),E=Math.max(g.x,f.x),C=Math.min(g.y,f.y),R=Math.max(g.y,f.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${w}px,${C}px)`,this._box.style.width=E-w+"px",this._box.style.height=R-C+"px")})}mouseupWindow(n,l){if(!this._active)return;const f=this._startPos,g=l;if(f&&n.button===0){if(this.reset(),ht(),f.x!==g.x||f.y!==g.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:n})),{cameraAnimation:y=>y.fitScreenCoordinates(f,g,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",n)}}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Je(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new o.Event(n,{originalEvent:l}))}}function gl(u,n){const l={};for(let f=0;f<u.length;f++)l[u[f].identifier]=n[f];return l}class vs{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(n,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=n.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const y=new o.Point(0,0);for(const w of g)y._add(w);return y.div(g.length)}(l),this.touches=gl(f,l)))}touchmove(n,l,f){if(this.aborted||!this.centroid)return;const g=gl(f,l);for(const y in this.touches){const w=g[y];(!w||w.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(n,l,f){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Fd{constructor(n){this.singleTap=new vs(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(n,l,f){this.singleTap.touchstart(n,l,f)}touchmove(n,l,f){this.singleTap.touchmove(n,l,f)}touchend(n,l,f){const g=this.singleTap.touchend(n,l,f);if(g){const y=n.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(g)<30;if(y&&w||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class C1{constructor(){this._zoomIn=new Fd({numTouches:1,numTaps:2}),this._zoomOut=new Fd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,f){this._zoomIn.touchstart(n,l,f),this._zoomOut.touchstart(n,l,f)}touchmove(n,l,f){this._zoomIn.touchmove(n,l,f),this._zoomOut.touchmove(n,l,f)}touchend(n,l,f){const g=this._zoomIn.touchend(n,l,f),y=this._zoomOut.touchend(n,l,f);return g?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:n})}):y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:w=>w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(y)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Tu={0:1,2:2};class xs{constructor(n){this.reset(),this._clickTolerance=n.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(n,l){return!1}_move(n,l){return{}}mousedown(n,l){if(this._lastPoint)return;const f=ft(n);this._correctButton(n,f)&&(this._lastPoint=l,this._eventButton=f)}mousemoveWindow(n,l){const f=this._lastPoint;if(f){if(n.preventDefault(),this._eventButton!=null&&function(g,y){const w=Tu[y];return g.buttons===void 0||(g.buttons&w)!==w}(n,this._eventButton))this.reset();else if(this._moved||!(l.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(f,l)}}mouseupWindow(n){this._lastPoint&&ft(n)===this._eventButton&&(this._moved&&ht(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Nd extends xs{mousedown(n,l){super.mousedown(n,l),this._lastPoint&&(this._active=!0)}_correctButton(n,l){return l===0&&!n.ctrlKey}_move(n,l){return{around:l,panDelta:l.sub(n)}}}class jd extends xs{_correctButton(n,l){return l===0&&n.ctrlKey||l===2}_move(n,l){const f=.8*(l.x-n.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(n){n.preventDefault()}}class Ud extends xs{_correctButton(n,l){return l===0&&n.ctrlKey||l===2}_move(n,l){const f=-.5*(l.y-n.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(n){n.preventDefault()}}class _l{constructor(n,l){this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)}touchstart(n,l,f){return this._calculateTransform(n,l,f)}touchmove(n,l,f){if(this._active&&!(f.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(f.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return n.cancelable&&n.preventDefault(),this._calculateTransform(n,l,f)}}touchend(n,l,f){this._calculateTransform(n,l,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,f){f.length>0&&(this._active=!0);const g=gl(f,l),y=new o.Point(0,0),w=new o.Point(0,0);let E=0;for(const R in g){const L=g[R],z=this._touches[R];z&&(y._add(L),w._add(L.sub(z)),E++,g[R]=L)}if(this._touches=g,E<this._minTouches||!w.mag())return;const C=w.div(E);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(E),panDelta:C}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=oe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class ma{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(n){}_move(n,l,f){return{}}touchstart(n,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,f){const g=this._firstTwoTouches;if(!g)return;n.preventDefault();const[y,w]=g,E=ga(f,l,y),C=ga(f,l,w);if(!E||!C)return;const R=this._aroundCenter?null:E.add(C).div(2);return this._move([E,C],R,n)}touchend(n,l,f){if(!this._firstTwoTouches)return;const[g,y]=this._firstTwoTouches,w=ga(f,l,g),E=ga(f,l,y);w&&E||(this._active&&ht(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ga(u,n,l){for(let f=0;f<u.length;f++)if(u[f].identifier===l)return n[f]}function Vd(u,n){return Math.log(u/n)/Math.LN2}class Su extends ma{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const f=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Vd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vd(this._distance,f),pinchAround:l}}}function Gd(u,n){return 180*u.angleWith(n)/Math.PI}class Cu extends ma{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l){const f=this._vector;if(this._vector=n[0].sub(n[1]),f&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Gd(this._vector,f),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,f=this._startVector;if(!f)return!1;const g=Gd(n,f);return Math.abs(g)<l}}function _o(u){return Math.abs(u.y)>Math.abs(u.x)}class Au extends ma{constructor(n){super(),this._map=n}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(n){this._lastPoints=n,_o(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,f){const g=this._lastPoints;if(!g)return;const y=n[0].sub(g[0]),w=n[1].sub(g[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&f.touches.length<3||(this._valid=this.gestureBeginsVertically(y,w,f.timeStamp),!this._valid)?void 0:(this._lastPoints=n,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5})}gestureBeginsVertically(n,l,f){if(this._valid!==void 0)return this._valid;const g=n.mag()>=2,y=l.mag()>=2;if(!g&&!y)return;if(!g||!y)return this._firstMove==null&&(this._firstMove=f),f-this._firstMove<100&&void 0;const w=n.y>0==l.y>0;return _o(n)&&_o(l)&&w}}const Iu={panStep:100,bearingStep:15,pitchStep:10};class A1{constructor(){const n=Iu;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,f=0,g=0,y=0,w=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?f=-1:(n.preventDefault(),y=-1);break;case 39:n.shiftKey?f=1:(n.preventDefault(),y=1);break;case 38:n.shiftKey?g=1:(n.preventDefault(),w=-1);break;case 40:n.shiftKey?g=-1:(n.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:E=>{const C=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:Mu,zoom:l?Math.round(C)+l*(n.shiftKey?2:1):C,bearing:E.getBearing()+f*this._bearingStep,pitch:E.getPitch()+g*this._pitchStep,offset:[-y*this._panStep,-w*this._panStep],center:E.getCenter()},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Mu(u){return u*(2-u)}const Zd=4.000244140625;class Pu{constructor(n,l){this._map=n,this._el=n.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(n){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(n.ctrlKey||n.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=n.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const f=o.exported.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Zd==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_onTimeout(n){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(n)}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=Lt(this._el,n);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._map.transform;this._type==="wheel"&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>n._terrainEnabled()&&this._aroundCoord?n.computeZoomRelativeTo(this._aroundCoord):n.zoom;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Zd?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&R!==0&&(R=1/R);const L=l(),z=Math.pow(2,L),Z=typeof this._targetZoom=="number"?n.zoomScale(this._targetZoom):z;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(Z*R))),this._type==="wheel"&&(this._startZoom=L,this._easing=this._smoothOutEasing(200)),this._delta=0}const f=typeof this._targetZoom=="number"?this._targetZoom:l(),g=this._startZoom,y=this._easing;let w,E=!1;if(this._type==="wheel"&&g&&y){const C=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),R=y(C);w=o.number(g,f,R),C<1?this._frameId||(this._frameId=!0):E=!0}else w=f,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:w-l(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=o.ease;if(this._prevEase){const f=this._prevEase,g=(o.exported.now()-f.start)/f.duration,y=f.easing(g+.01)-f.easing(g),w=.27/Math.sqrt(y*y+1e-4)*.01,E=Math.sqrt(.0729-w*w);l=o.bezier(w,E,.25,1)}return this._prevEase={start:o.exported.now(),duration:n,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=oe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Lu{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class mn{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(n,l){return n.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(n.shiftKey?-1:1),around:f.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class I1{constructor(){this._tap=new Fd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(n,l,f){this._swipePoint||(this._tapTime&&n.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=l[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(n,l,f))}touchmove(n,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=l[0],y=g.y-this._swipePoint.y;return this._swipePoint=g,n.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(n,l,f)}touchend(n,l,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(n,l,f)&&(this._tapTime=n.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ru{constructor(n,l,f){this._el=n,this._mousePan=l,this._touchPan=f}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class M1{constructor(n,l,f){this._pitchWithRotate=n.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class P1{constructor(n,l,f,g){this._el=n,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ni=u=>u.zoom||u.drag||u.pitch||u.rotate;class ku extends o.Event{}class L1{constructor(){this.constants=[1,1,.01],this.radius=0}setup(n,l){const f=o.sub([],l,n);this.radius=o.length(f[2]<0?o.div([],f,this.constants):[f[0],f[1],0])}projectRay(n){o.div(n,n,this.constants),o.normalize(n,n),o.mul$1(n,n,this.constants);const l=o.scale$2([],n,this.radius);if(l[2]>0){const f=o.scale$2([],[0,0,1],o.dot(l,[0,0,1])),g=o.scale$2([],o.normalize([],[l[0],l[1],0]),this.radius),y=o.add([],l,o.scale$2([],o.sub([],o.add([],g,f),l),2));l[0]=y[0],l[1]=y[1]}return l}}function mi(u){return u.panDelta&&u.panDelta.mag()||u.zoomDelta||u.bearingDelta||u.pitchDelta}class Ii{constructor(n,l){this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wu(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new L1,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),o.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[g,y,w]of this._listeners)g.addEventListener(y,g===o.window.document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[n,l,f]of this._listeners)n.removeEventListener(l,n===o.window.document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(n){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Bd(l,n));const g=l.boxZoom=new Eu(l,n);this._add("boxZoom",g);const y=new C1,w=new mn;l.doubleClickZoom=new Lu(w,y),this._add("tapZoom",y),this._add("clickZoom",w);const E=new I1;this._add("tapDragZoom",E);const C=l.touchPitch=new Au(l);this._add("touchPitch",C);const R=new jd(n),L=new Ud(n);l.dragRotate=new M1(n,R,L),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const z=new Nd(n),Z=new _l(l,n);l.dragPan=new Ru(f,z,Z),this._add("mousePan",z),this._add("touchPan",Z,["touchZoom","touchRotate"]);const W=new Cu,X=new Su;l.touchZoomRotate=new P1(f,X,W,E),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ml(l));const K=l.scrollZoom=new Pu(l,this);this._add("scrollZoom",K,["mousePan"]);const Q=l.keyboard=new A1;this._add("keyboard",Q);for(const B of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])n.interactive&&n[B]&&l[B].enable(n[B])}_add(n,l,f){this._handlers.push({handlerName:n,handler:l,allowed:f}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ni(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(n,l,f){for(const g in n)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1}handleWindowEvent(n){this.handleEvent(n,`${n.type}Window`)}_getMapTouches(n){const l=[];for(const f of n)this._el.contains(f.target)&&l.push(f);return l}handleEvent(n,l){this._updatingCamera=!0;const f=n.type==="renderFrame",g=f?void 0:n,y={needsRenderFrame:!1},w={},E={},C=n.touches?this._getMapTouches(n.touches):void 0,R=C?Ye(this._el,C):f?void 0:Lt(this._el,n);for(const{handlerName:Z,handler:W,allowed:X}of this._handlers){if(!W.isEnabled())continue;let K;this._blockedByActive(E,X,Z)?W.reset():W[l||n.type]&&(K=W[l||n.type](n,R,C),this.mergeHandlerResult(y,w,K,Z,g),K&&K.needsRenderFrame&&this._triggerRenderFrame()),(K||W.isActive())&&(E[Z]=W)}const L={};for(const Z in this._previousActiveHandlers)E[Z]||(L[Z]=g);this._previousActiveHandlers=E,(Object.keys(L).length||mi(y))&&(this._changes.push([y,w,L]),this._triggerRenderFrame()),(Object.keys(E).length||mi(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:z}=y;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))}mergeHandlerResult(n,l,f,g,y){if(!f)return;o.extend(n,f);const w={handlerName:g,originalEvent:f.originalEvent||y};f.zoomDelta!==void 0&&(l.zoom=w),f.panDelta!==void 0&&(l.drag=w),f.pitchDelta!==void 0&&(l.pitch=w),f.bearingDelta!==void 0&&(l.rotate=w)}_applyChanges(){const n={},l={},f={};for(const[g,y,w]of this._changes)g.panDelta&&(n.panDelta=(n.panDelta||new o.Point(0,0))._add(g.panDelta)),g.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(n.around=g.around),g.aroundCoord!==void 0&&(n.aroundCoord=g.aroundCoord),g.pinchAround!==void 0&&(n.pinchAround=g.pinchAround),g.noInertia&&(n.noInertia=g.noInertia),o.extend(l,y),o.extend(f,w);this._updateMapTransform(n,l,f),this._changes=[]}_updateMapTransform(n,l,f){const g=this._map,y=g.transform,w=H=>[H.x,H.y,H.z];if((H=>{const re=this._eventsInProgress.drag;return re&&!this._handlersById[re.handlerName].isActive()})()&&!mi(n)){const H=y.zoom;y.cameraElevationReference="sea",y.recenterOnTerrain(),y.cameraElevationReference="ground",H!==y.zoom&&this._map._update(!0)}if(y._isCameraConstrained&&g._stop(!0),!mi(n))return void this._fireEvents(l,f,!0);let{panDelta:E,zoomDelta:C,bearingDelta:R,pitchDelta:L,around:z,aroundCoord:Z,pinchAround:W}=n;y._isCameraConstrained&&(C>0&&(C=0),y._isCameraConstrained=!1),W!==void 0&&(z=W),(C||(H=>l[H]&&!this._eventsInProgress[H])("drag"))&&z&&(this._dragOrigin=w(y.pointCoordinate3D(z)),this._trackingEllipsoid.setup(y._camera.position,this._dragOrigin)),y.cameraElevationReference="sea",g._stop(!0),z=z||g.transform.centerPoint,R&&(y.bearing+=R),L&&(y.pitch+=L),y._updateCameraState();const X=[0,0,0];if(E)if(y.projection.name==="mercator"){const H=this._trackingEllipsoid.projectRay(y.screenPointToMercatorRay(z).dir),re=this._trackingEllipsoid.projectRay(y.screenPointToMercatorRay(z.sub(E)).dir);X[0]=re[0]-H[0],X[1]=re[1]-H[1]}else{const H=y.pointCoordinate(z);if(y.projection.name==="globe"){E=E.rotate(-y.angle);const re=y._pixelsPerMercatorPixel/y.worldSize;X[0]=-E.x*o.mercatorScale(o.latFromMercatorY(H.y))*re,X[1]=-E.y*o.mercatorScale(y.center.lat)*re}else{const re=y.pointCoordinate(z.sub(E));H&&re&&(X[0]=re.x-H.x,X[1]=re.y-H.y)}}const K=y.zoom,Q=[0,0,0];if(C){const H=w(Z||y.pointCoordinate3D(z)),re={dir:o.normalize([],o.sub([],H,y._camera.position))};if(re.dir[2]<0){const ne=y.zoomDeltaToMovement(H,C);o.scale$2(Q,re.dir,ne)}}const B=o.add(X,X,Q);y._translateCameraConstrained(B),C&&Math.abs(y.zoom-K)>1e-4&&y.recenterOnTerrain(),y.cameraElevationReference="ground",this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,f,!0)}_fireEvents(n,l,f){const g=ni(this._eventsInProgress),y=ni(n),w={};for(const L in n){const{originalEvent:z}=n[L];this._eventsInProgress[L]||(w[`${L}start`]=z),this._eventsInProgress[L]=n[L]}!g&&y&&this._fireEvent("movestart",y.originalEvent);for(const L in w)this._fireEvent(L,w[L]);y&&this._fireEvent("move",y.originalEvent);for(const L in n){const{originalEvent:z}=n[L];this._fireEvent(L,z)}const E={};let C;for(const L in this._eventsInProgress){const{handlerName:z,originalEvent:Z}=this._eventsInProgress[L];this._handlersById[z].isActive()||(delete this._eventsInProgress[L],C=l[z]||Z,E[`${L}end`]=C)}for(const L in E)this._fireEvent(L,E[L]);const R=ni(this._eventsInProgress);if(f&&(g||y)&&!R){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;L?(z(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:C})):(this._map.fire(new o.Event("moveend",{originalEvent:C})),z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new o.Event(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{this._frameId=void 0,this.handleEvent(new ku("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const No="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class yl extends o.Evented{constructor(n,l){super(),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=l.respectPrefersReducedMotion!==!1,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}panBy(n,l,f){return n=o.Point.convert(n).mult(-1),this.panTo(this.transform.center,o.extend({offset:n},l),f)}panTo(n,l,f){return this.easeTo(o.extend({center:n},l),f)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,f){return this.easeTo(o.extend({zoom:n},l),f)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,f){return this.easeTo(o.extend({bearing:n},l),f)}resetNorth(n,l){return this.rotateTo(0,o.extend({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}cameraForBounds(n,l){n=o.LngLatBounds.convert(n);const f=l&&l.bearing||0,g=l&&l.pitch||0,y=n.getNorthWest(),w=n.getSouthEast();return this._cameraForBounds(this.transform,y,w,f,g,l)}_extendCameraOptions(n){const l={top:0,bottom:0,right:0,left:0};if(typeof(n=o.extend({padding:l,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding=="number"){const f=n.padding;n.padding={top:f,bottom:f,right:f,left:f}}return n.padding=o.extend(l,n.padding),n}_minimumAABBFrustumDistance(n,l){const f=l.max[0]-l.min[0],g=l.max[1]-l.min[1];return f/g>n.aspect?f/(2*Math.tan(.5*n.fovX)*n.aspect):g/(2*Math.tan(.5*n.fovY)*n.aspect)}_cameraForBoundsOnGlobe(n,l,f,g,y,w){const E=n.clone(),C=this._extendCameraOptions(w);E.bearing=g,E.pitch=y;const R=o.LngLat.convert(l),L=o.LngLat.convert(f),z=.5*(R.lat+L.lat),Z=.5*(R.lng+L.lng),W=o.latLngToECEF(z,Z),X=o.normalize([],W),K=o.normalize([],o.cross([],X,[0,1,0])),Q=o.cross([],K,X),B=[K[0],K[1],K[2],0,Q[0],Q[1],Q[2],0,X[0],X[1],X[2],0,0,0,0,1],H=[W,o.latLngToECEF(R.lat,R.lng),o.latLngToECEF(L.lat,R.lng),o.latLngToECEF(L.lat,L.lng),o.latLngToECEF(R.lat,L.lng),o.latLngToECEF(z,R.lng),o.latLngToECEF(z,L.lng),o.latLngToECEF(R.lat,Z),o.latLngToECEF(L.lat,Z)];let re=o.Aabb.fromPoints(H.map(Xe=>[o.dot(K,Xe),o.dot(Q,Xe),o.dot(X,Xe)]));const ne=o.transformMat4([],re.center,B);o.squaredLength(ne)===0&&o.set(ne,0,0,1),o.normalize(ne,ne),o.scale$2(ne,ne,o.GLOBE_RADIUS),E.center=o.ecefToLatLng(ne);const fe=E.getWorldToCameraMatrix(),me=o.invert(new Float64Array(16),fe);re=o.Aabb.applyTransform(re,o.multiply([],fe,B)),o.transformMat4(ne,ne,fe);const pe=.5*(re.max[2]-re.min[2]),we=this._minimumAABBFrustumDistance(E,re),be=o.scale$2([],[0,0,1],pe),Re=o.add(be,ne,be),rt=we+(E.pitch===0?0:o.distance(ne,Re)),Me=E.globeCenterInViewSpace,Ve=o.sub([],ne,[Me[0],Me[1],Me[2]]);o.normalize(Ve,Ve),o.scale$2(Ve,Ve,rt);const Oe=o.add([],ne,Ve);o.transformMat4(Oe,Oe,me);const et=o.earthRadius/o.GLOBE_RADIUS,Le=o.length(Oe),Ue=o.mercatorZfromAltitude(Math.max(Le*et-o.earthRadius,Number.EPSILON),0),ot=Math.min(E.zoomFromMercatorZAdjusted(Ue),C.maxZoom);return ot>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(E.setProjection({name:"mercator"}),E.zoom=ot,this._cameraForBounds(E,l,f,g,y,w)):{center:E.center,zoom:ot,bearing:g,pitch:y}}queryTerrainElevation(n,l){const f=this.transform.elevation;return f?(l=o.extend({},{exaggerated:!0},l),f.getAtPoint(o.MercatorCoordinate.fromLngLat(n),null,l.exaggerated)):null}_cameraForBounds(n,l,f,g,y,w){if(n.projection.name==="globe")return this._cameraForBoundsOnGlobe(n,l,f,g,y,w);const E=n.clone(),C=this._extendCameraOptions(w),R=E.padding;E.bearing=g,E.pitch=y;const L=o.LngLat.convert(l),z=o.LngLat.convert(f),Z=new o.LngLat(L.lng,z.lat),W=new o.LngLat(z.lng,L.lat),X=E.project(L),K=E.project(z),Q=this.queryTerrainElevation(L),B=this.queryTerrainElevation(z),H=this.queryTerrainElevation(Z),re=this.queryTerrainElevation(W),ne=[[X.x,X.y,Math.min(Q||0,B||0,H||0,re||0)],[K.x,K.y,Math.max(Q||0,B||0,H||0,re||0)]];let fe=o.Aabb.fromPoints(ne);const me=E.getWorldToCameraMatrix(),pe=o.invert(new Float64Array(16),me);fe=o.Aabb.applyTransform(fe,me);const we=o.sub([],fe.max,fe.min),be=R.left||0,Re=R.right||0,rt=R.bottom||0,Me=R.top||0,{left:Ve,right:Oe,top:et,bottom:Le}=C.padding,Ue=.5*(be+Re),ot=.5*(Me+rt),Xe=Math.min(E.scaleZoom(E.scale*Math.min((E.width-(be+Re+Ve+Oe))/we[0],(E.height-(rt+Me+Le+et))/we[1])),C.maxZoom),st=E.scale/E.zoomScale(Xe);fe=new o.Aabb([fe.min[0]-(Ve+Ue)*st,fe.min[1]-(Le+ot)*st,fe.min[2]],[fe.max[0]+(Oe+Ue)*st,fe.max[1]+(et+ot)*st,fe.max[2]]);const Mt=.5*we[2],Ot=this._minimumAABBFrustumDistance(E,fe),wt=[0,0,1,0];o.transformMat4$1(wt,wt,me),o.normalize$2(wt,wt);const kt=o.scale$2([],wt,Ot+Mt),Yt=o.add([],fe.center,kt),Xt=(typeof C.offset.x=="number"&&typeof C.offset.y=="number"?new o.Point(C.offset.x,C.offset.y):o.Point.convert(C.offset)).rotate(-o.degToRad(g));fe.center[0]-=Xt.x*st,fe.center[1]+=Xt.y*st,o.transformMat4(fe.center,fe.center,pe),o.transformMat4(Yt,Yt,pe);const At=[fe.center[0],fe.center[1],Yt[2]*E.pixelsPerMeter];o.scale$2(At,At,1/E.worldSize);const lr=o.lngFromMercatorX(At[0]),cr=o.latFromMercatorY(At[1]),ur=Math.min(E._zoomFromMercatorZ(At[2]),C.maxZoom),hr=new o.LngLat(lr,cr);return E.mercatorFromTransition&&ur<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(E.setProjection({name:"globe"}),E.zoom=ur,this._cameraForBounds(E,l,f,g,y,w)):{center:hr,zoom:ur,bearing:g,pitch:y}}fitBounds(n,l,f){const g=this.cameraForBounds(n,l);return this._fitInternal(g,l,f)}fitScreenCoordinates(n,l,f,g,y){const w=o.Point.convert(n),E=o.Point.convert(l),C=new o.Point(Math.min(w.x,E.x),Math.min(w.y,E.y)),R=new o.Point(Math.max(w.x,E.x),Math.max(w.y,E.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(w,E))return this;const L=this.transform.pointLocation3D(C),z=this.transform.pointLocation3D(R),Z=this.transform.pointLocation3D(new o.Point(C.x,R.y)),W=this.transform.pointLocation3D(new o.Point(R.x,C.y)),X=[Math.min(L.lng,z.lng,Z.lng,W.lng),Math.min(L.lat,z.lat,Z.lat,W.lat)],K=[Math.max(L.lng,z.lng,Z.lng,W.lng),Math.max(L.lat,z.lat,Z.lat,W.lat)],Q=g&&g.pitch?g.pitch:this.getPitch(),B=this._cameraForBounds(this.transform,X,K,f,Q,g);return this._fitInternal(B,g,y)}_fitInternal(n,l,f){return n?(delete(l=o.extend(n,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(n,l){this.stop();const f=n.preloadOnly?this.transform.clone():this.transform;let g=!1,y=!1,w=!1;return"zoom"in n&&f.zoom!==+n.zoom&&(g=!0,f.zoom=+n.zoom),n.center!==void 0&&(f.center=o.LngLat.convert(n.center)),"bearing"in n&&f.bearing!==+n.bearing&&(y=!0,f.bearing=+n.bearing),"pitch"in n&&f.pitch!==+n.pitch&&(w=!0,f.pitch=+n.pitch),n.padding==null||f.isPaddingEqual(n.padding)||(f.padding=n.padding),n.preloadOnly?(this._preloadTiles(f),this):(this.fire(new o.Event("movestart",l)).fire(new o.Event("move",l)),g&&this.fire(new o.Event("zoomstart",l)).fire(new o.Event("zoom",l)).fire(new o.Event("zoomend",l)),y&&this.fire(new o.Event("rotatestart",l)).fire(new o.Event("rotate",l)).fire(new o.Event("rotateend",l)),w&&this.fire(new o.Event("pitchstart",l)).fire(new o.Event("pitch",l)).fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(No),this.transform.getFreeCameraOptions()}setFreeCameraOptions(n,l){const f=this.transform;if(!f.projection.supportsFreeCamera)return o.warnOnce(No),this;this.stop();const g=f.zoom,y=f.pitch,w=f.bearing;f.setFreeCameraOptions(n);const E=g!==f.zoom,C=y!==f.pitch,R=w!==f.bearing;return this.fire(new o.Event("movestart",l)).fire(new o.Event("move",l)),E&&this.fire(new o.Event("zoomstart",l)).fire(new o.Event("zoom",l)).fire(new o.Event("zoomend",l)),R&&this.fire(new o.Event("rotatestart",l)).fire(new o.Event("rotate",l)).fire(new o.Event("rotateend",l)),C&&this.fire(new o.Event("pitchstart",l)).fire(new o.Event("pitch",l)).fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l)),this}easeTo(n,l){this._stop(!1,n.easeId),((n=o.extend({offset:[0,0],duration:500,easing:o.ease},n)).animate===!1||this._prefersReducedMotion(n))&&(n.duration=0);const f=this.transform,g=this.getZoom(),y=this.getBearing(),w=this.getPitch(),E=this.getPadding(),C="zoom"in n?+n.zoom:g,R="bearing"in n?this._normalizeBearing(n.bearing,y):y,L="pitch"in n?+n.pitch:w,z="padding"in n?n.padding:f.padding,Z=o.Point.convert(n.offset);let W,X,K;if(f.projection.name==="globe"){const be=o.MercatorCoordinate.fromLngLat(f.center),Re=Z.rotate(-f.angle);be.x+=Re.x/f.worldSize,be.y+=Re.y/f.worldSize;const rt=be.toLngLat(),Me=o.LngLat.convert(n.center||rt);this._normalizeCenter(Me),W=f.centerPoint.add(Re),X=new o.Point(be.x,be.y).mult(f.worldSize),K=new o.Point(o.mercatorXfromLng(Me.lng),o.mercatorYfromLat(Me.lat)).mult(f.worldSize).sub(X)}else{W=f.centerPoint.add(Z);const be=f.pointLocation(W),Re=o.LngLat.convert(n.center||be);this._normalizeCenter(Re),X=f.project(be),K=f.project(Re).sub(X)}const Q=f.zoomScale(C-g);let B,H;n.around&&(B=o.LngLat.convert(n.around),H=f.locationPoint(B));const re=this._zooming||C!==g,ne=this._rotating||y!==R,fe=this._pitching||L!==w,me=!f.isPaddingEqual(z),pe=be=>Re=>{if(re&&(be.zoom=o.number(g,C,Re)),ne&&(be.bearing=o.number(y,R,Re)),fe&&(be.pitch=o.number(w,L,Re)),me&&(be.interpolatePadding(E,z,Re),W=be.centerPoint.add(Z)),B)be.setLocationAtPoint(B,H);else{const rt=be.zoomScale(be.zoom-g),Me=C>g?Math.min(2,Q):Math.max(.5,Q),Ve=Math.pow(Me,1-Re),Oe=be.unproject(X.add(K.mult(Re*Ve)).mult(rt));be.setLocationAtPoint(be.renderWorldCopies?Oe.wrap():Oe,W)}return n.preloadOnly||this._fireMoveEvents(l),be};if(n.preloadOnly){const be=this._emulate(pe,n.duration,f);return this._preloadTiles(be),this}const we={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=re,this._rotating=ne,this._pitching=fe,this._padding=me,this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,we),this._ease(pe(f),be=>{f.recenterOnTerrain(),this._afterEase(l,be)},n),this}_prepareEase(n,l,f={}){this._moving=!0,this.transform.cameraElevationReference="sea",l||f.moving||this.fire(new o.Event("movestart",n)),this._zooming&&!f.zooming&&this.fire(new o.Event("zoomstart",n)),this._rotating&&!f.rotating&&this.fire(new o.Event("rotatestart",n)),this._pitching&&!f.pitching&&this.fire(new o.Event("pitchstart",n))}_fireMoveEvents(n){this.fire(new o.Event("move",n)),this._zooming&&this.fire(new o.Event("zoom",n)),this._rotating&&this.fire(new o.Event("rotate",n)),this._pitching&&this.fire(new o.Event("pitch",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const f=this._zooming,g=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new o.Event("zoomend",n)),g&&this.fire(new o.Event("rotateend",n)),y&&this.fire(new o.Event("pitchend",n)),this.fire(new o.Event("moveend",n))}flyTo(n,l){if(this._prefersReducedMotion(n)){const Xe=o.pick(n,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xe,l)}this.stop(),n=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},n);const f=this.transform,g=this.getZoom(),y=this.getBearing(),w=this.getPitch(),E=this.getPadding(),C="zoom"in n?o.clamp(+n.zoom,f.minZoom,f.maxZoom):g,R="bearing"in n?this._normalizeBearing(n.bearing,y):y,L="pitch"in n?+n.pitch:w,z="padding"in n?n.padding:f.padding,Z=f.zoomScale(C-g),W=o.Point.convert(n.offset);let X=f.centerPoint.add(W);const K=f.pointLocation(X),Q=o.LngLat.convert(n.center||K);this._normalizeCenter(Q);const B=f.project(K),H=f.project(Q).sub(B);let re=n.curve;const ne=Math.max(f.width,f.height),fe=ne/Z,me=H.mag();if("minZoom"in n){const Xe=o.clamp(Math.min(n.minZoom,g,C),f.minZoom,f.maxZoom),st=ne/f.zoomScale(Xe-g);re=Math.sqrt(st/me*2)}const pe=re*re;function we(Xe){const st=(fe*fe-ne*ne+(Xe?-1:1)*pe*pe*me*me)/(2*(Xe?fe:ne)*pe*me);return Math.log(Math.sqrt(st*st+1)-st)}function be(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Re(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const rt=we(0);let Me=function(Xe){return Re(rt)/Re(rt+re*Xe)},Ve=function(Xe){return ne*((Re(rt)*(be(st=rt+re*Xe)/Re(st))-be(rt))/pe)/me;var st},Oe=(we(1)-rt)/re;if(Math.abs(me)<1e-6||!isFinite(Oe)){if(Math.abs(ne-fe)<1e-6)return this.easeTo(n,l);const Xe=fe<ne?-1:1;Oe=Math.abs(Math.log(fe/ne))/re,Ve=function(){return 0},Me=function(st){return Math.exp(Xe*re*st)}}n.duration="duration"in n?+n.duration:1e3*Oe/("screenSpeed"in n?+n.screenSpeed/re:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0);const et=y!==R,Le=L!==w,Ue=!f.isPaddingEqual(z),ot=Xe=>st=>{const Mt=st*Oe,Ot=1/Me(Mt);Xe.zoom=st===1?C:g+Xe.scaleZoom(Ot),et&&(Xe.bearing=o.number(y,R,st)),Le&&(Xe.pitch=o.number(w,L,st)),Ue&&(Xe.interpolatePadding(E,z,st),X=Xe.centerPoint.add(W));const wt=st===1?Q:Xe.unproject(B.add(H.mult(Ve(Mt))).mult(Ot));return Xe.setLocationAtPoint(Xe.renderWorldCopies?wt.wrap():wt,X),Xe._updateCameraOnTerrain(),n.preloadOnly||this._fireMoveEvents(l),Xe};if(n.preloadOnly){const Xe=this._emulate(ot,n.duration,f);return this._preloadTiles(Xe),this}return this._zooming=!0,this._rotating=et,this._pitching=Le,this._padding=Ue,this._prepareEase(l,!1),this._ease(ot(f),()=>this._afterEase(l),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const f=this._onEaseEnd;this._onEaseEnd=void 0,f.call(this,l)}if(!n){const f=this.handlers;f&&f.stop(!1)}return this}_ease(n,l,f){f.animate===!1||f.duration===0?(n(1),l()):(this._easeStart=o.exported.now(),this._easeOptions=f,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const n=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(n)),n<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(n,l){n=o.wrap(n,-180,180);const f=Math.abs(n-l);return Math.abs(n-360-l)<f&&(n-=360),Math.abs(n+360-l)<f&&(n+=360),n}_normalizeCenter(n){const l=this.transform;if(!l.renderWorldCopies||l.maxBounds)return;const f=n.lng-l.center.lng;n.lng+=f>180?-360:f<-180?360:0}_prefersReducedMotion(n){return this._respectPrefersReducedMotion&&o.exported.prefersReducedMotion&&!(n&&n.essential)}_emulate(n,l,f){const g=Math.ceil(15*l/1e3),y=[],w=n(f.clone());for(let E=0;E<=g;E++){const C=w(E/g);y.push(C.clone())}return y}}class $t{constructor(n={}){this.options=n,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(n){const l=this.options&&this.options.compact;return this._map=n,this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=oe("button","mapboxgl-ctrl-attrib-button",this._container),oe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=oe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const f=this._map._getUIString(`AttributionControl.${l}`);n.setAttribute("aria-label",f),n.removeAttribute("title"),n.firstElementChild&&n.firstElementChild.setAttribute("title",f)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let n=this._editLink;n||(n=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(n){const f=l.reduce((g,y,w)=>(y.value&&(g+=`${y.key}=${y.value}${w<l.length-1?"&":""}`),g),"?");n.href=`${o.config.FEEDBACK_URL}/${f}#${ca(this._map,!0)}`,n.rel="noopener nofollow",this._setElementTitle(n,"MapFeedback")}}_updateData(n){!n||n.sourceDataType!=="metadata"&&n.sourceDataType!=="visibility"&&n.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let n=[];if(this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style._sourceCaches;for(const g in l){const y=l[g];if(y.used){const w=y.getSource();w.attribution&&n.indexOf(w.attribution)<0&&n.push(w.attribution)}}n.sort((g,y)=>g.length-y.length),n=n.filter((g,y)=>{for(let w=y+1;w<n.length;w++)if(n[w].indexOf(g)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=[...this.options.customAttribution,...n]:n.unshift(this.options.customAttribution));const f=n.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,n.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class qd{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(n){this._map=n,this._container=oe("div","mapboxgl-ctrl");const l=oe("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(n){n&&n.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const n=this._map.style._sourceCaches;if(Object.entries(n).length===0)return!0;for(const l in n){const f=n[l].getSource();if(f.hasOwnProperty("mapbox_logo")&&!f.mapbox_logo)return!1}return!0}_updateCompact(){const n=this._container.children;if(n.length){const l=n[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class Hd{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const g of f)if(g.id===n)return void(g.cancelled=!0)}run(n=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function bs(u,n,l){if(u=new o.LngLat(u.lng,u.lat),n){const f=new o.LngLat(u.lng-360,u.lat),g=new o.LngLat(u.lng+360,u.lat),y=360*Math.ceil(Math.abs(u.lng-l.center.lng)/360),w=l.locationPoint(u).distSqr(n),E=n.x<0||n.y<0||n.x>l.width||n.y>l.height;l.locationPoint(f).distSqr(n)<w&&(E||Math.abs(f.lng-l.center.lng)<y)?u=f:l.locationPoint(g).distSqr(n)<w&&(E||Math.abs(g.lng-l.center.lng)<y)&&(u=g)}for(;Math.abs(u.lng-l.center.lng)>180;){const f=l.locationPoint(u);if(f.x>=0&&f.y>=0&&f.x<=l.width&&f.y<=l.height)break;u.lng>l.center.lng?u.lng-=360:u.lng+=360}return u}const jo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class vt extends o.Evented{constructor(n,l){if(super(),(n instanceof o.window.HTMLElement||l)&&(n=o.extend({element:n},l)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=n&&n.occludedOpacity||.2,n&&n.element)this._element=n.element,this._offset=o.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=oe("div");const g=41,y=27,w=ae("svg",{display:"block",height:g*this._scale+"px",width:y*this._scale+"px",viewBox:`0 0 ${y} ${g}`},this._element),E=ae("radialGradient",{id:"shadowGradient"},ae("defs",{},w));ae("stop",{offset:"10%","stop-opacity":.4},E),ae("stop",{offset:"100%","stop-opacity":.05},E),ae("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},w),ae("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},w),ae("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},w),ae("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},w),this._offset=o.Point.convert(n&&n.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()});const f=this._element.classList;for(const g in jo)f.remove(`mapboxgl-marker-anchor-${g}`);f.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(n){return n===this._map||(this.remove(),this._map=n,n.getCanvasContainer().appendChild(this._element),n.on("move",this._updateMoving),n.on("moveend",this._update),n.on("remove",this._clearFadeTimer),n._addMarker(this),this.setDraggable(this._draggable),this._update(),n.on("click",this._onMapClick)),this}remove(){const n=this._map;return n&&(n.off("click",this._onMapClick),n.off("move",this._updateMoving),n.off("moveend",this._update),n.off("mousedown",this._addDragHandler),n.off("touchstart",this._addDragHandler),n.off("mouseup",this._onUp),n.off("touchend",this._onUp),n.off("mousemove",this._onMove),n.off("touchmove",this._onMove),n.off("remove",this._clearFadeTimer),n._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.LngLat.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const g=Math.sqrt(Math.pow(13.5,2)/2);n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,n._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(n){const l=n.code,f=n.charCode||n.keyCode;l!=="Space"&&l!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(n){const l=n.originalEvent.target,f=this._element;this._popup&&(l===f||f.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const n=this._popup;return n?(n.isOpen()?(n.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(n.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const n=this._map,l=this._pos;if(!n||!l)return!1;const f=n.unproject(l),g=n.getFreeCameraOptions();if(!g.position)return!1;const y=g.position.toLngLat();return y.distanceTo(f)<.9*y.distanceTo(this._lngLat)}_evaluateOpacity(){const n=this._map;if(!n)return;const l=this._pos;if(!l||l.x<0||l.x>n.transform.width||l.y<0||l.y>n.transform.height)return void this._clearFadeTimer();const f=n.unproject(l);let g;n._showingGlobe()&&o.isLngLatBehindGlobe(n.transform,this._lngLat)?g=0:(g=1-n._queryFogOpacity(f),n.transform._terrainEnabled()&&n.getTerrain()&&this._behindTerrain()&&(g*=this._occludedOpacity)),this._element.style.opacity=`${g}`,this._element.style.pointerEvents=g>0?"auto":"none",this._popup&&this._popup._setOpacity(g),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const n=this._pos;if(!n||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${n.x}px,${n.y}px)
            ${jo[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${l.x}px,${l.y}px)
        `}_calculateXYTransform(){const n=this._pos,l=this._map,f=this.getPitchAlignment();if(!l||!n||f!=="map")return"";if(!l._showingGlobe()){const C=l.getPitch();return C?`rotateX(${C}deg)`:""}const g=o.radToDeg(o.globeTiltAtLngLat(l.transform,this._lngLat)),y=n.sub(o.globeCenterToScreenPoint(l.transform)),w=Math.abs(y.x)+Math.abs(y.y);if(w===0)return"";const E=g/w;return`rotateX(${-y.y*E}deg) rotateY(${y.x*E}deg)`}_calculateZTransform(){const n=this._pos,l=this._map;if(!l||!n)return"";let f=0;const g=this.getRotationAlignment();if(g==="map")if(l._showingGlobe()){const y=l.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),w=l.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(y);f=o.radToDeg(Math.atan2(w.y,w.x))-90}else f=-l.getBearing();else if(g==="horizon"){const y=o.smoothstep(4,6,l.getZoom()),w=o.globeCenterToScreenPoint(l.transform);w.y+=y*l.transform.height;const E=n.sub(w),C=o.radToDeg(Math.atan2(E.y,E.x));f=(C>90?C-270:C+90)*(1-y)}return f+=this._rotation,f?`rotateZ(${f}deg)`:""}_update(n){o.window.cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=bs(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),n===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(n){return this._offset=o.Point.convert(n),this._update(),this}_onMove(n){const l=this._map;if(!l)return;const f=this._pointerdownPos,g=this._positionDelta;if(f&&g){if(!this._isDragging){const y=this._clickTolerance||l._clickTolerance;if(n.point.dist(f)<y)return;this._isDragging=!0}this._pos=n.point.sub(g),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const n=this._map;n&&(n.off("mousemove",this._onMove),n.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(n){const l=this._map,f=this._pos;l&&f&&this._element.contains(n.originalEvent.target)&&(n.preventDefault(),this._positionDelta=n.point.sub(f),this._pointerdownPos=n.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(n){this._draggable=!!n;const l=this._map;return l&&(n?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(n){return this._occludedOpacity=n||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Wd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},R1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Du(u=new o.Point(0,0),n="bottom"){if(typeof u=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(u,2)));switch(n){case"top":return new o.Point(0,u);case"top-left":return new o.Point(l,l);case"top-right":return new o.Point(-l,l);case"bottom":return new o.Point(0,-u);case"bottom-left":return new o.Point(l,-l);case"bottom-right":return new o.Point(-l,-l);case"left":return new o.Point(u,0);case"right":return new o.Point(-u,0)}return new o.Point(0,0)}return u instanceof o.Point||Array.isArray(u)?o.Point.convert(u):o.Point.convert(u[n]||[0,0])}class Kd{constructor(n){this.jumpTo(n)}getValue(n){if(n<=this._startTime)return this._start;if(n>=this._endTime)return this._end;const l=o.easeCubicInOut((n-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(n){return n>=this._startTime&&n<=this._endTime}jumpTo(n){this._startTime=-1/0,this._endTime=-1/0,this._start=n,this._end=n}easeTo(n,l,f){this._start=this.getValue(l),this._end=n,this._startTime=l,this._endTime=l+f}}const Ou={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},zu={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},k1={showCompass:!0,showZoom:!0,visualizePitch:!1};class D1{constructor(n,l,f=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new jd({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,f&&(this.mousePitch=new Ud({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(n,l){this.mouseRotate.mousedown(n,l),this.mousePitch&&this.mousePitch.mousedown(n,l),xe()}move(n,l){const f=this.map,g=this.mouseRotate.mousemoveWindow(n,l),y=g&&g.bearingDelta;if(y&&f.setBearing(f.getBearing()+y),this.mousePitch){const w=this.mousePitch.mousemoveWindow(n,l),E=w&&w.pitchDelta;E&&f.setPitch(f.getPitch()+E)}}off(){const n=this.element;n.removeEventListener("mousedown",this.mousedown),n.removeEventListener("touchstart",this.touchstart,{passive:!1}),n.removeEventListener("touchmove",this.touchmove),n.removeEventListener("touchend",this.touchend),n.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Je(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(n){this.down(o.extend({},n,{ctrlKey:!0,preventDefault:()=>n.preventDefault()}),Lt(this.element,n)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(n){this.move(n,Lt(this.element,n))}mouseup(n){this.mouseRotate.mouseupWindow(n),this.mousePitch&&this.mousePitch.mouseupWindow(n),this.offTemp()}touchstart(n){n.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ye(this.element,n.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>n.preventDefault()},this._startPos))}touchmove(n){n.targetTouches.length!==1?this.reset():(this._lastPos=Ye(this.element,n.targetTouches)[0],this.move({preventDefault:()=>n.preventDefault()},this._lastPos))}touchend(n){n.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Xd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Yd={maxWidth:100,unit:"metric"},Jd={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},$s={version:o.version,supported:N,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends yl{constructor(u){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(u=o.extend({},zu,u)).minZoom!=null&&u.maxZoom!=null&&u.minZoom>u.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(u.minPitch!=null&&u.maxPitch!=null&&u.minPitch>u.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(u.minPitch!=null&&u.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(u.maxPitch!=null&&u.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(u.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(u.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new _s(u.minZoom,u.maxZoom,u.minPitch,u.maxPitch,u.renderWorldCopies),u),this._interactive=u.interactive,this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._failIfMajorPerformanceCaveat=u.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=u.preserveDrawingBuffer,this._antialias=u.antialias,this._useWebGL2=u.useWebGL2,this._trackResize=u.trackResize,this._bearingSnap=u.bearingSnap,this._refreshExpiredTiles=u.refreshExpiredTiles,this._fadeDuration=u.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=u.crossSourceCollisions,this._collectResourceTiming=u.collectResourceTiming,this._optimizeForTerrain=u.optimizeForTerrain,this._language=this._parseLanguage(u.language),this._worldview=u.worldview,this._renderTaskQueue=new Hd,this._domRenderTaskQueue=new Hd,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Ou,u.locale),this._clickTolerance=u.clickTolerance,this._cooperativeGestures=u.cooperativeGestures,this._performanceMetricsCollection=u.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Kd(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(u.transformRequest,u.accessToken,u.testMode),this._silenceAuthErrors=!!u.testMode,typeof u.container=="string"){if(this._container=o.window.document.getElementById(u.container),!this._container)throw new Error(`Container '${u.container}' not found.`)}else{if(!(u.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=u.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),u.maxBounds&&this.setMaxBounds(u.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Ii(this,u),this._localFontFamily=u.localFontFamily,this._localIdeographFontFamily=u.localIdeographFontFamily,u.style&&this.setStyle(u.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),u.projection&&this.setProjection(u.projection),this._hash=u.hash&&new zd(typeof u.hash=="string"&&u.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),u.bounds&&(this.resize(),this.fitBounds(u.bounds,o.extend({},u.fitBoundsOptions,{duration:0})))),this.resize(),u.attributionControl&&this.addControl(new $t({customAttribution:u.customAttribution})),this._logoControl=new qd,this.addControl(this._logoControl,u.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",n=>{this._update(n.dataType==="style"),this.fire(new o.Event(`${n.dataType}data`,n))}),this.on("dataloading",n=>{this.fire(new o.Event(`${n.dataType}dataloading`,n))})}_getMapId(){return this._mapId}addControl(u,n){if(n===void 0&&(n=u.getDefaultPosition?u.getDefaultPosition():"top-right"),!u||!u.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=u.onAdd(this);this._controls.push(u);const f=this._controlPositions[n];return n.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(u){if(!u||!u.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(u);return n>-1&&this._controls.splice(n,1),u.onRemove(this),this}hasControl(u){return this._controls.indexOf(u)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(u){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new o.Event("movestart",u)).fire(new o.Event("move",u)),this.fire(new o.Event("resize",u)),n&&this.fire(new o.Event("moveend",u)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(u){return this.transform.setMaxBounds(o.LngLatBounds.convert(u)),this._update()}setMinZoom(u){if((u=u??-2)>=-2&&u<=this.transform.maxZoom)return this.transform.minZoom=u,this._update(),this.getZoom()<u?this.setZoom(u):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(u){if((u=u??22)>=this.transform.minZoom)return this.transform.maxZoom=u,this._update(),this.getZoom()>u?this.setZoom(u):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(u){if((u=u??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(u>=0&&u<=this.transform.maxPitch)return this.transform.minPitch=u,this._update(),this.getPitch()<u?this.setPitch(u):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(u){if((u=u??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(u>=this.transform.minPitch)return this.transform.maxPitch=u,this._update(),this.getPitch()>u?this.setPitch(u):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(u){return this.transform.renderWorldCopies=u,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(u){return u==="auto"?o.window.navigator.language:Array.isArray(u)?u.length===0?void 0:u.map(n=>n==="auto"?o.window.navigator.language:n):u}setLanguage(u){const n=this._parseLanguage(u);if(!this.style||n===this._language)return this;this._language=n,this.style._reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(u){return this.style&&u!==this._worldview?(this._worldview=u,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(u){return this._lazyInitEmptyStyle(),u?typeof u=="string"&&(u={name:u}):u=null,this._useExplicitProjection=!!u,this._prioritizeAndUpdateProjection(u,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const u=this.transform,n=u.projection.name;let l;n==="globe"&&u.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(u.setMercatorFromTransition(),l=!0):n==="mercator"&&u.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(u.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(u,n){return this._updateProjection(u||n||{name:"mercator"})}_updateProjection(u){let n;if(n=u.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(u),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const l in this.style._sourceCaches)this.style._sourceCaches[l].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(u){return this.transform.locationPoint3D(o.LngLat.convert(u))}unproject(u){return this.transform.pointLocation3D(o.Point.convert(u))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(u,n,l){if(u==="mouseenter"||u==="mouseover"){let f=!1;const g=w=>{const E=n.filter(R=>this.getLayer(R)),C=E.length?this.queryRenderedFeatures(w.point,{layers:E}):[];C.length?f||(f=!0,l.call(this,new on(u,this,w.originalEvent,{features:C}))):f=!1},y=()=>{f=!1};return{layers:new Set(n),listener:l,delegates:{mousemove:g,mouseout:y}}}if(u==="mouseleave"||u==="mouseout"){let f=!1;const g=w=>{const E=n.filter(C=>this.getLayer(C));(E.length?this.queryRenderedFeatures(w.point,{layers:E}):[]).length?f=!0:f&&(f=!1,l.call(this,new on(u,this,w.originalEvent)))},y=w=>{f&&(f=!1,l.call(this,new on(u,this,w.originalEvent)))};return{layers:new Set(n),listener:l,delegates:{mousemove:g,mouseout:y}}}{const f=g=>{const y=n.filter(E=>this.getLayer(E)),w=y.length?this.queryRenderedFeatures(g.point,{layers:y}):[];w.length&&(g.features=w,l.call(this,g),delete g.features)};return{layers:new Set(n),listener:l,delegates:{[u]:f}}}}on(u,n,l){if(l===void 0)return super.on(u,n);Array.isArray(n)||(n=[n]);const f=this._createDelegatedListener(u,n,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[u]=this._delegatedListeners[u]||[],this._delegatedListeners[u].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(u,n,l){if(l===void 0)return super.once(u,n);Array.isArray(n)||(n=[n]);const f=this._createDelegatedListener(u,n,l);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(u,n,l){if(l===void 0)return super.off(u,n);n=new Set(Array.isArray(n)?n:[n]);const f=(y,w)=>{if(y.size!==w.size)return!1;for(const E of y)if(!w.has(E))return!1;return!0},g=this._delegatedListeners?this._delegatedListeners[u]:void 0;return g&&(y=>{for(let w=0;w<y.length;w++){const E=y[w];if(E.listener===l&&f(E.layers,n)){for(const C in E.delegates)this.off(C,E.delegates[C]);return y.splice(w,1),this}}})(g),this}queryRenderedFeatures(u,n){return this.style?(n!==void 0||u===void 0||u instanceof o.Point||Array.isArray(u)||(n=u,u=void 0),this.style.queryRenderedFeatures(u=u||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(u,n){return this.style.querySourceFeatures(u,n)}isPointOnSurface(u){const{name:n}=this.transform.projection;return n!=="globe"&&n!=="mercator"&&o.warnOnce(`${n} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.Point.convert(u))}setStyle(u,n){return(n=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&u?(this._diffStyle(u,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(u,n))}_getUIString(u){const n=this._locale[u];if(n==null)throw new Error(`Missing UI string '${u}'`);return n}_updateStyle(u,n){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),u&&(this.style=new Ci(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof u=="string"?this.style.loadURL(u):this.style.loadJSON(u)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ci(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(u,n){if(typeof u=="string"){const l=this._requestManager.normalizeStyleURL(u),f=this._requestManager.transformRequest(l,o.ResourceType.Style);o.getJSON(f,(g,y)=>{g?this.fire(new o.ErrorEvent(g)):y&&this._updateDiff(y,n)})}else typeof u=="object"&&this._updateDiff(u,n)}_updateDiff(u,n){try{this.style.setState(u)&&this._update(!0)}catch(l){o.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(u,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(u,n){return this._lazyInitEmptyStyle(),this.style.addSource(u,n),this._update(!0)}isSourceLoaded(u){return!!this.style&&this.style._isSourceCacheLoaded(u)}areTilesLoaded(){const u=this.style&&this.style._sourceCaches;for(const n in u){const l=u[n]._tiles;for(const f in l){const g=l[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(u,n,l){this._lazyInitEmptyStyle(),this.style.addSourceType(u,n,l)}removeSource(u){return this.style.removeSource(u),this._updateTerrain(),this._update(!0)}getSource(u){return this.style.getSource(u)}addImage(u,n,{pixelRatio:l=1,sdf:f=!1,stretchX:g,stretchY:y,content:w}={}){if(this._lazyInitEmptyStyle(),n instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&n instanceof o.window.ImageBitmap){const{width:E,height:C,data:R}=o.exported.getImageData(n);this.style.addImage(u,{data:new o.RGBAImage({width:E,height:C},R),pixelRatio:l,stretchX:g,stretchY:y,content:w,sdf:f,version:0})}else if(n.width===void 0||n.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:E,height:C}=n,R=n;this.style.addImage(u,{data:new o.RGBAImage({width:E,height:C},new Uint8Array(R.data)),pixelRatio:l,stretchX:g,stretchY:y,content:w,sdf:f,version:0,userImage:R}),R.onAdd&&R.onAdd(this,u)}}updateImage(u,n){const l=this.style.getImage(u);if(!l)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=n instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&n instanceof o.window.ImageBitmap?o.exported.getImageData(n):n,{width:g,height:y}=f;g!==void 0&&y!==void 0?g===l.data.width&&y===l.data.height?(l.data.replace(f.data,!(n instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&n instanceof o.window.ImageBitmap)),this.style.updateImage(u,l)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${g}, ${y})
                must be that same as the previous version of the image
                (${l.data.width}, ${l.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(u){return u?!!this.style.getImage(u):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(u){this.style.removeImage(u)}loadImage(u,n){o.getImage(this._requestManager.transformRequest(u,o.ResourceType.Image),(l,f)=>{n(l,f instanceof o.window.HTMLImageElement?o.exported.getImageData(f):f)})}listImages(){return this.style.listImages()}addLayer(u,n){return this._lazyInitEmptyStyle(),this.style.addLayer(u,n),this._update(!0)}moveLayer(u,n){return this.style.moveLayer(u,n),this._update(!0)}removeLayer(u){return this.style.removeLayer(u),this._update(!0)}getLayer(u){return this.style.getLayer(u)}setLayerZoomRange(u,n,l){return this.style.setLayerZoomRange(u,n,l),this._update(!0)}setFilter(u,n,l={}){return this.style.setFilter(u,n,l),this._update(!0)}getFilter(u){return this.style.getFilter(u)}setPaintProperty(u,n,l,f={}){return this.style.setPaintProperty(u,n,l,f),this._update(!0)}getPaintProperty(u,n){return this.style.getPaintProperty(u,n)}setLayoutProperty(u,n,l,f={}){return this.style.setLayoutProperty(u,n,l,f),this._update(!0)}getLayoutProperty(u,n){return this.style.getLayoutProperty(u,n)}setLight(u,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(u,n),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(u){return this._lazyInitEmptyStyle(),!u&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(u),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(u){return this._lazyInitEmptyStyle(),this.style.setFog(u),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(u){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(u),this.transform):0}setFeatureState(u,n){return this.style.setFeatureState(u,n),this._update()}removeFeatureState(u,n){return this.style.removeFeatureState(u,n),this._update()}getFeatureState(u){return this.style.getFeatureState(u)}_updateContainerDimensions(){if(!this._container)return;const u=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let l,f,g,y=this._container;for(;y&&(!f||!g);){const w=o.window.getComputedStyle(y).transform;w&&w!=="none"&&(l=w.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&l[0]!=="0"&&l[0]!=="1"&&(f=l[0]),l[3]&&l[3]!=="0"&&l[3]!=="1"&&(g=l[3])),y=y.parentElement}this._containerWidth=f?Math.abs(u/f):u,this._containerHeight=g?Math.abs(n/g):n}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const u=this._container;u.classList.add("mapboxgl-map"),(this._missingCSSCanary=oe("div","mapboxgl-canary",u)).style.visibility="hidden",this._detectMissingCSS();const n=this._canvasContainer=oe("div","mapboxgl-canvas-container",u);this._interactive&&n.classList.add("mapboxgl-interactive"),this._canvas=oe("canvas","mapboxgl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=oe("div","mapboxgl-control-container",u),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(g=>{f[g]=oe("div",`mapboxgl-ctrl-${g}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(u,n){const l=o.exported.devicePixelRatio||1;this._canvas.width=l*Math.ceil(u),this._canvas.height=l*Math.ceil(n),this._canvas.style.width=`${u}px`,this._canvas.style.height=`${n}px`}_addMarker(u){this._markers.push(u)}_removeMarker(u){const n=this._markers.indexOf(u);n!==-1&&this._markers.splice(n,1)}_addPopup(u){this._popups.push(u)}_removePopup(u){const n=this._popups.indexOf(u);n!==-1&&this._popups.splice(n,1)}_setupPainter(){const u=o.extend({},N.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._useWebGL2&&this._canvas.getContext("webgl2",u),l=n||this._canvas.getContext("webgl",u)||this._canvas.getContext("experimental-webgl",u);l?(this._useWebGL2&&!n&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(l,!0),this.painter=new ms(l,this.transform,!!n),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(l)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(u){u.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:u}))}_contextRestored(u){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:u}))}_onMapScroll(u){if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(u){return this.style?(this._styleDirty=this._styleDirty||u,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(u){return this._update(),this._renderTaskQueue.add(u)}_cancelRenderFrame(u){this._renderTaskQueue.remove(u)}_requestDomTask(u){!this.loaded()||this.loaded()&&!this.isMoving()?u():this._domRenderTaskQueue.add(u)}_render(u){let n;const l=this.painter.context.extTimerQuery,f=o.exported.now();if(this.listens("gpu-timing-frame")&&(n=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(u),this._domRenderTaskQueue.run(u),this._removed)return;this._updateProjectionTransition();const g=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const E=this.transform.zoom,C=this.transform.pitch,R=o.exported.now(),L=new o.EvaluationParameters(E,{now:R,fadeDuration:g,pitch:C,transition:this.style.getTransition()});this.style.update(L)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let y=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),y=this._updateAverageElevation(f),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):y=this._updateAverageElevation(f),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,g,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:g,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const E=o.exported.now()-f;l.endQueryEXT(l.TIME_ELAPSED_EXT,n),setTimeout(()=>{const C=l.getQueryObjectEXT(n,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(n),this.fire(new o.Event("gpu-timing-frame",{cpuTime:E,gpuTime:C})),o.window.performance.mark("frame-gpu",{startTime:f,detail:{gpuTime:C}})},50)}if(this.listens("gpu-timing-layer")){const E=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(E);this.fire(new o.Event("gpu-timing-layer",{layerTimes:C}))},50)}if(this.listens("gpu-timing-deferred-render")){const E=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const C=this.painter.queryGpuTimeDeferredRender(E);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:C}))},50)}const w=this._sourcesDirty||this._styleDirty||this._placementDirty||y;if(w||this._repaint)this.triggerRepaint();else{const E=!this.isMoving()&&this.loaded();if(E&&(y=this._updateAverageElevation(f,!0)),y)this.triggerRepaint();else if(this._triggerFrame(!1),E&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const C=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:C})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||w||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(u){for(const n of this._markers)u&&!this.getRenderWorldCopies()&&(n._lngLat=n._lngLat.wrap()),n._update();for(const n of this._popups)!u||this.getRenderWorldCopies()||n._trackPointer||(n._lngLat=n._lngLat.wrap()),n._update()}_updateAverageElevation(u,n=!1){const l=f=>(this.transform.averageElevation=f,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&l(0);if((n||u-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(u)){const f=this.transform.averageElevation;let g=this.transform.sampleAverageElevation(),y=!1;this.transform.elevation&&(y=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(g)?g=0:this._averageElevationLastSampledAt=u;const w=Math.abs(f-g);if(w>1){if(this._isInitialLoad||y)return this._averageElevation.jumpTo(g),l(g);this._averageElevation.easeTo(g,u,300)}else if(w>1e-4)return this._averageElevation.jumpTo(g),l(g)}return!!this._averageElevation.isEasing(u)&&l(this._averageElevation.getValue(u))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,u=>{if(u&&(u.message===o.AUTH_ERR_MSG||u.status===401)){const n=this.painter.context.gl;o.storeAuthState(n,!1),this._logoControl instanceof qd&&this._logoControl._updateLogo(),n&&n.clear(n.DEPTH_BUFFER_BIT|n.COLOR_BUFFER_BIT|n.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const u=this._isDragging();this.painter.updateTerrain(this.style,u)}_calculateSpeedIndex(){const u=this.painter.canvasCopy(),n=this.painter.getCanvasCopiesAndTimestamps();n.timeStamps.push(performance.now());const l=this.painter.context.gl,f=l.createFramebuffer();function g(y){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,y,0);const w=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,w),w}return l.bindFramebuffer(l.FRAMEBUFFER,f),this._canvasPixelComparison(g(u),n.canvasCopies.map(g),n.timeStamps)}_canvasPixelComparison(u,n,l){let f=l[1]-l[0];const g=u.length/4;for(let y=0;y<n.length;y++){const w=n[y];let E=0;for(let C=0;C<w.length;C+=4)w[C]===u[C]&&w[C+1]===u[C+1]&&w[C+2]===u[C+2]&&w[C+3]===u[C+3]&&(E+=1);f+=(l[y+2]-l[y+1])*(1-E/g)}return f}remove(){this._hash&&this._hash.remove();for(const n of this._controls)n.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(u){this._renderNextFrame=this._renderNextFrame||u,this.style&&!this._frame&&(this._frame=o.exported.frame(n=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(n)}))}_preloadTiles(u){const n=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(n,(l,f)=>l._preloadTiles(u,f),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(u){this._trackResize&&this.resize({originalEvent:u})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(u){this._showTileBoundaries!==u&&(this._showTileBoundaries=u,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(u){this._showTerrainWireframe!==u&&(this._showTerrainWireframe=u,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(u){this._speedIndexTiming!==u&&(this._speedIndexTiming=u,this._update())}get showPadding(){return!!this._showPadding}set showPadding(u){this._showPadding!==u&&(this._showPadding=u,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(u){this._showCollisionBoxes!==u&&(this._showCollisionBoxes=u,u?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(u){this._showOverdrawInspector!==u&&(this._showOverdrawInspector=u,this._update())}get repaint(){return!!this._repaint}set repaint(u){this._repaint!==u&&(this._repaint=u,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(u){this._vertices=u,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(u){this._showTileAABBs!==u&&(this._showTileAABBs=u,u&&this._update())}_setCacheLimits(u,n){o.setCacheLimits(u,n)}get version(){return o.version}},NavigationControl:class{constructor(u){this.options=o.extend({},k1,u),this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",n=>{this._map&&this._map.zoomIn({},{originalEvent:n})}),oe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",n=>{this._map&&this._map.zoomOut({},{originalEvent:n})}),oe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",n=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:n}):l.resetNorth({},{originalEvent:n}))}),this._compassIcon=oe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const u=this._map;if(!u)return;const n=u.getZoom(),l=n===u.getMaxZoom(),f=n===u.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())}_rotateCompassArrow(){const u=this._map;if(!u)return;const n=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(u.transform.pitch*(Math.PI/180)),.5)}) rotateX(${u.transform.pitch}deg) rotateZ(${u.transform.angle*(180/Math.PI)}deg)`:`rotate(${u.transform.angle*(180/Math.PI)}deg)`;u._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=n)})}onAdd(u){return this._map=u,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),u.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&u.on("pitch",this._rotateCompassArrow),u.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new D1(u,this._compass,this.options.visualizePitch)),this._container}onRemove(){const u=this._map;u&&(this._container.remove(),this.options.showZoom&&u.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&u.off("pitch",this._rotateCompassArrow),u.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(u,n){const l=oe("button",u,this._container);return l.type="button",l.addEventListener("click",n),l}_setButtonTitle(u,n){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${n}`);u.setAttribute("aria-label",l),u.firstElementChild&&u.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends o.Evented{constructor(u){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Xd,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ys(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(u){return this._map=u,this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(u){const n=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,u(l)};this._supportsGeolocation!==void 0?u(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(l=>n(l.state!=="denied")).catch(()=>n()):n()}_isOutOfMapMaxBounds(u){const n=this._map.getMaxBounds(),l=u.coords;return!!n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}}_updateCamera(u){const n=new o.LngLat(u.coords.longitude,u.coords.latitude),l=u.coords.accuracy,f=this._map.getBearing(),g=o.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(l),g,{geolocateSource:!0})}_updateMarker(u){if(u){const n=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const u=this._map.transform,n=o.mercatorZfromAltitude(1,u._center.lat)*u.worldSize,l=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(u){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=oe("button","mapboxgl-ctrl-geolocate",this._container),oe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=oe("div","mapboxgl-user-location"),this._dotElement.appendChild(oe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(oe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new vt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=oe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",n=>{n.geolocateSource||this._watchState!=="ACTIVE_LOCK"||n.originalEvent&&n.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(u){this._userLocationDotMarker&&(u.webkitCompassHeading?this._heading=u.webkitCompassHeading:u.absolute===!0&&(this._heading=-1*u.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(u={maximumAge:6e5,timeout:0},this._noTimeout=!0):(u=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,u),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const u=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(n=>{n==="granted"&&u()}).catch(console.error):u()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:$t,ScaleControl:class{constructor(u){this.options=o.extend({},Yd,u),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const u=this.options.maxWidth||100,n=this._map,l=n._containerHeight/2,f=n._containerWidth/2-u/2,g=n.unproject([f,l]),y=n.unproject([f+u,l]),w=g.distanceTo(y);if(this.options.unit==="imperial"){const E=3.2808*w;E>5280?this._setScale(u,E/5280,"mile"):this._setScale(u,E,"foot")}else this.options.unit==="nautical"?this._setScale(u,w/1852,"nautical-mile"):w>=1e3?this._setScale(u,w/1e3,"kilometer"):this._setScale(u,w,"meter")}_setScale(u,n,l){this._map._requestDomTask(()=>{const f=function(y){const w=Math.pow(10,`${Math.floor(y)}`.length-1);let E=y/w;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(C){const R=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*R)/R}(E),w*E}(n),g=f/n;this._container.innerHTML=this._isNumberFormatSupported&&l!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(f):`${f}&nbsp;${Jd[l]}`,this._container.style.width=u*g+"px"})}onAdd(u){return this._map=u,this._language=u.getLanguage(),this._container=oe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",u.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(u){this._language=u,this._update()}setUnit(u){this.options.unit=u,this._update()}},FullscreenControl:class{constructor(u){this._fullscreen=!1,u&&u.container&&(u.container instanceof o.window.HTMLElement?this._container=u.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=oe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const u=this._fullscreenButton=oe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);oe("span","mapboxgl-ctrl-icon",u).setAttribute("aria-hidden","true"),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",u)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(u){super(),this.options=o.extend(Object.create(Wd),u),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(u&&u.className?u.className.trim().split(/\s+/):[])}addTo(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&u.on("preclick",this._onClose),this.options.closeOnMove&&u.on("move",this._onClose),u.on("remove",this.remove),this._update(),u._addPopup(this),this._focusFirstElement(),this._trackPointer?(u.on("mousemove",this._onMouseEvent),u.on("mouseup",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")):u.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const u=this._map;return u&&(u.off("move",this._update),u.off("move",this._onClose),u.off("preclick",this._onClose),u.off("click",this._onClose),u.off("remove",this.remove),u.off("mousemove",this._onMouseEvent),u.off("mouseup",this._onMouseEvent),u.off("drag",this._onMouseEvent),u._canvasContainer&&u._canvasContainer.classList.remove("mapboxgl-track-pointer"),u._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(u){this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const u=this._map;return u&&(u.off("move",this._update),u.on("mousemove",this._onMouseEvent),u.on("drag",this._onMouseEvent),u._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(u){return this.setDOMContent(o.window.document.createTextNode(u))}setHTML(u){const n=o.window.document.createDocumentFragment(),l=o.window.document.createElement("body");let f;for(l.innerHTML=u;f=l.firstChild,f;)n.appendChild(f);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(u){return this.options.maxWidth=u,this._update(),this}setDOMContent(u){let n=this._content;if(n)for(;n.hasChildNodes();)n.firstChild&&n.removeChild(n.firstChild);else n=this._content=oe("div","mapboxgl-popup-content",this._container||void 0);if(n.appendChild(u),this.options.closeButton){const l=this._closeButton=oe("button","mapboxgl-popup-close-button",n);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(u){return this._classList.add(u),this._updateClassList(),this}removeClassName(u){return this._classList.delete(u),this._updateClassList(),this}setOffset(u){return this.options.offset=u,this._update(),this}toggleClassName(u){let n;return this._classList.delete(u)?n=!1:(this._classList.add(u),n=!0),this._updateClassList(),n}_onMouseEvent(u){this._update(u.point)}_getAnchor(u){if(this.options.anchor)return this.options.anchor;const n=this._map,l=this._container,f=this._pos;if(!n||!l||!f)return"bottom";const g=l.offsetWidth,y=l.offsetHeight,w=f.x<g/2,E=f.x>n.transform.width-g/2;if(f.y+u<y)return w?"top-left":E?"top-right":"top";if(f.y>n.transform.height-y){if(w)return"bottom-left";if(E)return"bottom-right"}return w?"left":E?"right":"bottom"}_updateClassList(){const u=this._container;if(!u)return;const n=[...this._classList];n.push("mapboxgl-popup"),this._anchor&&n.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&n.push("mapboxgl-popup-track-pointer"),u.className=n.join(" ")}_update(u){const n=this._map,l=this._content;if(!n||!this._lngLat&&!this._trackPointer||!l)return;let f=this._container;if(f||(f=this._container=oe("div","mapboxgl-popup",n.getContainer()),this._tip=oe("div","mapboxgl-popup-tip",f),f.appendChild(l)),this.options.maxWidth&&f.style.maxWidth!==this.options.maxWidth&&(f.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=bs(this._lngLat,this._pos,n.transform)),!this._trackPointer||u){const g=this._pos=this._trackPointer&&u?u:n.project(this._lngLat),y=Du(this.options.offset),w=this._anchor=this._getAnchor(y.y),E=Du(this.options.offset,w),C=g.add(E).round();n._requestDomTask(()=>{this._container&&w&&(this._container.style.transform=`${jo[w]} translate(${C.x}px,${C.y}px)`)})}if(!this._marker&&n._showingGlobe()){const g=o.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(g)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const u=this._container.querySelector(R1);u&&u.focus()}_onClose(){this.remove()}_setOpacity(u){this._container&&(this._container.style.opacity=`${u}`),this._content&&(this._content.style.pointerEvents=u?"auto":"none")}},Marker:vt,Style:Ci,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:xu,Evented:o.Evented,config:o.config,prewarm:function(){po().acquire(Rn)},clearPrewarmedResources:function(){const u=rn;u&&(u.isPreloaded()&&u.numActive()===1?(u.release(Rn),rn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(u){o.config.ACCESS_TOKEN=u},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(u){o.config.API_URL=u},get workerCount(){return Gr.workerCount},set workerCount(u){Gr.workerCount=u},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(u){o.config.MAX_PARALLEL_IMAGE_REQUESTS=u},clearStorage(u){o.clearTileCache(u)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return $s});var P=$;return P})})(fS);var H3;(function(s){s.AllTabNavigation="ALL_TAB_NAVIGATION",s.VerticalTabNavigation="VERTICAL_TAB_NAVIGATION",s.ScrollToBottomOfPage="SCROLL_TO_BOTTOM_OF_PAGE",s.QuestionFocus="QUESTION_FOCUS",s.QuestionSubmit="QUESTION_SUBMIT",s.RowExpand="ROW_EXPAND",s.RowCollapse="ROW_COLLAPSE",s.ThumbsUp="THUMBS_UP",s.ThumbsDown="THUMBS_DOWN",s.VoiceStart="VOICE_START",s.VoiceStop="VOICE_STOP",s.SearchBarImpression="SEARCH_BAR_IMPRESSION",s.SearchClearButton="SEARCH_CLEAR_BUTTON",s.Paginate="PAGINATE",s.AutocompleteSelection="AUTO_COMPLETE_SELECTION",s.VerticalViewAll="VERTICAL_VIEW_ALL",s.CtaClick="CTA_CLICK",s.TitleClick="TITLE_CLICK",s.TapToCall="TAP_TO_CALL",s.OrderNow="ORDER_NOW",s.AddToCart="ADD_TO_CART",s.ApplyNow="APPLY_NOW",s.DrivingDirections="DRIVING_DIRECTIONS",s.ViewWebsite="VIEW_WEBSITE",s.Email="EMAIL",s.BookAppointment="BOOK_APPOINTMENT",s.Rsvp="RSVP",s.ResultsHidden="RESULTS_HIDDEN",s.ResultsUnhidden="RESULTS_UNHIDDEN",s.FollowUpQuery="FOLLOW_UP_QUERY"})(H3||(H3={}));var Ni;(function(s){s.PageView="PAGE_VIEW",s.CTA="CTA_CLICK",s.Website="WEBSITE",s.DrivingDirection="DRIVING_DIRECTIONS",s.PhoneCall="CALL"})(Ni||(Ni={}));Ni.CTA;Ni.Website;Ni.DrivingDirection;Ni.PageView;Ni.PhoneCall;var W3;(function(s){s.Production="PRODUCTION",s.Sandbox="SANDBOX"})(W3||(W3={}));var K3;(function(s){s.US="US",s.EU="EU"})(K3||(K3={}));var X3;(function(s){s.BusinessId="businessids",s.Product="product",s.SiteId="siteId",s.IsStaging="isStaging",s.CacheBuster="v",s.UrlPath="pageurl",s.Referrer="pagesReferrer",s.EventType="eventType",s.PageSetId="pageSetId",s.EntityInternalId="ids",s.DirectoryId="directoryId",s.SearchId="searchId",s.StaticPageId="staticPageId",s.PageType="pageType",s.VisitorId="visitorId",s.VisitorMethod="visitorIdMethod",s.PageDomain="pageDomain"})(X3||(X3={}));var Qc=new Map;Qc.set(Ni.PageView,"pageview");Qc.set(Ni.CTA,"calltoactionclick");Qc.set(Ni.PhoneCall,"phonecall");Qc.set(Ni.DrivingDirection,"drivingdirection");Qc.set(Ni.Website,"clicktowebsite");var pS=Object.defineProperty,mS=Object.defineProperties,gS=Object.getOwnPropertyDescriptors,Y3=Object.getOwnPropertySymbols,_S=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable,J3=(s,a,c)=>a in s?pS(s,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[a]=c,$i=(s,a)=>{for(var c in a||(a={}))_S.call(a,c)&&J3(s,c,a[c]);if(Y3)for(var c of Y3(a))yS.call(a,c)&&J3(s,c,a[c]);return s},od=(s,a)=>mS(s,gS(a));function v2(){const s=Ge.useRef(!1);return Ge.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[]),s}function vS(s,a){const c=Ge.useRef();return s?(...v)=>new Promise($=>{c.current!==void 0&&clearTimeout(c.current),c.current=window.setTimeout(()=>{$(s(...v)),c.current=void 0},a)}):void 0}function xS(s,a){const c=v2(),[m,v]=Ge.useState({}),$=vS(async()=>{if(!s||(await s.executeUniversalQuery(),!c.current))return;const I=s.state.universal.verticals||[];v(bS(I)),P(!1)},a),[S,P]=Ge.useState(!1);function o(I,N,Y){s&&I!==s.state.query.input&&(P(!0),s.setQuery(I),s.setRestrictVerticals(Y),s.setUniversalLimit(N),$==null||$())}return[{verticalKeyToResults:m,isLoading:S},o]}function bS(s){return s.reduce((a,c)=>(a[c.verticalKey]=c,a),{})}function $S(s,a){const c=wS(a),[m,v]=Ge.useState(new fp.RecentSearches({limit:s,namespace:c})),$=Ge.useCallback(()=>{localStorage.removeItem(c),v(new fp.RecentSearches({limit:s,namespace:c})),localStorage.removeItem(c)},[c,s]),S=Ge.useCallback(P=>{m.setRecentSearch(P)},[m]);return Ge.useEffect(()=>{v(new fp.RecentSearches({limit:s,namespace:c}))},[c,s]),[m==null?void 0:m.getRecentSearches(),S,$]}function wS(s){return s?`__yxt_recent_searches_${s}__`:"__yxt_recent_searches_universal__"}async function u1(s){const a=s.state.meta.searchType===zi.Vertical;try{a?s.executeVerticalQuery():s.executeUniversalQuery()}catch(c){console.error(`Error occured executing a ${a?"vertical":"universal"} search.
`,c)}}async function x2(s){const a=s.state.meta.searchType===zi.Vertical;try{return a?s.executeVerticalAutocomplete():s.executeUniversalAutocomplete()}catch(c){console.error(`Error occured executing a ${a?"vertical":"universal"} autocomplete search.
`,c)}}var ES={enableHighAccuracy:!1,timeout:6e3,maximumAge:3e5};async function TS(s,a,c){if(a.includes(Tp.NearMe)&&!s.state.location.userLocation)try{const m=await g0(c);s.setUserLocation({latitude:m.coords.latitude,longitude:m.coords.longitude})}catch(m){console.error(m)}}async function g0(s){return new Promise((a,c)=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(m=>a(m),m=>{console.error("Error occured using geolocation API. Unable to determine user's location."),c(m)},$i($i({},ES),s)):c("No access to geolocation API. Unable to determine user's location.")})}function SS(s,a){const c=Ge.useRef(),m=Ga();async function v(){var $,S;let P=[];if(!m.state.location.userLocation){c.current||(c.current=x2(m));const N=await c.current;P=(N==null?void 0:N.inputIntents)||[],await TS(m,P,s)}const o=($=m.state.vertical.verticalKey)!=null?$:"",I=(S=m.state.query.input)!=null?S:"";a?a({verticalKey:o,query:I}):u1(m)}return[v,c]}function b2(s,a){const c=Ge.useRef(s),m=Ge.useRef(a),v=v2(),$=Ge.useRef({latestRequest:0,responseInState:0}),[S,P]=Ge.useState(),o=Ge.useCallback(async N=>{const Y=++$.current.latestRequest;return new Promise(async U=>{let oe;try{oe=await c.current(N)}catch(ae){m.current?m.current(ae):console.error(ae)}if(Y>=$.current.responseInState){if(!v.current)return;P(oe),$.current.responseInState=Y}U(oe)})},[v]),I=Ge.useCallback(()=>{P(void 0)},[P]);return Ge.useEffect(()=>{c.current=s,m.current=a}),[S,o,I]}function CS({className:s}){return pt.createElement("svg",{className:s,width:"1",height:"24",viewBox:"0 0 1 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pt.createElement("rect",{width:"1",height:"24",rx:"0.5",fill:"#E1E5E8"}))}function AS(){return pt.createElement("svg",{viewBox:"0 0 14 15",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},pt.createElement("path",{d:"M13.7813 7.75C13.7539 4.00391 10.7188 0.96875 7 0.96875C5.11328 0.96875 3.39063 1.76172 2.16016 2.99219L0.929688 1.76172C0.738281 1.57031 0.382813 1.70703 0.382813 2.00781L0.382813 5.45312C0.382813 5.64453 0.519531 5.78125 0.710938 5.78125L4.21094 5.78125C4.51172 5.78125 4.64844 5.42578 4.45703 5.23437L3.11719 3.92188C4.10156 2.91016 5.46875 2.28125 7 2.28125C10.0078 2.28125 12.4688 4.74219 12.4688 7.75C12.4688 10.7852 10.0078 13.2187 7 13.2188C5.57813 13.2188 4.32031 12.6992 3.33594 11.8516C3.22656 11.7422 3.00781 11.7422 2.89844 11.8516L2.43359 12.3164C2.29688 12.4531 2.29688 12.6719 2.43359 12.8086C3.63672 13.875 5.25 14.5586 7 14.5312C10.7188 14.5312 13.7813 11.4961 13.7813 7.75ZM9.1875 10.2109L9.59766 9.69141C9.67969 9.52734 9.65234 9.33594 9.51563 9.22656L7.65625 7.85937V3.92187C7.65625 3.75781 7.49219 3.59375 7.32813 3.59375H6.67188C6.48047 3.59375 6.34375 3.75781 6.34375 3.92187V8.54297L8.75 10.293C8.88672 10.4023 9.10547 10.375 9.1875 10.2109Z"}))}function IS(){return pt.createElement("svg",{viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"},pt.createElement("path",{d:"M10.9095 9.00028L16.6786 3.2311L17.8684 2.04138C18.0439 1.86587 18.0439 1.58067 17.8684 1.40517L16.5954 0.132192C16.4199 -0.0433137 16.1347 -0.0433137 15.9592 0.132192L9.00028 7.0911L2.04138 0.131629C1.86587 -0.0438764 1.58067 -0.0438764 1.40517 0.131629L0.131629 1.40461C-0.0438764 1.58011 -0.0438764 1.86531 0.131629 2.04081L7.0911 9.00028L0.131629 15.9592C-0.0438764 16.1347 -0.0438764 16.4199 0.131629 16.5954L1.40461 17.8684C1.58011 18.0439 1.86531 18.0439 2.04081 17.8684L9.00028 10.9095L14.7695 16.6786L15.9592 17.8684C16.1347 18.0439 16.4199 18.0439 16.5954 17.8684L17.8684 16.5954C18.0439 16.4199 18.0439 16.1347 17.8684 15.9592L10.9095 9.00028Z",fill:"#6b7280"}))}function $2(){return pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},pt.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),pt.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}))}var w2=Ge.createContext(null);function h1(){const s=Ge.useContext(w2);if(s===null)throw new Error("Tried to use DropdownContext when none exists.");return s}var E2=Ge.createContext(null);function T2(){const s=Ge.useContext(E2);if(s===null)throw new Error("Tried to use InputContext when none exists.");return s}var S2=Ge.createContext(null);function C2(){const s=Ge.useContext(S2);if(s===null)throw new Error("Tried to use FocusContext when none exists.");return s}function MS({instructionsId:s,instructions:a,announcementKey:c,announcementText:m}){return pt.createElement(pt.Fragment,null,pt.createElement("div",{id:s,className:"hidden"},a),pt.createElement("div",{className:"sr-only",key:c,"aria-live":"assertive"},m))}function _0(s,a){return Ge.Children.map(s,(c,m)=>{if(!Ge.isValidElement(c))return c;const v=a(c,m);if(!v||!Ge.isValidElement(v))return v;const $=v.props.children;if(!$)return v;const S=_0($,a);return Ge.cloneElement(v,{},[S])})}function Hp(s,a){return s?s+"_"+a:""}function ed(s){return null}function PS(s){const{children:a,value:c,index:m,className:v,focusedClassName:$,itemData:S,onClick:P,ariaLabel:o}=s,{toggleDropdown:I,onSelect:N,screenReaderUUID:Y}=h1(),{focusedIndex:U,updateFocusedItem:oe}=C2(),{setValue:ae,setLastTypedOrSubmittedValue:$e}=T2(),Ie=U===m,Be=Ge.useCallback(()=>{I(!1),oe(-1),$e(c),ae(c),N==null||N(c,m,S),P==null||P(c,m,S)},[m,S,P,N,$e,ae,I,oe,c]);return pt.createElement("div",{id:Hp(Y,m),tabIndex:0,className:Ie?$:v,onClick:Be,"aria-label":typeof o=="function"?o(c):o},a)}var LS=typeof mp=="function"?mp:mp.default,RS=typeof Ql=="function"?Ql:Ql.default;function A2(s){const{children:a,screenReaderText:c,screenReaderInstructions:m="When autocomplete results are available, use up and down arrows to review and enter to select.",onSelect:v,onToggle:$,className:S,activeClassName:P,parentQuery:o,alwaysSelectOption:I=!1}=s,N=Ge.useRef(null),Y=LT(),[U,oe]=Ge.useState(0),[ae,$e]=Ge.useState(!1),[Ie,Be]=Ge.useMemo(()=>zS(a),[a]),xe=kS(),{value:Je,setValue:We,lastTypedOrSubmittedValue:ht,setLastTypedOrSubmittedValue:Lt}=xe,Ye=DS(Be,ht,We,U,oe,I),{focusedIndex:ft,focusedItemData:gt,updateFocusedItem:ve}=Ye,Ke=OS(ht,Je,ft,gt,Y,$e,$,v),{toggleDropdown:Ct,isActive:tt}=Ke;RS(()=>{o!==void 0&&o!==ht&&(Lt(o),ve(-1,o))},[o,ht,ve,Lt]),LS(N,()=>{Ct(!1)},{disabled:!tt});function _e(je){tt&&((je.key==="ArrowDown"||je.key==="ArrowUp")&&je.preventDefault(),je.key==="ArrowDown"?I&&ft===Be.length-1?ve(0):ve(ft+1):je.key==="ArrowUp"?ve(I&&ft===0?Be.length-1:ft-1):je.key==="Tab"&&!je.shiftKey?Be.length!==0&&(ft>=Be.length-1?(ve(-1),Ct(!1)):(ve(ft+1),je.preventDefault())):je.key==="Tab"&&je.shiftKey?ft>0||!I&&ft===0?(ve(ft-1),je.preventDefault()):(ve(-1),Ct(!1)):ae||$e(!0))}return pt.createElement("div",{ref:N,className:tt?P:S,onKeyDown:_e},pt.createElement(w2.Provider,{value:Ke},pt.createElement(E2.Provider,{value:xe},pt.createElement(S2.Provider,{value:Ye},Ie))),pt.createElement(MS,{announcementKey:U,announcementText:tt&&(ae||Be.length||Je)?c:"",instructionsId:Y,instructions:m}))}function kS(){const[s,a]=Ge.useState(""),[c,m]=Ge.useState("");return{value:s,setValue:a,lastTypedOrSubmittedValue:c,setLastTypedOrSubmittedValue:m}}function DS(s,a,c,m,v,$){const[S,P]=Ge.useState(-1),[o,I]=Ge.useState(null),[N,Y]=Ge.useState(void 0);Ge.useEffect(()=>{if($)if(s.length>0){const oe=S===-1||S>=s.length?0:S;P(oe),I(s[oe].value),Y(s[oe].itemData)}else P(-1),I(null),Y(void 0)},[$,S,s]);function U(oe,ae){const $e=s.length;let Ie;if(oe===-1||oe>=$e||$e===0)Ie=ae??a,$&&$e!==0?(P(0),Y(s[0].itemData),v(m+1)):(P(-1),Y(void 0),v(m+1));else if(oe<-1){const Be=($e+oe+1)%$e;Ie=ae??s[Be].value,P(Be),Y(s[Be].itemData)}else Ie=ae??s[oe].value,P(oe),Y(s[oe].itemData);I(Ie),c($?ae??a:Ie)}return{focusedIndex:S,focusedValue:o,focusedItemData:N,updateFocusedItem:U}}function OS(s,a,c,m,v,$,S,P){const[o,I]=Ge.useState(!1);return{isActive:o,toggleDropdown:Y=>{Y||$(!1),I(Y),S==null||S(Y,s,a,c,m)},onSelect:P,screenReaderUUID:v}}function zS(s){const a=[];return[_0(s,m=>{if(!(Ge.isValidElement(m)&&m.type===ed))return m;const v=m.props;return a.push({value:v.value,itemData:v.itemData}),Ge.createElement(PS,od($i({},v),{index:a.length-1}))}),a]}function I2(s){const{className:a,placeholder:c,ariaLabel:m,onSubmit:v,onFocus:$,onChange:S,submitCriteria:P}=s,o=Ge.useRef(null),{toggleDropdown:I,onSelect:N,screenReaderUUID:Y}=h1(),{value:U="",setLastTypedOrSubmittedValue:oe}=T2(),{focusedIndex:ae=-1,focusedItemData:$e,focusedValue:Ie,updateFocusedItem:Be}=C2(),[xe,Je]=Ge.useState(!0),We=Ge.useCallback(Ye=>{Je(!0),I(!0),S==null||S(Ye.target.value),Be(-1,Ye.target.value),oe(Ye.target.value)},[S,oe,I,Be]),ht=Ge.useCallback(Ye=>{var ft;(Ye.key==="ArrowDown"||Ye.key==="ArrowUp"||Ye.key==="Tab")&&Je(!1),Ye.key==="Enter"&&(!P||P(ae))&&(Be(ae),I(!1),(ft=o.current)==null||ft.blur(),v==null||v(U,ae,$e),ae>=0&&(N==null||N(U,ae,$e)),Be(-1,Ie??void 0))},[ae,Ie,$e,N,v,P,I,Be,U]),Lt=Ge.useCallback(()=>{I(!0),Be(-1),$==null||$(U)},[$,I,Be,U]);return pt.createElement("input",{ref:o,className:a,placeholder:c,value:U,onChange:We,onKeyDown:ht,onFocus:Lt,id:Hp(Y,-1),autoComplete:"off","aria-describedby":Y,"aria-activedescendant":xe?"":Hp(Y,ae),"aria-label":m})}function M2({children:s}){const{isActive:a}=h1();return a?pt.createElement(pt.Fragment,null,s):null}var Ih=aS({classGroups:{form:["input","checkbox","textarea","select","multiselect","radio"].map(s=>"form-"+s)}});function y0(s,a){return Ge.useMemo(()=>{const c=$i({},s);return a&&Object.keys(a).forEach(m=>{const v=s[m],$=a[m];!v||!$?c[m]=$||v:c[m]=Ih(v,$)}),c},[s,a])}function BS({handleClick:s,className:a}){return pt.createElement("button",{className:a,onClick:s,"aria-label":"Submit Search"},pt.createElement($2,null))}function Kl(s){return s.count!=null&&s.pluralForm&&s.count!==1?s.pluralForm:s.phrase}var FS={highlighted:"font-normal",nonHighlighted:"font-semibold"};function NS(s,a){const{value:c="",matchedSubstrings:m}=typeof s=="string"?{value:s,matchedSubstrings:[]}:s,v=$i($i({},FS),a);if(!m||m.length===0)return pt.createElement("span",null,c);const $=[...m];$.sort((o,I)=>o.offset-I.offset);const S=[];let P=0;for(const{offset:o,length:I}of $)o>P&&S.push(pt.createElement("span",{key:P,className:v.nonHighlighted},c.substring(P,o))),S.push(pt.createElement("span",{key:o,className:v.highlighted},c.substring(o,o+I))),P=o+I;return P<c.length&&S.push(pt.createElement("span",{key:P,className:v.nonHighlighted},c.substring(P))),pt.createElement(pt.Fragment,null,S)}var jS={option:"whitespace-no-wrap max-w-full px-3 text-neutral-dark truncate",icon:"w-6 h-full flex-shrink-0 text-gray-400"};function Mh(s,a={},c,m){return pt.createElement(pt.Fragment,null,c&&pt.createElement("div",{className:a.icon},pt.createElement(c,null)),pt.createElement("div",{"aria-label":m||"",className:a.option},NS(s,a)))}var US=Ge.createContext(null);function P2(){return Ge.useContext(US)}function VS(){const s=P2(),a=vi(S=>S.vertical.verticalKey),c=vi(S=>S.query.queryId),m=S=>{s==null||s.report(od($i({type:"AUTO_COMPLETE_SELECTION"},c&&{queryId:c}),{suggestedSearchText:S}))},v=()=>{if(!c){console.error("Unable to report a search clear event. Missing field: queryId.");return}s==null||s.report({type:"SEARCH_CLEAR_BUTTON",queryId:c,verticalKey:a})};return(S,P)=>{s&&(S==="AUTO_COMPLETE_SELECTION"?m(P||""):v())}}var GS=s=>typeof s=="object"&&!!s&&"verticalKey"in s;function ZS(s={}){const a=s;return a.matcher===Wn.Between&&qS(a.value)}function qS(s){return typeof s=="object"&&!!s&&("start"in s||"end"in s)}function HS(s,a){return s.fieldId!==a.fieldId||s.matcher!==a.matcher?!1:l0(s.value,a.value)}function Wp(s,a){return s.kind==="fieldValue"?a.kind==="fieldValue"?HS(s,a):!1:a.kind==="fieldValue"?!1:s.combinator===a.combinator&&s.filters.length===a.filters.length&&s.filters.every(c=>a.filters.some(m=>Wp(c,m)))&&a.filters.every(c=>s.filters.some(m=>Wp(c,m)))}function WS(s,a){var c,m,v;const $=(v=(m=(c=s.state)==null?void 0:c.filters)==null?void 0:m.static)==null?void 0:v.filter(S=>ZS(S)&&S.selected===!0&&(!a||a.has(S.fieldId)));$==null||$.forEach(S=>{s.setFilterOption(od($i({},S),{selected:!1}))})}var KS=$i({searchBarContainer:"h-12 mb-6",inputDivider:"border-t border-gray-200 mx-2.5",inputElement:"outline-none flex-grow border-none h-11 pl-5 pr-2 text-neutral-dark text-base placeholder:text-neutral-light",searchButtonContainer:" w-8 h-full mx-2 flex flex-col justify-center items-center",searchButton:"h-7 w-7",focusedOption:"bg-gray-100",clearButton:"h-3 w-3 mr-3.5",verticalDivider:"mr-0.5",recentSearchesIcon:"w-5 mr-1 flex-shrink-0 h-full text-gray-400",recentSearchesOption:"whitespace-no-wrap max-w-full px-3 text-neutral-dark truncate",recentSearchesNonHighlighted:"font-normal",verticalLink:"ml-12 pl-1 text-neutral italic",entityPreviewsDivider:"h-px bg-gray-200 mt-1 mb-4 mx-3.5"},jS);function HC({placeholder:s,geolocationOptions:a,hideRecentSearches:c,visualAutocompleteConfig:m,showVerticalLinks:v=!1,onSelectVerticalLink:$,verticalKeyToLabel:S,recentSearchesLimit:P=5,customCssClasses:o,onSearch:I}){var N;const{entityPreviewSearcher:Y,renderEntityPreviews:U,includedVerticals:oe,universalLimit:ae,entityPreviewsDebouncingTime:$e=500}=m??{},Ie=Ga(),Be=H$(),xe=VS(),Je=(N=vi(Gt=>Gt.query.input))!=null?N:"",We=y0(KS,o),ht=vi(Gt=>Gt.meta.searchType)===zi.Vertical,Lt=vi(Gt=>Gt.vertical.verticalKey),[Ye,ft,gt]=b2(()=>x2(Ie)),[ve,Ke]=SS(a,I),[Ct,tt,_e]=$S(P,Lt),je=Ct==null?void 0:Ct.filter(Gt=>Be.isCloseMatch(Gt.query,Je));Ge.useEffect(()=>{c&&_e()},[_e,c]);const It=Ge.useCallback(()=>{gt(),Ke.current=void 0},[Ke,gt]),Tt=Ge.useCallback(()=>{if(!c){const Gt=Ie.state.query.input;Gt&&tt(Gt)}ve()},[Ie.state.query.input,ve,c,tt]),Wt=Ge.useCallback((Gt,vr,Vr)=>{Gt!==void 0&&Ie.setQuery(Gt),Ie.setOffset(0),Ie.setFacets([]),WS(Ie),Vr&&GS(Vr.verticalLink)&&$?$({verticalLink:Vr.verticalLink,querySource:jc.Autocomplete}):Tt(),typeof vr=="number"&&vr>=0&&!(Vr!=null&&Vr.isEntityPreview)&&xe("AUTO_COMPLETE_SELECTION",Gt)},[Ie,Tt,$,xe]),[ut,Br]=xS(Y,$e),{verticalKeyToResults:Qt,isLoading:Tr}=ut,bn=U==null?void 0:U(Tr,Qt,{onClick:Wt,ariaLabel:QS}),er=Ge.useCallback(Gt=>{!U||!oe||Br(Gt,ae??{},oe)},[Br,U,oe,ae]),$n=Ge.useCallback((Gt="")=>{Ie.setQuery(Gt),er(Gt),Ke.current=ft()},[Ie,Ke,ft,er]),en=Ge.useCallback((Gt="")=>{Ie.setQuery(Gt),er(Gt),Ke.current=ft()},[Ie,Ke,ft,er]),Mn=Ge.useCallback(()=>{er(""),Wt(""),xe("SEARCH_CLEAR_BUTTON")},[Wt,xe,er]);function Vn(){return pt.createElement(I2,{className:We.inputElement,placeholder:s,onSubmit:Wt,onFocus:$n,onChange:en,ariaLabel:"Conduct a search"})}function ho(){const Gt={icon:We.recentSearchesIcon,option:We.recentSearchesOption,nonHighlighted:We.recentSearchesNonHighlighted};return je==null?void 0:je.map((vr,Vr)=>pt.createElement(ed,{className:"flex items-center h-6.5 px-3.5 py-1.5 cursor-pointer hover:bg-gray-100",focusedClassName:Ih("flex items-center h-6.5 px-3.5 py-1.5 cursor-pointer hover:bg-gray-100",We.focusedOption),key:Vr,value:vr.query,onClick:Wt},Mh({value:vr.query,inputIntents:[]},Gt,AS,`recent search: ${vr.query}`)))}const ci=Ge.useMemo(()=>{var Gt;return(Gt=Ye==null?void 0:Ye.results.map(vr=>{var Vr,Pn;return(Pn=(Vr=vr.verticalKeys)==null?void 0:Vr.map(Kn=>({verticalLink:{verticalKey:Kn,query:vr.value}})))!=null?Pn:[]}))!=null?Gt:[]},[Ye==null?void 0:Ye.results]);function wi(){return Ye==null?void 0:Ye.results.map((Gt,vr)=>{var Vr;return pt.createElement(Ge.Fragment,{key:vr},pt.createElement(ed,{className:"flex items-stretch py-1.5 px-3.5 cursor-pointer hover:bg-gray-100",focusedClassName:Ih("flex items-stretch py-1.5 px-3.5 cursor-pointer hover:bg-gray-100",We.focusedOption),value:Gt.value,onClick:Wt},Mh(Gt,We,$2,`autocomplete suggestion: ${Gt.value}`)),v&&!ht&&((Vr=Gt.verticalKeys)==null?void 0:Vr.map((Pn,Kn)=>pt.createElement(ed,{key:Kn,className:"flex items-stretch py-1.5 px-3.5 cursor-pointer hover:bg-gray-100",focusedClassName:Ih("flex items-stretch py-1.5 px-3.5 cursor-pointer hover:bg-gray-100",We.focusedOption),value:Gt.value,itemData:ci[vr][Kn],onClick:Wt},Mh({value:`in ${S?S(Pn):Pn}`,inputIntents:[]},od($i({},We),{option:We.verticalLink}))))))})}function Vt(){return pt.createElement(pt.Fragment,null,pt.createElement("button",{"aria-label":"Clear the search bar",className:We.clearButton,onClick:Mn},pt.createElement(IS,null)),pt.createElement(CS,{className:We.verticalDivider}))}const ui=eC(bn),dn=bn&&!!(Ye!=null&&Ye.results.length||je!=null&&je.length),Ei=!!(Ye!=null&&Ye.results.length||je!=null&&je.length||bn),yr=YS(Ye==null?void 0:Ye.results.length,je==null?void 0:je.length,ui),fn=sd("relative z-10 bg-white border rounded-3xl border-gray-200 w-full overflow-hidden",{"shadow-lg":Ei}),Gn=Ge.useCallback(Gt=>{Gt||It()},[It]);return pt.createElement("div",{className:We.searchBarContainer},pt.createElement(A2,{className:"relative bg-white border rounded-3xl border-gray-200 w-full overflow-hidden",activeClassName:fn,screenReaderText:yr,parentQuery:Je,onToggle:Gn},pt.createElement("div",{className:"inline-flex items-center justify-between w-full"},Vn(),Je&&Vt(),pt.createElement(JS,{handleSubmit:Wt,cssClasses:We})),Ei&&pt.createElement(XS,{cssClasses:We},ho(),wi(),dn&&pt.createElement("div",{className:We.entityPreviewsDivider}),bn)))}function XS({cssClasses:s,children:a}){return pt.createElement(M2,null,pt.createElement("div",{className:s.inputDivider}),pt.createElement("div",{className:"bg-white py-4"},a))}function YS(s=0,a=0,c=0){const m=a>0?Kl({phrase:`${a} recent search found.`,pluralForm:`${a} recent searches found.`,count:a}):"",v=c>0?" "+Kl({phrase:`${c} result preview found.`,pluralForm:`${c} result previews found.`,count:c}):"",$=s>0?" "+Kl({phrase:`${s} autocomplete suggestion found.`,pluralForm:`${s} autocomplete suggestions found.`,count:s}):"",S=m+$+v;return S===""?Kl({phrase:"0 autocomplete suggestion found.",pluralForm:"0 autocomplete suggestions found.",count:0}):S.trim()}function JS({handleSubmit:s,cssClasses:a}){const{toggleDropdown:c}=h1(),m=Ge.useCallback(()=>{s(),c(!1)},[s,c]);return pt.createElement("div",{className:a.searchButtonContainer},pt.createElement(BS,{className:a.searchButton,handleClick:m}))}function QS(s){return"result preview: "+s}function eC(s){let a=0;return _0(s,c=>(Ge.isValidElement(c)&&c.type===ed&&a++,c)),a}typeof Ql=="function"||Ql.default;var tC={filterSearchContainer:"relative mb-2",label:"mb-4 text-sm font-medium text-neutral-dark",inputElement:"text-sm bg-white outline-none h-9 w-full p-2 rounded-md border border-gray-300 focus:border-primary text-neutral-dark placeholder:text-neutral",sectionLabel:"text-sm text-neutral-dark font-semibold py-2 px-4",focusedOption:"bg-gray-100",option:"text-sm text-neutral-dark py-1 cursor-pointer hover:bg-gray-100 px-4"};function WC({searchFields:s,label:a,placeholder:c="Search here...",searchOnSelect:m,onSelect:v,sectioned:$=!1,customCssClasses:S}){const P=Ga(),o=s.map(Ke=>od($i({},Ke),{fetchEntities:!1})),I=Ge.useMemo(()=>{const Ke=new Set(s.map(Ct=>Ct.fieldApiName));return Ke.has("builtin.location")&&["builtin.region","address.countryCode"].forEach(Ct=>Ke.add(Ct)),Ke},[s]),N=y0(tC,S),[Y,U]=Ge.useState(),[oe,ae]=Ge.useState(),$e=vi(Ke=>Ke.filters.static),Ie=Ge.useMemo(()=>{var Ke;return(Ke=$e==null?void 0:$e.filter(({filter:Ct,selected:tt})=>tt&&Ct.kind==="fieldValue"&&I.has(Ct.fieldId)))!=null?Ke:[]},[$e,I]),[Be,xe,Je]=b2(Ke=>(ae(Ke),P.executeFilterSearch(Ke??"",$,o)),Ke=>console.error(`Error occured executing a filter search request.
`,Ke));Ge.useEffect(()=>{Ie.length>1&&!v&&console.warn("More than one selected static filter found that matches the filter search fields: ["+[...I].join(", ")+"]. Please update the state to remove the extra filters. Picking one filter to display in the input."),!(Y&&($e!=null&&$e.find(Ke=>Wp(Ke.filter,Y)&&Ke.selected)))&&(Ie.length===0?(Je(),U(void 0),ae("")):(U(Ie[0].filter),xe(Ie[0].displayName)))},[Je,Y,$e,xe,v,Ie,I]);const We=Ge.useMemo(()=>{var Ke;return(Ke=Be==null?void 0:Be.sections.filter(Ct=>Ct.results.length>0))!=null?Ke:[]},[Be==null?void 0:Be.sections]),ht=We.flatMap(Ke=>Ke.results).length>0,Lt=Ge.useCallback((Ke,Ct,tt)=>{const _e=tt==null?void 0:tt.filter,je=tt==null?void 0:tt.displayName;if(!(!_e||!je)){if(v)return m&&console.warn("Both searchOnSelect and onSelect props were passed to the component. Using onSelect instead of searchOnSelect as the latter is deprecated."),v({newFilter:_e,newDisplayName:je,currentFilter:Y,setCurrentFilter:U,executeFilterSearch:xe});Ie.length>1&&console.warn("More than one selected static filter found that matches the filter search fields: ["+[...I].join(", ")+"]. Unselecting all existing matching filters and selecting the new filter."),Ie.forEach(It=>P.setFilterOption({filter:It.filter,selected:!1})),Y&&P.setFilterOption({filter:Y,selected:!1}),P.setFilterOption({filter:_e,displayName:je,selected:!0}),U(_e),xe(je),m&&(P.setOffset(0),P.resetFacets(),u1(P))}},[Y,P,xe,v,m,Ie,I]),Ye=Ge.useCallback(Ke=>Ke>=0,[]),ft=Ge.useMemo(()=>We.map(Ke=>Ke.results.map(Ct=>({filter:od($i({},Ct.filter),{kind:"fieldValue"}),displayName:Ct.value}))),[We]);function gt(){return We.map((Ke,Ct)=>pt.createElement("div",{className:"pb-2",key:Ct},Ke.label&&pt.createElement("div",{className:N.sectionLabel},Ke.label),pt.createElement("div",{className:N.optionsContainer},Ke.results.map((tt,_e)=>pt.createElement(ed,{key:_e,focusedClassName:N.focusedOption,value:tt.value,itemData:ft[Ct][_e]},Mh(tt,N))))))}const ve=Ge.useCallback((Ke="")=>{Ke&&xe(Ke)},[xe]);return pt.createElement("div",{className:N.filterSearchContainer},a&&pt.createElement("h1",{className:N.label},a),pt.createElement(A2,{screenReaderText:rC(We),onSelect:Lt,alwaysSelectOption:!0,parentQuery:oe},pt.createElement(I2,{className:N.inputElement,placeholder:c,onChange:xe,onFocus:ve,submitCriteria:Ye}),pt.createElement(M2,null,ht&&pt.createElement("div",{className:"absolute z-10 w-full shadow-lg rounded-md border border-gray-300 bg-white pt-3 pb-1 mt-1"},gt()))))}function rC(s){let a=Kl({phrase:"0 autocomplete option found.",pluralForm:"0 autocomplete options found.",count:0});return s.length===0||(a=s.map(m=>{const v=m.label?`${m.results.length} ${m.label}`:`${m.results.length}`;return Kl({phrase:`${v} autocomplete option found.`,pluralForm:`${v} autocomplete options found.`,count:m.results.length})}).join(" ")),a}Ge.createContext(null);vn.oneOfType([vn.string,vn.shape({value:vn.string.isRequired,matchedSubstrings:vn.arrayOf(vn.shape({length:vn.number.isRequired,offset:vn.number.isRequired})).isRequired})]).isRequired,vn.string,vn.string,vn.shape({label:vn.string.isRequired,link:vn.string.isRequired,linkType:vn.string.isRequired}),vn.shape({label:vn.string.isRequired,link:vn.string.isRequired,linkType:vn.string.isRequired});var nC={sectionHeaderContainer:"flex items-center w-full pl-1 mb-4",sectionHeaderIconContainer:"w-5 h-5",sectionHeaderLabel:"font-bold text-neutral-dark text-base pl-3",viewMoreContainer:"flex justify-end flex-grow ml-auto font-medium text-neutral-dark",viewMoreLink:"text-primary pr-1 pl-3",appliedFiltersContainer:"ml-3 flex flex-wrap",nlpFilter:"border border-gray-200 rounded-3xl px-3 py-1.5 text-sm font-medium text-neutral-dark mr-2",removableFilter:"flex items-center border border-gray-200 rounded-3xl px-3 py-1.5 text-sm font-medium text-neutral-dark mr-2"};$i({universalResultsContainer:"space-y-8",universalResultsLoading:"opacity-50"},nC);function Q3({className:s}){return pt.createElement("svg",{viewBox:"0 0 12 8",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:s},pt.createElement("path",{d:"M1.33341 6.5L6.00008 1.83333L10.6667 6.5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))}function iC(){const s=P2(),a=vi(v=>v.vertical.verticalKey),c=vi(v=>v.query.queryId);return(v,$,S)=>{if(s){if(!c){console.error("Unable to report a pagination event. Missing field: queryId.");return}if(!a){console.error("Unable to report a pagination event. Missing field: verticalKey.");return}s.report({type:"PAGINATE",queryId:c,verticalKey:a,newPage:v,currentPage:$,totalPageCount:S})}}}var oC={paginationContainer:"flex justify-center mb-4",paginationLoading:"opacity-50",label:"z-0 inline-flex items-center px-4 py-2 text-sm font-semibold border border-gray-300 text-neutral",selectedLabel:"z-10 inline-flex items-center px-4 py-2 text-sm font-semibold border border-primary text-primary bg-primary-light",leftIconContainer:"inline-flex items-center px-3.5 py-2 border border-gray-300 rounded-l-md",rightIconContainer:"inline-flex items-center px-3.5 py-2 border border-gray-300 rounded-r-md",icon:"w-3 text-gray-600"};function KC(s){var a;const{customCssClasses:c={},paginateAllOnNoResults:m=!1}=s,v=y0(oC,c),$=Ga(),S=vi(xe=>xe.vertical.resultsCount)||0,P=vi(xe=>{var Je,We;return(We=(Je=xe.vertical)==null?void 0:Je.noResults)==null?void 0:We.allResultsForVertical.resultsCount})||0,o=vi(xe=>xe.searchStatus.isLoading);let I=S;S===0&&m&&(I=P);const N=vi(xe=>xe.vertical.offset)||0,Y=vi(xe=>xe.vertical.limit)||20,U=N/Y+1,oe=Math.ceil(I/Y),ae=iC(),$e=Ge.useCallback(xe=>{const Je=Y*(xe-1);$.setOffset(Je),u1($),ae(xe,U,oe)},[$,Y,oe,U,ae]);if(oe<=1)return null;const Ie=sC(U,oe),Be=sd(v.paginationContainer,{[(a=v.paginationLoading)!=null?a:""]:o});return pt.createElement("div",{className:Be},pt.createElement("nav",{className:"inline-flex shadow-sm -space-x-px","aria-label":"Pagination"},pt.createElement(Th,{ariaLabel:"Navigate to the previous results page",className:v.leftIconContainer,navigateToPage:$e,newPageNumber:U-1,disabled:U===1},pt.createElement(Q3,{className:v.icon+" transform -rotate-90"})),Ie.map((xe,Je)=>{switch(xe){case"...":return pt.createElement("div",{key:Je,className:v.label},xe);case`${U}`:return pt.createElement(Th,{key:Je,className:v.selectedLabel,navigateToPage:$e,newPageNumber:U},xe);default:return pt.createElement(Th,{key:Je,className:v.label,navigateToPage:$e,newPageNumber:Number(xe)},xe)}}),pt.createElement(Th,{ariaLabel:"Navigate to the next results page",className:v.rightIconContainer,navigateToPage:$e,newPageNumber:U+1,disabled:U===oe},pt.createElement(Q3,{className:v.icon+" transform rotate-90"}))))}function Th(s){const{navigateToPage:a,newPageNumber:c}=s,m=Ge.useCallback(()=>{a(c)},[a,c]);return pt.createElement("button",{"aria-label":s.ariaLabel,className:s.className,onClick:m,disabled:s.disabled},s.children)}function sC(s,a){const c=[],m=s-1,v=s+1;return m>3?c.push("1","...",`${m}`):m!==0&&[...Array(m)].forEach(($,S)=>c.push(`${S+1}`)),c.push(`${s}`),a-v>2?c.push(`${v}`,"...",`${a}`):v<=a&&[...Array(a-v+1)].forEach(($,S)=>c.push(`${v+S}`)),c}Ge.createContext(null);pt.Fragment;pt.Fragment;function aC(){return St.jsx("div",{className:"LoadingSpinner",children:St.jsx("div",{className:"LoadingSpinner-container",children:St.jsx("div",{className:"LoadingSpinner-spinner"})})})}const lC=s=>s.fieldId==="builtin.location"||s.fieldId==="builtin.region"||s.fieldId==="address.countryCode";function dC(s){return s==="builtin.location"?"location":s==="builtin.region"?"region":"country"}function cC(s){return s==="location"?"builtin.location":s==="region"?"builtin.region":"address.countryCode"}function uC(s,a){const c=new URLSearchParams;for(const[m,v]of s.entries())c.set(m,v);for(const[m,v]of a.entries())c.set(m,v);return c}var Na;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Na||(Na={}));var ey=function(s){return s},ty="beforeunload",hC="popstate";function fC(s){s===void 0&&(s={});var a=s,c=a.window,m=c===void 0?document.defaultView:c,v=m.history;function $(){var Ye=m.location,ft=Ye.pathname,gt=Ye.search,ve=Ye.hash,Ke=v.state||{};return[Ke.idx,ey({pathname:ft,search:gt,hash:ve,state:Ke.usr||null,key:Ke.key||"default"})]}var S=null;function P(){if(S)oe.call(S),S=null;else{var Ye=Na.Pop,ft=$(),gt=ft[0],ve=ft[1];if(oe.length){if(gt!=null){var Ke=N-gt;Ke&&(S={action:Ye,location:ve,retry:function(){ht(Ke*-1)}},ht(Ke))}}else xe(Ye)}}m.addEventListener(hC,P);var o=Na.Pop,I=$(),N=I[0],Y=I[1],U=ny(),oe=ny();N==null&&(N=0,v.replaceState(Xh({},v.state,{idx:N}),""));function ae(Ye){return typeof Ye=="string"?Ye:mC(Ye)}function $e(Ye,ft){return ft===void 0&&(ft=null),ey(Xh({pathname:Y.pathname,hash:"",search:""},typeof Ye=="string"?f1(Ye):Ye,{state:ft,key:pC()}))}function Ie(Ye,ft){return[{usr:Ye.state,key:Ye.key,idx:ft},ae(Ye)]}function Be(Ye,ft,gt){return!oe.length||(oe.call({action:Ye,location:ft,retry:gt}),!1)}function xe(Ye){o=Ye;var ft=$();N=ft[0],Y=ft[1],U.call({action:o,location:Y})}function Je(Ye,ft){var gt=Na.Push,ve=$e(Ye,ft);function Ke(){Je(Ye,ft)}if(Be(gt,ve,Ke)){var Ct=Ie(ve,N+1),tt=Ct[0],_e=Ct[1];try{v.pushState(tt,"",_e)}catch{m.location.assign(_e)}xe(gt)}}function We(Ye,ft){var gt=Na.Replace,ve=$e(Ye,ft);function Ke(){We(Ye,ft)}if(Be(gt,ve,Ke)){var Ct=Ie(ve,N),tt=Ct[0],_e=Ct[1];v.replaceState(tt,"",_e),xe(gt)}}function ht(Ye){v.go(Ye)}var Lt={get action(){return o},get location(){return Y},createHref:ae,push:Je,replace:We,go:ht,back:function(){ht(-1)},forward:function(){ht(1)},listen:function(ft){return U.push(ft)},block:function(ft){var gt=oe.push(ft);return oe.length===1&&m.addEventListener(ty,ry),function(){gt(),oe.length||m.removeEventListener(ty,ry)}}};return Lt}function ry(s){s.preventDefault(),s.returnValue=""}function ny(){var s=[];return{get length(){return s.length},push:function(c){return s.push(c),function(){s=s.filter(function(m){return m!==c})}},call:function(c){s.forEach(function(m){return m&&m(c)})}}}function pC(){return Math.random().toString(36).substr(2,8)}function mC(s){var a=s.pathname,c=a===void 0?"/":a,m=s.search,v=m===void 0?"":m,$=s.hash,S=$===void 0?"":$;return v&&v!=="?"&&(c+=v.charAt(0)==="?"?v:"?"+v),S&&S!=="#"&&(c+=S.charAt(0)==="#"?S:"#"+S),c}function f1(s){var a={};if(s){var c=s.indexOf("#");c>=0&&(a.hash=s.substr(c),s=s.substr(0,c));var m=s.indexOf("?");m>=0&&(a.search=s.substr(m),s=s.substr(0,m)),s&&(a.pathname=s)}return a}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const L2=Ge.createContext(null),v0=Ge.createContext(null),gC=Ge.createContext({outlet:null,matches:[]});function x0(s,a){if(!s)throw new Error(a)}function _C(s,a){a===void 0&&(a="/");let{pathname:c,search:m="",hash:v=""}=typeof s=="string"?f1(s):s;return{pathname:c?c.startsWith("/")?c:yC(c,a):a,search:wC(m),hash:EC(v)}}function yC(s,a){let c=a.replace(/\/+$/,"").split("/");return s.split("/").forEach(v=>{v===".."?c.length>1&&c.pop():v!=="."&&c.push(v)}),c.length>1?c.join("/"):"/"}function vC(s,a,c){let m=typeof s=="string"?f1(s):s,v=s===""||m.pathname===""?"/":m.pathname,$;if(v==null)$=c;else{let P=a.length-1;if(v.startsWith("..")){let o=v.split("/");for(;o[0]==="..";)o.shift(),P-=1;m.pathname=o.join("/")}$=P>=0?a[P]:"/"}let S=_C(m,$);return v&&v!=="/"&&v.endsWith("/")&&!S.pathname.endsWith("/")&&(S.pathname+="/"),S}function xC(s,a){if(a==="/")return s;if(!s.toLowerCase().startsWith(a.toLowerCase()))return null;let c=s.charAt(a.length);return c&&c!=="/"?null:s.slice(a.length)||"/"}const bC=s=>s.join("/").replace(/\/\/+/g,"/"),$C=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),wC=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,EC=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function b0(){return Ge.useContext(v0)!=null}function R2(){return b0()||x0(!1),Ge.useContext(v0).location}function TC(){b0()||x0(!1);let{basename:s,navigator:a}=Ge.useContext(L2),{matches:c}=Ge.useContext(gC),{pathname:m}=R2(),v=JSON.stringify(c.map(P=>P.pathnameBase)),$=Ge.useRef(!1);return Ge.useEffect(()=>{$.current=!0}),Ge.useCallback(function(P,o){if(o===void 0&&(o={}),!$.current)return;if(typeof P=="number"){a.go(P);return}let I=vC(P,JSON.parse(v),m);s!=="/"&&(I.pathname=bC([s,I.pathname])),(o.replace?a.replace:a.push)(I,o.state)},[s,a,v,m])}function SC(s){let{basename:a="/",children:c=null,location:m,navigationType:v=Na.Pop,navigator:$,static:S=!1}=s;b0()&&x0(!1);let P=$C(a),o=Ge.useMemo(()=>({basename:P,navigator:$,static:S}),[P,$,S]);typeof m=="string"&&(m=f1(m));let{pathname:I="/",search:N="",hash:Y="",state:U=null,key:oe="default"}=m,ae=Ge.useMemo(()=>{let $e=xC(I,P);return $e==null?null:{pathname:$e,search:N,hash:Y,state:U,key:oe}},[P,I,N,Y,U,oe]);return ae==null?null:Ge.createElement(L2.Provider,{value:o},Ge.createElement(v0.Provider,{children:c,value:{location:ae,navigationType:v}}))}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function XC(s){let{basename:a,children:c,window:m}=s,v=Ge.useRef();v.current==null&&(v.current=fC({window:m}));let $=v.current,[S,P]=Ge.useState({action:$.action,location:$.location});return Ge.useLayoutEffect(()=>$.listen(P),[$]),Ge.createElement(SC,{basename:a,children:c,location:S.location,navigationType:S.action,navigator:$})}function k2(s){let a=Ge.useRef(_p(s)),c=R2(),m=Ge.useMemo(()=>{let S=_p(c.search);for(let P of a.current.keys())S.has(P)||a.current.getAll(P).forEach(o=>{S.append(P,o)});return S},[c.search]),v=TC(),$=Ge.useCallback((S,P)=>{v("?"+_p(S),P)},[v]);return[m,$]}function _p(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((a,c)=>{let m=s[c];return a.concat(Array.isArray(m)?m.map(v=>[c,v]):[[c,m]])},[]))}function YC(s,a){const[c,m]=k2(),v=Ga();Ge.useEffect(()=>{if(s)return;(async()=>{var $e,Ie;const S=c.get("q"),P=c.get("qp"),o=c.get("location_type"),I=c.get("lat"),N=c.get("lng"),Y=c.get("r"),U=c.get("facets"),oe=U?JSON.parse(U):null,ae=o?cC(o):t3;if(S)v.setStaticFilters([{displayName:P??"",filter:{fieldId:ae,kind:"fieldValue",matcher:Wn.Equals,value:S},selected:!0}]);else if(I&&N)v.setStaticFilters([{displayName:P??"",filter:{fieldId:"builtin.location",kind:"fieldValue",matcher:Wn.Near,value:{lat:parseFloat(I),lng:parseFloat(N),radius:Y?1609*parseInt(Y):1609*zp}},selected:!0}]);else if(P==="My Location")try{const Be=await g0();v.setUserLocation({latitude:Be.coords.latitude,longitude:Be.coords.longitude}),v.setStaticFilters([{displayName:P,filter:{fieldId:"builtin.location",kind:"fieldValue",matcher:Wn.Near,value:{lat:Be.coords.latitude,lng:Be.coords.longitude,radius:Y?1609*parseInt(Y):1609*zp}},selected:!0}])}catch(Be){alert("User location could not be determined."),console.error(Be)}else if(P){const Be=await v.executeFilterSearch(P,!1,[{fieldApiName:t3,entityType:K$,fetchEntities:!1}]),xe=Be==null?void 0:Be.sections[0].results[0];xe!=null&&xe.filter&&v.setStaticFilters([{displayName:xe.value,filter:{fieldId:xe.filter.fieldId,kind:"fieldValue",matcher:xe.filter.matcher,value:xe.filter.value},selected:!0}])}if(($e=v.state.filters.static)!=null&&$e.find(Be=>Be.selected)&&oe)for(const[Be,xe]of Object.entries(oe)){const Je=xe.map(We=>({count:0,displayName:"",matcher:Wn.Equals,value:We,selected:!0}));Je.length&&v.setFacets([{displayName:"",fieldId:Be,options:Je},...v.state.filters.facets||[]])}if((Ie=v.state.filters.static)!=null&&Ie.find(Be=>Be.selected))try{await v.executeVerticalQuery()}catch(Be){console.error(Be)}a&&a()})()},[v,c,m,s,a])}function D2(s){const a=s.find(v=>v.selected&&v.filter.kind==="fieldValue");if(!a)return null;const c=new URLSearchParams,m=a==null?void 0:a.filter;if(a!=null&&a.displayName&&c.set("qp",a==null?void 0:a.displayName),m.matcher===Wn.Equals&&(c.set("q",m.value.toString()),lC(m)&&c.set("location_type",dC(m.fieldId))),m.matcher===Wn.Near){const v=m.value;c.set("lat",v.lat.toString()),c.set("lng",v.lng.toString()),c.set("r",Math.round(v.radius/1609).toString())}return c}function CC(s){const a={};return s.forEach(c=>{if(c.options.some(v=>v.selected)){const v=c.options.filter($=>$.selected).map($=>$.value).filter($=>typeof $=="string");a[c.fieldId]=v}}),Object.keys(a).length?new URLSearchParams({facets:JSON.stringify(a)}):null}function JC(s){const a=Ga(),[c,m]=k2();Ge.useEffect(()=>{if(!s)return;const v=a.addListener({valueAccessor:S=>S.filters.static,callback:S=>{if(S){const P=D2(S);P&&m(P)}}}),$=a.addListener({valueAccessor:S=>S.filters.facets,callback:S=>{if(S){const P=CC(S);P?m(uC(c,P)):(c.delete("facets"),m(c))}}});return()=>{v(),$()}},[a,c,m,s])}const QC=s=>{const{className:a,redirectToSearchPage:c,searcherPath:m}=s,v=Ga(),$=Wc(),[S,P]=Ge.useState(!1);async function o(){$==null||$.track("geolocate"),P(!0);try{const I=await g0();v.setUserLocation({latitude:I.coords.latitude,longitude:I.coords.longitude});const N={displayName:"My Location",selected:!0,filter:{kind:"fieldValue",fieldId:"builtin.location",matcher:Wn.Near,value:{lat:I.coords.latitude,lng:I.coords.longitude,radius:1609*zp}}};if(v.setStaticFilters([N]),v.setOffset(0),v.resetFacets(),await u1(v),c&&m){const Y=D2([N]);Y&&(window.location.href=`${m}?${Y.toString()}`)}}catch(I){alert("User location could not be determined."),console.error(I)}finally{P(!1)}}return St.jsxs(St.Fragment,{children:[St.jsxs("button",{className:a,onClick:o,children:[St.jsx("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:St.jsx("path",{d:"m14.4347 0c-.1791 0-.3622.034375-.5435.11l-12.99279 5.99656c-1.499063.69969-.999375 2.89844.59969 2.89844h5.49718v5.4972c0 .9378.75657 1.4978 1.52313 1.4978.54062 0 1.08594-.2781 1.37531-.8981l5.99688-12.99315c.4241-1.01844-.4484-2.10875-1.4559-2.10875zm.5484 1.69-5.99532 12.9894c-.09937.2131-.2575.3212-.46968.3212-.18125 0-.52375-.104-.52375-.4981v-6.49688h-6.49625c-.35782 0-.4575-.27593-.48407-.39468-.03437-.15406-.039683-.43688.30313-.59688l12.95874-5.98156c.0534-.02219.1053-.032813.1591-.032813.1693 0 .359.114063.4722.283753.0684.10281.135.26281.0759.40656z",fill:"#0f70f0"})}),St.jsx("span",{className:"sr-only",children:"Geolocate."})]}),S&&St.jsx(aC,{})]})};export{XC as B,qC as C,Jg as E,WC as F,QC as G,t3 as L,GC as M,KC as P,BC as S,VC as a,g9 as b,sd as c,K$ as d,D2 as e,ZC as f,UC as g,NC as h,Ga as i,vi as j,p9 as k,Jc as l,Bh as m,Wn as n,u1 as o,HC as p,jC as q,lC as r,Qo as s,FC as t,zC as u,YC as v,JC as w,aC as x};
