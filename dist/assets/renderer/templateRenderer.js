var Xe=Object.defineProperty;var Qe=(r,e,n)=>e in r?Xe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var F=(r,e,n)=>(Qe(r,typeof e!="symbol"?e+"":e,n),n);import{d as Ze}from"../static/index-wlo2zNRg.js";import{g as xe,c as K}from"../static/commonjsHelpers-DxDlwT5B.js";import{_ as er,e as J,a as rr,b as nr,i as k,c as tr,d as Oe,f as Y,g as Se,h as ir,j as sr,k as ar,l as or,m as cr,n as lr,o as fr,p as ur,q as vr}from"../static/_arrayLikeKeys-pbm8Wg6m.js";import{p as dr}from"../static/picocolors.browser-jQfTxJ2L.js";function S(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function ce(r,e){for(var n="",t=0,i=-1,o=0,s,a=0;a<=r.length;++a){if(a<r.length)s=r.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(n.length<2||t!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var c=n.lastIndexOf("/");if(c!==n.length-1){c===-1?(n="",t=0):(n=n.slice(0,c),t=n.length-1-n.lastIndexOf("/")),i=a,o=0;continue}}else if(n.length===2||n.length===1){n="",t=0,i=a,o=0;continue}}e&&(n.length>0?n+="/..":n="..",t=2)}else n.length>0?n+="/"+r.slice(i+1,a):n=r.slice(i+1,a),t=a-i-1;i=a,o=0}else s===46&&o!==-1?++o:o=-1}return n}function gr(r,e){var n=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+t:n+r+t:t}var D={resolve:function(){for(var e="",n=!1,t,i=arguments.length-1;i>=-1&&!n;i--){var o;i>=0?o=arguments[i]:(t===void 0&&(t=Ze.process.cwd()),o=t),S(o),o.length!==0&&(e=o+"/"+e,n=o.charCodeAt(0)===47)}return e=ce(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(S(e),e.length===0)return".";var n=e.charCodeAt(0)===47,t=e.charCodeAt(e.length-1)===47;return e=ce(e,!n),e.length===0&&!n&&(e="."),e.length>0&&t&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return S(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var t=arguments[n];S(t),t.length>0&&(e===void 0?e=t:e+="/"+t)}return e===void 0?".":D.normalize(e)},relative:function(e,n){if(S(e),S(n),e===n||(e=D.resolve(e),n=D.resolve(n),e===n))return"";for(var t=1;t<e.length&&e.charCodeAt(t)===47;++t);for(var i=e.length,o=i-t,s=1;s<n.length&&n.charCodeAt(s)===47;++s);for(var a=n.length,c=a-s,g=o<c?o:c,f=-1,u=0;u<=g;++u){if(u===g){if(c>g){if(n.charCodeAt(s+u)===47)return n.slice(s+u+1);if(u===0)return n.slice(s+u)}else o>g&&(e.charCodeAt(t+u)===47?f=u:u===0&&(f=0));break}var b=e.charCodeAt(t+u),E=n.charCodeAt(s+u);if(b!==E)break;b===47&&(f=u)}var P="";for(u=t+f+1;u<=i;++u)(u===i||e.charCodeAt(u)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+n.slice(s+f):(s+=f,n.charCodeAt(s)===47&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(S(e),e.length===0)return".";for(var n=e.charCodeAt(0),t=n===47,i=-1,o=!0,s=e.length-1;s>=1;--s)if(n=e.charCodeAt(s),n===47){if(!o){i=s;break}}else o=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');S(e);var t=0,i=-1,o=!0,s;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(s=e.length-1;s>=0;--s){var g=e.charCodeAt(s);if(g===47){if(!o){t=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(g===n.charCodeAt(a)?--a===-1&&(i=s):(a=-1,i=c))}return t===i?i=c:i===-1&&(i=e.length),e.slice(t,i)}else{for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!o){t=s+1;break}}else i===-1&&(o=!1,i=s+1);return i===-1?"":e.slice(t,i)}},extname:function(e){S(e);for(var n=-1,t=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!o){t=a+1;break}continue}i===-1&&(o=!1,i=a+1),c===46?n===-1?n=a:s!==1&&(s=1):n!==-1&&(s=-1)}return n===-1||i===-1||s===0||s===1&&n===i-1&&n===t+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return gr("/",e)},parse:function(e){S(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var t=e.charCodeAt(0),i=t===47,o;i?(n.root="/",o=1):o=0;for(var s=-1,a=0,c=-1,g=!0,f=e.length-1,u=0;f>=o;--f){if(t=e.charCodeAt(f),t===47){if(!g){a=f+1;break}continue}c===-1&&(g=!1,c=f+1),t===46?s===-1?s=f:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||c===-1||u===0||u===1&&s===c-1&&s===a+1?c!==-1&&(a===0&&i?n.base=n.name=e.slice(1,c):n.base=n.name=e.slice(a,c)):(a===0&&i?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D;var hr=D;const _=xe(hr);var pr=er,mr=function(){try{var r=pr(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Re=mr,le=Re;function br(r,e,n){e=="__proto__"&&le?le(r,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[e]=n}var X=br,yr=X,wr=J;function _r(r,e,n){(n!==void 0&&!wr(r[e],n)||n===void 0&&!(e in r))&&yr(r,e,n)}var Fe=_r;function Ar(r){return function(e,n,t){for(var i=-1,o=Object(e),s=t(e),a=s.length;a--;){var c=s[r?a:++i];if(n(o[c],c,o)===!1)break}return e}}var $r=Ar,Pr=$r,Tr=Pr(),Cr=Tr,V={exports:{}};V.exports;(function(r,e){var n=rr,t=e&&!e.nodeType&&e,i=t&&!0&&r&&!r.nodeType&&r,o=i&&i.exports===t,s=o?n.Buffer:void 0,a=s?s.allocUnsafe:void 0;function c(g,f){if(f)return g.slice();var u=g.length,b=a?a(u):new g.constructor(u);return g.copy(b),b}r.exports=c})(V,V.exports);var xr=V.exports,fe=nr;function Or(r){var e=new r.constructor(r.byteLength);return new fe(e).set(new fe(r)),e}var Sr=Or,Rr=Sr;function Fr(r,e){var n=e?Rr(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}var Er=Fr;function Lr(r,e){var n=-1,t=r.length;for(e||(e=Array(t));++n<t;)e[n]=r[n];return e}var jr=Lr,Ir=k,ue=Object.create,Dr=function(){function r(){}return function(e){if(!Ir(e))return{};if(ue)return ue(e);r.prototype=e;var n=new r;return r.prototype=void 0,n}}(),Ur=Dr,Br=tr,kr=Br(Object.getPrototypeOf,Object),Ee=kr,Mr=Ur,Vr=Ee,Nr=Oe;function Hr(r){return typeof r.constructor=="function"&&!Nr(r)?Mr(Vr(r)):{}}var Gr=Hr,qr=Y,Kr=Se;function zr(r){return Kr(r)&&qr(r)}var Wr=zr,Jr=ir,Yr=Ee,Xr=Se,Qr="[object Object]",Zr=Function.prototype,en=Object.prototype,Le=Zr.toString,rn=en.hasOwnProperty,nn=Le.call(Object);function tn(r){if(!Xr(r)||Jr(r)!=Qr)return!1;var e=Yr(r);if(e===null)return!0;var n=rn.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Le.call(n)==nn}var sn=tn;function an(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var je=an,on=X,cn=J,ln=Object.prototype,fn=ln.hasOwnProperty;function un(r,e,n){var t=r[e];(!(fn.call(r,e)&&cn(t,n))||n===void 0&&!(e in r))&&on(r,e,n)}var vn=un,dn=vn,gn=X;function hn(r,e,n,t){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=t?t(n[a],r[a],a,n,r):void 0;c===void 0&&(c=r[a]),i?gn(n,a,c):dn(n,a,c)}return n}var pn=hn;function mn(r){var e=[];if(r!=null)for(var n in Object(r))e.push(n);return e}var bn=mn,yn=k,wn=Oe,_n=bn,An=Object.prototype,$n=An.hasOwnProperty;function Pn(r){if(!yn(r))return _n(r);var e=wn(r),n=[];for(var t in r)t=="constructor"&&(e||!$n.call(r,t))||n.push(t);return n}var Tn=Pn,Cn=sr,xn=Tn,On=Y;function Sn(r){return On(r)?Cn(r,!0):xn(r)}var Ie=Sn,Rn=pn,Fn=Ie;function En(r){return Rn(r,Fn(r))}var Ln=En,ve=Fe,jn=xr,In=Er,Dn=jr,Un=Gr,de=ar,ge=or,Bn=Wr,kn=cr,Mn=lr,Vn=k,Nn=sn,Hn=fr,he=je,Gn=Ln;function qn(r,e,n,t,i,o,s){var a=he(r,n),c=he(e,n),g=s.get(c);if(g){ve(r,n,g);return}var f=o?o(a,c,n+"",r,e,s):void 0,u=f===void 0;if(u){var b=ge(c),E=!b&&kn(c),P=!b&&!E&&Hn(c);f=c,b||E||P?ge(a)?f=a:Bn(a)?f=Dn(a):E?(u=!1,f=jn(c,!0)):P?(u=!1,f=In(c,!0)):f=[]:Nn(c)||de(c)?(f=a,de(a)?f=Gn(a):(!Vn(a)||Mn(a))&&(f=Un(c))):u=!1}u&&(s.set(c,f),i(f,c,t,o,s),s.delete(c)),ve(r,n,f)}var Kn=qn,zn=ur,Wn=Fe,Jn=Cr,Yn=Kn,Xn=k,Qn=Ie,Zn=je;function De(r,e,n,t,i){r!==e&&Jn(e,function(o,s){if(i||(i=new zn),Xn(o))Yn(r,e,s,n,De,t,i);else{var a=t?t(Zn(r,s),o,s+"",r,e,i):void 0;a===void 0&&(a=o),Wn(r,s,a)}},Qn)}var et=De;function rt(r){return r}var Ue=rt;function nt(r,e,n){switch(n.length){case 0:return r.call(e);case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2])}return r.apply(e,n)}var tt=nt,it=tt,pe=Math.max;function st(r,e,n){return e=pe(e===void 0?r.length-1:e,0),function(){for(var t=arguments,i=-1,o=pe(t.length-e,0),s=Array(o);++i<o;)s[i]=t[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=t[i];return a[e]=n(s),it(r,this,a)}}var at=st;function ot(r){return function(){return r}}var ct=ot,lt=ct,me=Re,ft=Ue,ut=me?function(r,e){return me(r,"toString",{configurable:!0,enumerable:!1,value:lt(e),writable:!0})}:ft,vt=ut,dt=800,gt=16,ht=Date.now;function pt(r){var e=0,n=0;return function(){var t=ht(),i=gt-(t-n);if(n=t,i>0){if(++e>=dt)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var mt=pt,bt=vt,yt=mt,wt=yt(bt),_t=wt,At=Ue,$t=at,Pt=_t;function Tt(r,e){return Pt($t(r,e,At),r+"")}var Ct=Tt,xt=J,Ot=Y,St=vr,Rt=k;function Ft(r,e,n){if(!Rt(n))return!1;var t=typeof e;return(t=="number"?Ot(n)&&St(e,n.length):t=="string"&&e in n)?xt(n[e],r):!1}var Et=Ft,Lt=Ct,jt=Et;function It(r){return Lt(function(e,n){var t=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=r.length>3&&typeof o=="function"?(i--,o):void 0,s&&jt(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++t<i;){var a=n[t];a&&r(e,a,t,o)}return e})}var Dt=It,Ut=et,Bt=Dt,kt=Bt(function(r,e,n){Ut(r,e,n)}),Mt=kt;const be=xe(Mt);class B{constructor(e){F(this,"path");F(this,"getRelativePath",e=>_.join(".",_.relative(this.path,e)));F(this,"getAbsolutePath",()=>_.resolve(this.path));this.path=e}}var N={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */N.exports;(function(r,e){(function(n){var t=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,o=typeof K=="object"&&K;(o.global===o||o.window===o||o.self===o)&&(n=o);var s,a=2147483647,c=36,g=1,f=26,u=38,b=700,E=72,P=128,Z="-",Ge=/^xn--/,qe=/[^\x20-\x7E]/,Ke=/[\x2E\u3002\uFF0E\uFF61]/g,ze={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=c-g,x=Math.floor,U=String.fromCharCode,M;function j(l){throw new RangeError(ze[l])}function ee(l,v){for(var d=l.length,h=[];d--;)h[d]=v(l[d]);return h}function re(l,v){var d=l.split("@"),h="";d.length>1&&(h=d[0]+"@",l=d[1]),l=l.replace(Ke,".");var p=l.split("."),w=ee(p,v).join(".");return h+w}function ne(l){for(var v=[],d=0,h=l.length,p,w;d<h;)p=l.charCodeAt(d++),p>=55296&&p<=56319&&d<h?(w=l.charCodeAt(d++),(w&64512)==56320?v.push(((p&1023)<<10)+(w&1023)+65536):(v.push(p),d--)):v.push(p);return v}function te(l){return ee(l,function(v){var d="";return v>65535&&(v-=65536,d+=U(v>>>10&1023|55296),v=56320|v&1023),d+=U(v),d}).join("")}function We(l){return l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:c}function ie(l,v){return l+22+75*(l<26)-((v!=0)<<5)}function se(l,v,d){var h=0;for(l=d?x(l/b):l>>1,l+=x(l/v);l>G*f>>1;h+=c)l=x(l/G);return x(h+(G+1)*l/(l+u))}function ae(l){var v=[],d=l.length,h,p=0,w=P,m=E,A,T,O,R,y,$,C,L,I;for(A=l.lastIndexOf(Z),A<0&&(A=0),T=0;T<A;++T)l.charCodeAt(T)>=128&&j("not-basic"),v.push(l.charCodeAt(T));for(O=A>0?A+1:0;O<d;){for(R=p,y=1,$=c;O>=d&&j("invalid-input"),C=We(l.charCodeAt(O++)),(C>=c||C>x((a-p)/y))&&j("overflow"),p+=C*y,L=$<=m?g:$>=m+f?f:$-m,!(C<L);$+=c)I=c-L,y>x(a/I)&&j("overflow"),y*=I;h=v.length+1,m=se(p-R,h,R==0),x(p/h)>a-w&&j("overflow"),w+=x(p/h),p%=h,v.splice(p++,0,w)}return te(v)}function oe(l){var v,d,h,p,w,m,A,T,O,R,y,$=[],C,L,I,q;for(l=ne(l),C=l.length,v=P,d=0,w=E,m=0;m<C;++m)y=l[m],y<128&&$.push(U(y));for(h=p=$.length,p&&$.push(Z);h<C;){for(A=a,m=0;m<C;++m)y=l[m],y>=v&&y<A&&(A=y);for(L=h+1,A-v>x((a-d)/L)&&j("overflow"),d+=(A-v)*L,v=A,m=0;m<C;++m)if(y=l[m],y<v&&++d>a&&j("overflow"),y==v){for(T=d,O=c;R=O<=w?g:O>=w+f?f:O-w,!(T<R);O+=c)q=T-R,I=c-R,$.push(U(ie(R+q%I,0))),T=x(q/I);$.push(U(ie(T,0))),w=se(d,L,h==p),d=0,++h}++d,++v}return $.join("")}function Je(l){return re(l,function(v){return Ge.test(v)?ae(v.slice(4).toLowerCase()):v})}function Ye(l){return re(l,function(v){return qe.test(v)?"xn--"+oe(v):v})}if(s={version:"1.4.1",ucs2:{decode:ne,encode:te},decode:ae,encode:oe,toASCII:Ye,toUnicode:Je},t&&i)if(r.exports==t)i.exports=s;else for(M in s)s.hasOwnProperty(M)&&(t[M]=s[M]);else n.punycode=s})(K)})(N,N.exports);N.exports;function Vt(r,e){for(var n=0,t=r.length-1;t>=0;t--){var i=r[t];i==="."?r.splice(t,1):i===".."?(r.splice(t,1),n++):n&&(r.splice(t,1),n--)}if(e)for(;n--;n)r.unshift("..");return r}function Nt(){for(var r="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var t=n>=0?arguments[n]:"/";if(typeof t!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!t)continue;r=t+"/"+r,e=t.charAt(0)==="/"}return r=Vt(Ht(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Ht(r,e){if(r.filter)return r.filter(e);for(var n=[],t=0;t<r.length;t++)e(r[t],t,r)&&n.push(r[t]);return n}var Be=function(r){function e(){var t=this||self;return delete r.prototype.__magic__,t}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var n=__magic__;return n}(Object),Gt=Be.URL;Be.URLSearchParams;var qt=/%/g,Kt=/\\/g,zt=/\n/g,Wt=/\r/g,Jt=/\t/g,Yt=47;function Xt(r){return r.includes("%")&&(r=r.replace(qt,"%25")),r.includes("\\")&&(r=r.replace(Kt,"%5C")),r.includes(`
`)&&(r=r.replace(zt,"%0A")),r.includes("\r")&&(r=r.replace(Wt,"%0D")),r.includes("	")&&(r=r.replace(Jt,"%09")),r}var ke=function(e){var n=new Gt("file://"),t=Nt(e),i=e.charCodeAt(e.length-1);return i===Yt&&t[t.length-1]!=="/"&&(t+="/"),n.pathname=Xt(t),n};const Qt="modulepreload",Zt=function(r){return"/"+r},ye={},Q=function(e,n,t){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(s=>{if(s=Zt(s),s in ye)return;ye[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!t)for(let u=o.length-1;u>=0;u--){const b=o[u];if(b.href===s&&(!a||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const f=document.createElement("link");if(f.rel=a?"stylesheet":Qt,a||(f.as="script",f.crossOrigin=""),f.href=s,document.head.appendChild(f),a)return new Promise((u,b)=>{f.addEventListener("load",u),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${s}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Me=async r=>await Q(()=>import(r),__vite__mapDeps([])),ei=async(r,e)=>{var i;return e===""?r:((i=(await Me(ke(e).toString())).default.build)==null?void 0:i.assetsDir)??r},ri=async(r,e)=>e===""?r:(await Me(ke(e).toString())).default.publicDir||r,Ve="assets",Ne="public",we={rootFolders:{source:"src",dist:"dist",sitesConfig:"sites-config",functions:"functions"},subfolders:{templates:"templates",serverlessFunctions:"functions",assets:Ve,public:Ne,clientBundle:"client",serverBundle:"server",renderBundle:"render",renderer:"renderer",static:"static",plugin:"plugin"},sitesConfigFiles:{ci:"ci.json",features:"features.json",siteStream:"site-stream.json",serving:"serving.json",sitemap:"sitemap.json",redirects:"redirects.csv",auth:"auth.json"},distConfigFiles:{templates:"templates.json",artifacts:"artifacts.json",functionMetadata:"functionMetadata.json"},rootFiles:{config:"config.yaml"},envVarConfig:{envVarDir:"",envVarPrefix:"YEXT_PUBLIC"}},H=class H{constructor(e){F(this,"config");F(this,"getTemplatePaths",()=>{const e=_.join(this.config.rootFolders.source,this.config.subfolders.templates);return this.config.scope?[new B(_.join(e,this.config.scope)),new B(e)]:[new B(e)]});F(this,"getSitesConfigPath",()=>new B(_.join(this.config.rootFolders.sitesConfig,this.config.scope??"")));F(this,"getScopedDistPath",()=>new B(_.join(this.config.rootFolders.dist,this.config.scope??"")));const n=be(we,e);this.config=n}};F(H,"init",async e=>{const n=be(we,e),t=await ei(Ve,_.resolve("vite.config.js"));n.subfolders.assets=t;const i=await ri(Ne,_.resolve("vite.config.js"));return n.subfolders.public=i,new H(n)});let z=H;const ni=r=>{const e=r.split("/");return e.pop(),e.map(()=>"../").reduce((n,t)=>n+t,"")},_e=r=>r.split(_.sep).join(_.posix.sep),ti=r=>`<title>${r.title?r.title:"Yext Pages Site"}</title>
    <meta charset="${r.charset||"UTF-8"}">
    <meta name="viewport" content="${r.viewport||"width=device-width, initial-scale=1"}">
    ${r.tags?r.tags.map(ii).join(`
`):""}
    ${r.other?r.other:""}`.split(`
`).filter(e=>e.trim()!="").join(`
`),ii=r=>{switch(r.type){case"base":case"link":case"meta":return`<${r.type} ${Ae(r.attributes)}>`;case"style":case"script":case"noscript":case"template":return`<${r.type} ${Ae(r.attributes)}></${r.type}>`;default:return console.log(dr.yellow(`[WARNING]: Tag type ${r.type} is unsupported by the Tag interface. Please use "other" to render this tag.`)),""}},Ae=r=>Object.keys(r).map(e=>`${e}="${r[e]}"`).join(" "),si=(r,e)=>{var n,t;return r!=null&&r.lang?r.lang:(n=e==null?void 0:e.document)!=null&&n.locale?(t=e==null?void 0:e.document)==null?void 0:t.locale:"en"},ai=(r,e,n)=>{const t=$e(_e(e)),i=$e(_e(r));return`
        const componentURL = new URL("${t}", import.meta.url)
        const component = await import(componentURL);

        const renderURL = new URL("${i}", import.meta.url)
        const render = await import(renderURL);

        render.render(
        {
            Page: component.default,
            pageProps: ${oi(n)},
        }
        );
    `},oi=r=>`JSON.parse(decodeURIComponent("${encodeURIComponent(JSON.stringify(r))}"))`,$e=r=>r.startsWith("/")?r:"/"+r,ci=(r,e,n,t)=>(e=e.replace("<!--app-lang-->",n),r&&(e=W(e,`<script type="module">${r}<\/script>`)),t&&(e=W(e,ti(t))),e),li=(r,e,n,t,i,o)=>{let s=ci(r,e,i,o);return s=W(s,fi(n,t)),s},fi=(r,e)=>Array.from(He(r,e,new Set)).map(n=>`<link rel="stylesheet" href="/${n}"/>`).join(`
`),He=(r,e,n)=>{const t=structuredClone(Object.entries(e).find(([a])=>a===r));if(!t)return new Set;const[i,o]=t;n.add(i);const s=new Set(o.css);return(o.imports||[]).flatMap(a=>Array.from(He(a,e,n))).forEach(a=>s.add(a)),s},Pe="<head>",W=(r,e)=>{let n=r.indexOf(Pe);if(n===-1)throw new Error("_server.tsx: No head tag is defined");return n+=Pe.length,r.slice(0,n)+e+r.slice(n)},ui=async(r,e,n,t,i,o)=>{if(!i)throw new Error("Manifest is undefined");const s=e.getHeadConfig?e.getHeadConfig(r):void 0,a=_.join(o.getTemplatePaths()[0].path,`${e.templateName}.tsx`),c=await t.server.render({Page:e.default,pageProps:r});let g;return n&&(g=ai(t.client,i.clientPaths[e.templateName],r)),li(g,c,a,i.bundlerManifest,si(s,r),s)},vi=r=>{if(di(r.filename,r.config),!r.getPath)throw new Error(`Template ${r.filename} is missing an exported getPath function.`);if(!r.default&&!r.render)throw new Error(`Template ${r.filename} does not have the necessary exports to produce page. A module should either have a React component as a default export or a render function.`)},di=(r,e)=>{if(!e.name)throw new Error(`Template ${r} is missing a "name" in the config function.`);if(e.streamId&&e.stream)throw new Error(`Template ${r} must not define both a "streamId" and a "stream".`)},gi=(r,e)=>{let n=r.split(_.sep)[r.split(_.sep).length-1];const t=n.slice(n.lastIndexOf("."));let i=n.slice(0,n.lastIndexOf("."));return e&&(n=n.split(t)[0].slice(0,n.split(t)[0].lastIndexOf("."))+t,i=i.slice(0,i.lastIndexOf("."))),{base:n,name:i}},hi=(r,e,n)=>{const t=gi(r,n),i={...e,config:pi(t.name,e.config),path:r,filename:t.base,templateName:t.name};return vi(i),i},pi=(r,e)=>({name:(e==null?void 0:e.name)??r,hydrate:(e==null?void 0:e.hydrate)??!0,...e,stream:mi(e==null?void 0:e.stream)}),mi=r=>{if(r)return r.localization.locales&&r.localization.locales.length>0?{...r,localization:{locales:r.localization.locales,primary:!1}}:{...r,localization:{primary:!0}}},bi=(r,e)=>{if(!r||typeof r!="string")throw new Error(`getPath does not return a valid string in template '${e}'`)},Te=new Map,yi=async(r,e,n)=>{const t=e.serverPaths[r].replace(n.config.subfolders.assets,"..");if(!t)throw new Error(`Could not find path for feature ${r}`);let i=Te.get(t);return i||(i=await Q(()=>import(t),__vite__mapDeps([])),Te.set(t,i)),hi(t,i,!0)},wi=async(r,e)=>{const n=r.renderPaths._server.replace(e.config.subfolders.assets,"..");return{server:await _i(n),client:r.renderPaths._client}},Ce=new Map,_i=async r=>{let e=Ce.get(r);return e||(e=await Q(()=>import(r),__vite__mapDeps([])),Ce.set(r,e)),e},Ai=async(r,e,n,t,i)=>{var c;r.transformProps&&(e=await r.transformProps(e));const o=r.getPath(e);bi(o,r.templateName);const s={...e,path:o,relativePrefixToRoot:ni(o)};return{content:await $i(r,s,n,t,i),path:o,redirects:((c=r.getRedirects)==null?void 0:c.call(r,s))??[]}},$i=async(r,e,n,t,i)=>{const{default:o,render:s,getHeadConfig:a}=r;if(!o&&!s)throw new Error(`Cannot render html from template '${r.config.name}'. Template is missing render function or default export.`);return s?(a&&console.warn(`getHeadConfig for template ${r.config.name} will not be called since a custom render function is defined.`),s(e)):await ui(e,r,r.config.hydrate,n,t,i)};var Si=async(r,e)=>{const n=new z(e.projectStructure),t=await yi(r.document.__.name,e,n),i=await wi(e,n);return await Ai(t,r,i,e,n)};export{Si as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
